{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-yun/source/yun.png","path":"yun.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/yun.svg","path":"yun.svg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/chunk-YZ7E3ATC.js","path":"js/chunk-YZ7E3ATC.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/chunk-TTX6TVTO.js","path":"js/chunk-TTX6TVTO.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/gallery-decrypt.js","path":"js/gallery-decrypt.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/hexo-theme-yun.js","path":"js/hexo-theme-yun.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/say.js","path":"js/say.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/sidebar.js","path":"js/sidebar.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/css/README.md","path":"css/README.md","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/pjax.js","path":"js/pjax.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/css/hexo-theme-yun.styl","path":"css/hexo-theme-yun.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/analytics/leancloud-visitors.js","path":"js/analytics/leancloud-visitors.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/comments/waline.js","path":"js/comments/waline.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/comments/disqus.js","path":"js/comments/disqus.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/search/algolia-search.js","path":"js/search/algolia-search.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/search/local-search.js","path":"js/search/local-search.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/ui/banner.js","path":"js/ui/banner.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-yun/source/js/ui/fireworks.js","path":"js/ui/fireworks.js","modified":0,"renderable":1},{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/favicon/seedling-line.svg","path":"favicon/seedling-line.svg","modified":0,"renderable":0},{"_id":"source/image/alipay.png","path":"image/alipay.png","modified":0,"renderable":0},{"_id":"source/image/avatar.jpg","path":"image/avatar.jpg","modified":0,"renderable":0},{"_id":"source/image/head.jpg","path":"image/head.jpg","modified":0,"renderable":0},{"_id":"source/image/qq.jpg","path":"image/qq.jpg","modified":0,"renderable":0},{"_id":"source/image/wechat.jpg","path":"image/wechat.jpg","modified":0,"renderable":0},{"_id":"source/image/wechat.png","path":"image/wechat.png","modified":0,"renderable":0}],"Cache":[{"_id":"source/CNAME","hash":"5e2329bc423a886fdd08288eadb59845c3da790f","modified":1646568184189},{"_id":"source/categories/index.md","hash":"c661acf798d58f9cc3a8fed26a451b35a5ae907c","modified":1646568184299},{"_id":"source/favicon/seedling-line.svg","hash":"40de46a2c2adab799174cf37cb722244d57430d9","modified":1646568184330},{"_id":"source/about/index.md","hash":"3c578647ef994683dada780f8266efaea04b9dd7","modified":1646568184299},{"_id":"source/tags/index.md","hash":"e630d4f32d533f0e2969bfe2fa5b8b6f2ea0b2eb","modified":1646568184330},{"_id":"source/_posts/Anaconda-env.md","hash":"8c5a05e56f6347afec5d534bebe05a0dd6b58c3c","modified":1667281980478},{"_id":"source/_posts/4-dimensional.md","hash":"b144620f329f13795b32817e633244855af6b291","modified":1667281980474},{"_id":"source/_posts/8-puzzle.md","hash":"70cf0d7a7d9f9ce9154b0fcfd4ce5b5804409e14","modified":1648979101133},{"_id":"source/_posts/Andriod-Studio-1.md","hash":"72d03b141c5ff9e2d09920b1cee2c2fcae0a2634","modified":1667281980503},{"_id":"source/_posts/Android-Studio-6.md","hash":"368514afe8a4da383ba3c32a790c6f4a4a5c4f45","modified":1669858726022},{"_id":"source/_posts/Android-Studio-3.md","hash":"5cd9f45dd4fbd8b79e5c21a082b3ae19e2813900","modified":1667281980503},{"_id":"source/_posts/Android-Studio-4.md","hash":"1d088b06397d1f12de8a0c8f9ee2984b1f29d2ac","modified":1669858726017},{"_id":"source/_posts/Android-Studio-5.md","hash":"e0ff5f32c9cfa897445bb3bcf310c429fce5041a","modified":1669858726019},{"_id":"source/_posts/Android-Studio-7.md","hash":"a107dd1e4bf0f206e72c7c1847b5bfc95d98ba71","modified":1669858726029},{"_id":"source/_posts/Android-studio-2.md","hash":"b7312e15877063bcde9b40bcdd714b8d236c355a","modified":1667281980503},{"_id":"source/_posts/BFS.md","hash":"035e0478f3fc729ebcb6ec35a96e8551a9c3e242","modified":1646965740447},{"_id":"source/_posts/BM-algorithm.md","hash":"44339003ec401d92d0cf4eab45a19876740dc75c","modified":1648460251496},{"_id":"source/_posts/Backpack.md","hash":"204c382f1081daeed4b4ea5f2af3ea3a355f0edf","modified":1667281988424},{"_id":"source/_posts/CN-1.md","hash":"cd38d00ab3075ba255c11bcc8a789d109d97bf32","modified":1667281980518},{"_id":"source/_posts/CN-2.md","hash":"009926c4bb8bfc8ee4cd30eb984b81d2ea5492dc","modified":1667281980534},{"_id":"source/_posts/CN-5.md","hash":"f88addf30d59dcd40ae694abb253f09c68ea103d","modified":1667281980566},{"_id":"source/_posts/CUDA-install.md","hash":"0a42c1d6cd26e87e6be40d733dedc61f891dddbd","modified":1667281980566},{"_id":"source/_posts/CN-3.md","hash":"8756a2194db1610e4ed767530e2140739d305438","modified":1667281980550},{"_id":"source/_posts/CN-4.md","hash":"52228d267e6d4f7dc3b0d45b0580044968622986","modified":1667281980550},{"_id":"source/_posts/CN-6.md","hash":"11140a4c4e5f7a2c306cfe0356a2088abbf063a0","modified":1667281980566},{"_id":"source/_posts/Crawl-multi.md","hash":"b71b3d5eabd9c0ad19627efa595399869c9f16b4","modified":1669858726032},{"_id":"source/_posts/DFS.md","hash":"d960faa99df3603d23bba2da2b5d1c175a116547","modified":1646965740447},{"_id":"source/_posts/Graph-search.md","hash":"e8d29eb4d4a2e28f7852ab5f927dbbdffef6612b","modified":1646802347670},{"_id":"source/_posts/Hexo_article.md","hash":"ce2f26d19d25fd442be4be88450820cf295ad693","modified":1646801818325},{"_id":"source/_posts/Hexo-synchronization.md","hash":"6181d6da97a8fdabf9a1e49f2e1322f15b8fdb62","modified":1652692566140},{"_id":"source/_posts/Hexo_creation.md","hash":"ddde00e924485120be2947e2bd478174fd3b955c","modified":1646729702862},{"_id":"source/_posts/IPsec.md","hash":"cc268c197404a8568df61d79a13e584a91114122","modified":1667281980581},{"_id":"source/_posts/PERT.md","hash":"05c61eb3cf2534dc55c61d2f3dc4f10556856c9f","modified":1647079909326},{"_id":"source/_posts/R2S_build.md","hash":"2b296533962e9983a25a2c1feeccb093f98c3365","modified":1646568184288},{"_id":"source/_posts/KPM-algorithm.md","hash":"f54f6ca7a3d60f2c08a7902dab1dd0324d8a13f3","modified":1667281980581},{"_id":"source/_posts/Python-json.md","hash":"ca5e6666411188a93b1bb2b3e418ad318c65cce0","modified":1667473291706},{"_id":"source/_posts/Python-WordCloud.md","hash":"0725f814cc1146b7f1be93c23e2ae94b6f2d753e","modified":1667473972859},{"_id":"source/_posts/STM32-Introduction.md","hash":"62b1a81d5462f78460fdce6a53cbb7b52faaab5d","modified":1652107714984},{"_id":"source/_posts/socket-multi-2.md","hash":"7806cc5fc6c0a973e0a805057f91d026b5fa523b","modified":1669861767448},{"_id":"source/_posts/socket-multi-1.md","hash":"a967cc36e68ca90fd813db3abbbca45454297c22","modified":1669862114848},{"_id":"source/_posts/binary_tree_1.md","hash":"f85f1b661f767ee706d4bab62fdcfbac002bf174","modified":1648457094295},{"_id":"source/_posts/python-environment.md","hash":"0f9be5bc1c8d8e0e3ccfdac45288b501e0da1473","modified":1667281988440},{"_id":"source/_posts/binary_tree_2.md","hash":"ee98f59a5559baa93b25b97cfdac4ce1b717e746","modified":1648457094306},{"_id":"source/_posts/socket-program-3.md","hash":"e19b4aebdf01037a1f83b312441455d4669fa202","modified":1667281980597},{"_id":"source/_posts/socket-program-2.md","hash":"624383469518b99c8181af00bf3dcad86316a8ac","modified":1667281980597},{"_id":"source/image/avatar.jpg","hash":"371df290b2fe0600ba933d48751ac8f2cadc0a18","modified":1646568184299},{"_id":"source/_posts/socket-program-1.md","hash":"196943ce4caa76afcc585eb75fa7e8a94b32e4cc","modified":1667473152373},{"_id":"source/_posts/4-dimensional/image-20220409164432423.png","hash":"0da1b92a585dd3e1de4351392bf92ba569a470a1","modified":1667281980476},{"_id":"source/image/wechat.jpg","hash":"c7050b547d10944c3f802771962c11ab390255dc","modified":1646568184330},{"_id":"source/_posts/4-dimensional/a601995d55609f2d9f5e233e36fbe9ea26011b3b","hash":"392a04aaaf11f561195133785a33e6b2adc1089d","modified":1667281980474},{"_id":"source/_posts/4-dimensional/image-20220409164635308.png","hash":"5815dca4162a2b9b436534dcd7856101ad79bec4","modified":1667281980476},{"_id":"source/_posts/4-dimensional/d928ec15aeef83aade867992ee473933adb6139d","hash":"75cf57eedd6c71330a9b32b38a4533515ce6d391","modified":1667281980475},{"_id":"source/_posts/4-dimensional/image-20220409164912020.png","hash":"e61cfc1eaa4dc6501708837b81ee576373a85a3a","modified":1667281980476},{"_id":"source/_posts/4-dimensional/image-20220409165723376.png","hash":"7e0378c15620e550bcc92c743fa08b5c2fa29e93","modified":1667281980477},{"_id":"source/_posts/4-dimensional/image-20220409173308465.png","hash":"b7c1d9cf27887cbce7c3d0615ffcad7e784a8437","modified":1667281980477},{"_id":"source/_posts/4-dimensional/image-20220409165234091.png","hash":"7a7478700faa27239188afa84d5e064d4bed8bcf","modified":1667281980477},{"_id":"source/_posts/8-puzzle/R1.png","hash":"56fc9948f0a92af1fb0ccd3657d3ebeefbec69ac","modified":1648979077544},{"_id":"source/_posts/Anaconda-env/QQ图片20220722134623.jpg","hash":"2f97fadb1e69f06bf953663733748e460c7d65c5","modified":1667281980479},{"_id":"source/_posts/Anaconda-env/image-20220722135753076.png","hash":"e141070a1ffdea3d1da631ab687d7f5b3a2d510a","modified":1667281980482},{"_id":"source/_posts/Anaconda-env/image-20220722142150620.png","hash":"4d5063b11f6ab1bee6a883229059ac7942159a2c","modified":1667281980487},{"_id":"source/_posts/Anaconda-env/image-20220722144502752.png","hash":"5322bf2ecbad99132fa25963dfdaab02cbbf25c0","modified":1667281980487},{"_id":"source/_posts/Anaconda-env/image-20220917183015892.png","hash":"7249596f00c0d70b9a67c3570139ced29f54c530","modified":1667281980503},{"_id":"source/_posts/Andriod-Studio-1/image-20220916130832425.png","hash":"fb8e4830eaff2eb4e29a288c5fbaf4f79880ffec","modified":1667281980503},{"_id":"source/_posts/Andriod-Studio-1/image-20220916131246387.png","hash":"5a037f55eb816f97b073d6f12434f03ab1d44b00","modified":1667281980503},{"_id":"source/_posts/Andriod-Studio-1/image-20220918210702397.png","hash":"750d85948261e773e04a54ff692e96d7b9335e3c","modified":1667281980503},{"_id":"source/_posts/Andriod-Studio-1/image-20220916143713242.png","hash":"c6920cff1c9f170d7b7a096fff73926fbf1516f6","modified":1667281980503},{"_id":"source/_posts/Android-Studio-4/image-20221011010417986.png","hash":"15f43e583340db013706d0eddedcfc9409e7a46d","modified":1667281980503},{"_id":"source/_posts/Android-Studio-3/image-20221010221037424.png","hash":"564a83d1ea63eb1a4a8650d7893189ea9a4de501","modified":1667281980503},{"_id":"source/_posts/Android-Studio-3/image-20221010222245715.png","hash":"b108c689fa5f726bac9662435746869b64d98cf1","modified":1667281980503},{"_id":"source/_posts/Android-Studio-3/image-20221010221157489.png","hash":"3961dacbb7b470b7f047401b2c79ffc34e853f40","modified":1667281980503},{"_id":"source/_posts/Android-Studio-3/image-20221010232513124.png","hash":"5e016fd4b34a4353dc0cdf428388544d482e4714","modified":1667281980503},{"_id":"source/_posts/Android-Studio-3/image-20221010225547722.png","hash":"ebab579a90a6b12e27ca5b3062b84184eed7d1a0","modified":1667281980503},{"_id":"source/_posts/Android-Studio-5/image-20221109150911874.png","hash":"5bfc7ae926ebc12882d41b6dedba0b50be115a59","modified":1667977751884},{"_id":"source/_posts/Android-Studio-6/image-20221121182911410.png","hash":"849e7ca14bad92fa2b2e592eae0aec6baad53c28","modified":1669858726026},{"_id":"source/_posts/Android-Studio-6/image-20221121183031659.png","hash":"f5d22f40138a6ac45113d124eef7d2cd3732ace3","modified":1669858726027},{"_id":"source/_posts/Android-Studio-6/image-20221121230804933.png","hash":"1e5eda6fdf2e98a9ae097450b0e3697f4084c864","modified":1669858726028},{"_id":"source/_posts/Android-Studio-7/image-20221125135252991.png","hash":"63df314a565741fbc8f89f5b2e85bfee70613f64","modified":1669858726030},{"_id":"source/_posts/Android-Studio-7/image-20221125135412770.png","hash":"ed8b416f4e5028d84c72b3a13cfe89fac6caff4d","modified":1669858726031},{"_id":"source/_posts/Android-studio-2/image-20220927022446373.png","hash":"a716a2a5a99695941327fbbd9e15daf975b199b5","modified":1667281980518},{"_id":"source/_posts/Android-studio-2/image-20220927021810857.png","hash":"712c284a63a0c3dc2b00a4cbffa42ac89a10d834","modified":1667281980503},{"_id":"source/_posts/Android-studio-2/image-20220927022539379.png","hash":"ac991505ebcfe995fba7ebbb3f44316229ca6d9c","modified":1667281980518},{"_id":"source/_posts/BM-algorithm/image-20220328004145309.png","hash":"7f99a2be322cdaabab3d8c8dcdbe71a399a0a98f","modified":1648457094287},{"_id":"source/_posts/Android-studio-2/image-20221031161231815.png","hash":"b03a1f07b6976ce4ac56ce9897c23a4da18bed60","modified":1667281980518},{"_id":"source/_posts/CN-3/image-20211205153202429.png","hash":"ef1b3c71950ab13fcfc97218597794cb5635494d","modified":1667281980550},{"_id":"source/_posts/CN-3/image-20211205162300456.png","hash":"9e892eacceba60a36263bd46101f2ea6c5e66543","modified":1667281980550},{"_id":"source/_posts/CN-3/image-20211205165352723.png","hash":"6fa86d1afe6e42d0e2550a9cbba836289a0bff7f","modified":1667281980550},{"_id":"source/_posts/CN-5/image-20211211152352560.png","hash":"1853438a63a17a1589725776ff0c61c5e98cc1ca","modified":1667281980566},{"_id":"source/_posts/CN-5/image-20211211154616223.png","hash":"78616478b7a24266183f085bbbbe0885e1119292","modified":1667281980566},{"_id":"source/_posts/CN-5/image-20211211154842458.png","hash":"95d22d0ccdd92965dfdf79ab1322aa3854cb7570","modified":1667281980566},{"_id":"source/_posts/CN-5/image-20211211154625242.png","hash":"78616478b7a24266183f085bbbbe0885e1119292","modified":1667281980566},{"_id":"source/_posts/CN-6/image-20211207025902517.png","hash":"597743e9e973f8b0c8b3021e4a652d2a016e4e21","modified":1667281980566},{"_id":"source/_posts/CUDA-install/image-20220718135956517-1663410961962-7.png","hash":"44a55ea9e79d482eca1dd1170bb03ff127fb08ca","modified":1667281980581},{"_id":"source/_posts/Graph-search/image-2.png","hash":"1ea7ffb5b9854f92cd4092aa456e1d77f28aa9fc","modified":1646801543441},{"_id":"source/_posts/Graph-search/image-1.png","hash":"e31a7b655c8b104176311248253c989c0c3590ee","modified":1646801543441},{"_id":"source/_posts/Graph-search/v2-4a4d37df348f283649e2aecc74d959b5_720w.jpg","hash":"60d73acdd30125aa62e7afc3899271677c9c4cd7","modified":1646801543441},{"_id":"source/_posts/Graph-search/image-3.png","hash":"3b8a85b9b1f6398874d48d71f702c4e53bf83d37","modified":1646801543441},{"_id":"source/_posts/Graph-search/v2-9e2643ca5d96f86a391c36de4d3bd48d_720w.jpg","hash":"24061e3e3eba17d3bf0429516a68cf344e680fd4","modified":1646801543441},{"_id":"source/_posts/Hexo_article/image-20220308162506034.png","hash":"cbac8bf927ab02febc2e96125c88df7426dee64c","modified":1646727906071},{"_id":"source/_posts/IPsec/image-20220408173945688.png","hash":"a8b416dc2a59abaa6546921a6774399a09e0564c","modified":1667281980581},{"_id":"source/_posts/Hexo_creation/image-20220308165502809.png","hash":"667770d3e29fb219208121ddc70d2ae062563ad1","modified":1646729702815},{"_id":"source/_posts/IPsec/image-20220408182745880.png","hash":"e6bdcb81f702a997bb5b76563f7e0bf3a7ee0a3a","modified":1667281980581},{"_id":"source/_posts/IPsec/image-20220408182806622.png","hash":"51b06303db8b4d80b03acfc55baf149aeb0b66f8","modified":1667281980581},{"_id":"source/_posts/IPsec/image-20220408182852006.png","hash":"6b746c16873084d748a6fbea2160300950361ba7","modified":1667281980581},{"_id":"source/_posts/IPsec/image-20220408182806757.png","hash":"51b06303db8b4d80b03acfc55baf149aeb0b66f8","modified":1667281980581},{"_id":"source/_posts/IPsec/image-20220408182902202.png","hash":"ac93fbaab32af9510faaa6a9b5d1d1d88736ee3e","modified":1667281980581},{"_id":"source/_posts/IPsec/image-20220408183817734.png","hash":"25cd176a6f5907bd5f30a3ba8541f162bfde13d7","modified":1667281980581},{"_id":"source/_posts/IPsec/image-20220408183423694.png","hash":"4bf0e8fdff9e0cbce3f785aa7ff7d8f87ef84c0d","modified":1667281980581},{"_id":"source/_posts/PERT/image-20210926121305734.png","hash":"5bb37f387e4b008de13619b2bc84bb610cf73ba3","modified":1647079909334},{"_id":"source/_posts/PERT/image-20210926121452437.png","hash":"409b273ed1a5e8c0aa440379af65b4a8b8d3f5fa","modified":1647079909334},{"_id":"source/_posts/PERT/image-20210926125842698.png","hash":"f648448ff8f6bb0ceb55706597043c277d7bc9a2","modified":1647079909334},{"_id":"source/_posts/PERT/image-20210926121557824.png","hash":"a082383de3b879a035be5bc7866a932737bb2b66","modified":1647079909334},{"_id":"source/_posts/R2S_build/image-1.png","hash":"4a475083bd251f14329a16715da142571bd86747","modified":1646568184288},{"_id":"source/_posts/R2S_build/image-10.png","hash":"62f3de2b27546aff4cf6a616df3b3239e5d5d589","modified":1646568184288},{"_id":"source/_posts/R2S_build/image-7.png","hash":"b6b02dcf36560a6055756269e885694045ad33bc","modified":1646568184288},{"_id":"source/_posts/R2S_build/image-5.png","hash":"56c526c61081288b63adab3db805722adedec86f","modified":1646568184288},{"_id":"source/_posts/R2S_build/image-8.png","hash":"dedaee8c824811ffa4f3d27516e012a86636726e","modified":1646568184299},{"_id":"source/_posts/STM32-Introduction/Center.png","hash":"c1dee6ba12d373c7b3b2c4e0fc04faa4ed67e379","modified":1652083258737},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 131527.png","hash":"43d4e4dfa0b4e631210b64056ff56b3279658611","modified":1652079248934},{"_id":"source/_posts/binary_tree_1/2-1Q226195949495.gif","hash":"a107e2dc9f65c7887e76755dc9a78fff17fa0dbe","modified":1648457094303},{"_id":"source/_posts/binary_tree_1/2-1Q226195I0M1.gif","hash":"2f1884245b798d3ec8f8a5cc42572a786a38ae0c","modified":1648457094303},{"_id":"source/_posts/binary_tree_1/2-1Q22R035341H.gif","hash":"1d62249b1271596c0daf868ef2ac4f6c80d93ed8","modified":1648457094306},{"_id":"source/_posts/binary_tree_1/v2-0ccba83c7b3dbf7b89964c04021025d9_720w.jpg","hash":"f56981756349a08c44d83576af3e63798c87e21f","modified":1646568184299},{"_id":"source/_posts/binary_tree_2/false example-16473330373123.png","hash":"374877f834e57be19b531ba2ba225a42b13a5291","modified":1647333037321},{"_id":"source/_posts/binary_tree_2/image.png","hash":"779e786c51aefa1b4c15d9945a62b452137e2024","modified":1646568184299},{"_id":"source/_posts/binary_tree_2/false example.png","hash":"374877f834e57be19b531ba2ba225a42b13a5291","modified":1647333002947},{"_id":"source/_posts/binary_tree_2/tree1.jpg","hash":"f358033460700da1c28e5e3d6770c82857c8ccb3","modified":1648457094314},{"_id":"source/_posts/binary_tree_2/tree2.jpg","hash":"67719c7c6ea0c867d80327220af2eee116533c7f","modified":1647332778971},{"_id":"source/_posts/python-environment/1`SS$TH[EI4{J1_I]9]L`EY.png","hash":"5efc7a23db36c498764f9d8e2ec8a67ad0e0a310","modified":1667281988440},{"_id":"source/_posts/binary_tree_2/true example.png","hash":"92de0a3ec197a374444f32b81c18fc3fdec0ff7b","modified":1647333024497},{"_id":"source/_posts/python-environment/QQ图片20220722134623.jpg","hash":"2f97fadb1e69f06bf953663733748e460c7d65c5","modified":1667281988440},{"_id":"source/_posts/python-environment/image-20220722135753076.png","hash":"e141070a1ffdea3d1da631ab687d7f5b3a2d510a","modified":1667281988440},{"_id":"source/_posts/python-environment/image-20220722142150620.png","hash":"4d5063b11f6ab1bee6a883229059ac7942159a2c","modified":1667281988456},{"_id":"source/_posts/python-environment/image-20220722144502752.png","hash":"5322bf2ecbad99132fa25963dfdaab02cbbf25c0","modified":1667281988456},{"_id":"source/_posts/socket-multi-2/image-20221201102754586.png","hash":"c41b8530ecfd2c65edb7db0113f50faaf4da028b","modified":1669861674653},{"_id":"source/_posts/socket-program-2/image-20221012143117864.png","hash":"d9eae5dc6e81f0ba9acba31d5e2673e338dd071b","modified":1667281980597},{"_id":"source/image/alipay.png","hash":"6be1d1ffc3264828ea0a27a4ca30520dfa448bd6","modified":1646568184299},{"_id":"source/image/qq.jpg","hash":"679ce9b7fb0f782ddfb1177689cb0ae09fbded23","modified":1646568184330},{"_id":"source/image/wechat.png","hash":"4660b50917b947a91c35f55b0281c633b9b0addd","modified":1646568184330},{"_id":"source/_posts/Anaconda-env/U0I112981_%MPSVS4CXL8BF.png","hash":"20795def1ba10c382ca4746a003ceb0fd98b3262","modified":1667281980480},{"_id":"source/_posts/Anaconda-env/image-20220722141252367.png","hash":"2962826b723f792122709b7d5e27eb6c46e65656","modified":1667281980487},{"_id":"source/_posts/Anaconda-env/image-20220722141736616.png","hash":"c31bcd8f2da424027f7ae36a5421bb2a0ea6011d","modified":1667281980487},{"_id":"source/_posts/Anaconda-env/image-20220722145541034.png","hash":"92b46d7e81b3ab8bfc6e2a32d1eec192e1cb8858","modified":1667281980487},{"_id":"source/_posts/Anaconda-env/image-20220722154032582.png","hash":"810653a3d879730f989de264db735538f3afc65c","modified":1667281980503},{"_id":"source/_posts/Android-Studio-3/image-20221010220838199.png","hash":"289e4fd80ccb6c85d2b0e48030605b6c190a43bb","modified":1667281980503},{"_id":"source/_posts/Android-Studio-6/image-20221121181019527.png","hash":"08ddae4240956feeab0f04bc13f5ee8fe1ecc609","modified":1669858726024},{"_id":"source/_posts/Android-Studio-6/image-20221121180736629.png","hash":"fa77491583bc9d7a08f58e640d4a0ca6152f74e8","modified":1669858726023},{"_id":"source/_posts/Android-Studio-6/image-20221121182649615.png","hash":"8a945b5fec38ad93decaafd5359ed735eaa3d750","modified":1669858726025},{"_id":"source/_posts/Android-Studio-6/image-20221121232452816.png","hash":"8863e3f3d077f27c828ad71bb4624bbd6e348e35","modified":1669858726028},{"_id":"source/_posts/Android-Studio-7/image-20221125135917426.png","hash":"8566161715adef3108bd00fa14f0e5b100e20491","modified":1669858726032},{"_id":"source/_posts/Android-studio-2/image-20220927021701138.png","hash":"0911d09041a820c48b15abd1eba52bcf63b1edb4","modified":1667281980503},{"_id":"source/_posts/Android-studio-2/image-20220927022235374.png","hash":"4f54ffea77476bcfdd3406f1b6a35ce5ace38cc5","modified":1667281980518},{"_id":"source/_posts/Android-studio-2/image-20221031161107220.png","hash":"a4a588327d19a425eca77cf6675bdbaa650d903b","modified":1667281980518},{"_id":"source/_posts/Android-studio-2/image-20221031161159345.png","hash":"be4308090b577d8250fcefc7ddb5d128a0cf60a6","modified":1667281980518},{"_id":"source/_posts/BM-algorithm/image-20220328005451919.png","hash":"340fe25093bbbd654129d3c2d332124998a5d265","modified":1648457094295},{"_id":"source/_posts/BM-algorithm/image-20220328173308025.png","hash":"b687f059996b90a0e7b45b58336d90c68fd7458f","modified":1648459988104},{"_id":"source/_posts/CN-1/image-20211201155917959.png","hash":"be761a097668a5191a80d5940d516f67ebe6d58c","modified":1667281980518},{"_id":"source/_posts/CN-1/image-20211201142249636.png","hash":"ba7d80ea41a4edff7bddad47286340d093b508cf","modified":1667281980518},{"_id":"source/_posts/CN-2/image-20211210171011761.png","hash":"824d10bcbe825148beb94706f9b38673a67078f2","modified":1667281980548},{"_id":"source/_posts/CN-3/image-20211205153141538.png","hash":"e314d01147c11ea864efe60050944cd8c86c896b","modified":1667281980550},{"_id":"source/_posts/CN-3/image-20211205153214433.png","hash":"d350aaa5ae00a2621f84e5149fe0207ee33d1fda","modified":1667281980550},{"_id":"source/_posts/CN-3/image-20211205153227168.png","hash":"273a262dd59bf899cb8b8484c529a6db5a36436d","modified":1667281980550},{"_id":"source/_posts/CN-3/image-20211205174543073.png","hash":"46fda8d1c1541a353b5e823bc3c9bcf9895e786c","modified":1667281980550},{"_id":"source/_posts/CN-3/image-20211205174403372.png","hash":"60d7bbe4df45795ec99e916eae9ac78b317dfa7f","modified":1667281980550},{"_id":"source/_posts/CN-5/image-20211211154556832.png","hash":"147b53ac1661c3508df951c62e4596b52a658227","modified":1667281980566},{"_id":"source/_posts/CUDA-install/image-20220718135746089-1663410928185-1.png","hash":"2e57d0777dd643189df7b18cbe652b798c362f2d","modified":1667281980566},{"_id":"source/_posts/CUDA-install/image-20220718160419835-1663410988631-11.png","hash":"f7576d40d17f3d572b3d8cca3b25985cdedcb9c8","modified":1667281980581},{"_id":"source/_posts/Hexo-synchronization/image-20220310172557250.png","hash":"6e29f7df5d770ebc97cc9c4061ede24d1505d82d","modified":1646965740447},{"_id":"source/_posts/Hexo_article/IMG_1479.jpg","hash":"f869ae1d27243b47840d63ffbe1bd136c7c7a503","modified":1646568184283},{"_id":"source/_posts/PERT/image-20210926121433312.png","hash":"aeb8258e4e8ae3d05ca75e03dfe93ec239da5baa","modified":1647079909334},{"_id":"source/_posts/R2S_build/image-20220305212846426.png","hash":"ea4b0543826c23f95321520feaca18a54e27c00f","modified":1646568184288},{"_id":"source/_posts/R2S_build/image-9-1024x194.png","hash":"00c8bfd48272b1b8487d34e711ac2800569c3230","modified":1646568184299},{"_id":"source/_posts/python-environment/U0I112981_%MPSVS4CXL8BF.png","hash":"20795def1ba10c382ca4746a003ceb0fd98b3262","modified":1667281988440},{"_id":"source/_posts/python-environment/image-20220722141252367.png","hash":"2962826b723f792122709b7d5e27eb6c46e65656","modified":1667281988440},{"_id":"source/_posts/python-environment/image-20220722141736616.png","hash":"c31bcd8f2da424027f7ae36a5421bb2a0ea6011d","modified":1667281988440},{"_id":"source/_posts/python-environment/image-20220722145541034.png","hash":"92b46d7e81b3ab8bfc6e2a32d1eec192e1cb8858","modified":1667281988456},{"_id":"source/_posts/python-environment/image-20220722154032582-165847602920414.png","hash":"810653a3d879730f989de264db735538f3afc65c","modified":1667281988461},{"_id":"source/_posts/socket-program-3/image-20221013181230269.png","hash":"64b936355500dac569b1cc32d28276ffaf15d7cd","modified":1667281980597},{"_id":"source/_posts/8-puzzle/R.024c89daf1b60db70d608b4b73215e76","hash":"55711d8835efb3239e2a47eb10b1d9c562084672","modified":1648977088964},{"_id":"source/_posts/8-puzzle/R.png","hash":"62a8331c6b1dc7814dc5c3d5b82a452d211d1cf5","modified":1648978708636},{"_id":"source/_posts/Anaconda-env/image-20220722142444023.png","hash":"a578c81d4e8550a8f82b5b1e6d56cced1f114291","modified":1667281980487},{"_id":"source/_posts/Android-Studio-5/image-20221109150451204.png","hash":"4732a2ccd5414609d256a1ba72de94d6a464adb8","modified":1667977491246},{"_id":"source/_posts/Android-Studio-5/image-20221109151131798.png","hash":"09cc7bbf0b26fadb48b744a0927e89908e3266a1","modified":1667977891941},{"_id":"source/_posts/CN-1/image-20211201155433683.png","hash":"7f64d8c8d414f025c940e249396bfd3fb1090bdb","modified":1667281980518},{"_id":"source/_posts/CN-1/image-20211201165246959.png","hash":"6a6165a044ab22c876a5c9632b951d682b57f121","modified":1667281980518},{"_id":"source/_posts/CN-2/image-20211204114150471.png","hash":"b4f3c0a76b1ab0c87e4d3703bdcbd8dc13c8a2a8","modified":1667281980534},{"_id":"source/_posts/CN-4/image-20211206080908048-1649432396057.png","hash":"9b3fad30e12688a0f2788b3477d678e009160485","modified":1667281980550},{"_id":"source/_posts/CN-4/image-20211206080908048.png","hash":"9b3fad30e12688a0f2788b3477d678e009160485","modified":1667281980550},{"_id":"source/_posts/CN-4/image-20211206080928415-1649432396057.png","hash":"fafa9d4f4df10549c8b683624b210296450309e2","modified":1667281980550},{"_id":"source/_posts/CN-4/image-20211206080928415.png","hash":"fafa9d4f4df10549c8b683624b210296450309e2","modified":1667281980566},{"_id":"source/_posts/CN-4/image-20211206080942577.png","hash":"54a0c9e2bbb9191f378f8e72b479e3761408187b","modified":1667281980566},{"_id":"source/_posts/CN-4/image-20211206080942577-1649432396057.png","hash":"54a0c9e2bbb9191f378f8e72b479e3761408187b","modified":1667281980566},{"_id":"source/_posts/CUDA-install/image-20220718135833425-1663410950886-5.png","hash":"12ff1e8809b94cb369268d4008509135eab802cb","modified":1667281980581},{"_id":"source/_posts/CUDA-install/image-20220718135714318-1663410937840-3.png","hash":"0487be39f6e22573d065cd52c6a61259d32155d4","modified":1667281980566},{"_id":"source/_posts/CUDA-install/image-20220718160333419-1663410975368-9.png","hash":"709ffb23e462723202fa1361824bed310aeea56d","modified":1667281980581},{"_id":"source/_posts/Hexo-synchronization/Screenshot 2022-03-08 161552.png","hash":"5146a45213aa0aaa7ac928f8083fcf56472628a8","modified":1646734437652},{"_id":"source/_posts/Hexo-synchronization/image-20220516171510709.png","hash":"ceece9abb9e1aed3fdcbe057b4f6f066bb14d026","modified":1652692510796},{"_id":"source/_posts/Hexo_article/image-20220308162715529.png","hash":"8e3c4674e8deea387717279e8a00923655c7ddf6","modified":1646728036087},{"_id":"source/_posts/Hexo_creation/image-20220308165404552.png","hash":"a268bc4c307433bde753548c2e00b24bc645571e","modified":1646729644896},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 125830-16520802827714.png","hash":"e2b8bdbbeb914b38b01549f4061f00a6ecf31c47","modified":1652080282787},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 125830.png","hash":"e2b8bdbbeb914b38b01549f4061f00a6ecf31c47","modified":1652080266484},{"_id":"source/_posts/python-environment/image-20220722142444023.png","hash":"a578c81d4e8550a8f82b5b1e6d56cced1f114291","modified":1667281988456},{"_id":"source/_posts/Anaconda-env/image-20220722152550108.png","hash":"7d19d218b776790e6c4b5ecb712d43678dbd851e","modified":1667281980503},{"_id":"source/_posts/CN-2/image-20211204114107336.png","hash":"f4d06da5ce4433eab9f0ef41e6fa9593533dae6d","modified":1667281980534},{"_id":"source/_posts/Hexo-synchronization/image-20220315180411753.png","hash":"ccce09bdfce959f4983dc0c12f0fff804ee30dd0","modified":1647338651897},{"_id":"source/_posts/KPM-algorithm/image-20220415153721845.png","hash":"afab9d3ebf9ff2f793ec78c5e801643c7664b109","modified":1667281980581},{"_id":"source/_posts/R2S_build/image-3-1024x485.png","hash":"72f68e697d9656bc5dfdf05584660bee9d89e29a","modified":1646568184288},{"_id":"source/_posts/R2S_build/image-2-1024x507.png","hash":"3f2c9846cdfeed98cf3b5bf94cb0a5d41de40705","modified":1646568184288},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 130023.png","hash":"4b6d25b1be8466e1c7c4d637acf9af4c69da95df","modified":1652080282787},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 130159.png","hash":"7372681e577e09fc93ea991c80e584a07815445a","modified":1652080282787},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 130250.png","hash":"5baea3b9248b11880f2dc942227dde46e7f7527f","modified":1652080282787},{"_id":"source/_posts/STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70-16520801218142.png","hash":"b7063c3f518e2754b82086d942b4865f9eb102b7","modified":1652080122232},{"_id":"source/_posts/STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70.png","hash":"381a3831a3eb08ba52a48ca624d32b0b040298ea","modified":1652079902551},{"_id":"source/_posts/binary_tree_1/image.png","hash":"486e325512c567f522e925b9fe9d58c24789176b","modified":1646568184299},{"_id":"source/_posts/socket-multi-1/image-20221111145514251.png","hash":"93369d60278c037d93a966eae87d5d6a5d75a488","modified":1668149714424},{"_id":"source/_posts/python-environment/image-20220722152550108.png","hash":"7d19d218b776790e6c4b5ecb712d43678dbd851e","modified":1667281988461},{"_id":"source/_posts/socket-program-2/image-20221012143810496.png","hash":"13b415f2fc5173122a689ef9391d2a9035e78b87","modified":1667281980597},{"_id":"source/_posts/Android-Studio-5/image-20221121161500306.png","hash":"05f60a654f598ae12dc4d8e690f4c78c22b6e2a2","modified":1669858726021},{"_id":"source/_posts/CN-2/image-20211210170210391.png","hash":"59b68db970c383077f8cddcc7c29735b37472649","modified":1667281980534},{"_id":"source/_posts/CN-2/image-20211204114128703.png","hash":"eedec4652f9c7eaab4c4b468f8d0be48d33684ae","modified":1667281980534},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 130051.png","hash":"b3c8a3155e82aa787cb4b345d445c653c393ea4c","modified":1652080282787},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 130125.png","hash":"e3d59bd5a38f41854187a8c6f5c606ad2326bee1","modified":1652080282793},{"_id":"source/_posts/socket-multi-1/image-20221201103211709.png","hash":"72b9f1aba5067dac4dfa22c511b5370d1407eb96","modified":1669861931764},{"_id":"node_modules/hexo-theme-yun/src/dist/global.d.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/package.json","hash":"f5d5683cf69739921aa43ea09e9342f938c768fc","modified":1647083473233},{"_id":"node_modules/hexo-theme-yun/LICENSE","hash":"a24ce67b002ff38718c549129d23d177bf951dbf","modified":1647083473213},{"_id":"node_modules/hexo-theme-yun/_config.yml","hash":"83df3f3a0245f37cdbbe00867963deba88449b8b","modified":1647083473903},{"_id":"node_modules/hexo-theme-yun/_vendors.yml","hash":"8146e23cc498d090f628d1f3252f193b4ea951bd","modified":1647083473903},{"_id":"node_modules/hexo-theme-yun/languages/default.yml","hash":"5d50a944a8b527fd857c81b17a60e5cc414c5729","modified":1647083473903},{"_id":"node_modules/hexo-theme-yun/README.md","hash":"969b7c1aff6f54f05064970b355ba1e1d7da58c8","modified":1647083473488},{"_id":"node_modules/hexo-theme-yun/languages/ja.yml","hash":"18ab694a0c64f4c0e53b570495625901e883df24","modified":1647083473903},{"_id":"node_modules/hexo-theme-yun/languages/en.yml","hash":"73d56d09af0cade0e47ee995f4110d06f831eabe","modified":1647083473903},{"_id":"node_modules/hexo-theme-yun/source/yun.png","hash":"b8ae426fa5dd7579d23d189c222641d812c51c0a","modified":1647083473493},{"_id":"node_modules/hexo-theme-yun/source/yun.svg","hash":"aa027a0a9e7ba96c906b9fd2d9cd3f8018ff2e2d","modified":1647083473873},{"_id":"node_modules/hexo-theme-yun/languages/zh-CN.yml","hash":"a38b30c9c2fc6c4231ec60ac02538dae2d4e8527","modified":1647083473913},{"_id":"node_modules/hexo-theme-yun/src/.eslintrc","hash":"671a555e3c9b75af07b17af3050a227062419e66","modified":1647083473213},{"_id":"node_modules/hexo-theme-yun/src/tsconfig.json","hash":"f7624a69048691c9b61e3dc9f49636ae827eb64e","modified":1647083473234},{"_id":"node_modules/hexo-theme-yun/src/README.md","hash":"ec50acdc4dfacfb66cd7b2e5b80543c442d2a75f","modified":1647083473493},{"_id":"node_modules/hexo-theme-yun/src/tsup.config.ts","hash":"02b20d3cc74a9f0c5a484b37041cd22f156fb05f","modified":1647083473893},{"_id":"node_modules/hexo-theme-yun/src/package.json","hash":"e4bac4cc7aa509af568735296dc5e014d65d6ad6","modified":1647083473233},{"_id":"node_modules/hexo-theme-yun/layout/404.pug","hash":"e96d09b7d27c22c0759514b00ebcf21c711cb021","modified":1647083473493},{"_id":"node_modules/hexo-theme-yun/layout/archive.pug","hash":"067ac814d892dc6c0efe9c03c45abd712648e37e","modified":1647083473503},{"_id":"node_modules/hexo-theme-yun/src/global.d.ts","hash":"c92e655ce8764a8fdff250008d796a622a083dcb","modified":1647083473883},{"_id":"node_modules/hexo-theme-yun/src/.pnpm-debug.log","hash":"30c5016fb5be76432421aca0781d0c3c3918cdae","modified":1647083473234},{"_id":"node_modules/hexo-theme-yun/layout/category.pug","hash":"6d0a910ac2716c1acae5e7ab0c2a56e4d5438281","modified":1647083473503},{"_id":"node_modules/hexo-theme-yun/layout/girls.pug","hash":"b22b459f7be4d91c00d85eeac5d00aee915e70a0","modified":1647083473523},{"_id":"node_modules/hexo-theme-yun/layout/gallery.pug","hash":"1b1bbe5bb79b5718094bcfb85dac08a1e625e0b7","modified":1647083473513},{"_id":"node_modules/hexo-theme-yun/layout/links.pug","hash":"64d298ae7d0bd7126621b0b34b099e8808959161","modified":1647083473553},{"_id":"node_modules/hexo-theme-yun/layout/index.pug","hash":"7322ea6d9cfb29b1bb13a31bb5f98abcf5d9f409","modified":1647083473543},{"_id":"node_modules/hexo-theme-yun/layout/page.pug","hash":"15b6875edc58d55635848febbf88c7eac169ed4f","modified":1647083473653},{"_id":"node_modules/hexo-theme-yun/scripts/events/config.js","hash":"1655af9c2e13c2ea33d7eea70a7700df0c31d506","modified":1647083473218},{"_id":"node_modules/hexo-theme-yun/scripts/events/data.js","hash":"4be7cf0de74a8ebf84472ddf1e9a9276101c5b9e","modified":1647083473218},{"_id":"node_modules/hexo-theme-yun/layout/tag.pug","hash":"6392c8ffd359008e32cc8ce63868a95727855527","modified":1647083473673},{"_id":"node_modules/hexo-theme-yun/scripts/events/index.js","hash":"d5bdd3c6a51fa042ae17b45531f459b76ac4b3be","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/layout/post.pug","hash":"538c280a308326a058972828b4f69d16b232fd58","modified":1647083473663},{"_id":"node_modules/hexo-theme-yun/scripts/events/utils.js","hash":"700ad26e83b53358f6c01c42708be02f735f647c","modified":1647083473230},{"_id":"node_modules/hexo-theme-yun/layout/slide.pug","hash":"4d1f3a40f3ded6d6df61d924caa38d0c675cc0b3","modified":1647083473673},{"_id":"node_modules/hexo-theme-yun/scripts/filters/index.js","hash":"fcbfa46a8e6b3006a93966941b2bb446cb77a62d","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/scripts/helpers/encrypt.js","hash":"efc3c8b54288e278e1f74fedab6526881d6ea30f","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/scripts/helpers/engine.js","hash":"59a1ea9fd5b49398c97e844f04d00c0760b8f707","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/scripts/helpers/yun-config.js","hash":"da8eb62439851bbee1c08708ac7ef19372b28a7b","modified":1647083473233},{"_id":"node_modules/hexo-theme-yun/scripts/helpers/index.js","hash":"c0d4c363423ef189d78efe158220fbccc759cd78","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/scripts/tags/prompt.js","hash":"36f6916721c61b7b03f655088d931c5ea1658d32","modified":1647083473230},{"_id":"node_modules/hexo-theme-yun/source/js/chunk-TTX6TVTO.js","hash":"bdf31df5623cdbe4d6629c1d602cad7a15e5cf78","modified":1647083473218},{"_id":"node_modules/hexo-theme-yun/source/js/hexo-theme-yun.js","hash":"b93cfddf54ac5ab542ae7fbb19416a89629be6e0","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/source/js/gallery-decrypt.js","hash":"ce7bf147867972a0f9e903eebf66b7e0f0145f61","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/source/js/chunk-YZ7E3ATC.js","hash":"5bb1683531dd823bb4de8b6541f0290d46006320","modified":1647083473218},{"_id":"node_modules/hexo-theme-yun/source/js/utils.js","hash":"36ec1d14c7537ad402e577d5deea7c09160197f8","modified":1647083473230},{"_id":"node_modules/hexo-theme-yun/source/js/say.js","hash":"59c8436cecab357b196c37fe0345e932e7f74dbe","modified":1647083473230},{"_id":"node_modules/hexo-theme-yun/source/js/sidebar.js","hash":"ee176346d586bebbd146f157c23f9d367d5499a4","modified":1647083473230},{"_id":"node_modules/hexo-theme-yun/source/css/README.md","hash":"9f65c9d90a2764bd7b1a32cabc7013bfd3285594","modified":1647083473493},{"_id":"node_modules/hexo-theme-yun/source/css/hexo-theme-yun.styl","hash":"9d7a11fc1d8196812907fc4a0557ffd10420c39c","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/js/pjax.js","hash":"4d59377e0b830db741c2786d4ccbb2f5498ee13e","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/src/.vscode/settings.json","hash":"71ea8c8a578214ef15ae5530b4d745f59aab2ac7","modified":1647083473234},{"_id":"node_modules/hexo-theme-yun/src/dist/hexo-theme-yun.js","hash":"4470ce6dce40c74905b9410e07949d4b046372e2","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/src/dist/pjax.js","hash":"41d57a781bef30d2d12253509152e437ffd328ac","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/src/dist/utils.js","hash":"ac24669143fd31ea625e692599562e97484b79ac","modified":1647083473230},{"_id":"node_modules/hexo-theme-yun/src/source/hexo-theme-yun.ts","hash":"dcd7d7c5f88a334d298b227ba127d96e3293a3aa","modified":1647083473883},{"_id":"node_modules/hexo-theme-yun/src/dist/chunk-HJP66R6O.js","hash":"e14e05eaf2c759b7d77906692db89cc4584cc142","modified":1647083473218},{"_id":"node_modules/hexo-theme-yun/src/source/gallery-decrypt.ts","hash":"461dcbe6790babb2001ef6ac413a84c066a30f97","modified":1647083473883},{"_id":"node_modules/hexo-theme-yun/layout/_widget/back-to-top.pug","hash":"c8bffdede2cbe8dcb2e4b903d1a9f4a793aa9650","modified":1647083473503},{"_id":"node_modules/hexo-theme-yun/src/source/sidebar.ts","hash":"004473305b49aa2db5bbfe91695ae24828dbf3fc","modified":1647083473893},{"_id":"node_modules/hexo-theme-yun/src/source/utils.ts","hash":"a33bf7980de56421906a25364d94bec057d46f42","modified":1647083473893},{"_id":"node_modules/hexo-theme-yun/src/source/say.ts","hash":"975eb74de51fbc8ec188039259981160525b745a","modified":1647083473893},{"_id":"node_modules/hexo-theme-yun/src/source/pjax.ts","hash":"bc5c9aae476a4d3f629300c73a9e0634114b38b9","modified":1647083473893},{"_id":"node_modules/hexo-theme-yun/layout/_widget/notice.pug","hash":"780a10dbf308022790c58a4d2117dc2f48581531","modified":1647083473553},{"_id":"node_modules/hexo-theme-yun/layout/_widget/cloud.pug","hash":"8903d1311bf5f68dcc23e520cb4f1e4385aff70d","modified":1647083473513},{"_id":"node_modules/hexo-theme-yun/layout/_widget/index.pug","hash":"4d1a35e4e0dc485733b0697d073d4f56afb7c1a2","modified":1647083473533},{"_id":"node_modules/hexo-theme-yun/layout/_widget/mourn.pug","hash":"22fab84749be6a28814e4d79fb074a31dee44e1b","modified":1647083473553},{"_id":"node_modules/hexo-theme-yun/layout/_mixin/page-header.pug","hash":"7ab9c1a6099eda3a64f355caa4d8fac5deff94c6","modified":1647083473646},{"_id":"node_modules/hexo-theme-yun/layout/_widget/aplayer.pug","hash":"45675643a8d5e64117f94612e517ce4dff6ca053","modified":1647083473503},{"_id":"node_modules/hexo-theme-yun/layout/_widget/say.pug","hash":"e02ffa7b837e3ff387d0cc888b9fed39c717628b","modified":1647083473673},{"_id":"node_modules/hexo-theme-yun/layout/_mixin/icon.pug","hash":"18ee2c33b4e6ef71c31d7955f9a20789fe6aa9e4","modified":1647083473530},{"_id":"node_modules/hexo-theme-yun/layout/_mixin/index.pug","hash":"378b5ccf052e951ee130d2ff56245e8faa7e020f","modified":1647083473533},{"_id":"node_modules/hexo-theme-yun/layout/_mixin/post-categories.pug","hash":"d353f980d65918e8c04f892959b004e4904ce543","modified":1647083473653},{"_id":"node_modules/hexo-theme-yun/layout/_mixin/post-tags.pug","hash":"b36dc6e1be7eede047f1f355bd4d095078b342d2","modified":1647083473663},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/aplayer.pug","hash":"642445a227e8b702be443958b49901d7c884555f","modified":1647083473493},{"_id":"node_modules/hexo-theme-yun/layout/_mixin/post-collapse.pug","hash":"741195a5a29ecb5863b1fd0c3b203d960aae05c1","modified":1647083473653},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/iconify.pug","hash":"03121fc0ae99dcf9ae9039beb1a6b26bd289c988","modified":1647083473533},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/lightgallery.pug","hash":"30f493d3780e0f928554d2adb8094c8e07c39a94","modified":1647083473543},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/google-tagmanager.pug","hash":"01724665b723aaa1b5fc3a63e3b538970efcd13c","modified":1647083473528},{"_id":"node_modules/hexo-theme-yun/layout/_mixin/post-meta.pug","hash":"31b90b74399074814475fdbae2a4666891d452e0","modified":1647083473663},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/cdn.pug","hash":"2022e2664912fdbfc0d74e83cbed57e228fa33a1","modified":1647083473513},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/index.pug","hash":"c7ca05ff19e71b141ecfbe031a63e225178c2eec","modified":1647083473533},{"_id":"node_modules/hexo-theme-yun/layout/_partial/extended.pug","hash":"185c2238e8678ff9cb32a7b14c144a1f14dd5f92","modified":1647083473513},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/pjax.pug","hash":"4c137fe0ba8cac806f5c9a4ca723c0bc233ca8da","modified":1647083473653},{"_id":"node_modules/hexo-theme-yun/layout/_partial/banner.pug","hash":"ec089f56b2c37054223734ea9161d9b6e5ae0373","modified":1647083473503},{"_id":"node_modules/hexo-theme-yun/layout/_partial/background.pug","hash":"2c369cbdbfd9c9c1fa31a860a77617c4d33e5e21","modified":1647083473503},{"_id":"node_modules/hexo-theme-yun/layout/_partial/footer.pug","hash":"288d232e66c97dfbf870cb3bd4ffc2c81e387bdc","modified":1647083473513},{"_id":"node_modules/hexo-theme-yun/layout/_partial/pagination.pug","hash":"b55b6a99b105447b4a6c982fa258680a2a9a34a9","modified":1647083473653},{"_id":"node_modules/hexo-theme-yun/layout/_partial/head.pug","hash":"911d9bf064ba1e9e646fb1d382eae5b30a067115","modified":1647083473530},{"_id":"node_modules/hexo-theme-yun/layout/_partial/layout.pug","hash":"311eca2b2c42deafb183fdf600984a35bb0bc57b","modified":1647083473543},{"_id":"node_modules/hexo-theme-yun/layout/_partial/recent-posts.pug","hash":"80538fd5a3ae45d7304e083c274fdf6710dc32c0","modified":1647083473663},{"_id":"node_modules/hexo-theme-yun/source/js/comments/disqus.js","hash":"4073464ce42643d9571211b1443af61fc78ec0d1","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/source/js/comments/waline.js","hash":"090fc554d82400dca9ae6a2806be48c111b90b3e","modified":1647083473230},{"_id":"node_modules/hexo-theme-yun/layout/_partial/sidebar.pug","hash":"b15fa6fc27091b6bd1cf68368879d8d2f5428f55","modified":1647083473673},{"_id":"node_modules/hexo-theme-yun/source/js/analytics/leancloud-visitors.js","hash":"89952ef9eb5fe84c856068a6e6c274e396f74dd5","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/source/js/search/algolia-search.js","hash":"aa26c979800de87ecfd9d0ba2ae7e238da2389ba","modified":1647083473213},{"_id":"node_modules/hexo-theme-yun/source/js/search/local-search.js","hash":"db5cbac019bd86c47cac02e6dba1dfb1861ef31f","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/source/js/ui/banner.js","hash":"c73ce4b3021bebf1a264e481dbe9a8a1ccd87d3b","modified":1647083473213},{"_id":"node_modules/hexo-theme-yun/source/js/ui/fireworks.js","hash":"859b09a6065ea1b4f02f2974e590e44cc13fccc9","modified":1647083473223},{"_id":"node_modules/hexo-theme-yun/source/css/_components/card.styl","hash":"1e5f8da293d53c6f352aa17fc625f88bd0840fa6","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_components/button.styl","hash":"3315fc12b1b7659a06120b042a1a2e87a839ebe1","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_extend/albums.styl","hash":"1e7c7730c89b6d81da37f6565239679b5075234b","modified":1647083473683},{"_id":"node_modules/hexo-theme-yun/source/css/_components/scrollbar.styl","hash":"2d735d019b58a1e6fea297e0027c33a4a7bc1858","modified":1647083473863},{"_id":"node_modules/hexo-theme-yun/source/css/_extend/girls.styl","hash":"e83c8b1219d0117bc342c40030e106b21245dddf","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_global/dark.styl","hash":"1bb7e112f388f681199a37fabfdc1ec1544b9afd","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_global/index.styl","hash":"6ee9d2bd59706e79e8932bcfc09d86c124467452","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_components/ui.styl","hash":"8ef28ee3363f3676c9327a6d163032a003520f40","modified":1647083473873},{"_id":"node_modules/hexo-theme-yun/source/css/_global/reset.styl","hash":"d1640eb4f76a3cf792c5149e93c42c85da5a29b2","modified":1647083473863},{"_id":"node_modules/hexo-theme-yun/source/css/_layout/footer.styl","hash":"ed3afcddad7358ebd89f01846157e26a586e7adf","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_layout/page.styl","hash":"6ec814a0fccf73a22ba6b94f6d4bba889cbaf0b5","modified":1647083473708},{"_id":"node_modules/hexo-theme-yun/source/css/_layout/main.styl","hash":"2c39ba5d789224bdece3f7c16bc7a82b3e899bf4","modified":1647083473708},{"_id":"node_modules/hexo-theme-yun/source/css/_layout/links.styl","hash":"3174cf42a1f79f814ea0a14798f6c5fe28b5dda9","modified":1647083473703},{"_id":"node_modules/hexo-theme-yun/source/css/_layout/post.styl","hash":"2d495981c7456095ae62f97e9c032e1f3fb03cda","modified":1647083473863},{"_id":"node_modules/hexo-theme-yun/source/css/_layout/banner.styl","hash":"488a1078c9a417e9bf0af80e897d12e7d1530a9a","modified":1647083473683},{"_id":"node_modules/hexo-theme-yun/source/css/_layout/pagination.styl","hash":"a4da4433f5c11b4de36782b7dac059bf67dde938","modified":1647083473708},{"_id":"node_modules/hexo-theme-yun/source/css/_helper/index.styl","hash":"a137adf7cb787fbacb9e37101d546eccf365aadc","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_widget/notice.styl","hash":"1d68860529a4fd8d3f63d2f257ed32b4e0f1167f","modified":1647083473708},{"_id":"node_modules/hexo-theme-yun/source/css/_widget/index.styl","hash":"a740126826a0ae9a1a2860fbb9c8d805d006aad6","modified":1647083473703},{"_id":"node_modules/hexo-theme-yun/source/css/_widget/say.styl","hash":"c47dd38477c08d31e0813610263200322e8f5ebe","modified":1647083473863},{"_id":"node_modules/hexo-theme-yun/source/css/_widget/back-to-top.styl","hash":"5898b0c6c36fd1d2ff5408ca098e345ebf04008c","modified":1647083473683},{"_id":"node_modules/hexo-theme-yun/source/css/_mixins/base.styl","hash":"2531c22a33aa929dd6bf6c1b9975efc0a70e4a8d","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_widget/comment.styl","hash":"65c0fa4add73c919ea4c8f8c03321e1781f95b4e","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_variables/_code.styl","hash":"2674ad7562f5b6f42d26291e8f5ead7f501a3c46","modified":1647083473683},{"_id":"node_modules/hexo-theme-yun/source/css/_variables/_colors.styl","hash":"5842436c6b74763866a1bc38d1c7cfed715e9e22","modified":1647083473683},{"_id":"node_modules/hexo-theme-yun/source/css/_variables/var.styl","hash":"849841036c26b418e80f57b3e1c5d8128907cafb","modified":1647083473873},{"_id":"node_modules/hexo-theme-yun/source/css/_variables/_base.styl","hash":"0288e3196318b116f991b043486fbc0b4b0bc579","modified":1647083473683},{"_id":"node_modules/hexo-theme-yun/src/source/search/algolia-search.ts","hash":"ce7424ec5d691c2bc3189e396f8c83d2594c6150","modified":1647083473873},{"_id":"node_modules/hexo-theme-yun/src/source/comments/waline.ts","hash":"6573f476c38e183b1cb02e601dc83771ee3c699e","modified":1647083473903},{"_id":"node_modules/hexo-theme-yun/src/source/ui/banner.ts","hash":"06c13048fb987a7baa6eee04fc6ae186b06954b2","modified":1647083473873},{"_id":"node_modules/hexo-theme-yun/src/source/search/local-search.ts","hash":"e173724650a37f854dd59104beb1b8de01faceeb","modified":1647083473893},{"_id":"node_modules/hexo-theme-yun/src/source/comments/disqus.ts","hash":"8674af1b65a5abd6457ef76ec8380fe5e6bc467e","modified":1647083473883},{"_id":"node_modules/hexo-theme-yun/layout/_widget/search/algolia-search.pug","hash":"df52fcef82e01d1b1d96dad2df516acffc298435","modified":1647083473493},{"_id":"node_modules/hexo-theme-yun/layout/_widget/search/local-search.pug","hash":"cfa6110862e1940f861d2bb122333634225de580","modified":1647083473553},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/adsense/google-adsense.pug","hash":"ae63305d776ebec0d88f91197b5c78cdaa401585","modified":1647083473528},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/analytics/busuanzi.pug","hash":"a2503ff7bbaf05e9205fd36177f803cf91021e05","modified":1647083473503},{"_id":"node_modules/hexo-theme-yun/src/source/ui/fireworks.ts","hash":"17783643f514d2568c2f9121f43754dc12c29fbc","modified":1647083473883},{"_id":"node_modules/hexo-theme-yun/src/source/analytics/leancloud-visitors.ts","hash":"396c4a2336b57ef25e8a932db2ec60b0f26baf8f","modified":1647083473893},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/analytics/leancloud-visitors.pug","hash":"e7debe84507235c2a92a78e2367727a061e94ba1","modified":1647083473543},{"_id":"node_modules/hexo-theme-yun/layout/_widget/search/index.pug","hash":"05271074172be21c014cd862a25f5112d0b3710c","modified":1647083473533},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/math/index.pug","hash":"9a61d4923fad7c778f0bf2ce8c81744b126e6a1f","modified":1647083473533},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/math/katex.pug","hash":"f296f8be36bf95034c7a3536e9203874dfabfaed","modified":1647083473543},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/mermaid/mermaid.pug","hash":"d691390d91d298dc705a828897d2e4357d6794f5","modified":1647083473553},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/mermaid/index.pug","hash":"52b8567a5527fe85b41ac2a0a6adb113ba6b7205","modified":1647083473533},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/giscus.pug","hash":"f4c1eeb652839300b7358a117cb89cee72fa257b","modified":1647083473523},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/disqusjs.pug","hash":"dea47f1db45f60f9c03498f628591f0197e3df0c","modified":1647083473513},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/github-discussions.pug","hash":"84ba9bc5f4c1daf9636648c181c9a781706fb18d","modified":1647083473523},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/github-issues.pug","hash":"a2209c9d873b88a830c518d80a754fe2068e0b55","modified":1647083473523},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/analytics/google-analytics.pug","hash":"3cb12c4ec3f5dbaeccf1a63a6aaa9e31dcaf926e","modified":1647083473528},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/livere.pug","hash":"b81ed4fb8a0ca32ccfb8e22c37ac48e4be1f4152","modified":1647083473553},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/minivaline.pug","hash":"9df0dfb60176a2c53c2e76a94bfa107238853a3d","modified":1647083473553},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/disqus.pug","hash":"71e78e45545ac6872ca921fe84af15b8e797e8e6","modified":1647083473513},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/twikoo.pug","hash":"aca9a0970a95290bb4e3e584253cd024517b50f5","modified":1647083473673},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/valine.pug","hash":"b6803c17e37d5e6eeb8d5315e85a36a8bb4e7915","modified":1647083473673},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/utterances.pug","hash":"712f893469f258e969806e1b55d0d2ac926761be","modified":1647083473673},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/seo/baidu-push.pug","hash":"0669b8c7e54c0a80e1f36e720e299cf0cd1182fe","modified":1647083473503},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/waline.pug","hash":"6b8fdd8368af743b29a8aeb27506cd9c52d950cc","modified":1647083473683},{"_id":"node_modules/hexo-theme-yun/layout/_partial/post/post-content.pug","hash":"eb5a9b48e1a2172af74ac1b4c3851d7c6a9fc6f8","modified":1647083473653},{"_id":"node_modules/hexo-theme-yun/layout/_third-party/comments/index.pug","hash":"ec6e1d4498cdec56b384216d3efccfdcc617e57b","modified":1647083473533},{"_id":"node_modules/hexo-theme-yun/layout/_partial/post/post-nav.pug","hash":"a951544cfa6127f3284e221cdf6c3e2dcb9801c9","modified":1647083473663},{"_id":"node_modules/hexo-theme-yun/layout/_partial/post/post-schema.pug","hash":"ec85079174da20c9f608b142e7fda2c28a9b1dac","modified":1647083473663},{"_id":"node_modules/hexo-theme-yun/layout/_partial/sidebar/info.pug","hash":"a4db9946c319629ecc1983375afdcf243cfc7847","modified":1647083473543},{"_id":"node_modules/hexo-theme-yun/layout/_partial/post/post-edit.pug","hash":"09d21451a8464047777dcbda09c14b1140396dd8","modified":1647083473663},{"_id":"node_modules/hexo-theme-yun/source/css/_extend/tags/index.styl","hash":"1c4ae0e519bb8629425235f2efd80addfc2bee93","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_extend/tags/prompt.styl","hash":"553d59840e1c9217b49b902cfe1ac520bbf71e5c","modified":1647083473863},{"_id":"node_modules/hexo-theme-yun/source/css/_components/sidebar/sidebar-nav.styl","hash":"d8feec6f13ca9bd714e4fe7189abf1907848efef","modified":1647083473863},{"_id":"node_modules/hexo-theme-yun/layout/_partial/post/post-copyright.pug","hash":"a2415fb36a0dffbe57bf32cd2cfeace11cbaed6b","modified":1647083473663},{"_id":"node_modules/hexo-theme-yun/layout/_partial/post/reward.pug","hash":"ceccfe15e3be500274fda527a6d6234ffddf93b8","modified":1647083473673},{"_id":"node_modules/hexo-theme-yun/source/css/_components/sidebar/hamburger.styl","hash":"0fa240e8a71fdad14d3fd6b3fd49cf697d4c8153","modified":1647083473693},{"_id":"node_modules/hexo-theme-yun/source/css/_components/sidebar/sidebar.styl","hash":"c1266c1039f6ac26884f4619265b29bdb1a9e31c","modified":1647083473873},{"_id":"node_modules/hexo-theme-yun/source/css/_components/sidebar/site-overview.styl","hash":"620772d3b2da06d94ef6fb25c6aee3c4eb48767b","modified":1647083473873},{"_id":"node_modules/hexo-theme-yun/source/css/_components/sidebar/sidebar-toc.styl","hash":"b4b42a6dc949b52b5a861239905d333e1db6c64f","modified":1647083473863},{"_id":"node_modules/hexo-theme-yun/source/css/_components/post/post-card.styl","hash":"048208163b5554110708b9c791fd64468b76f8ca","modified":1647083473708},{"_id":"node_modules/hexo-theme-yun/source/css/_components/post/post-collapse.styl","hash":"6741c225a37e7e121d4159f129b7024402a8eeec","modified":1647083473713},{"_id":"node_modules/hexo-theme-yun/source/css/_components/post/post-codebloack.styl","hash":"c3cf80ace92d9ba5711cdf487f818cd31598866c","modified":1647083473708},{"_id":"node_modules/hexo-theme-yun/source/css/_components/post/post-markdown.styl","hash":"d7a5002f2f00287f55c0d9f2f8081cc8bd742786","modified":1647083473713},{"_id":"node_modules/hexo-theme-yun/source/css/_components/post/post-reward.styl","hash":"f69f5770e0908a8e8a0931f67e2417b0e1692613","modified":1647083473863},{"_id":"node_modules/hexo-theme-yun/source/css/_components/post/post-header.styl","hash":"2e674b76b47b3e6226269fe357d8b937b7a007a8","modified":1647083473713},{"_id":"node_modules/hexo-theme-yun/source/css/_components/post/post-nav.styl","hash":"a9e5f18cee94944c43b0c09d6ec840b78c1f1aa0","modified":1647083473863},{"_id":"node_modules/hexo-theme-yun/source/css/_widget/search/index.styl","hash":"c396e3205eb672c96fdb93c12ff66e730ab323ee","modified":1647083473703},{"_id":"node_modules/hexo-theme-yun/source/css/_widget/search/local-search.styl","hash":"bcb8e5d593d49e370312e17eadf9f1e13aa22829","modified":1647083473703},{"_id":"source/_posts/Python-WordCloud/haha-1667472516501-1-1667473201885-3.png","hash":"b4d221d56079000625b966a0f1b4984e99285359","modified":1667473201892},{"_id":"node_modules/hexo-theme-yun/source/css/_widget/search/algolia-search.styl","hash":"69916b23d54859160c4fda5ee809b8375fc56151","modified":1647083473683},{"_id":"source/_posts/Anaconda-env/image-20220722142107169.png","hash":"fa593f781433fd26fb963733462a61eac8ee384a","modified":1667281980487},{"_id":"source/_posts/python-environment/image-20220722142107169.png","hash":"fa593f781433fd26fb963733462a61eac8ee384a","modified":1667281988456},{"_id":"source/_posts/Hexo_article/traffic-light.gif","hash":"0c18d7a2a137b37b0af5b1c647aa12a3393dec64","modified":1646568184288},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 131459.png","hash":"1ae192721cea4c3d29ffbb4b578dfa8e67040c60","modified":1652079007228},{"_id":"source/_posts/Anaconda-env/image-20220722141130992-1663410673096-7.png","hash":"d5d12cd0f9deaf45cd042d77fc2dedc108f63860","modified":1667281980487},{"_id":"source/_posts/Python-WordCloud/photo2.jpg","hash":"53b139abdca01b2e9686ab27d3c632254a89d737","modified":1667473161825},{"_id":"source/_posts/python-environment/image-20220722141130992.png","hash":"d5d12cd0f9deaf45cd042d77fc2dedc108f63860","modified":1667281988440},{"_id":"source/_posts/8-puzzle/35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628.gif","hash":"29e4db82f53e9c0a37101f66056be209d03094a3","modified":1648978956060},{"_id":"source/_posts/STM32-Introduction/b6b59519626c1efe2aa367207f45ce83.mp4","hash":"685148541279c1e228e78d993becd7a8d0da9b08","modified":1652106410918},{"_id":"source/_posts/Python-WordCloud/haha.png","hash":"e33bef0a2d683fd67467341cb9a334dc63848dcd","modified":1667473161825},{"_id":"source/_posts/Hexo_article/2d6f869662e83398f06070e2a14f838.jpg","hash":"e891f3a3b28cbefa79db0d9fd17939f3df865836","modified":1646568184205},{"_id":"source/image/head.jpg","hash":"91d9c38a4f5864f68119064c8e61227e6b7719aa","modified":1646568184315},{"_id":"source/_posts/Hexo_article/884019afce82603bd8bc8fd4e531839.jpg","hash":"464c9842be81f3cc1cb18df887b8f497216e1d80","modified":1646568184283},{"_id":"public/search.xml","hash":"ccbb4431ae5bc84acebafe1492a1be8dddf7ce3a","modified":1669862127614},{"_id":"public/tags/index.html","hash":"2e8d1bc8f6f2167a98e1516b687205dd0f5058fd","modified":1669862127614},{"_id":"public/categories/index.html","hash":"fec0e127cc8c267e69c7a520477bda1c2cd22c21","modified":1669862127614},{"_id":"public/about/index.html","hash":"f922ad9e9333d13eadca4ba59a830694e6ab8745","modified":1669862127614},{"_id":"public/archives/index.html","hash":"9948d58363a727feaa20c4e6729b99749af4b373","modified":1669862127614},{"_id":"public/archives/page/2/index.html","hash":"50383302b6ff5356c88f613079c6cda95c340b01","modified":1669862127614},{"_id":"public/archives/page/4/index.html","hash":"31fad05078215679b0a94d6e38c6aad0de5f56bd","modified":1669862127614},{"_id":"public/archives/page/5/index.html","hash":"c59cd659dd5989c5b2cb22c82e6087b1956ec432","modified":1669862127614},{"_id":"public/archives/2022/index.html","hash":"c93e010c45ba0ce7372ccd1b7994d86d90c0a653","modified":1669862127614},{"_id":"public/archives/2022/02/index.html","hash":"20af612377dec921027729ba4136892e42dce909","modified":1669862127614},{"_id":"public/archives/2022/page/5/index.html","hash":"412c9c0679aea7e99236d3b9d3ebebabc71cae72","modified":1669862127614},{"_id":"public/archives/2022/page/4/index.html","hash":"9c227393765649d1a20d4d4fc47b363a25655676","modified":1669862127614},{"_id":"public/archives/2022/03/index.html","hash":"8dcb5a33e201a150617f9c5a03f911d28f656648","modified":1669862127614},{"_id":"public/archives/2022/05/index.html","hash":"b8bfc4dc161b15881e7f7216f20b7c7154ebd2fb","modified":1669862127614},{"_id":"public/archives/2022/04/index.html","hash":"2fc89043d58f2bdb8af79e1351d15ea62c3c3e9c","modified":1669862127614},{"_id":"public/archives/2022/07/index.html","hash":"44e0f0dbc2f0e8c37cd4f16602fb10da2ce390ab","modified":1669862127614},{"_id":"public/archives/2022/09/index.html","hash":"81a85b6da18811e9b39df1c53ff0207dea623953","modified":1669862127614},{"_id":"public/archives/2022/11/index.html","hash":"e8c09468bf1cec40d1ef6c21d41eb5c930a12e53","modified":1669862127614},{"_id":"public/archives/2022/10/index.html","hash":"061268cffd8873b3911041b69081b97c667b7968","modified":1669862127614},{"_id":"public/archives/2022/12/index.html","hash":"78b5c375d185d427b33fef3d9b48bcb46365f5a9","modified":1669862127614},{"_id":"public/categories/神学/index.html","hash":"119dcacd7d0870c1ae5461679c31d3741aab2b53","modified":1669862127614},{"_id":"public/categories/Android-Studio/index.html","hash":"7792ba017ee80500979f7f19ac9cb5c89f44f0c9","modified":1669862127614},{"_id":"public/categories/Python/index.html","hash":"edf45013dd5990f5621cf0aff7192fbe60a5b3b0","modified":1669862127614},{"_id":"public/categories/algorithm/index.html","hash":"be92281c52b8cfff4c1035402c59c1d0e944a46d","modified":1669862127614},{"_id":"public/categories/计算机网络/index.html","hash":"0fa317a0935ed08c8f3175eef9d79093dfa3ab0c","modified":1669862127614},{"_id":"public/categories/计算机网络/page/2/index.html","hash":"3032aa8a974f352186f88e91229abf448d67ff49","modified":1669862127614},{"_id":"public/categories/Hexo搭建/index.html","hash":"56dc3e5db5d838bb7db47cbef99b05f400612be1","modified":1669862127614},{"_id":"public/categories/MCU/index.html","hash":"c73d0964bd0983a06658e668363b0e011cf93393","modified":1669862127614},{"_id":"public/tags/四维空间/index.html","hash":"9dcc9affd15717b13fa587025f3f49add95955e3","modified":1669862127614},{"_id":"public/categories/python/index.html","hash":"2ef681e0ad93da09d0bfcf9094c4769c25b4d6a1","modified":1669862127614},{"_id":"public/tags/algorithm/index.html","hash":"2372d6ba8f72cc7d6b4176070bfe9159f2d252da","modified":1669862127614},{"_id":"public/tags/anaconda/index.html","hash":"a9f0c26222781a29b38b238d6b5f57c78350e2b2","modified":1669862127614},{"_id":"public/tags/BFS/index.html","hash":"693a7df13b281b90625a3f057d694dfa00e5e0ab","modified":1669862127614},{"_id":"public/tags/Python/index.html","hash":"6f42b761ddde61ce019aa189c055cb1e5f064b2d","modified":1669862127614},{"_id":"public/tags/Java/index.html","hash":"558f266a992b1aed0bcd30d300dc1a3a90e0b62a","modified":1669862127614},{"_id":"public/tags/Android-Studio/index.html","hash":"ffa403a20862c4534f149e71f1802e6065380f54","modified":1669862127614},{"_id":"public/tags/Kotlin/index.html","hash":"b9be0c934fded57dd03e6cf93da3696197f526b8","modified":1669862127614},{"_id":"public/tags/search/index.html","hash":"b4e0f8eb1e32e7d618a6b6f55d2bb49f785217df","modified":1669862127614},{"_id":"public/tags/DFS/index.html","hash":"877d13f85110ab7998495d213c1dce55775c1395","modified":1669862127614},{"_id":"public/tags/BM/index.html","hash":"015fb27f6235d2f4934073849b4c6b1e3684c629","modified":1669862127614},{"_id":"public/tags/DP/index.html","hash":"200da835cbe33e7d28f7e463a99b265edbcb7db7","modified":1669862127614},{"_id":"public/tags/背包问题/index.html","hash":"dd6fc058673e516be2891473cc0c37ac8544d3ae","modified":1669862127614},{"_id":"public/tags/computer-network/index.html","hash":"c814a6f7170c799fa02e72ffc08b4d3c7db09609","modified":1669862127614},{"_id":"public/tags/CUDA/index.html","hash":"37fa2ad82cab377d4c06ad47699bd91b258c4664","modified":1669862127614},{"_id":"public/tags/Python-Socket-Multi-thread/index.html","hash":"226cae663d85fd0cb27500cc5222adaed537259d","modified":1669862127614},{"_id":"public/tags/Graph/index.html","hash":"a30cdaf553c1e9c4070a409f24f07c584a691ef6","modified":1669862127614},{"_id":"public/tags/Hexo/index.html","hash":"def79bc089177c8538c83450d09b41ff305bd889","modified":1669862127614},{"_id":"public/tags/VPN/index.html","hash":"c3a5e8028a0f35f230561510e584d145c6606701","modified":1669862127614},{"_id":"public/tags/IPsec/index.html","hash":"e9bea0e5f2901d6be7a8e4bc4d50908bc69edd75","modified":1669862127614},{"_id":"public/tags/Computer-Network/index.html","hash":"728cc29039454d807212ff6250a443cc460b050d","modified":1669862127614},{"_id":"public/tags/KPM/index.html","hash":"40bc51608f8f39bc44c8d7aff49fe29dab4c6d35","modified":1669862127614},{"_id":"public/tags/PERT/index.html","hash":"63870c106ca609f369a07814b19c624129ab8bd0","modified":1669862127614},{"_id":"public/tags/WordCloud/index.html","hash":"5841d52f10157fa391dfc361bd01e57ed3eb92ea","modified":1669862127614},{"_id":"public/tags/json/index.html","hash":"1b5af71f46e489a47a7cfff0226383b60a5f7230","modified":1669862127614},{"_id":"public/tags/科学上网/index.html","hash":"256c7f31d46f0671960d696b86a708862abbf596","modified":1669862127614},{"_id":"public/tags/R2S/index.html","hash":"612050be307c1644c40754dcd63d25dfbe5d7f29","modified":1669862127614},{"_id":"public/tags/软路由/index.html","hash":"84787a0b211668112d99c8fd898b81d5053f95cb","modified":1669862127614},{"_id":"public/tags/STM32/index.html","hash":"25866ef6901680116de0f8eda455db894a094a63","modified":1669862127614},{"_id":"public/tags/MCU/index.html","hash":"6dd8cfdbe10a046249823187931e9fadb01f35d4","modified":1669862127614},{"_id":"public/tags/嵌入式/index.html","hash":"abcd1b55caa057ef2e746ed1cf9977678eb77846","modified":1669862127614},{"_id":"public/tags/Binary-tree/index.html","hash":"d2896ad8b1868451477b8740ac8743a80e32928b","modified":1669862127614},{"_id":"public/tags/python/index.html","hash":"d25c00eaf314f3a4038d185e7f8d5cd86777bdae","modified":1669862127614},{"_id":"public/tags/Socket/index.html","hash":"f18e1dcb98e84b78a98d5c9b126df0ace62f17c0","modified":1669862127614},{"_id":"public/tags/Server/index.html","hash":"6e7b9e47c926d923d2e86a9117975746c249ac6d","modified":1669862127614},{"_id":"public/tags/Client/index.html","hash":"0205a426448dfd703b1e3154ebb3aab020c1d26f","modified":1669862127614},{"_id":"public/page/5/index.html","hash":"30b12a6fdc76cd8b4278dc633d132c172f9bb2e8","modified":1669862127614},{"_id":"public/2022/12/01/socket-multi-2/index.html","hash":"1ffed6ab0f9df3b161372ac6527bfc1982fbb070","modified":1669862127614},{"_id":"public/2022/11/30/Crawl-multi/index.html","hash":"6c2a7eabf4785b70369581939496f66be7d6edc7","modified":1669862127614},{"_id":"public/2022/11/25/Android-Studio-7/index.html","hash":"daff1999cac068929ed39696b91a46b00e25a8f1","modified":1669862127614},{"_id":"public/2022/11/21/Android-Studio-6/index.html","hash":"57107c024878c791774b5d6faa948472b7299fde","modified":1669862127614},{"_id":"public/2022/11/11/socket-multi-1/index.html","hash":"103b92d474144b89126d65e3b5a03c2bee45bfbe","modified":1669862127614},{"_id":"public/2022/11/09/Android-Studio-5/index.html","hash":"24579971ee754bf0c77a0c344c4b5968be7f4962","modified":1669862127614},{"_id":"public/2022/11/03/Python-WordCloud/index.html","hash":"9c4c0d8537cedfb71545857649bd8657cfc8f183","modified":1669862127614},{"_id":"public/2022/10/14/socket-program-2/index.html","hash":"2c308e7ff242ce12351a75a8050766c74080dad9","modified":1669862127614},{"_id":"public/2022/10/14/socket-program-3/index.html","hash":"eea0453f6458dea7d6992cb766bf9f6d447bc272","modified":1669862127614},{"_id":"public/2022/10/11/Android-Studio-4/index.html","hash":"c42306668d1414702d1b3a560f75cda0b4d039f6","modified":1669862127614},{"_id":"public/2022/09/27/Android-studio-2/index.html","hash":"f0b54dfa54c7946fb356213cad78954277d117ba","modified":1669862127614},{"_id":"public/2022/10/10/Android-Studio-3/index.html","hash":"f54ae2e390f741db99d24f9d3347679f3728d9ae","modified":1669862127614},{"_id":"public/2022/09/17/CUDA-install/index.html","hash":"f5a424e1a5ffd6b2da533abc9c8ff50cb37ad6d3","modified":1669862127614},{"_id":"public/2022/09/17/socket-program-1/index.html","hash":"4a0391e45e43181c661e2baad898265784458021","modified":1669862127614},{"_id":"public/2022/09/17/Andriod-Studio-1/index.html","hash":"cb8a8517213faa12a2e9a5313ae4ef1dce6ce2ec","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/index.html","hash":"41ca626dda86452e788c020b6b373efd57fae966","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/index.html","hash":"258a61c5f1ced13dd5a8166292488e40bcfc7f12","modified":1669862127614},{"_id":"public/2022/07/21/Python-json/index.html","hash":"b9f93df75afd4aebc7b0a3e0efa233a693532bee","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/index.html","hash":"ff55ae9f0890ecb2ffa6c247252b849e483b86e2","modified":1669862127614},{"_id":"public/2022/04/14/KPM-algorithm/index.html","hash":"d48f5c722e3e8b2acfeb466b6d0276947d6e82dc","modified":1669862127614},{"_id":"public/2022/04/09/4-dimensional/index.html","hash":"e38ddd891fc45c61f3712f87ff633a011cb26f50","modified":1669862127614},{"_id":"public/2022/04/08/CN-5/index.html","hash":"15261476e2dd611eeb077a6dc3723fe0e7f773aa","modified":1669862127614},{"_id":"public/2022/04/08/CN-6/index.html","hash":"e3902cfd2855b1d947163398ccc1fb891453c636","modified":1669862127614},{"_id":"public/2022/04/08/CN-1/index.html","hash":"079e519fc63b6dcd6c879fff5b3448535f79973f","modified":1669862127614},{"_id":"public/2022/04/08/CN-4/index.html","hash":"ae8627bdae8a105c4a55db1d8492422195540d7d","modified":1669862127614},{"_id":"public/2022/04/08/CN-3/index.html","hash":"9f3b25c8ae22134c6631d854b1064b03a513cea7","modified":1669862127614},{"_id":"public/2022/04/08/CN-2/index.html","hash":"c145d755fffc2251375ff12159cdbb9ef85d7b1b","modified":1669862127614},{"_id":"public/2022/04/08/IPsec/index.html","hash":"b70d290ddb192c7f9ba276a7ead5ec6e6c1a04c1","modified":1669862127614},{"_id":"public/2022/04/01/8-puzzle/index.html","hash":"6d3e618f4e0d731ab84b754c05b8bf670f0a1954","modified":1669862127614},{"_id":"public/2022/03/27/BM-algorithm/index.html","hash":"d4d58536f057855a1c472f026bc6a1b38c10ccc3","modified":1669862127614},{"_id":"public/2022/03/13/PERT/index.html","hash":"500878577a7015989ffb5225dee574c7fa18e1eb","modified":1669862127614},{"_id":"public/2022/03/10/Backpack/index.html","hash":"f818b09b3d6037f918e873050e0eec86b65d75af","modified":1669862127614},{"_id":"public/2022/03/10/DFS/index.html","hash":"281fa697824f6cd401d3a4b36c1b98a0fa4d1270","modified":1669862127614},{"_id":"public/2022/03/10/BFS/index.html","hash":"a7d6ea2d18548e99c250b96f18e8b728362af03c","modified":1669862127614},{"_id":"public/2022/02/26/R2S_build/index.html","hash":"117b89372ad6b14b7e63cf15f0fae5d09e34f71f","modified":1669862127614},{"_id":"public/2022/03/09/Graph-search/index.html","hash":"aab06077655ef524f6665f796c82b8234309f787","modified":1669862127614},{"_id":"public/2022/03/08/Hexo-synchronization/index.html","hash":"0b471a8d70fc04d6e5b27519a5009181646aba73","modified":1669862127614},{"_id":"public/2022/02/25/binary_tree_1/index.html","hash":"fcd3a41eabe1565d298c39ae1f9d1e62bff1cbb2","modified":1669862127614},{"_id":"public/2022/02/24/binary_tree_2/index.html","hash":"2106f9d1015df2e63919f397794956cee2c0ddc7","modified":1669862127614},{"_id":"public/2022/02/24/Hexo_creation/index.html","hash":"41eeaafcbc746db1e7f8408a531b9075da087bc4","modified":1669862127614},{"_id":"public/2022/02/20/Hexo_article/index.html","hash":"8a51b5cefba4c3af51fc3ed0f692871e0ecaa941","modified":1669862127614},{"_id":"public/archives/page/3/index.html","hash":"3a8903a4925fb1de6825e8160c91fc417b3f1737","modified":1669862127614},{"_id":"public/archives/2022/page/3/index.html","hash":"514a1d91c43d713e2f12b933ba2dcf02c81950ba","modified":1669862127614},{"_id":"public/archives/2022/page/2/index.html","hash":"5891f2ac89505efca0100ab41712be48d0737c0c","modified":1669862127614},{"_id":"public/index.html","hash":"7702c9d855b227149ce1867fd7cb83918e1ff89b","modified":1669862127614},{"_id":"public/page/3/index.html","hash":"523f1d0a4325775a54fd470b5d55829ce816cdbf","modified":1669862127614},{"_id":"public/page/2/index.html","hash":"38b14acc0fe1efc58d72960961068aee4f369e1f","modified":1669862127614},{"_id":"public/page/4/index.html","hash":"0eccb5120e69dbc1363d461e8eff8d588dc5d7df","modified":1669862127614},{"_id":"public/favicon/seedling-line.svg","hash":"40de46a2c2adab799174cf37cb722244d57430d9","modified":1669862127614},{"_id":"public/yun.svg","hash":"aa027a0a9e7ba96c906b9fd2d9cd3f8018ff2e2d","modified":1669862127614},{"_id":"public/CNAME","hash":"5e2329bc423a886fdd08288eadb59845c3da790f","modified":1669862127614},{"_id":"public/yun.png","hash":"b8ae426fa5dd7579d23d189c222641d812c51c0a","modified":1669862127614},{"_id":"public/image/avatar.jpg","hash":"371df290b2fe0600ba933d48751ac8f2cadc0a18","modified":1669862127614},{"_id":"public/2022/04/09/4-dimensional/a601995d55609f2d9f5e233e36fbe9ea26011b3b","hash":"392a04aaaf11f561195133785a33e6b2adc1089d","modified":1669862127614},{"_id":"public/image/wechat.jpg","hash":"c7050b547d10944c3f802771962c11ab390255dc","modified":1669862127614},{"_id":"public/2022/04/09/4-dimensional/image-20220409164432423.png","hash":"0da1b92a585dd3e1de4351392bf92ba569a470a1","modified":1669862127614},{"_id":"public/2022/04/09/4-dimensional/d928ec15aeef83aade867992ee473933adb6139d","hash":"75cf57eedd6c71330a9b32b38a4533515ce6d391","modified":1669862127614},{"_id":"public/2022/04/09/4-dimensional/image-20220409164635308.png","hash":"5815dca4162a2b9b436534dcd7856101ad79bec4","modified":1669862127614},{"_id":"public/2022/04/09/4-dimensional/image-20220409165234091.png","hash":"7a7478700faa27239188afa84d5e064d4bed8bcf","modified":1669862127614},{"_id":"public/2022/04/09/4-dimensional/image-20220409164912020.png","hash":"e61cfc1eaa4dc6501708837b81ee576373a85a3a","modified":1669862127614},{"_id":"public/2022/09/17/Andriod-Studio-1/image-20220916130832425.png","hash":"fb8e4830eaff2eb4e29a288c5fbaf4f79880ffec","modified":1669862127614},{"_id":"public/2022/04/09/4-dimensional/image-20220409173308465.png","hash":"b7c1d9cf27887cbce7c3d0615ffcad7e784a8437","modified":1669862127614},{"_id":"public/2022/04/09/4-dimensional/image-20220409165723376.png","hash":"7e0378c15620e550bcc92c743fa08b5c2fa29e93","modified":1669862127614},{"_id":"public/2022/09/17/Andriod-Studio-1/image-20220916131246387.png","hash":"5a037f55eb816f97b073d6f12434f03ab1d44b00","modified":1669862127614},{"_id":"public/2022/09/17/Andriod-Studio-1/image-20220918210702397.png","hash":"750d85948261e773e04a54ff692e96d7b9335e3c","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722135753076.png","hash":"e141070a1ffdea3d1da631ab687d7f5b3a2d510a","modified":1669862127614},{"_id":"public/2022/09/17/Andriod-Studio-1/image-20220916143713242.png","hash":"c6920cff1c9f170d7b7a096fff73926fbf1516f6","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722142150620.png","hash":"4d5063b11f6ab1bee6a883229059ac7942159a2c","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722144502752.png","hash":"5322bf2ecbad99132fa25963dfdaab02cbbf25c0","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220917183015892.png","hash":"7249596f00c0d70b9a67c3570139ced29f54c530","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/QQ图片20220722134623.jpg","hash":"2f97fadb1e69f06bf953663733748e460c7d65c5","modified":1669862127614},{"_id":"public/2022/04/01/8-puzzle/R1.png","hash":"56fc9948f0a92af1fb0ccd3657d3ebeefbec69ac","modified":1669862127614},{"_id":"public/2022/10/10/Android-Studio-3/image-20221010221037424.png","hash":"564a83d1ea63eb1a4a8650d7893189ea9a4de501","modified":1669862127614},{"_id":"public/2022/10/10/Android-Studio-3/image-20221010221157489.png","hash":"3961dacbb7b470b7f047401b2c79ffc34e853f40","modified":1669862127614},{"_id":"public/2022/10/10/Android-Studio-3/image-20221010222245715.png","hash":"b108c689fa5f726bac9662435746869b64d98cf1","modified":1669862127614},{"_id":"public/2022/10/10/Android-Studio-3/image-20221010225547722.png","hash":"ebab579a90a6b12e27ca5b3062b84184eed7d1a0","modified":1669862127614},{"_id":"public/2022/10/11/Android-Studio-4/image-20221011010417986.png","hash":"15f43e583340db013706d0eddedcfc9409e7a46d","modified":1669862127614},{"_id":"public/2022/10/10/Android-Studio-3/image-20221010232513124.png","hash":"5e016fd4b34a4353dc0cdf428388544d482e4714","modified":1669862127614},{"_id":"public/2022/11/09/Android-Studio-5/image-20221109150911874.png","hash":"5bfc7ae926ebc12882d41b6dedba0b50be115a59","modified":1669862127614},{"_id":"public/2022/11/21/Android-Studio-6/image-20221121182911410.png","hash":"849e7ca14bad92fa2b2e592eae0aec6baad53c28","modified":1669862127614},{"_id":"public/2022/11/21/Android-Studio-6/image-20221121230804933.png","hash":"1e5eda6fdf2e98a9ae097450b0e3697f4084c864","modified":1669862127614},{"_id":"public/2022/11/25/Android-Studio-7/image-20221125135412770.png","hash":"ed8b416f4e5028d84c72b3a13cfe89fac6caff4d","modified":1669862127614},{"_id":"public/2022/11/25/Android-Studio-7/image-20221125135252991.png","hash":"63df314a565741fbc8f89f5b2e85bfee70613f64","modified":1669862127614},{"_id":"public/2022/11/21/Android-Studio-6/image-20221121183031659.png","hash":"f5d22f40138a6ac45113d124eef7d2cd3732ace3","modified":1669862127614},{"_id":"public/2022/09/27/Android-studio-2/image-20220927021810857.png","hash":"712c284a63a0c3dc2b00a4cbffa42ac89a10d834","modified":1669862127614},{"_id":"public/2022/09/27/Android-studio-2/image-20220927022539379.png","hash":"ac991505ebcfe995fba7ebbb3f44316229ca6d9c","modified":1669862127614},{"_id":"public/2022/09/27/Android-studio-2/image-20221031161231815.png","hash":"b03a1f07b6976ce4ac56ce9897c23a4da18bed60","modified":1669862127614},{"_id":"public/2022/09/27/Android-studio-2/image-20220927022446373.png","hash":"a716a2a5a99695941327fbbd9e15daf975b199b5","modified":1669862127614},{"_id":"public/2022/03/27/BM-algorithm/image-20220328004145309.png","hash":"7f99a2be322cdaabab3d8c8dcdbe71a399a0a98f","modified":1669862127614},{"_id":"public/2022/04/08/CN-5/image-20211211152352560.png","hash":"1853438a63a17a1589725776ff0c61c5e98cc1ca","modified":1669862127614},{"_id":"public/2022/04/08/CN-5/image-20211211154616223.png","hash":"78616478b7a24266183f085bbbbe0885e1119292","modified":1669862127614},{"_id":"public/2022/04/08/CN-5/image-20211211154625242.png","hash":"78616478b7a24266183f085bbbbe0885e1119292","modified":1669862127614},{"_id":"public/2022/04/08/CN-5/image-20211211154842458.png","hash":"95d22d0ccdd92965dfdf79ab1322aa3854cb7570","modified":1669862127614},{"_id":"public/2022/04/08/CN-3/image-20211205153202429.png","hash":"ef1b3c71950ab13fcfc97218597794cb5635494d","modified":1669862127614},{"_id":"public/2022/04/08/CN-3/image-20211205165352723.png","hash":"6fa86d1afe6e42d0e2550a9cbba836289a0bff7f","modified":1669862127614},{"_id":"public/2022/04/08/CN-3/image-20211205162300456.png","hash":"9e892eacceba60a36263bd46101f2ea6c5e66543","modified":1669862127614},{"_id":"public/2022/04/08/CN-6/image-20211207025902517.png","hash":"597743e9e973f8b0c8b3021e4a652d2a016e4e21","modified":1669862127614},{"_id":"public/2022/09/17/CUDA-install/image-20220718135956517-1663410961962-7.png","hash":"44a55ea9e79d482eca1dd1170bb03ff127fb08ca","modified":1669862127614},{"_id":"public/2022/03/09/Graph-search/image-2.png","hash":"1ea7ffb5b9854f92cd4092aa456e1d77f28aa9fc","modified":1669862127614},{"_id":"public/2022/03/09/Graph-search/image-1.png","hash":"e31a7b655c8b104176311248253c989c0c3590ee","modified":1669862127614},{"_id":"public/2022/03/09/Graph-search/image-3.png","hash":"3b8a85b9b1f6398874d48d71f702c4e53bf83d37","modified":1669862127614},{"_id":"public/2022/03/09/Graph-search/v2-4a4d37df348f283649e2aecc74d959b5_720w.jpg","hash":"60d73acdd30125aa62e7afc3899271677c9c4cd7","modified":1669862127614},{"_id":"public/2022/03/09/Graph-search/v2-9e2643ca5d96f86a391c36de4d3bd48d_720w.jpg","hash":"24061e3e3eba17d3bf0429516a68cf344e680fd4","modified":1669862127614},{"_id":"public/2022/02/20/Hexo_article/image-20220308162506034.png","hash":"cbac8bf927ab02febc2e96125c88df7426dee64c","modified":1669862127614},{"_id":"public/2022/04/08/IPsec/image-20220408173945688.png","hash":"a8b416dc2a59abaa6546921a6774399a09e0564c","modified":1669862127614},{"_id":"public/2022/02/24/Hexo_creation/image-20220308165502809.png","hash":"667770d3e29fb219208121ddc70d2ae062563ad1","modified":1669862127614},{"_id":"public/2022/04/08/IPsec/image-20220408182745880.png","hash":"e6bdcb81f702a997bb5b76563f7e0bf3a7ee0a3a","modified":1669862127614},{"_id":"public/2022/04/08/IPsec/image-20220408182806757.png","hash":"51b06303db8b4d80b03acfc55baf149aeb0b66f8","modified":1669862127614},{"_id":"public/2022/04/08/IPsec/image-20220408182852006.png","hash":"6b746c16873084d748a6fbea2160300950361ba7","modified":1669862127614},{"_id":"public/2022/04/08/IPsec/image-20220408182806622.png","hash":"51b06303db8b4d80b03acfc55baf149aeb0b66f8","modified":1669862127614},{"_id":"public/2022/04/08/IPsec/image-20220408182902202.png","hash":"ac93fbaab32af9510faaa6a9b5d1d1d88736ee3e","modified":1669862127614},{"_id":"public/2022/04/08/IPsec/image-20220408183423694.png","hash":"4bf0e8fdff9e0cbce3f785aa7ff7d8f87ef84c0d","modified":1669862127614},{"_id":"public/2022/04/08/IPsec/image-20220408183817734.png","hash":"25cd176a6f5907bd5f30a3ba8541f162bfde13d7","modified":1669862127614},{"_id":"public/2022/03/13/PERT/image-20210926121452437.png","hash":"409b273ed1a5e8c0aa440379af65b4a8b8d3f5fa","modified":1669862127614},{"_id":"public/2022/03/13/PERT/image-20210926125842698.png","hash":"f648448ff8f6bb0ceb55706597043c277d7bc9a2","modified":1669862127614},{"_id":"public/2022/03/13/PERT/image-20210926121305734.png","hash":"5bb37f387e4b008de13619b2bc84bb610cf73ba3","modified":1669862127614},{"_id":"public/2022/03/13/PERT/image-20210926121557824.png","hash":"a082383de3b879a035be5bc7866a932737bb2b66","modified":1669862127614},{"_id":"public/2022/02/26/R2S_build/image-10.png","hash":"62f3de2b27546aff4cf6a616df3b3239e5d5d589","modified":1669862127614},{"_id":"public/2022/02/26/R2S_build/image-1.png","hash":"4a475083bd251f14329a16715da142571bd86747","modified":1669862127614},{"_id":"public/2022/02/26/R2S_build/image-8.png","hash":"dedaee8c824811ffa4f3d27516e012a86636726e","modified":1669862127614},{"_id":"public/2022/02/26/R2S_build/image-5.png","hash":"56c526c61081288b63adab3db805722adedec86f","modified":1669862127614},{"_id":"public/2022/02/26/R2S_build/image-7.png","hash":"b6b02dcf36560a6055756269e885694045ad33bc","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/Center.png","hash":"c1dee6ba12d373c7b3b2c4e0fc04faa4ed67e379","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/Screenshot 2022-05-09 131527.png","hash":"43d4e4dfa0b4e631210b64056ff56b3279658611","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/1`SS$TH[EI4{J1_I]9]L`EY.png","hash":"5efc7a23db36c498764f9d8e2ec8a67ad0e0a310","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722135753076.png","hash":"e141070a1ffdea3d1da631ab687d7f5b3a2d510a","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722142150620.png","hash":"4d5063b11f6ab1bee6a883229059ac7942159a2c","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722144502752.png","hash":"5322bf2ecbad99132fa25963dfdaab02cbbf25c0","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/QQ图片20220722134623.jpg","hash":"2f97fadb1e69f06bf953663733748e460c7d65c5","modified":1669862127614},{"_id":"public/2022/02/25/binary_tree_1/2-1Q226195I0M1.gif","hash":"2f1884245b798d3ec8f8a5cc42572a786a38ae0c","modified":1669862127614},{"_id":"public/2022/02/25/binary_tree_1/2-1Q22R035341H.gif","hash":"1d62249b1271596c0daf868ef2ac4f6c80d93ed8","modified":1669862127614},{"_id":"public/2022/02/25/binary_tree_1/v2-0ccba83c7b3dbf7b89964c04021025d9_720w.jpg","hash":"f56981756349a08c44d83576af3e63798c87e21f","modified":1669862127614},{"_id":"public/2022/02/25/binary_tree_1/2-1Q226195949495.gif","hash":"a107e2dc9f65c7887e76755dc9a78fff17fa0dbe","modified":1669862127614},{"_id":"public/2022/02/24/binary_tree_2/image.png","hash":"779e786c51aefa1b4c15d9945a62b452137e2024","modified":1669862127614},{"_id":"public/2022/02/24/binary_tree_2/false example-16473330373123.png","hash":"374877f834e57be19b531ba2ba225a42b13a5291","modified":1669862127614},{"_id":"public/2022/02/24/binary_tree_2/false example.png","hash":"374877f834e57be19b531ba2ba225a42b13a5291","modified":1669862127614},{"_id":"public/2022/02/24/binary_tree_2/tree2.jpg","hash":"67719c7c6ea0c867d80327220af2eee116533c7f","modified":1669862127614},{"_id":"public/2022/02/24/binary_tree_2/tree1.jpg","hash":"f358033460700da1c28e5e3d6770c82857c8ccb3","modified":1669862127614},{"_id":"public/2022/02/24/binary_tree_2/true example.png","hash":"92de0a3ec197a374444f32b81c18fc3fdec0ff7b","modified":1669862127614},{"_id":"public/2022/12/01/socket-multi-2/image-20221201102754586.png","hash":"c41b8530ecfd2c65edb7db0113f50faaf4da028b","modified":1669862127614},{"_id":"public/2022/10/14/socket-program-2/image-20221012143117864.png","hash":"d9eae5dc6e81f0ba9acba31d5e2673e338dd071b","modified":1669862127614},{"_id":"public/assets/algolia/algoliasearchLite.min.js","hash":"284416885e4e80e27fa4eae6fc305f4de15b914c","modified":1669862127614},{"_id":"public/image/alipay.png","hash":"6be1d1ffc3264828ea0a27a4ca30520dfa448bd6","modified":1669862127614},{"_id":"public/image/qq.jpg","hash":"679ce9b7fb0f782ddfb1177689cb0ae09fbded23","modified":1669862127614},{"_id":"public/image/wechat.png","hash":"4660b50917b947a91c35f55b0281c633b9b0addd","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722141736616.png","hash":"c31bcd8f2da424027f7ae36a5421bb2a0ea6011d","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722141252367.png","hash":"2962826b723f792122709b7d5e27eb6c46e65656","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722145541034.png","hash":"92b46d7e81b3ab8bfc6e2a32d1eec192e1cb8858","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722154032582.png","hash":"810653a3d879730f989de264db735538f3afc65c","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/U0I112981_%MPSVS4CXL8BF.png","hash":"20795def1ba10c382ca4746a003ceb0fd98b3262","modified":1669862127614},{"_id":"public/2022/10/10/Android-Studio-3/image-20221010220838199.png","hash":"289e4fd80ccb6c85d2b0e48030605b6c190a43bb","modified":1669862127614},{"_id":"public/2022/11/21/Android-Studio-6/image-20221121180736629.png","hash":"fa77491583bc9d7a08f58e640d4a0ca6152f74e8","modified":1669862127614},{"_id":"public/2022/11/21/Android-Studio-6/image-20221121182649615.png","hash":"8a945b5fec38ad93decaafd5359ed735eaa3d750","modified":1669862127614},{"_id":"public/2022/11/21/Android-Studio-6/image-20221121181019527.png","hash":"08ddae4240956feeab0f04bc13f5ee8fe1ecc609","modified":1669862127614},{"_id":"public/2022/11/21/Android-Studio-6/image-20221121232452816.png","hash":"8863e3f3d077f27c828ad71bb4624bbd6e348e35","modified":1669862127614},{"_id":"public/2022/11/25/Android-Studio-7/image-20221125135917426.png","hash":"8566161715adef3108bd00fa14f0e5b100e20491","modified":1669862127614},{"_id":"public/2022/09/27/Android-studio-2/image-20220927021701138.png","hash":"0911d09041a820c48b15abd1eba52bcf63b1edb4","modified":1669862127614},{"_id":"public/2022/09/27/Android-studio-2/image-20220927022235374.png","hash":"4f54ffea77476bcfdd3406f1b6a35ce5ace38cc5","modified":1669862127614},{"_id":"public/2022/09/27/Android-studio-2/image-20221031161107220.png","hash":"a4a588327d19a425eca77cf6675bdbaa650d903b","modified":1669862127614},{"_id":"public/2022/09/27/Android-studio-2/image-20221031161159345.png","hash":"be4308090b577d8250fcefc7ddb5d128a0cf60a6","modified":1669862127614},{"_id":"public/2022/03/27/BM-algorithm/image-20220328005451919.png","hash":"340fe25093bbbd654129d3c2d332124998a5d265","modified":1669862127614},{"_id":"public/2022/04/08/CN-1/image-20211201142249636.png","hash":"ba7d80ea41a4edff7bddad47286340d093b508cf","modified":1669862127614},{"_id":"public/2022/03/27/BM-algorithm/image-20220328173308025.png","hash":"b687f059996b90a0e7b45b58336d90c68fd7458f","modified":1669862127614},{"_id":"public/2022/04/08/CN-1/image-20211201155917959.png","hash":"be761a097668a5191a80d5940d516f67ebe6d58c","modified":1669862127614},{"_id":"public/2022/04/08/CN-2/image-20211210171011761.png","hash":"824d10bcbe825148beb94706f9b38673a67078f2","modified":1669862127614},{"_id":"public/2022/04/08/CN-5/image-20211211154556832.png","hash":"147b53ac1661c3508df951c62e4596b52a658227","modified":1669862127614},{"_id":"public/2022/04/08/CN-3/image-20211205153214433.png","hash":"d350aaa5ae00a2621f84e5149fe0207ee33d1fda","modified":1669862127614},{"_id":"public/2022/04/08/CN-3/image-20211205153227168.png","hash":"273a262dd59bf899cb8b8484c529a6db5a36436d","modified":1669862127614},{"_id":"public/2022/04/08/CN-3/image-20211205153141538.png","hash":"e314d01147c11ea864efe60050944cd8c86c896b","modified":1669862127614},{"_id":"public/2022/04/08/CN-3/image-20211205174403372.png","hash":"60d7bbe4df45795ec99e916eae9ac78b317dfa7f","modified":1669862127614},{"_id":"public/2022/04/08/CN-3/image-20211205174543073.png","hash":"46fda8d1c1541a353b5e823bc3c9bcf9895e786c","modified":1669862127614},{"_id":"public/2022/09/17/CUDA-install/image-20220718135746089-1663410928185-1.png","hash":"2e57d0777dd643189df7b18cbe652b798c362f2d","modified":1669862127614},{"_id":"public/2022/09/17/CUDA-install/image-20220718160419835-1663410988631-11.png","hash":"f7576d40d17f3d572b3d8cca3b25985cdedcb9c8","modified":1669862127614},{"_id":"public/2022/03/08/Hexo-synchronization/image-20220310172557250.png","hash":"6e29f7df5d770ebc97cc9c4061ede24d1505d82d","modified":1669862127614},{"_id":"public/2022/02/20/Hexo_article/IMG_1479.jpg","hash":"f869ae1d27243b47840d63ffbe1bd136c7c7a503","modified":1669862127614},{"_id":"public/2022/03/13/PERT/image-20210926121433312.png","hash":"aeb8258e4e8ae3d05ca75e03dfe93ec239da5baa","modified":1669862127614},{"_id":"public/2022/02/26/R2S_build/image-20220305212846426.png","hash":"ea4b0543826c23f95321520feaca18a54e27c00f","modified":1669862127614},{"_id":"public/2022/02/26/R2S_build/image-9-1024x194.png","hash":"00c8bfd48272b1b8487d34e711ac2800569c3230","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722141252367.png","hash":"2962826b723f792122709b7d5e27eb6c46e65656","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722141736616.png","hash":"c31bcd8f2da424027f7ae36a5421bb2a0ea6011d","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722145541034.png","hash":"92b46d7e81b3ab8bfc6e2a32d1eec192e1cb8858","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722154032582-165847602920414.png","hash":"810653a3d879730f989de264db735538f3afc65c","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/U0I112981_%MPSVS4CXL8BF.png","hash":"20795def1ba10c382ca4746a003ceb0fd98b3262","modified":1669862127614},{"_id":"public/2022/10/14/socket-program-3/image-20221013181230269.png","hash":"64b936355500dac569b1cc32d28276ffaf15d7cd","modified":1669862127614},{"_id":"public/assets/algolia/algoliasearchLite.js","hash":"e56ad6b82caf69066de545201014291fc961635e","modified":1669862127614},{"_id":"public/assets/algolia/algoliasearch.min.js","hash":"a3b131a9a47ccc16f4dd8988fabb6d306548db2f","modified":1669862127614},{"_id":"public/js/chunk-TTX6TVTO.js","hash":"bdf31df5623cdbe4d6629c1d602cad7a15e5cf78","modified":1669862127614},{"_id":"public/js/utils.js","hash":"36ec1d14c7537ad402e577d5deea7c09160197f8","modified":1669862127614},{"_id":"public/js/sidebar.js","hash":"ee176346d586bebbd146f157c23f9d367d5499a4","modified":1669862127614},{"_id":"public/js/gallery-decrypt.js","hash":"ce7bf147867972a0f9e903eebf66b7e0f0145f61","modified":1669862127614},{"_id":"public/css/README.html","hash":"dbe04d4345ad48b3fba4320407bd080a344defc1","modified":1669862127614},{"_id":"public/js/pjax.js","hash":"4d59377e0b830db741c2786d4ccbb2f5498ee13e","modified":1669862127614},{"_id":"public/js/say.js","hash":"59c8436cecab357b196c37fe0345e932e7f74dbe","modified":1669862127614},{"_id":"public/js/comments/waline.js","hash":"090fc554d82400dca9ae6a2806be48c111b90b3e","modified":1669862127614},{"_id":"public/js/analytics/leancloud-visitors.js","hash":"89952ef9eb5fe84c856068a6e6c274e396f74dd5","modified":1669862127614},{"_id":"public/js/hexo-theme-yun.js","hash":"b93cfddf54ac5ab542ae7fbb19416a89629be6e0","modified":1669862127614},{"_id":"public/js/comments/disqus.js","hash":"4073464ce42643d9571211b1443af61fc78ec0d1","modified":1669862127614},{"_id":"public/js/search/algolia-search.js","hash":"aa26c979800de87ecfd9d0ba2ae7e238da2389ba","modified":1669862127614},{"_id":"public/js/search/local-search.js","hash":"db5cbac019bd86c47cac02e6dba1dfb1861ef31f","modified":1669862127614},{"_id":"public/js/chunk-YZ7E3ATC.js","hash":"5bb1683531dd823bb4de8b6541f0290d46006320","modified":1669862127614},{"_id":"public/js/ui/fireworks.js","hash":"859b09a6065ea1b4f02f2974e590e44cc13fccc9","modified":1669862127614},{"_id":"public/js/ui/banner.js","hash":"c73ce4b3021bebf1a264e481dbe9a8a1ccd87d3b","modified":1669862127614},{"_id":"public/css/hexo-theme-yun.css","hash":"039eee4c88ca7a21a2cb80e1e6b4c7c60e19cd82","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722142444023.png","hash":"a578c81d4e8550a8f82b5b1e6d56cced1f114291","modified":1669862127614},{"_id":"public/2022/04/01/8-puzzle/R.024c89daf1b60db70d608b4b73215e76","hash":"55711d8835efb3239e2a47eb10b1d9c562084672","modified":1669862127614},{"_id":"public/2022/04/01/8-puzzle/R.png","hash":"62a8331c6b1dc7814dc5c3d5b82a452d211d1cf5","modified":1669862127614},{"_id":"public/2022/11/09/Android-Studio-5/image-20221109150451204.png","hash":"4732a2ccd5414609d256a1ba72de94d6a464adb8","modified":1669862127614},{"_id":"public/2022/11/09/Android-Studio-5/image-20221109151131798.png","hash":"09cc7bbf0b26fadb48b744a0927e89908e3266a1","modified":1669862127614},{"_id":"public/2022/04/08/CN-1/image-20211201155433683.png","hash":"7f64d8c8d414f025c940e249396bfd3fb1090bdb","modified":1669862127614},{"_id":"public/2022/04/08/CN-1/image-20211201165246959.png","hash":"6a6165a044ab22c876a5c9632b951d682b57f121","modified":1669862127614},{"_id":"public/2022/04/08/CN-4/image-20211206080908048.png","hash":"9b3fad30e12688a0f2788b3477d678e009160485","modified":1669862127614},{"_id":"public/2022/04/08/CN-4/image-20211206080908048-1649432396057.png","hash":"9b3fad30e12688a0f2788b3477d678e009160485","modified":1669862127614},{"_id":"public/2022/04/08/CN-4/image-20211206080928415-1649432396057.png","hash":"fafa9d4f4df10549c8b683624b210296450309e2","modified":1669862127614},{"_id":"public/2022/04/08/CN-4/image-20211206080942577-1649432396057.png","hash":"54a0c9e2bbb9191f378f8e72b479e3761408187b","modified":1669862127614},{"_id":"public/2022/04/08/CN-4/image-20211206080928415.png","hash":"fafa9d4f4df10549c8b683624b210296450309e2","modified":1669862127614},{"_id":"public/2022/04/08/CN-4/image-20211206080942577.png","hash":"54a0c9e2bbb9191f378f8e72b479e3761408187b","modified":1669862127614},{"_id":"public/2022/04/08/CN-2/image-20211204114150471.png","hash":"b4f3c0a76b1ab0c87e4d3703bdcbd8dc13c8a2a8","modified":1669862127614},{"_id":"public/2022/09/17/CUDA-install/image-20220718135714318-1663410937840-3.png","hash":"0487be39f6e22573d065cd52c6a61259d32155d4","modified":1669862127614},{"_id":"public/2022/09/17/CUDA-install/image-20220718135833425-1663410950886-5.png","hash":"12ff1e8809b94cb369268d4008509135eab802cb","modified":1669862127614},{"_id":"public/2022/09/17/CUDA-install/image-20220718160333419-1663410975368-9.png","hash":"709ffb23e462723202fa1361824bed310aeea56d","modified":1669862127614},{"_id":"public/2022/03/08/Hexo-synchronization/image-20220516171510709.png","hash":"ceece9abb9e1aed3fdcbe057b4f6f066bb14d026","modified":1669862127614},{"_id":"public/2022/03/08/Hexo-synchronization/Screenshot 2022-03-08 161552.png","hash":"5146a45213aa0aaa7ac928f8083fcf56472628a8","modified":1669862127614},{"_id":"public/2022/02/20/Hexo_article/image-20220308162715529.png","hash":"8e3c4674e8deea387717279e8a00923655c7ddf6","modified":1669862127614},{"_id":"public/2022/02/24/Hexo_creation/image-20220308165404552.png","hash":"a268bc4c307433bde753548c2e00b24bc645571e","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/Screenshot 2022-05-09 125830-16520802827714.png","hash":"e2b8bdbbeb914b38b01549f4061f00a6ecf31c47","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/Screenshot 2022-05-09 125830.png","hash":"e2b8bdbbeb914b38b01549f4061f00a6ecf31c47","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722142444023.png","hash":"a578c81d4e8550a8f82b5b1e6d56cced1f114291","modified":1669862127614},{"_id":"public/assets/js/DPlayer.min.js","hash":"104613de917a8576ff26aaa36d1c0c7bb4730f4e","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722152550108.png","hash":"7d19d218b776790e6c4b5ecb712d43678dbd851e","modified":1669862127614},{"_id":"public/2022/04/08/CN-2/image-20211204114107336.png","hash":"f4d06da5ce4433eab9f0ef41e6fa9593533dae6d","modified":1669862127614},{"_id":"public/2022/03/08/Hexo-synchronization/image-20220315180411753.png","hash":"ccce09bdfce959f4983dc0c12f0fff804ee30dd0","modified":1669862127614},{"_id":"public/2022/04/14/KPM-algorithm/image-20220415153721845.png","hash":"afab9d3ebf9ff2f793ec78c5e801643c7664b109","modified":1669862127614},{"_id":"public/2022/02/26/R2S_build/image-2-1024x507.png","hash":"3f2c9846cdfeed98cf3b5bf94cb0a5d41de40705","modified":1669862127614},{"_id":"public/2022/02/26/R2S_build/image-3-1024x485.png","hash":"72f68e697d9656bc5dfdf05584660bee9d89e29a","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/Screenshot 2022-05-09 130250.png","hash":"5baea3b9248b11880f2dc942227dde46e7f7527f","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/Screenshot 2022-05-09 130023.png","hash":"4b6d25b1be8466e1c7c4d637acf9af4c69da95df","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/Screenshot 2022-05-09 130159.png","hash":"7372681e577e09fc93ea991c80e584a07815445a","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70-16520801218142.png","hash":"b7063c3f518e2754b82086d942b4865f9eb102b7","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70.png","hash":"381a3831a3eb08ba52a48ca624d32b0b040298ea","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722152550108.png","hash":"7d19d218b776790e6c4b5ecb712d43678dbd851e","modified":1669862127614},{"_id":"public/2022/02/25/binary_tree_1/image.png","hash":"486e325512c567f522e925b9fe9d58c24789176b","modified":1669862127614},{"_id":"public/2022/11/11/socket-multi-1/image-20221111145514251.png","hash":"93369d60278c037d93a966eae87d5d6a5d75a488","modified":1669862127614},{"_id":"public/2022/10/14/socket-program-2/image-20221012143810496.png","hash":"13b415f2fc5173122a689ef9391d2a9035e78b87","modified":1669862127614},{"_id":"public/assets/algolia/algoliasearch.js","hash":"6948fcdf071e4983e784e8c458cf201536f77792","modified":1669862127614},{"_id":"public/2022/11/09/Android-Studio-5/image-20221121161500306.png","hash":"05f60a654f598ae12dc4d8e690f4c78c22b6e2a2","modified":1669862127614},{"_id":"public/2022/04/08/CN-2/image-20211204114128703.png","hash":"eedec4652f9c7eaab4c4b468f8d0be48d33684ae","modified":1669862127614},{"_id":"public/2022/04/08/CN-2/image-20211210170210391.png","hash":"59b68db970c383077f8cddcc7c29735b37472649","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/Screenshot 2022-05-09 130051.png","hash":"b3c8a3155e82aa787cb4b345d445c653c393ea4c","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/Screenshot 2022-05-09 130125.png","hash":"e3d59bd5a38f41854187a8c6f5c606ad2326bee1","modified":1669862127614},{"_id":"public/2022/11/11/socket-multi-1/image-20221201103211709.png","hash":"72b9f1aba5067dac4dfa22c511b5370d1407eb96","modified":1669862127614},{"_id":"public/2022/11/03/Python-WordCloud/haha-1667472516501-1-1667473201885-3.png","hash":"b4d221d56079000625b966a0f1b4984e99285359","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722142107169.png","hash":"fa593f781433fd26fb963733462a61eac8ee384a","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722142107169.png","hash":"fa593f781433fd26fb963733462a61eac8ee384a","modified":1669862127614},{"_id":"public/2022/02/20/Hexo_article/traffic-light.gif","hash":"0c18d7a2a137b37b0af5b1c647aa12a3393dec64","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/Screenshot 2022-05-09 131459.png","hash":"1ae192721cea4c3d29ffbb4b578dfa8e67040c60","modified":1669862127614},{"_id":"public/2022/09/17/Anaconda-env/image-20220722141130992-1663410673096-7.png","hash":"d5d12cd0f9deaf45cd042d77fc2dedc108f63860","modified":1669862127614},{"_id":"public/2022/07/22/python-environment/image-20220722141130992.png","hash":"d5d12cd0f9deaf45cd042d77fc2dedc108f63860","modified":1669862127614},{"_id":"public/2022/11/03/Python-WordCloud/photo2.jpg","hash":"53b139abdca01b2e9686ab27d3c632254a89d737","modified":1669862127614},{"_id":"public/2022/04/01/8-puzzle/35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628.gif","hash":"29e4db82f53e9c0a37101f66056be209d03094a3","modified":1669862127614},{"_id":"public/2022/05/09/STM32-Introduction/b6b59519626c1efe2aa367207f45ce83.mp4","hash":"685148541279c1e228e78d993becd7a8d0da9b08","modified":1669862127614},{"_id":"public/2022/11/03/Python-WordCloud/haha.png","hash":"e33bef0a2d683fd67467341cb9a334dc63848dcd","modified":1669862127614},{"_id":"public/2022/02/20/Hexo_article/2d6f869662e83398f06070e2a14f838.jpg","hash":"e891f3a3b28cbefa79db0d9fd17939f3df865836","modified":1669862127614},{"_id":"public/image/head.jpg","hash":"91d9c38a4f5864f68119064c8e61227e6b7719aa","modified":1669862127614},{"_id":"public/2022/02/20/Hexo_article/884019afce82603bd8bc8fd4e531839.jpg","hash":"464c9842be81f3cc1cb18df887b8f497216e1d80","modified":1669862127614}],"Category":[{"name":"神学","_id":"clb4gsrc300041gzud3jdecnh"},{"name":"Python","_id":"clb4gsrc9000a1gzud0h8hjrf"},{"name":"Android Studio","_id":"clb4gsrcc000g1gzu7bwy13ed"},{"name":"algorithm","_id":"clb4gsrct00151gzuenqh8pca"},{"name":"计算机网络","_id":"clb4gsrd4001m1gzu7gp8d4eo"},{"name":"Hexo搭建","_id":"clb4gsrdh002u1gzuapf7dd3l"},{"name":"MCU","_id":"clb4gsre0003f1gzuei9z1r1p"},{"name":"python","_id":"clb4gsre2003m1gzuh8g3fiat"}],"Data":[],"Page":[{"title":"about","date":"2022-02-21T14:50:30.000Z","_content":"\n# About me\n\n> ## WHO AM I\n>\n> ~~20岁，是学生。​~~\n>\n> 希望与你相遇。\n\n见字如面，很高兴认识你。\n\n目前我是一名澳科大在读本科生，IT专业。\n\n我喜欢交朋友，然而我是一个社恐人士。\n\n我喜欢拍照片，然而没有拿得出手的美图。\n\n我喜欢打游戏，然而这个赛季王者还是钻石。\n\n。。。 。。。\n\n如果，你喜欢我（和我的网页）的话\n\n~~欢迎给我打钱💰~~\n\n# Contact\n\nEmail: tonylsx611@gmail.com\n\nWechat: tony83607693\n\nQQ: 2858075831","source":"about/index.md","raw":"---\ntitle: about\ndate: 2022-02-21 22:50:30\n---\n\n# About me\n\n> ## WHO AM I\n>\n> ~~20岁，是学生。​~~\n>\n> 希望与你相遇。\n\n见字如面，很高兴认识你。\n\n目前我是一名澳科大在读本科生，IT专业。\n\n我喜欢交朋友，然而我是一个社恐人士。\n\n我喜欢拍照片，然而没有拿得出手的美图。\n\n我喜欢打游戏，然而这个赛季王者还是钻石。\n\n。。。 。。。\n\n如果，你喜欢我（和我的网页）的话\n\n~~欢迎给我打钱💰~~\n\n# Contact\n\nEmail: tonylsx611@gmail.com\n\nWechat: tony83607693\n\nQQ: 2858075831","updated":"2022-03-06T12:03:04.299Z","path":"about/index.html","comments":1,"layout":"page","_id":"clb4gsrbu00001gzu337k1fxh","content":"<h1 id=\"about-me\"><a class=\"markdownIt-Anchor\" href=\"#about-me\"></a> About me</h1>\n<blockquote>\n<h2 id=\"who-am-i\"><a class=\"markdownIt-Anchor\" href=\"#who-am-i\"></a> WHO AM I</h2>\n<p><s>20岁，是学生。​</s></p>\n<p>希望与你相遇。</p>\n</blockquote>\n<p>见字如面，很高兴认识你。</p>\n<p>目前我是一名澳科大在读本科生，IT专业。</p>\n<p>我喜欢交朋友，然而我是一个社恐人士。</p>\n<p>我喜欢拍照片，然而没有拿得出手的美图。</p>\n<p>我喜欢打游戏，然而这个赛季王者还是钻石。</p>\n<p>。。。 。。。</p>\n<p>如果，你喜欢我（和我的网页）的话</p>\n<p><s>欢迎给我打钱💰</s></p>\n<h1 id=\"contact\"><a class=\"markdownIt-Anchor\" href=\"#contact\"></a> Contact</h1>\n<p>Email: <a href=\"mailto:tonylsx611@gmail.com\">tonylsx611@gmail.com</a></p>\n<p>Wechat: tony83607693</p>\n<p>QQ: 2858075831</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"about-me\"><a class=\"markdownIt-Anchor\" href=\"#about-me\"></a> About me</h1>\n<blockquote>\n<h2 id=\"who-am-i\"><a class=\"markdownIt-Anchor\" href=\"#who-am-i\"></a> WHO AM I</h2>\n<p><s>20岁，是学生。​</s></p>\n<p>希望与你相遇。</p>\n</blockquote>\n<p>见字如面，很高兴认识你。</p>\n<p>目前我是一名澳科大在读本科生，IT专业。</p>\n<p>我喜欢交朋友，然而我是一个社恐人士。</p>\n<p>我喜欢拍照片，然而没有拿得出手的美图。</p>\n<p>我喜欢打游戏，然而这个赛季王者还是钻石。</p>\n<p>。。。 。。。</p>\n<p>如果，你喜欢我（和我的网页）的话</p>\n<p><s>欢迎给我打钱💰</s></p>\n<h1 id=\"contact\"><a class=\"markdownIt-Anchor\" href=\"#contact\"></a> Contact</h1>\n<p>Email: <a href=\"mailto:tonylsx611@gmail.com\">tonylsx611@gmail.com</a></p>\n<p>Wechat: tony83607693</p>\n<p>QQ: 2858075831</p>\n"},{"title":"categories","date":"2022-02-23T09:10:40.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2022-02-23 17:10:40\ntype: categories\n---\n","updated":"2022-03-06T12:03:04.299Z","path":"categories/index.html","comments":1,"layout":"page","_id":"clb4gsrc000021gzu85jd4l0x","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2022-02-23T06:03:55.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2022-02-23 14:03:55\ntype: tags\n---\n","updated":"2022-03-06T12:03:04.330Z","path":"tags/index.html","comments":1,"layout":"page","_id":"clb4gsrc500061gzubv84cp2g","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"浅谈四维空间","date":"2022-04-09T08:18:48.000Z","author":"Tony","katex":true,"_content":"\n## 什么是四维空间？\n\n首先，我们来看一下百度百科和维基百科中的定义：\n\n> 在物理学和数学中，可将$n$个数的序列理解为一个 $n$ 维空间中的位置。当$n=4$时，所有这样的位置的集合就叫做**四维空间**。四维空间和人居住的三维空间不同，因为多了一个维度。\n\n以上内容很容易理解，这是在数学上和物理上对四维空间的定义；然而在日常生活中，我们经常误将第四维度认为成**时间的概念**，这种观念**是大错特错的！** 这种普遍性的误用，是由于相对论的相关科普和文艺作品的流行。\n\n既然与时间的概念无关，那么我们如何具象化的理解四位空间呢？\n\n## 类比法了解四维空间\n\n最简单的，我们知道一维空间是一条直线，二维空间是一个由无数直线组成的平面，三维空间是一个由无数平面组成的空间，那么四位空间就是一个由无数个空间组成的空间。事实上，我们不应该用“空间”一词来形容一个四维的世界，因为三维世界已经是一个空间，四维世界是由无数个空间组成的世界。然而，很遗憾的是，我们很可能永远也无法理解比空间更庞大的体系，就像一只蚂蚁永远也无法理解三维空间一样。\n\n我们无法脑补四维世界是什么样子的，因为我们根本想象不出把无穷个空间拼接在一起是一个什么样的景象。这里我要再次强调一点的是，不要把“时间“这个概念引入进来，因为无论是三维空间也好，四维空间也罢，都与时间没有任何的关系。所以有些人说，把多个空间连接起来，不就是一条时间线么？再说一遍，这个说法**大错特错！**\n\n我们换一种方式进行推理，假设现在我们所处在**一维空间**，只有左和右一种走向，那么我们如何从外界不经过黑色的区域达到红色的区域呢？\n\n![image-20220409164432423](4-dimensional/image-20220409164432423.png)\n\n在一维空间中，答案是不可能！如果要抵达红色区域，那么必须要经过黑色的区域。但是我们并不是一维生物，我们可以在二维空间中毫不费力的抵达红色区域而不经过黑色区域，如下图所示。\n\n![image-20220409164635308](4-dimensional/image-20220409164635308.png)\n\n好了，现在我们将这个问题类比一下，假设现在我们所处在**二维空间**，只有左右和上下两种走向，那么我们如何从外界不经过黑色的区域达到红色的区域呢？\n\n![image-20220409164912020](4-dimensional/image-20220409164912020.png)\n\n答案同样是不可能！在二维空间中，如果要抵达红色区域，那么必须要经过黑色的区域。但是我们也并不是二维生物，我们可以在三维空间中毫不费力的触碰到红色区域而不经过黑色区域，如下图所示。（图片有点草率，请多多担待）\n\n![image-20220409165234091](4-dimensional/image-20220409165234091.png)\n\n现在看清楚推理的过程了么？在三维空间中，如果我们要不触碰黑色的外壳而直接触碰红色的内部，那么我们必须要在四维空间才能做到！\n\n![image-20220409165723376](4-dimensional/image-20220409165723376.png)\n\n因此，我们可以通过类比得出这样一个结论：**在四维空间中，任何三维物体的内部都将暴露无遗。**\n\n从数学角度是很容易去推理四维空间，坐标无非就是从三维空间的$(x，y，z)$到思维空间的 $(x,y,z,k)$，而最关键的一个变量就是这个$k$。我们说在三维空间中有上下，左右，前后这三个维度；对于第四个维度，我们暂且称为”顶底“，而这个$k$也就代表了顶底的值。\n\n而这个$k$的值在四维空间中到底指的是什么呢？我们无从知晓，但是，根据刚才的推理（我们认为这个推理是公理1）我们可以得出$k$跟物体的深度或许有一定的关系，我们暂且假设$k$代表的是一个物体的深度。那么当$k=0$时，我们看到的时一个立体的表面，而当$k\\neq 0 $（比如$k=1$）时，我们看到的四维世界在三维空间的投影就是这个物体深度为$1$的内部。对于四维空间的生物来说，触碰一个物体的内部是再简单不过的事情。\n\n当然，这个假设大概率是不正确的，或者说，一定不正确。之所以这样假设，是为了让我们更直观的理解思维空间，事实上的四维空间远不止如此，其复杂程度超出了我们的认知。我们只是管中窥豹罢了，就好比二维世界中的三角形生物费尽千辛万苦终于进入了三维世界，哪怕它可以理解第三维度$z$时什么，它也只是一个三角形纸片罢了，当它看到一个三棱锥时，一定会震惊的无以复加。\n\n而对于三维生物的我们来说，我们还依然无法理解第四维度$k$到底指代的是什么，更别提如何想象四维世界了。\n\n## 四维空间的轴对称性\n\n对于四维空间，人们普遍认为空间有轴对称性，类比二维空间的一个三角形生物，当它进入三维空间之后便可以以任意角度进行旋转和翻转（想象一个三角形纸片漂浮在太空中的场景），当它再次回到二位世界，或许会被“轴对称”了一下；同样的，对于三维世界的生物，进入四维世界再回到三维世界，同样也可能会被”轴对称”（想象一下你的心脏跑到了身体的右侧），这便是四维空间的轴对称性。（我们认为这个推理是公理2）\n\n而这个轴对称性并不是我们想象的那样，沿着你的脑袋到脚一分为二（图一），也可能时这样轴对称的（图二）。因此，如果我们想要从四维世界返回三维空间将是非常危险的一个行为。此外，根据公理1所描述的，如果我们从三维空间进入四维世界，那么我们的一切从里到外将暴露在四维世界中，我们的血液内脏等等将直接暴露在四维世界的空气中，这也是极其危险的行为（根本就活不了的好吧）。\n\n![image-20220409173308465](4-dimensional/image-20220409173308465.png)\n\n## 四维空间的遐想\n\n根据公理1和公理2，我们可以做出关于四维空间的一个合理的假设：四维空间的第四个维度$k$代表着三维空间中以任何一个点（也可能是一条直线，这个要看我们如何定义零维空间了）为中心，到这个点的距离。而四维空间的生物可以在第四个维度自由穿梭，也就是说可以自由达到任意物体的外部或内部。而这个点也是无穷多个的，空间中的任意一个点都可以作为$k$的基点。我们知道从二维到三维提升了一个数量级，那么从三维到四维也同样提升了一个数量级。\n\n以上想法并非正确，仅仅是在两个并非一定正确的公理上遐想出的结论，这种结论自然是站不住脚的，仅仅是提供了一个可能的观点而已。而我认为，在没有事实基础的情况下，我们是永远也无法得知四维空间真正的面目，就如我之前所说的三角形生物一样，我们做的一切猜想都是基于三维世界观，所做的一切假设都是去尝试将四维世界投影到三维空间中；并非说这种方法不正确，而是我们永远无法通过这种逆向推导去了解真正的四维世界。","source":"_posts/4-dimensional.md","raw":"---\ntitle: 浅谈四维空间\ndate: 2022-04-09 16:18:48\nauthor: Tony\ntags:\n\t- 四维空间\ncategories:\n\t- 神学\nkatex: true\n---\n\n## 什么是四维空间？\n\n首先，我们来看一下百度百科和维基百科中的定义：\n\n> 在物理学和数学中，可将$n$个数的序列理解为一个 $n$ 维空间中的位置。当$n=4$时，所有这样的位置的集合就叫做**四维空间**。四维空间和人居住的三维空间不同，因为多了一个维度。\n\n以上内容很容易理解，这是在数学上和物理上对四维空间的定义；然而在日常生活中，我们经常误将第四维度认为成**时间的概念**，这种观念**是大错特错的！** 这种普遍性的误用，是由于相对论的相关科普和文艺作品的流行。\n\n既然与时间的概念无关，那么我们如何具象化的理解四位空间呢？\n\n## 类比法了解四维空间\n\n最简单的，我们知道一维空间是一条直线，二维空间是一个由无数直线组成的平面，三维空间是一个由无数平面组成的空间，那么四位空间就是一个由无数个空间组成的空间。事实上，我们不应该用“空间”一词来形容一个四维的世界，因为三维世界已经是一个空间，四维世界是由无数个空间组成的世界。然而，很遗憾的是，我们很可能永远也无法理解比空间更庞大的体系，就像一只蚂蚁永远也无法理解三维空间一样。\n\n我们无法脑补四维世界是什么样子的，因为我们根本想象不出把无穷个空间拼接在一起是一个什么样的景象。这里我要再次强调一点的是，不要把“时间“这个概念引入进来，因为无论是三维空间也好，四维空间也罢，都与时间没有任何的关系。所以有些人说，把多个空间连接起来，不就是一条时间线么？再说一遍，这个说法**大错特错！**\n\n我们换一种方式进行推理，假设现在我们所处在**一维空间**，只有左和右一种走向，那么我们如何从外界不经过黑色的区域达到红色的区域呢？\n\n![image-20220409164432423](4-dimensional/image-20220409164432423.png)\n\n在一维空间中，答案是不可能！如果要抵达红色区域，那么必须要经过黑色的区域。但是我们并不是一维生物，我们可以在二维空间中毫不费力的抵达红色区域而不经过黑色区域，如下图所示。\n\n![image-20220409164635308](4-dimensional/image-20220409164635308.png)\n\n好了，现在我们将这个问题类比一下，假设现在我们所处在**二维空间**，只有左右和上下两种走向，那么我们如何从外界不经过黑色的区域达到红色的区域呢？\n\n![image-20220409164912020](4-dimensional/image-20220409164912020.png)\n\n答案同样是不可能！在二维空间中，如果要抵达红色区域，那么必须要经过黑色的区域。但是我们也并不是二维生物，我们可以在三维空间中毫不费力的触碰到红色区域而不经过黑色区域，如下图所示。（图片有点草率，请多多担待）\n\n![image-20220409165234091](4-dimensional/image-20220409165234091.png)\n\n现在看清楚推理的过程了么？在三维空间中，如果我们要不触碰黑色的外壳而直接触碰红色的内部，那么我们必须要在四维空间才能做到！\n\n![image-20220409165723376](4-dimensional/image-20220409165723376.png)\n\n因此，我们可以通过类比得出这样一个结论：**在四维空间中，任何三维物体的内部都将暴露无遗。**\n\n从数学角度是很容易去推理四维空间，坐标无非就是从三维空间的$(x，y，z)$到思维空间的 $(x,y,z,k)$，而最关键的一个变量就是这个$k$。我们说在三维空间中有上下，左右，前后这三个维度；对于第四个维度，我们暂且称为”顶底“，而这个$k$也就代表了顶底的值。\n\n而这个$k$的值在四维空间中到底指的是什么呢？我们无从知晓，但是，根据刚才的推理（我们认为这个推理是公理1）我们可以得出$k$跟物体的深度或许有一定的关系，我们暂且假设$k$代表的是一个物体的深度。那么当$k=0$时，我们看到的时一个立体的表面，而当$k\\neq 0 $（比如$k=1$）时，我们看到的四维世界在三维空间的投影就是这个物体深度为$1$的内部。对于四维空间的生物来说，触碰一个物体的内部是再简单不过的事情。\n\n当然，这个假设大概率是不正确的，或者说，一定不正确。之所以这样假设，是为了让我们更直观的理解思维空间，事实上的四维空间远不止如此，其复杂程度超出了我们的认知。我们只是管中窥豹罢了，就好比二维世界中的三角形生物费尽千辛万苦终于进入了三维世界，哪怕它可以理解第三维度$z$时什么，它也只是一个三角形纸片罢了，当它看到一个三棱锥时，一定会震惊的无以复加。\n\n而对于三维生物的我们来说，我们还依然无法理解第四维度$k$到底指代的是什么，更别提如何想象四维世界了。\n\n## 四维空间的轴对称性\n\n对于四维空间，人们普遍认为空间有轴对称性，类比二维空间的一个三角形生物，当它进入三维空间之后便可以以任意角度进行旋转和翻转（想象一个三角形纸片漂浮在太空中的场景），当它再次回到二位世界，或许会被“轴对称”了一下；同样的，对于三维世界的生物，进入四维世界再回到三维世界，同样也可能会被”轴对称”（想象一下你的心脏跑到了身体的右侧），这便是四维空间的轴对称性。（我们认为这个推理是公理2）\n\n而这个轴对称性并不是我们想象的那样，沿着你的脑袋到脚一分为二（图一），也可能时这样轴对称的（图二）。因此，如果我们想要从四维世界返回三维空间将是非常危险的一个行为。此外，根据公理1所描述的，如果我们从三维空间进入四维世界，那么我们的一切从里到外将暴露在四维世界中，我们的血液内脏等等将直接暴露在四维世界的空气中，这也是极其危险的行为（根本就活不了的好吧）。\n\n![image-20220409173308465](4-dimensional/image-20220409173308465.png)\n\n## 四维空间的遐想\n\n根据公理1和公理2，我们可以做出关于四维空间的一个合理的假设：四维空间的第四个维度$k$代表着三维空间中以任何一个点（也可能是一条直线，这个要看我们如何定义零维空间了）为中心，到这个点的距离。而四维空间的生物可以在第四个维度自由穿梭，也就是说可以自由达到任意物体的外部或内部。而这个点也是无穷多个的，空间中的任意一个点都可以作为$k$的基点。我们知道从二维到三维提升了一个数量级，那么从三维到四维也同样提升了一个数量级。\n\n以上想法并非正确，仅仅是在两个并非一定正确的公理上遐想出的结论，这种结论自然是站不住脚的，仅仅是提供了一个可能的观点而已。而我认为，在没有事实基础的情况下，我们是永远也无法得知四维空间真正的面目，就如我之前所说的三角形生物一样，我们做的一切猜想都是基于三维世界观，所做的一切假设都是去尝试将四维世界投影到三维空间中；并非说这种方法不正确，而是我们永远无法通过这种逆向推导去了解真正的四维世界。","slug":"4-dimensional","published":1,"updated":"2022-11-01T05:53:00.474Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrbx00011gzu80py59yk","content":"<h2 id=\"什么是四维空间\"><a class=\"markdownIt-Anchor\" href=\"#什么是四维空间\"></a> 什么是四维空间？</h2>\n<p>首先，我们来看一下百度百科和维基百科中的定义：</p>\n<blockquote>\n<p>在物理学和数学中，可将<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>个数的序列理解为一个 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 维空间中的位置。当<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>=</mo><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">n=4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>时，所有这样的位置的集合就叫做<strong>四维空间</strong>。四维空间和人居住的三维空间不同，因为多了一个维度。</p>\n</blockquote>\n<p>以上内容很容易理解，这是在数学上和物理上对四维空间的定义；然而在日常生活中，我们经常误将第四维度认为成<strong>时间的概念</strong>，这种观念<strong>是大错特错的！</strong> 这种普遍性的误用，是由于相对论的相关科普和文艺作品的流行。</p>\n<p>既然与时间的概念无关，那么我们如何具象化的理解四位空间呢？</p>\n<h2 id=\"类比法了解四维空间\"><a class=\"markdownIt-Anchor\" href=\"#类比法了解四维空间\"></a> 类比法了解四维空间</h2>\n<p>最简单的，我们知道一维空间是一条直线，二维空间是一个由无数直线组成的平面，三维空间是一个由无数平面组成的空间，那么四位空间就是一个由无数个空间组成的空间。事实上，我们不应该用“空间”一词来形容一个四维的世界，因为三维世界已经是一个空间，四维世界是由无数个空间组成的世界。然而，很遗憾的是，我们很可能永远也无法理解比空间更庞大的体系，就像一只蚂蚁永远也无法理解三维空间一样。</p>\n<p>我们无法脑补四维世界是什么样子的，因为我们根本想象不出把无穷个空间拼接在一起是一个什么样的景象。这里我要再次强调一点的是，不要把“时间“这个概念引入进来，因为无论是三维空间也好，四维空间也罢，都与时间没有任何的关系。所以有些人说，把多个空间连接起来，不就是一条时间线么？再说一遍，这个说法<strong>大错特错！</strong></p>\n<p>我们换一种方式进行推理，假设现在我们所处在<strong>一维空间</strong>，只有左和右一种走向，那么我们如何从外界不经过黑色的区域达到红色的区域呢？</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409164432423.png\" alt=\"image-20220409164432423\" loading=\"lazy\"></p>\n<p>在一维空间中，答案是不可能！如果要抵达红色区域，那么必须要经过黑色的区域。但是我们并不是一维生物，我们可以在二维空间中毫不费力的抵达红色区域而不经过黑色区域，如下图所示。</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409164635308.png\" alt=\"image-20220409164635308\" loading=\"lazy\"></p>\n<p>好了，现在我们将这个问题类比一下，假设现在我们所处在<strong>二维空间</strong>，只有左右和上下两种走向，那么我们如何从外界不经过黑色的区域达到红色的区域呢？</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409164912020.png\" alt=\"image-20220409164912020\" loading=\"lazy\"></p>\n<p>答案同样是不可能！在二维空间中，如果要抵达红色区域，那么必须要经过黑色的区域。但是我们也并不是二维生物，我们可以在三维空间中毫不费力的触碰到红色区域而不经过黑色区域，如下图所示。（图片有点草率，请多多担待）</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409165234091.png\" alt=\"image-20220409165234091\" loading=\"lazy\"></p>\n<p>现在看清楚推理的过程了么？在三维空间中，如果我们要不触碰黑色的外壳而直接触碰红色的内部，那么我们必须要在四维空间才能做到！</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409165723376.png\" alt=\"image-20220409165723376\" loading=\"lazy\"></p>\n<p>因此，我们可以通过类比得出这样一个结论：<strong>在四维空间中，任何三维物体的内部都将暴露无遗。</strong></p>\n<p>从数学角度是很容易去推理四维空间，坐标无非就是从三维空间的<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mi mathvariant=\"normal\">，</mi><mi>y</mi><mi mathvariant=\"normal\">，</mi><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x，y，z)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span></span>到思维空间的 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo separator=\"true\">,</mo><mi>z</mi><mo separator=\"true\">,</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x,y,z,k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span>，而最关键的一个变量就是这个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>。我们说在三维空间中有上下，左右，前后这三个维度；对于第四个维度，我们暂且称为”顶底“，而这个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>也就代表了顶底的值。</p>\n<p>而这个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>的值在四维空间中到底指的是什么呢？我们无从知晓，但是，根据刚才的推理（我们认为这个推理是公理1）我们可以得出<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>跟物体的深度或许有一定的关系，我们暂且假设<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>代表的是一个物体的深度。那么当<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">k=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>时，我们看到的时一个立体的表面，而当$k\\neq 0 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">（</mi><mi mathvariant=\"normal\">比</mi><mi mathvariant=\"normal\">如</mi></mrow><annotation encoding=\"application/x-tex\">（比如</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">（</span><span class=\"mord cjk_fallback\">比</span><span class=\"mord cjk_fallback\">如</span></span></span></span>k=1$）时，我们看到的四维世界在三维空间的投影就是这个物体深度为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>的内部。对于四维空间的生物来说，触碰一个物体的内部是再简单不过的事情。</p>\n<p>当然，这个假设大概率是不正确的，或者说，一定不正确。之所以这样假设，是为了让我们更直观的理解思维空间，事实上的四维空间远不止如此，其复杂程度超出了我们的认知。我们只是管中窥豹罢了，就好比二维世界中的三角形生物费尽千辛万苦终于进入了三维世界，哪怕它可以理解第三维度<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span></span></span></span>时什么，它也只是一个三角形纸片罢了，当它看到一个三棱锥时，一定会震惊的无以复加。</p>\n<p>而对于三维生物的我们来说，我们还依然无法理解第四维度<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>到底指代的是什么，更别提如何想象四维世界了。</p>\n<h2 id=\"四维空间的轴对称性\"><a class=\"markdownIt-Anchor\" href=\"#四维空间的轴对称性\"></a> 四维空间的轴对称性</h2>\n<p>对于四维空间，人们普遍认为空间有轴对称性，类比二维空间的一个三角形生物，当它进入三维空间之后便可以以任意角度进行旋转和翻转（想象一个三角形纸片漂浮在太空中的场景），当它再次回到二位世界，或许会被“轴对称”了一下；同样的，对于三维世界的生物，进入四维世界再回到三维世界，同样也可能会被”轴对称”（想象一下你的心脏跑到了身体的右侧），这便是四维空间的轴对称性。（我们认为这个推理是公理2）</p>\n<p>而这个轴对称性并不是我们想象的那样，沿着你的脑袋到脚一分为二（图一），也可能时这样轴对称的（图二）。因此，如果我们想要从四维世界返回三维空间将是非常危险的一个行为。此外，根据公理1所描述的，如果我们从三维空间进入四维世界，那么我们的一切从里到外将暴露在四维世界中，我们的血液内脏等等将直接暴露在四维世界的空气中，这也是极其危险的行为（根本就活不了的好吧）。</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409173308465.png\" alt=\"image-20220409173308465\" loading=\"lazy\"></p>\n<h2 id=\"四维空间的遐想\"><a class=\"markdownIt-Anchor\" href=\"#四维空间的遐想\"></a> 四维空间的遐想</h2>\n<p>根据公理1和公理2，我们可以做出关于四维空间的一个合理的假设：四维空间的第四个维度<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>代表着三维空间中以任何一个点（也可能是一条直线，这个要看我们如何定义零维空间了）为中心，到这个点的距离。而四维空间的生物可以在第四个维度自由穿梭，也就是说可以自由达到任意物体的外部或内部。而这个点也是无穷多个的，空间中的任意一个点都可以作为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>的基点。我们知道从二维到三维提升了一个数量级，那么从三维到四维也同样提升了一个数量级。</p>\n<p>以上想法并非正确，仅仅是在两个并非一定正确的公理上遐想出的结论，这种结论自然是站不住脚的，仅仅是提供了一个可能的观点而已。而我认为，在没有事实基础的情况下，我们是永远也无法得知四维空间真正的面目，就如我之前所说的三角形生物一样，我们做的一切猜想都是基于三维世界观，所做的一切假设都是去尝试将四维世界投影到三维空间中；并非说这种方法不正确，而是我们永远无法通过这种逆向推导去了解真正的四维世界。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"什么是四维空间\"><a class=\"markdownIt-Anchor\" href=\"#什么是四维空间\"></a> 什么是四维空间？</h2>\n<p>首先，我们来看一下百度百科和维基百科中的定义：</p>\n<blockquote>\n<p>在物理学和数学中，可将<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>个数的序列理解为一个 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 维空间中的位置。当<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>=</mo><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">n=4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>时，所有这样的位置的集合就叫做<strong>四维空间</strong>。四维空间和人居住的三维空间不同，因为多了一个维度。</p>\n</blockquote>\n<p>以上内容很容易理解，这是在数学上和物理上对四维空间的定义；然而在日常生活中，我们经常误将第四维度认为成<strong>时间的概念</strong>，这种观念<strong>是大错特错的！</strong> 这种普遍性的误用，是由于相对论的相关科普和文艺作品的流行。</p>\n<p>既然与时间的概念无关，那么我们如何具象化的理解四位空间呢？</p>\n<h2 id=\"类比法了解四维空间\"><a class=\"markdownIt-Anchor\" href=\"#类比法了解四维空间\"></a> 类比法了解四维空间</h2>\n<p>最简单的，我们知道一维空间是一条直线，二维空间是一个由无数直线组成的平面，三维空间是一个由无数平面组成的空间，那么四位空间就是一个由无数个空间组成的空间。事实上，我们不应该用“空间”一词来形容一个四维的世界，因为三维世界已经是一个空间，四维世界是由无数个空间组成的世界。然而，很遗憾的是，我们很可能永远也无法理解比空间更庞大的体系，就像一只蚂蚁永远也无法理解三维空间一样。</p>\n<p>我们无法脑补四维世界是什么样子的，因为我们根本想象不出把无穷个空间拼接在一起是一个什么样的景象。这里我要再次强调一点的是，不要把“时间“这个概念引入进来，因为无论是三维空间也好，四维空间也罢，都与时间没有任何的关系。所以有些人说，把多个空间连接起来，不就是一条时间线么？再说一遍，这个说法<strong>大错特错！</strong></p>\n<p>我们换一种方式进行推理，假设现在我们所处在<strong>一维空间</strong>，只有左和右一种走向，那么我们如何从外界不经过黑色的区域达到红色的区域呢？</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409164432423.png\" alt=\"image-20220409164432423\"></p>\n<p>在一维空间中，答案是不可能！如果要抵达红色区域，那么必须要经过黑色的区域。但是我们并不是一维生物，我们可以在二维空间中毫不费力的抵达红色区域而不经过黑色区域，如下图所示。</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409164635308.png\" alt=\"image-20220409164635308\"></p>\n<p>好了，现在我们将这个问题类比一下，假设现在我们所处在<strong>二维空间</strong>，只有左右和上下两种走向，那么我们如何从外界不经过黑色的区域达到红色的区域呢？</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409164912020.png\" alt=\"image-20220409164912020\"></p>\n<p>答案同样是不可能！在二维空间中，如果要抵达红色区域，那么必须要经过黑色的区域。但是我们也并不是二维生物，我们可以在三维空间中毫不费力的触碰到红色区域而不经过黑色区域，如下图所示。（图片有点草率，请多多担待）</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409165234091.png\" alt=\"image-20220409165234091\"></p>\n<p>现在看清楚推理的过程了么？在三维空间中，如果我们要不触碰黑色的外壳而直接触碰红色的内部，那么我们必须要在四维空间才能做到！</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409165723376.png\" alt=\"image-20220409165723376\"></p>\n<p>因此，我们可以通过类比得出这样一个结论：<strong>在四维空间中，任何三维物体的内部都将暴露无遗。</strong></p>\n<p>从数学角度是很容易去推理四维空间，坐标无非就是从三维空间的<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mi mathvariant=\"normal\">，</mi><mi>y</mi><mi mathvariant=\"normal\">，</mi><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x，y，z)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span></span>到思维空间的 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo separator=\"true\">,</mo><mi>z</mi><mo separator=\"true\">,</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x,y,z,k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span>，而最关键的一个变量就是这个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>。我们说在三维空间中有上下，左右，前后这三个维度；对于第四个维度，我们暂且称为”顶底“，而这个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>也就代表了顶底的值。</p>\n<p>而这个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>的值在四维空间中到底指的是什么呢？我们无从知晓，但是，根据刚才的推理（我们认为这个推理是公理1）我们可以得出<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>跟物体的深度或许有一定的关系，我们暂且假设<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>代表的是一个物体的深度。那么当<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">k=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>时，我们看到的时一个立体的表面，而当$k\\neq 0 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">（</mi><mi mathvariant=\"normal\">比</mi><mi mathvariant=\"normal\">如</mi></mrow><annotation encoding=\"application/x-tex\">（比如</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">（</span><span class=\"mord cjk_fallback\">比</span><span class=\"mord cjk_fallback\">如</span></span></span></span>k=1$）时，我们看到的四维世界在三维空间的投影就是这个物体深度为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>的内部。对于四维空间的生物来说，触碰一个物体的内部是再简单不过的事情。</p>\n<p>当然，这个假设大概率是不正确的，或者说，一定不正确。之所以这样假设，是为了让我们更直观的理解思维空间，事实上的四维空间远不止如此，其复杂程度超出了我们的认知。我们只是管中窥豹罢了，就好比二维世界中的三角形生物费尽千辛万苦终于进入了三维世界，哪怕它可以理解第三维度<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span></span></span></span>时什么，它也只是一个三角形纸片罢了，当它看到一个三棱锥时，一定会震惊的无以复加。</p>\n<p>而对于三维生物的我们来说，我们还依然无法理解第四维度<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>到底指代的是什么，更别提如何想象四维世界了。</p>\n<h2 id=\"四维空间的轴对称性\"><a class=\"markdownIt-Anchor\" href=\"#四维空间的轴对称性\"></a> 四维空间的轴对称性</h2>\n<p>对于四维空间，人们普遍认为空间有轴对称性，类比二维空间的一个三角形生物，当它进入三维空间之后便可以以任意角度进行旋转和翻转（想象一个三角形纸片漂浮在太空中的场景），当它再次回到二位世界，或许会被“轴对称”了一下；同样的，对于三维世界的生物，进入四维世界再回到三维世界，同样也可能会被”轴对称”（想象一下你的心脏跑到了身体的右侧），这便是四维空间的轴对称性。（我们认为这个推理是公理2）</p>\n<p>而这个轴对称性并不是我们想象的那样，沿着你的脑袋到脚一分为二（图一），也可能时这样轴对称的（图二）。因此，如果我们想要从四维世界返回三维空间将是非常危险的一个行为。此外，根据公理1所描述的，如果我们从三维空间进入四维世界，那么我们的一切从里到外将暴露在四维世界中，我们的血液内脏等等将直接暴露在四维世界的空气中，这也是极其危险的行为（根本就活不了的好吧）。</p>\n<p><img src=\"/2022/04/09/4-dimensional/image-20220409173308465.png\" alt=\"image-20220409173308465\"></p>\n<h2 id=\"四维空间的遐想\"><a class=\"markdownIt-Anchor\" href=\"#四维空间的遐想\"></a> 四维空间的遐想</h2>\n<p>根据公理1和公理2，我们可以做出关于四维空间的一个合理的假设：四维空间的第四个维度<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>代表着三维空间中以任何一个点（也可能是一条直线，这个要看我们如何定义零维空间了）为中心，到这个点的距离。而四维空间的生物可以在第四个维度自由穿梭，也就是说可以自由达到任意物体的外部或内部。而这个点也是无穷多个的，空间中的任意一个点都可以作为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span>的基点。我们知道从二维到三维提升了一个数量级，那么从三维到四维也同样提升了一个数量级。</p>\n<p>以上想法并非正确，仅仅是在两个并非一定正确的公理上遐想出的结论，这种结论自然是站不住脚的，仅仅是提供了一个可能的观点而已。而我认为，在没有事实基础的情况下，我们是永远也无法得知四维空间真正的面目，就如我之前所说的三角形生物一样，我们做的一切猜想都是基于三维世界观，所做的一切假设都是去尝试将四维世界投影到三维空间中；并非说这种方法不正确，而是我们永远无法通过这种逆向推导去了解真正的四维世界。</p>\n"},{"title":"8数码难题","date":"2022-04-01T10:40:52.000Z","catagories":["algorithm"],"author":"Tony","katex":true,"_content":"\n## 题目描述\n\n在$3×3$的棋盘上，摆有八个棋子，每个棋子上标有$1$至$8$的某一数字。棋盘中留有一个空格，空格用$0$来表示。空格周围的棋子可以移到空格中。要求解的问题是：给出一种初始布局（初始状态）和目标布局（为了使题目简单,设目标状态为$123804765$），找到一种最少步骤的移动方法，实现从初始布局到目标布局的转变。\n\n<img src=\"8-puzzle/R.png\" alt=\"R\" style=\"zoom:50%;\" />\n\n### 输入输出样例\n\ninput1: $283104765$\n\noutput1: $4$\n\ninput2: $603712458$\n\noutput2: $15$\n\ninput3: $603712458$\n\noutput3: $23$\n\n<img src=\"8-puzzle/35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628.gif\" alt=\"35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628\" style=\"zoom:33%;\" />\n\n## 问题分析\n\n### 朴素BFS\n\n看完问题我们最先想到的一定是BFS，因为我们知道起始状态和目标状态，且不需要求解过程，只需要知道执行的步骤，那么DFS自然就不需要了。因此最简单的办法就是套用BFS模板，目标状态的深度即为答案。过程很简单，看代码就可以理解的哈，不理解可以温习一下BFS的原理：[BFS简介](https://tonylsx611.github.io/2022/03/10/BFS/)\n\n<img src=\"8-puzzle/R1.png\" alt=\"R1\" style=\"zoom:75%;\" />\n\n### 朴素BFS代码\n\n```c\nint main()\n{\n    string start;\n    int depth=0;\n    queue<string> Q;\n    Q.push(start);\n    while(!Q.empty())\n    {\n        int len=Q.size();\n        for(int i=0;i<len;i++)//while循环内的for循环代表树的深度\n        {\n            string node=Q.front();\n\n            int position;//数字0的位置\n            if(node[j]=='0')//寻找数字0在九宫格的位置\n                position=j;\n            \n            if(position == 1,2,4,5,7,8)//数字0向左移动\n            {\n                swap(node[position],node[position-1]);//与0交换位置\n\t\t\t\tQ.push(node);\n                judge();//判断是否是目标状态\n                swap(node[position],node[position-1]);//交换回来\n            }\n            \n            if(position == 3,4,5,6,7,8)//数字0向上移动\n            {\n                swap(node[position],node[position-3]);//与0交换位置\n\t\t\t\tQ.push(node);\n                judge();//判断是否是目标状态\n                swap(node[position],node[position-3]);//交换回来\n\t\t\t}\n\n            if(position == 0,1,3,4,6,7)//数字0向右移动\n            {\n                swap(node[position],node[position+1]);//与0交换位置\n\t\t\t\tQ.push(node);\n                judge();//判断是否是目标状态\n                swap(node[position],node[position+1]);//交换回来\n            }\n\n            if(position == 0,1,2,3,4,5)//down\n            {\n                swap(node[position],node[position+3]);//与0交换位置\n\t\t\t\tQ.push(node);\n                judge();//判断是否是目标状态\n                swap(node[position],node[position+3]);//交换回来\n            }\n            Q.pop();\n        }\n        depth++;\n    }\n}\n```\n\n### 记忆化BFS搜索\n\n但是，这样的搜索显然是有很多重复的节点，会出现返祖现象，就是说后面的搜索包含了前面已经搜索过的节点。比如，数字0第一次向右移动，第二次向左移动，就相当没移动，又回到原来的节点了。那么为了避免这个问题，我们使用一个超大的数组来记录每一次遍历过的节点状态，因为BFS是按照层级顺序搜索的，因此每次搜索前查找一下这个超大数组，如果已经遍历过的节点将不会再次遍历。这样的减枝可以极大的提高搜索效率，可以减少大约50%的重复搜索时间。\n\n### 记忆化BFS搜索代码\n\n```c\nstring disk[1000001];//记忆数组\nint main()\n{\n    string start;\n    string final=\"123804765\";\n    int depth=0;\n    int ptr=0;\n    queue<string> Q;\n    disk[0]=start;\n    Q.push(start);\n    while(!Q.empty())\n    {\n        int len=Q.size();\n        for(int i=0;i<len;i++)\n        {\n            string node=Q.front();\n\n            int position;//数字0的位置\n            if(node[j]=='0')//寻找数字0在九宫格的位置\n                position=j;\n            \n            if(position == 1,2,4,5,7,8)//数字0向左移动\n            {\n                swap(node[position],node[position-1]);\n                //----------------------\n                bool judge=true;\n                for(int j=ptr;j>=0;j--)//从后向前检查该节点是否遍历过\n                    if(disk[j]==node)\n                    {\n                        judge=false;\n                        break;\n                    }\n                if(judge)//如果没有遍历过\n                {\n                    Q.push(node);\n                    ptr++;\n                    disk[ptr] = node;\n                    if(node==final)\n                    {\n                        cout<<depth+1<<endl;\n                        return 0;\n                    }\n                }\n                //---------------------\n                swap(node[position],node[position-1]);\n            }\n            \n            if(position>2)//数字0向上移动\n            {\n                swap(node[position],node[position-3]);\n\t\t\t\t//同上\n                swap(node[position],node[position-3]);\n            }\n\n            if(position == 0，1，3，4，6，7)//数字0向右移动\n            {\n                bool judge=true;\n                swap(node[position],node[position+1]);\n                //同上\n                swap(node[position],node[position+1]);\n            }\n\n            if(position<6)//数字0向下移动\n            {\n                swap(node[position],node[position+3]);\n\t\t\t\t//同上\n                swap(node[position],node[position+3]);\n            }\n            Q.pop();\n        }\n        depth++;\n    }\n}\n```\n\n### 双向BFS\n\n虽然上述方法已经很快了，但是执行$Input3$依旧需要将近20秒的时间，因此当节点很深的时候，我们有没有更快的办法呢？\n\n对于本题而言，双向BFS就派上用场了，因为本题已知起始状态和目标状态，我们完全可以同时对这两个状态进行BFS，当两面搜索到了同一个节点时，两面的深度之和就是答案。如图所示，同样的，对于一些走迷宫类的问题，给出起始状态和中止状态，我们都可以考虑使用双向BFS来求解。这种方法有多快呢， 对于$Input3$而言，使用双向BFS求解的时间仅需$0.3s$，是单向BFS速度的近百倍！\n\n<img src=\"8-puzzle/R.024c89daf1b60db70d608b4b73215e76\" alt=\"查看源图像\" style=\"zoom:50%;\" />\n\n这里，我们对代码进行了一些小小的优化，将原本的disk数组更换成了更高效的**哈希映射**，通过**康托展开**将$0-8$的全排列一一映射到大小仅为$362880$的哈希表中。或许你会疑惑，原本应该至少需要开`disk[876543210]`这么大的数组，怎么只需要`disk[362880]`就可以储存的下呢？我们来看一下康托展开的具体实现方式：[康托展开_百度百科 (baidu.com)](https://baike.baidu.com/item/康托展开/7968428?msclkid=92fc5a9ab32e11ec926143771748963a).\n\n是不是很神奇呢？\n\n### 双向BFS代码\n\n```c\n#include<iostream>\n#include<string>\n#include<queue>\nusing namespace std;\nstruct ant\n{\n    string str;\n    int depth;\n    short one_two;\n};\nint visit[362880];\nint depth[362880];\n\nvoid bfs(string begin, string end);//双向BFS\nint hash1(string s);//康托展开\n\nint main()\n{\n    string final = \"123804765\";\n    string start =\"603712458\";\n    bfs(start, final);\n    return 0;\n}\n\nint hash1(string s)//康托展开\n{\n    int f[9]={0,1,2,6,24,120,720,5040,40320};\n    int book[9]={0};\n    int ans=0;\n    int x=s.length();\n    for(int i=0;i<s.length();i++)\n    {\n        int num=0;\n        book[s[i]-'0']=1;\n        for(int j=0;j<s[i]-'0';j++)\n            if(!book[j])\n                num++;\n        x--;\n        ans+=num*f[x];\n    }\n    return ans;\n}\n\nvoid bfs(string begin, string end)\n{\n    queue<ant> Q;\n    ant temp;\n    int str_to_int;//哈希转换\n\n    temp.str = begin;\n    temp.depth = 0;\n    temp.one_two = 1;//1代表正向BFS\n    Q.push(temp);\n    str_to_int = hash1(temp.str);\n    visit[str_to_int] = 1;\n    //depth[str_to_int] = 0;\n\n    temp.str = end;\n    temp.depth = 0;\n    temp.one_two = 2;\n    Q.push(temp);\n    str_to_int = hash1(temp.str);\n    visit[str_to_int] = 2;//2代表反向BFS\n    //depth[str_to_int] = 0;\n\n    while (!Q.empty())\n    {\n        ant node = Q.front();\n        node.depth++;\n\n        int position = -1;//position是数字0所在的位置\n        for (int i = 0; i < 9; i++)\n            if (node.str[i] == '0')\n            {\n                position = i;\n                break;\n            }\n\n\n        if(position == 1,2,4,5,7,8)//数字0向左移动\n        {\n            swap(node.str[position], node.str[position - 1]);\n            str_to_int = hash1(node.str);\n\n            if (!visit[str_to_int])//没有访问过\n            {\n                Q.push(node);\n                visit[str_to_int] = node.one_two;\n                depth[str_to_int] = node.depth;\n            }\n            if(visit[str_to_int] + node.one_two == 3)//一个是1，一个是2，代表相遇\n            {\n                int ans = depth[str_to_int] + node.depth;\n                cout << ans << endl;\n                return;\n            }\n            swap(node.str[position], node.str[position - 1]);\n        }\n\n        if (position >= 3 && position <= 8)//数字0向上移动\n        {\n            swap(node.str[position], node.str[position - 3]);\n            str_to_int = hash1(node.str);\n\n            if (!visit[str_to_int])//没有访问过\n            {...}//同上\n            judge();//同上\n            swap(node.str[position], node.str[position - 3]);\n        }\n\n        if(position == 0，1，3，4，6，7)//数字0向右移动\n        {\n            swap(node.str[position], node.str[position + 1]);\n            str_to_int = hash1(node.str);\n\n            if (!visit[str_to_int])//没有访问过\n            {...}//同上\n            judge();//同上\n            swap(node.str[position], node.str[position + 1]);\n        }\n\n        if (position >= 0 && position <= 5)//数字0向下移动\n        {\n            swap(node.str[position], node.str[position + 3]);\n            str_to_int = hash1(node.str);\n\n            if (!visit[str_to_int])//没有访问过\n            {...}//同上\n            judge();//同上\n            swap(node.str[position], node.str[position + 3]);\n        }\n        Q.pop();\n    }\n}\n```\n\n### A*算法\n\n\n\n### A*算法代码\n\n```\n```\n\n","source":"_posts/8-puzzle.md","raw":"---\ntitle: 8数码难题\ndate: 2022-04-01 18:40:52\ntags:\n  - algorithm\n  - BFS\ncatagories:\n  - algorithm\nauthor: Tony\nkatex: true\n---\n\n## 题目描述\n\n在$3×3$的棋盘上，摆有八个棋子，每个棋子上标有$1$至$8$的某一数字。棋盘中留有一个空格，空格用$0$来表示。空格周围的棋子可以移到空格中。要求解的问题是：给出一种初始布局（初始状态）和目标布局（为了使题目简单,设目标状态为$123804765$），找到一种最少步骤的移动方法，实现从初始布局到目标布局的转变。\n\n<img src=\"8-puzzle/R.png\" alt=\"R\" style=\"zoom:50%;\" />\n\n### 输入输出样例\n\ninput1: $283104765$\n\noutput1: $4$\n\ninput2: $603712458$\n\noutput2: $15$\n\ninput3: $603712458$\n\noutput3: $23$\n\n<img src=\"8-puzzle/35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628.gif\" alt=\"35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628\" style=\"zoom:33%;\" />\n\n## 问题分析\n\n### 朴素BFS\n\n看完问题我们最先想到的一定是BFS，因为我们知道起始状态和目标状态，且不需要求解过程，只需要知道执行的步骤，那么DFS自然就不需要了。因此最简单的办法就是套用BFS模板，目标状态的深度即为答案。过程很简单，看代码就可以理解的哈，不理解可以温习一下BFS的原理：[BFS简介](https://tonylsx611.github.io/2022/03/10/BFS/)\n\n<img src=\"8-puzzle/R1.png\" alt=\"R1\" style=\"zoom:75%;\" />\n\n### 朴素BFS代码\n\n```c\nint main()\n{\n    string start;\n    int depth=0;\n    queue<string> Q;\n    Q.push(start);\n    while(!Q.empty())\n    {\n        int len=Q.size();\n        for(int i=0;i<len;i++)//while循环内的for循环代表树的深度\n        {\n            string node=Q.front();\n\n            int position;//数字0的位置\n            if(node[j]=='0')//寻找数字0在九宫格的位置\n                position=j;\n            \n            if(position == 1,2,4,5,7,8)//数字0向左移动\n            {\n                swap(node[position],node[position-1]);//与0交换位置\n\t\t\t\tQ.push(node);\n                judge();//判断是否是目标状态\n                swap(node[position],node[position-1]);//交换回来\n            }\n            \n            if(position == 3,4,5,6,7,8)//数字0向上移动\n            {\n                swap(node[position],node[position-3]);//与0交换位置\n\t\t\t\tQ.push(node);\n                judge();//判断是否是目标状态\n                swap(node[position],node[position-3]);//交换回来\n\t\t\t}\n\n            if(position == 0,1,3,4,6,7)//数字0向右移动\n            {\n                swap(node[position],node[position+1]);//与0交换位置\n\t\t\t\tQ.push(node);\n                judge();//判断是否是目标状态\n                swap(node[position],node[position+1]);//交换回来\n            }\n\n            if(position == 0,1,2,3,4,5)//down\n            {\n                swap(node[position],node[position+3]);//与0交换位置\n\t\t\t\tQ.push(node);\n                judge();//判断是否是目标状态\n                swap(node[position],node[position+3]);//交换回来\n            }\n            Q.pop();\n        }\n        depth++;\n    }\n}\n```\n\n### 记忆化BFS搜索\n\n但是，这样的搜索显然是有很多重复的节点，会出现返祖现象，就是说后面的搜索包含了前面已经搜索过的节点。比如，数字0第一次向右移动，第二次向左移动，就相当没移动，又回到原来的节点了。那么为了避免这个问题，我们使用一个超大的数组来记录每一次遍历过的节点状态，因为BFS是按照层级顺序搜索的，因此每次搜索前查找一下这个超大数组，如果已经遍历过的节点将不会再次遍历。这样的减枝可以极大的提高搜索效率，可以减少大约50%的重复搜索时间。\n\n### 记忆化BFS搜索代码\n\n```c\nstring disk[1000001];//记忆数组\nint main()\n{\n    string start;\n    string final=\"123804765\";\n    int depth=0;\n    int ptr=0;\n    queue<string> Q;\n    disk[0]=start;\n    Q.push(start);\n    while(!Q.empty())\n    {\n        int len=Q.size();\n        for(int i=0;i<len;i++)\n        {\n            string node=Q.front();\n\n            int position;//数字0的位置\n            if(node[j]=='0')//寻找数字0在九宫格的位置\n                position=j;\n            \n            if(position == 1,2,4,5,7,8)//数字0向左移动\n            {\n                swap(node[position],node[position-1]);\n                //----------------------\n                bool judge=true;\n                for(int j=ptr;j>=0;j--)//从后向前检查该节点是否遍历过\n                    if(disk[j]==node)\n                    {\n                        judge=false;\n                        break;\n                    }\n                if(judge)//如果没有遍历过\n                {\n                    Q.push(node);\n                    ptr++;\n                    disk[ptr] = node;\n                    if(node==final)\n                    {\n                        cout<<depth+1<<endl;\n                        return 0;\n                    }\n                }\n                //---------------------\n                swap(node[position],node[position-1]);\n            }\n            \n            if(position>2)//数字0向上移动\n            {\n                swap(node[position],node[position-3]);\n\t\t\t\t//同上\n                swap(node[position],node[position-3]);\n            }\n\n            if(position == 0，1，3，4，6，7)//数字0向右移动\n            {\n                bool judge=true;\n                swap(node[position],node[position+1]);\n                //同上\n                swap(node[position],node[position+1]);\n            }\n\n            if(position<6)//数字0向下移动\n            {\n                swap(node[position],node[position+3]);\n\t\t\t\t//同上\n                swap(node[position],node[position+3]);\n            }\n            Q.pop();\n        }\n        depth++;\n    }\n}\n```\n\n### 双向BFS\n\n虽然上述方法已经很快了，但是执行$Input3$依旧需要将近20秒的时间，因此当节点很深的时候，我们有没有更快的办法呢？\n\n对于本题而言，双向BFS就派上用场了，因为本题已知起始状态和目标状态，我们完全可以同时对这两个状态进行BFS，当两面搜索到了同一个节点时，两面的深度之和就是答案。如图所示，同样的，对于一些走迷宫类的问题，给出起始状态和中止状态，我们都可以考虑使用双向BFS来求解。这种方法有多快呢， 对于$Input3$而言，使用双向BFS求解的时间仅需$0.3s$，是单向BFS速度的近百倍！\n\n<img src=\"8-puzzle/R.024c89daf1b60db70d608b4b73215e76\" alt=\"查看源图像\" style=\"zoom:50%;\" />\n\n这里，我们对代码进行了一些小小的优化，将原本的disk数组更换成了更高效的**哈希映射**，通过**康托展开**将$0-8$的全排列一一映射到大小仅为$362880$的哈希表中。或许你会疑惑，原本应该至少需要开`disk[876543210]`这么大的数组，怎么只需要`disk[362880]`就可以储存的下呢？我们来看一下康托展开的具体实现方式：[康托展开_百度百科 (baidu.com)](https://baike.baidu.com/item/康托展开/7968428?msclkid=92fc5a9ab32e11ec926143771748963a).\n\n是不是很神奇呢？\n\n### 双向BFS代码\n\n```c\n#include<iostream>\n#include<string>\n#include<queue>\nusing namespace std;\nstruct ant\n{\n    string str;\n    int depth;\n    short one_two;\n};\nint visit[362880];\nint depth[362880];\n\nvoid bfs(string begin, string end);//双向BFS\nint hash1(string s);//康托展开\n\nint main()\n{\n    string final = \"123804765\";\n    string start =\"603712458\";\n    bfs(start, final);\n    return 0;\n}\n\nint hash1(string s)//康托展开\n{\n    int f[9]={0,1,2,6,24,120,720,5040,40320};\n    int book[9]={0};\n    int ans=0;\n    int x=s.length();\n    for(int i=0;i<s.length();i++)\n    {\n        int num=0;\n        book[s[i]-'0']=1;\n        for(int j=0;j<s[i]-'0';j++)\n            if(!book[j])\n                num++;\n        x--;\n        ans+=num*f[x];\n    }\n    return ans;\n}\n\nvoid bfs(string begin, string end)\n{\n    queue<ant> Q;\n    ant temp;\n    int str_to_int;//哈希转换\n\n    temp.str = begin;\n    temp.depth = 0;\n    temp.one_two = 1;//1代表正向BFS\n    Q.push(temp);\n    str_to_int = hash1(temp.str);\n    visit[str_to_int] = 1;\n    //depth[str_to_int] = 0;\n\n    temp.str = end;\n    temp.depth = 0;\n    temp.one_two = 2;\n    Q.push(temp);\n    str_to_int = hash1(temp.str);\n    visit[str_to_int] = 2;//2代表反向BFS\n    //depth[str_to_int] = 0;\n\n    while (!Q.empty())\n    {\n        ant node = Q.front();\n        node.depth++;\n\n        int position = -1;//position是数字0所在的位置\n        for (int i = 0; i < 9; i++)\n            if (node.str[i] == '0')\n            {\n                position = i;\n                break;\n            }\n\n\n        if(position == 1,2,4,5,7,8)//数字0向左移动\n        {\n            swap(node.str[position], node.str[position - 1]);\n            str_to_int = hash1(node.str);\n\n            if (!visit[str_to_int])//没有访问过\n            {\n                Q.push(node);\n                visit[str_to_int] = node.one_two;\n                depth[str_to_int] = node.depth;\n            }\n            if(visit[str_to_int] + node.one_two == 3)//一个是1，一个是2，代表相遇\n            {\n                int ans = depth[str_to_int] + node.depth;\n                cout << ans << endl;\n                return;\n            }\n            swap(node.str[position], node.str[position - 1]);\n        }\n\n        if (position >= 3 && position <= 8)//数字0向上移动\n        {\n            swap(node.str[position], node.str[position - 3]);\n            str_to_int = hash1(node.str);\n\n            if (!visit[str_to_int])//没有访问过\n            {...}//同上\n            judge();//同上\n            swap(node.str[position], node.str[position - 3]);\n        }\n\n        if(position == 0，1，3，4，6，7)//数字0向右移动\n        {\n            swap(node.str[position], node.str[position + 1]);\n            str_to_int = hash1(node.str);\n\n            if (!visit[str_to_int])//没有访问过\n            {...}//同上\n            judge();//同上\n            swap(node.str[position], node.str[position + 1]);\n        }\n\n        if (position >= 0 && position <= 5)//数字0向下移动\n        {\n            swap(node.str[position], node.str[position + 3]);\n            str_to_int = hash1(node.str);\n\n            if (!visit[str_to_int])//没有访问过\n            {...}//同上\n            judge();//同上\n            swap(node.str[position], node.str[position + 3]);\n        }\n        Q.pop();\n    }\n}\n```\n\n### A*算法\n\n\n\n### A*算法代码\n\n```\n```\n\n","slug":"8-puzzle","published":1,"updated":"2022-04-03T09:45:01.133Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrc100031gzudxvfd40f","content":"<h2 id=\"题目描述\"><a class=\"markdownIt-Anchor\" href=\"#题目描述\"></a> 题目描述</h2>\n<p>在<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>3</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3×3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span>的棋盘上，摆有八个棋子，每个棋子上标有<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>至<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">8</span></span></span></span>的某一数字。棋盘中留有一个空格，空格用<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>来表示。空格周围的棋子可以移到空格中。要求解的问题是：给出一种初始布局（初始状态）和目标布局（为了使题目简单,设目标状态为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>123804765</mn></mrow><annotation encoding=\"application/x-tex\">123804765</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">3</span><span class=\"mord\">8</span><span class=\"mord\">0</span><span class=\"mord\">4</span><span class=\"mord\">7</span><span class=\"mord\">6</span><span class=\"mord\">5</span></span></span></span>），找到一种最少步骤的移动方法，实现从初始布局到目标布局的转变。</p>\n<img src=\"/2022/04/01/8-puzzle/R.png\" alt=\"R\" style=\"zoom:50%;\" loading=\"lazy\">\n<h3 id=\"输入输出样例\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例\"></a> 输入输出样例</h3>\n<p>input1: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>283104765</mn></mrow><annotation encoding=\"application/x-tex\">283104765</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">8</span><span class=\"mord\">3</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">4</span><span class=\"mord\">7</span><span class=\"mord\">6</span><span class=\"mord\">5</span></span></span></span></p>\n<p>output1: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span></p>\n<p>input2: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>603712458</mn></mrow><annotation encoding=\"application/x-tex\">603712458</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">0</span><span class=\"mord\">3</span><span class=\"mord\">7</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">4</span><span class=\"mord\">5</span><span class=\"mord\">8</span></span></span></span></p>\n<p>output2: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>15</mn></mrow><annotation encoding=\"application/x-tex\">15</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">5</span></span></span></span></p>\n<p>input3: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>603712458</mn></mrow><annotation encoding=\"application/x-tex\">603712458</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">0</span><span class=\"mord\">3</span><span class=\"mord\">7</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">4</span><span class=\"mord\">5</span><span class=\"mord\">8</span></span></span></span></p>\n<p>output3: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>23</mn></mrow><annotation encoding=\"application/x-tex\">23</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">3</span></span></span></span></p>\n<img src=\"/2022/04/01/8-puzzle/35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628.gif\" alt=\"35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628\" style=\"zoom:33%;\" loading=\"lazy\">\n<h2 id=\"问题分析\"><a class=\"markdownIt-Anchor\" href=\"#问题分析\"></a> 问题分析</h2>\n<h3 id=\"朴素bfs\"><a class=\"markdownIt-Anchor\" href=\"#朴素bfs\"></a> 朴素BFS</h3>\n<p>看完问题我们最先想到的一定是BFS，因为我们知道起始状态和目标状态，且不需要求解过程，只需要知道执行的步骤，那么DFS自然就不需要了。因此最简单的办法就是套用BFS模板，目标状态的深度即为答案。过程很简单，看代码就可以理解的哈，不理解可以温习一下BFS的原理：<a href=\"https://tonylsx611.github.io/2022/03/10/BFS/\">BFS简介</a></p>\n<img src=\"/2022/04/01/8-puzzle/R1.png\" alt=\"R1\" style=\"zoom:75%;\" loading=\"lazy\">\n<h3 id=\"朴素bfs代码\"><a class=\"markdownIt-Anchor\" href=\"#朴素bfs代码\"></a> 朴素BFS代码</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    string start<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> depth<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    queue<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span> Q<span class=\"token punctuation\">;</span>\n    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//while循环内的for循环代表树的深度</span>\n        <span class=\"token punctuation\">&#123;</span>\n            string node<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">;</span><span class=\"token comment\">//数字0的位置</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//寻找数字0在九宫格的位置</span>\n                position<span class=\"token operator\">=</span>j<span class=\"token punctuation\">;</span>\n            \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向左移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//与0交换位置</span>\n\t\t\t\tQ<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//判断是否是目标状态</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//交换回来</span>\n            <span class=\"token punctuation\">&#125;</span>\n            \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向上移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//与0交换位置</span>\n\t\t\t\tQ<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//判断是否是目标状态</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//交换回来</span>\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向右移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//与0交换位置</span>\n\t\t\t\tQ<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//判断是否是目标状态</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//交换回来</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//down</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//与0交换位置</span>\n\t\t\t\tQ<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//判断是否是目标状态</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//交换回来</span>\n            <span class=\"token punctuation\">&#125;</span>\n            Q<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        depth<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"记忆化bfs搜索\"><a class=\"markdownIt-Anchor\" href=\"#记忆化bfs搜索\"></a> 记忆化BFS搜索</h3>\n<p>但是，这样的搜索显然是有很多重复的节点，会出现返祖现象，就是说后面的搜索包含了前面已经搜索过的节点。比如，数字0第一次向右移动，第二次向左移动，就相当没移动，又回到原来的节点了。那么为了避免这个问题，我们使用一个超大的数组来记录每一次遍历过的节点状态，因为BFS是按照层级顺序搜索的，因此每次搜索前查找一下这个超大数组，如果已经遍历过的节点将不会再次遍历。这样的减枝可以极大的提高搜索效率，可以减少大约50%的重复搜索时间。</p>\n<h3 id=\"记忆化bfs搜索代码\"><a class=\"markdownIt-Anchor\" href=\"#记忆化bfs搜索代码\"></a> 记忆化BFS搜索代码</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">string disk<span class=\"token punctuation\">[</span><span class=\"token number\">1000001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//记忆数组</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    string start<span class=\"token punctuation\">;</span>\n    string final<span class=\"token operator\">=</span><span class=\"token string\">\"123804765\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> depth<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ptr<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    queue<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span> Q<span class=\"token punctuation\">;</span>\n    disk<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>start<span class=\"token punctuation\">;</span>\n    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            string node<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">;</span><span class=\"token comment\">//数字0的位置</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//寻找数字0在九宫格的位置</span>\n                position<span class=\"token operator\">=</span>j<span class=\"token punctuation\">;</span>\n            \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向左移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">//----------------------</span>\n                bool judge<span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span>ptr<span class=\"token punctuation\">;</span>j<span class=\"token operator\">>=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//从后向前检查该节点是否遍历过</span>\n                    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>disk<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>node<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">&#123;</span>\n                        judge<span class=\"token operator\">=</span>false<span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>judge<span class=\"token punctuation\">)</span><span class=\"token comment\">//如果没有遍历过</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    ptr<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n                    disk<span class=\"token punctuation\">[</span>ptr<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">==</span>final<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">&#123;</span>\n                        cout<span class=\"token operator\">&lt;&lt;</span>depth<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token comment\">//---------------------</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position<span class=\"token operator\">></span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向上移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token comment\">//同上</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span>，<span class=\"token number\">1</span>，<span class=\"token number\">3</span>，<span class=\"token number\">4</span>，<span class=\"token number\">6</span>，<span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向右移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                bool judge<span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">//同上</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position<span class=\"token operator\">&lt;</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向下移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token comment\">//同上</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            Q<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        depth<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"双向bfs\"><a class=\"markdownIt-Anchor\" href=\"#双向bfs\"></a> 双向BFS</h3>\n<p>虽然上述方法已经很快了，但是执行<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>I</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">Input3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord\">3</span></span></span></span>依旧需要将近20秒的时间，因此当节点很深的时候，我们有没有更快的办法呢？</p>\n<p>对于本题而言，双向BFS就派上用场了，因为本题已知起始状态和目标状态，我们完全可以同时对这两个状态进行BFS，当两面搜索到了同一个节点时，两面的深度之和就是答案。如图所示，同样的，对于一些走迷宫类的问题，给出起始状态和中止状态，我们都可以考虑使用双向BFS来求解。这种方法有多快呢， 对于<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>I</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">Input3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord\">3</span></span></span></span>而言，使用双向BFS求解的时间仅需<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0.3</mn><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">0.3s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord mathdefault\">s</span></span></span></span>，是单向BFS速度的近百倍！</p>\n<img src=\"/2022/04/01/8-puzzle/R.024c89daf1b60db70d608b4b73215e76\" alt=\"查看源图像\" style=\"zoom:50%;\" loading=\"lazy\">\n<p>这里，我们对代码进行了一些小小的优化，将原本的disk数组更换成了更高效的<strong>哈希映射</strong>，通过<strong>康托展开</strong>将<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn><mo>−</mo><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">0-8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">8</span></span></span></span>的全排列一一映射到大小仅为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>362880</mn></mrow><annotation encoding=\"application/x-tex\">362880</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">6</span><span class=\"mord\">2</span><span class=\"mord\">8</span><span class=\"mord\">8</span><span class=\"mord\">0</span></span></span></span>的哈希表中。或许你会疑惑，原本应该至少需要开<code>disk[876543210]</code>这么大的数组，怎么只需要<code>disk[362880]</code>就可以储存的下呢？我们来看一下康托展开的具体实现方式：<a href=\"https://baike.baidu.com/item/%E5%BA%B7%E6%89%98%E5%B1%95%E5%BC%80/7968428?msclkid=92fc5a9ab32e11ec926143771748963a\">康托展开_百度百科 (baidu.com)</a>.</p>\n<p>是不是很神奇呢？</p>\n<h3 id=\"双向bfs代码\"><a class=\"markdownIt-Anchor\" href=\"#双向bfs代码\"></a> 双向BFS代码</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;queue></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">ant</span>\n<span class=\"token punctuation\">&#123;</span>\n    string str<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> depth<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">short</span> one_two<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> visit<span class=\"token punctuation\">[</span><span class=\"token number\">362880</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> depth<span class=\"token punctuation\">[</span><span class=\"token number\">362880</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>string begin<span class=\"token punctuation\">,</span> string end<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//双向BFS</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>string s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//康托展开</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    string final <span class=\"token operator\">=</span> <span class=\"token string\">\"123804765\"</span><span class=\"token punctuation\">;</span>\n    string start <span class=\"token operator\">=</span><span class=\"token string\">\"603712458\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>start<span class=\"token punctuation\">,</span> final<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>string s<span class=\"token punctuation\">)</span><span class=\"token comment\">//康托展开</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> f<span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">24</span><span class=\"token punctuation\">,</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span><span class=\"token number\">720</span><span class=\"token punctuation\">,</span><span class=\"token number\">5040</span><span class=\"token punctuation\">,</span><span class=\"token number\">40320</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> book<span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ans<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> x<span class=\"token operator\">=</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> num<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        book<span class=\"token punctuation\">[</span>s<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">-</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;</span>s<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">-</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>book<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                num<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        x<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n        ans<span class=\"token operator\">+=</span>num<span class=\"token operator\">*</span>f<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> ans<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>string begin<span class=\"token punctuation\">,</span> string end<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    queue<span class=\"token operator\">&lt;</span>ant<span class=\"token operator\">></span> Q<span class=\"token punctuation\">;</span>\n    ant temp<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> str_to_int<span class=\"token punctuation\">;</span><span class=\"token comment\">//哈希转换</span>\n\n    temp<span class=\"token punctuation\">.</span>str <span class=\"token operator\">=</span> begin<span class=\"token punctuation\">;</span>\n    temp<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    temp<span class=\"token punctuation\">.</span>one_two <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//1代表正向BFS</span>\n    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//depth[str_to_int] = 0;</span>\n\n    temp<span class=\"token punctuation\">.</span>str <span class=\"token operator\">=</span> end<span class=\"token punctuation\">;</span>\n    temp<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    temp<span class=\"token punctuation\">.</span>one_two <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//2代表反向BFS</span>\n    <span class=\"token comment\">//depth[str_to_int] = 0;</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        ant node <span class=\"token operator\">=</span> Q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        node<span class=\"token punctuation\">.</span>depth<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">int</span> position <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//position是数字0所在的位置</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">9</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token char\">'0'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                position <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向左移动</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//没有访问过</span>\n            <span class=\"token punctuation\">&#123;</span>\n                Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>one_two<span class=\"token punctuation\">;</span>\n                depth<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>depth<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> node<span class=\"token punctuation\">.</span>one_two <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//一个是1，一个是2，代表相遇</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">int</span> ans <span class=\"token operator\">=</span> depth<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> node<span class=\"token punctuation\">.</span>depth<span class=\"token punctuation\">;</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> ans <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>position <span class=\"token operator\">>=</span> <span class=\"token number\">3</span> <span class=\"token operator\">&amp;&amp;</span> position <span class=\"token operator\">&lt;=</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向上移动</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">-</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//没有访问过</span>\n            <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#125;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">-</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span>，<span class=\"token number\">1</span>，<span class=\"token number\">3</span>，<span class=\"token number\">4</span>，<span class=\"token number\">6</span>，<span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向右移动</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//没有访问过</span>\n            <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#125;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>position <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> position <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向下移动</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//没有访问过</span>\n            <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#125;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        Q<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"a算法\"><a class=\"markdownIt-Anchor\" href=\"#a算法\"></a> A*算法</h3>\n<h3 id=\"a算法代码\"><a class=\"markdownIt-Anchor\" href=\"#a算法代码\"></a> A*算法代码</h3>\n<pre class=\"language-none\"><code class=\"language-none\"></code></pre>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"题目描述\"><a class=\"markdownIt-Anchor\" href=\"#题目描述\"></a> 题目描述</h2>\n<p>在<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>3</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3×3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span>的棋盘上，摆有八个棋子，每个棋子上标有<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>至<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">8</span></span></span></span>的某一数字。棋盘中留有一个空格，空格用<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>来表示。空格周围的棋子可以移到空格中。要求解的问题是：给出一种初始布局（初始状态）和目标布局（为了使题目简单,设目标状态为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>123804765</mn></mrow><annotation encoding=\"application/x-tex\">123804765</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">3</span><span class=\"mord\">8</span><span class=\"mord\">0</span><span class=\"mord\">4</span><span class=\"mord\">7</span><span class=\"mord\">6</span><span class=\"mord\">5</span></span></span></span>），找到一种最少步骤的移动方法，实现从初始布局到目标布局的转变。</p>\n<img src=\"/2022/04/01/8-puzzle/R.png\" alt=\"R\" style=\"zoom:50%;\">\n<h3 id=\"输入输出样例\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例\"></a> 输入输出样例</h3>\n<p>input1: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>283104765</mn></mrow><annotation encoding=\"application/x-tex\">283104765</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">8</span><span class=\"mord\">3</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">4</span><span class=\"mord\">7</span><span class=\"mord\">6</span><span class=\"mord\">5</span></span></span></span></p>\n<p>output1: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span></p>\n<p>input2: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>603712458</mn></mrow><annotation encoding=\"application/x-tex\">603712458</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">0</span><span class=\"mord\">3</span><span class=\"mord\">7</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">4</span><span class=\"mord\">5</span><span class=\"mord\">8</span></span></span></span></p>\n<p>output2: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>15</mn></mrow><annotation encoding=\"application/x-tex\">15</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">5</span></span></span></span></p>\n<p>input3: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>603712458</mn></mrow><annotation encoding=\"application/x-tex\">603712458</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">0</span><span class=\"mord\">3</span><span class=\"mord\">7</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">4</span><span class=\"mord\">5</span><span class=\"mord\">8</span></span></span></span></p>\n<p>output3: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>23</mn></mrow><annotation encoding=\"application/x-tex\">23</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">3</span></span></span></span></p>\n<img src=\"/2022/04/01/8-puzzle/35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628.gif\" alt=\"35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628\" style=\"zoom:33%;\">\n<h2 id=\"问题分析\"><a class=\"markdownIt-Anchor\" href=\"#问题分析\"></a> 问题分析</h2>\n<h3 id=\"朴素bfs\"><a class=\"markdownIt-Anchor\" href=\"#朴素bfs\"></a> 朴素BFS</h3>\n<p>看完问题我们最先想到的一定是BFS，因为我们知道起始状态和目标状态，且不需要求解过程，只需要知道执行的步骤，那么DFS自然就不需要了。因此最简单的办法就是套用BFS模板，目标状态的深度即为答案。过程很简单，看代码就可以理解的哈，不理解可以温习一下BFS的原理：<a href=\"https://tonylsx611.github.io/2022/03/10/BFS/\">BFS简介</a></p>\n<img src=\"/2022/04/01/8-puzzle/R1.png\" alt=\"R1\" style=\"zoom:75%;\">\n<h3 id=\"朴素bfs代码\"><a class=\"markdownIt-Anchor\" href=\"#朴素bfs代码\"></a> 朴素BFS代码</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    string start<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> depth<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    queue<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span> Q<span class=\"token punctuation\">;</span>\n    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//while循环内的for循环代表树的深度</span>\n        <span class=\"token punctuation\">&#123;</span>\n            string node<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">;</span><span class=\"token comment\">//数字0的位置</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//寻找数字0在九宫格的位置</span>\n                position<span class=\"token operator\">=</span>j<span class=\"token punctuation\">;</span>\n            \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向左移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//与0交换位置</span>\n\t\t\t\tQ<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//判断是否是目标状态</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//交换回来</span>\n            <span class=\"token punctuation\">&#125;</span>\n            \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向上移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//与0交换位置</span>\n\t\t\t\tQ<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//判断是否是目标状态</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//交换回来</span>\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向右移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//与0交换位置</span>\n\t\t\t\tQ<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//判断是否是目标状态</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//交换回来</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//down</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//与0交换位置</span>\n\t\t\t\tQ<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//判断是否是目标状态</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//交换回来</span>\n            <span class=\"token punctuation\">&#125;</span>\n            Q<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        depth<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"记忆化bfs搜索\"><a class=\"markdownIt-Anchor\" href=\"#记忆化bfs搜索\"></a> 记忆化BFS搜索</h3>\n<p>但是，这样的搜索显然是有很多重复的节点，会出现返祖现象，就是说后面的搜索包含了前面已经搜索过的节点。比如，数字0第一次向右移动，第二次向左移动，就相当没移动，又回到原来的节点了。那么为了避免这个问题，我们使用一个超大的数组来记录每一次遍历过的节点状态，因为BFS是按照层级顺序搜索的，因此每次搜索前查找一下这个超大数组，如果已经遍历过的节点将不会再次遍历。这样的减枝可以极大的提高搜索效率，可以减少大约50%的重复搜索时间。</p>\n<h3 id=\"记忆化bfs搜索代码\"><a class=\"markdownIt-Anchor\" href=\"#记忆化bfs搜索代码\"></a> 记忆化BFS搜索代码</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">string disk<span class=\"token punctuation\">[</span><span class=\"token number\">1000001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//记忆数组</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    string start<span class=\"token punctuation\">;</span>\n    string final<span class=\"token operator\">=</span><span class=\"token string\">\"123804765\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> depth<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ptr<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    queue<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span> Q<span class=\"token punctuation\">;</span>\n    disk<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>start<span class=\"token punctuation\">;</span>\n    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            string node<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">;</span><span class=\"token comment\">//数字0的位置</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//寻找数字0在九宫格的位置</span>\n                position<span class=\"token operator\">=</span>j<span class=\"token punctuation\">;</span>\n            \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向左移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">//----------------------</span>\n                bool judge<span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span>ptr<span class=\"token punctuation\">;</span>j<span class=\"token operator\">>=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//从后向前检查该节点是否遍历过</span>\n                    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>disk<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>node<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">&#123;</span>\n                        judge<span class=\"token operator\">=</span>false<span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>judge<span class=\"token punctuation\">)</span><span class=\"token comment\">//如果没有遍历过</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    ptr<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n                    disk<span class=\"token punctuation\">[</span>ptr<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">==</span>final<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">&#123;</span>\n                        cout<span class=\"token operator\">&lt;&lt;</span>depth<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token comment\">//---------------------</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position<span class=\"token operator\">></span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向上移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token comment\">//同上</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span>，<span class=\"token number\">1</span>，<span class=\"token number\">3</span>，<span class=\"token number\">4</span>，<span class=\"token number\">6</span>，<span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向右移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                bool judge<span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">//同上</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position<span class=\"token operator\">&lt;</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向下移动</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token comment\">//同上</span>\n                <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>node<span class=\"token punctuation\">[</span>position<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            Q<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        depth<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"双向bfs\"><a class=\"markdownIt-Anchor\" href=\"#双向bfs\"></a> 双向BFS</h3>\n<p>虽然上述方法已经很快了，但是执行<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>I</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">Input3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord\">3</span></span></span></span>依旧需要将近20秒的时间，因此当节点很深的时候，我们有没有更快的办法呢？</p>\n<p>对于本题而言，双向BFS就派上用场了，因为本题已知起始状态和目标状态，我们完全可以同时对这两个状态进行BFS，当两面搜索到了同一个节点时，两面的深度之和就是答案。如图所示，同样的，对于一些走迷宫类的问题，给出起始状态和中止状态，我们都可以考虑使用双向BFS来求解。这种方法有多快呢， 对于<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>I</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">Input3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord\">3</span></span></span></span>而言，使用双向BFS求解的时间仅需<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0.3</mn><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">0.3s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord mathdefault\">s</span></span></span></span>，是单向BFS速度的近百倍！</p>\n<img src=\"/2022/04/01/8-puzzle/R.024c89daf1b60db70d608b4b73215e76\" alt=\"查看源图像\" style=\"zoom:50%;\">\n<p>这里，我们对代码进行了一些小小的优化，将原本的disk数组更换成了更高效的<strong>哈希映射</strong>，通过<strong>康托展开</strong>将<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn><mo>−</mo><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">0-8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">8</span></span></span></span>的全排列一一映射到大小仅为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>362880</mn></mrow><annotation encoding=\"application/x-tex\">362880</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">6</span><span class=\"mord\">2</span><span class=\"mord\">8</span><span class=\"mord\">8</span><span class=\"mord\">0</span></span></span></span>的哈希表中。或许你会疑惑，原本应该至少需要开<code>disk[876543210]</code>这么大的数组，怎么只需要<code>disk[362880]</code>就可以储存的下呢？我们来看一下康托展开的具体实现方式：<a href=\"https://baike.baidu.com/item/%E5%BA%B7%E6%89%98%E5%B1%95%E5%BC%80/7968428?msclkid=92fc5a9ab32e11ec926143771748963a\">康托展开_百度百科 (baidu.com)</a>.</p>\n<p>是不是很神奇呢？</p>\n<h3 id=\"双向bfs代码\"><a class=\"markdownIt-Anchor\" href=\"#双向bfs代码\"></a> 双向BFS代码</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;queue></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">ant</span>\n<span class=\"token punctuation\">&#123;</span>\n    string str<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> depth<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">short</span> one_two<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> visit<span class=\"token punctuation\">[</span><span class=\"token number\">362880</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> depth<span class=\"token punctuation\">[</span><span class=\"token number\">362880</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>string begin<span class=\"token punctuation\">,</span> string end<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//双向BFS</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>string s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//康托展开</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    string final <span class=\"token operator\">=</span> <span class=\"token string\">\"123804765\"</span><span class=\"token punctuation\">;</span>\n    string start <span class=\"token operator\">=</span><span class=\"token string\">\"603712458\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>start<span class=\"token punctuation\">,</span> final<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>string s<span class=\"token punctuation\">)</span><span class=\"token comment\">//康托展开</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> f<span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">24</span><span class=\"token punctuation\">,</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span><span class=\"token number\">720</span><span class=\"token punctuation\">,</span><span class=\"token number\">5040</span><span class=\"token punctuation\">,</span><span class=\"token number\">40320</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> book<span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ans<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> x<span class=\"token operator\">=</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> num<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        book<span class=\"token punctuation\">[</span>s<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">-</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;</span>s<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">-</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>book<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                num<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        x<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n        ans<span class=\"token operator\">+=</span>num<span class=\"token operator\">*</span>f<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> ans<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>string begin<span class=\"token punctuation\">,</span> string end<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    queue<span class=\"token operator\">&lt;</span>ant<span class=\"token operator\">></span> Q<span class=\"token punctuation\">;</span>\n    ant temp<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> str_to_int<span class=\"token punctuation\">;</span><span class=\"token comment\">//哈希转换</span>\n\n    temp<span class=\"token punctuation\">.</span>str <span class=\"token operator\">=</span> begin<span class=\"token punctuation\">;</span>\n    temp<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    temp<span class=\"token punctuation\">.</span>one_two <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//1代表正向BFS</span>\n    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//depth[str_to_int] = 0;</span>\n\n    temp<span class=\"token punctuation\">.</span>str <span class=\"token operator\">=</span> end<span class=\"token punctuation\">;</span>\n    temp<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    temp<span class=\"token punctuation\">.</span>one_two <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//2代表反向BFS</span>\n    <span class=\"token comment\">//depth[str_to_int] = 0;</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        ant node <span class=\"token operator\">=</span> Q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        node<span class=\"token punctuation\">.</span>depth<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">int</span> position <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//position是数字0所在的位置</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">9</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token char\">'0'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                position <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向左移动</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//没有访问过</span>\n            <span class=\"token punctuation\">&#123;</span>\n                Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>one_two<span class=\"token punctuation\">;</span>\n                depth<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>depth<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> node<span class=\"token punctuation\">.</span>one_two <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//一个是1，一个是2，代表相遇</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">int</span> ans <span class=\"token operator\">=</span> depth<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> node<span class=\"token punctuation\">.</span>depth<span class=\"token punctuation\">;</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> ans <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>position <span class=\"token operator\">>=</span> <span class=\"token number\">3</span> <span class=\"token operator\">&amp;&amp;</span> position <span class=\"token operator\">&lt;=</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向上移动</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">-</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//没有访问过</span>\n            <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#125;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">-</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span>，<span class=\"token number\">1</span>，<span class=\"token number\">3</span>，<span class=\"token number\">4</span>，<span class=\"token number\">6</span>，<span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向右移动</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//没有访问过</span>\n            <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#125;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>position <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> position <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//数字0向下移动</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            str_to_int <span class=\"token operator\">=</span> <span class=\"token function\">hash1</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>visit<span class=\"token punctuation\">[</span>str_to_int<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//没有访问过</span>\n            <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#125;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">judge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//同上</span>\n            <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">[</span>position <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        Q<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"a算法\"><a class=\"markdownIt-Anchor\" href=\"#a算法\"></a> A*算法</h3>\n<h3 id=\"a算法代码\"><a class=\"markdownIt-Anchor\" href=\"#a算法代码\"></a> A*算法代码</h3>\n<pre class=\"language-none\"><code class=\"language-none\"></code></pre>\n"},{"title":"Anaconda-Python环境搭建","date":"2022-09-17T10:25:38.000Z","author":"Tony","katex":true,"_content":"\n## Anaconda Python 环境搭建\n\n## 下载并安装anaconda\n\n官网下载链接: [Anaconda | The World's Most Popular Data Science Platform](https://www.anaconda.com/))\n\n![U0I112981_%MPSVS4CXL8BF](Anaconda-env/U0I112981_%MPSVS4CXL8BF.png)\n\n下载后一键安装：\n\n<img src=\"Anaconda-env/QQ图片20220722134623.jpg\" alt=\"QQ图片20220722134623\" style=\"zoom:50%;\" />\n\n## 添加Anaconda到环境变量\n\n在计算机中搜索“环境变量”（快捷键 Win+S），选择系统变量中的path，编辑Path。\n\n![image-20220722135753076](Anaconda-env/image-20220722135753076.png)\n\n若安装Anaconda时使用的时默认安装位置，在Path中添加如下地址：\n\n```bash\nC:\\ProgramData\\Anaconda3\nC:\\ProgramData\\Anaconda3\\Scripts\nC:\\ProgramData\\Anaconda3\\Library\\bin\nC:\\ProgramData\\Anaconda3\\Library\\mingw-w64\\bin\n```\n\n![image-20220917183015892](Anaconda-env/image-20220917183015892.png)\n\n添加后验证是否成功配置环境变量，在本地计算机中搜索`prompt`，以管理员身份运行。\n\n![image-20220722141130992](Anaconda-env/image-20220722141130992-1663410673096-7.png)\n\n输入以下指令：\n\n```bash\nconda --version\nconda info\npython --version\n```\n\n![image-20220722141252367](Anaconda-env/image-20220722141252367.png)\n\n如果可以正常输出则证明安装成功，部分老机型需要重启电脑才能应用path添加的新环境，若仍不成功则检查path路径是否有误。\n\n## 运行Python\n\n打开Anaconda Navigator并运行Spyder，随便输入点什么（比如print语句），若能正常运行，则证明Python安装成功。\n\n![image-20220722141736616](Anaconda-env/image-20220722141736616.png)\n\nPycharm是Python较为常用的IDE，这里我们放一个官网链接供快捷跳转下载。\n\n[Pycharm官网安装网址](https://www.jetbrains.com/pycharm/)\n\n![image-20220722142107169](Anaconda-env/image-20220722142107169.png)\n\n安装过程中记得勾选“添加bin到path环境变量中”，否则还得手动添加一遍，麻烦死。\n\n<img src=\"Anaconda-env/image-20220722142150620.png\" alt=\"image-20220722142150620\" style=\"zoom:67%;\" />\n\n安装好后重启电脑，Anaconda可视化界面下多出了一个Pycharm Community的图标，可从anaconda中直接打开Pycharm。\n\n![image-20220722142444023](Anaconda-env/image-20220722142444023.png)\n\n## Python环境管理\n\n当我们通过Pycharm新建一个项目时，可以选择新建环境或者使用之前配置好的环境。\n\n![image-20220722144502752](Anaconda-env/image-20220722144502752.png)\n\n### 新建环境\n\n- Virtuallenv: Pycharm的虚拟环境，项目之间默认不通用，也就是说每新建一个项目都要新开一个虚拟环境，较为占用空间。\n- Conda：Anaconda环境，也可在anaconda的environment可视化界面下添加环境，如图所示：\n\n![image-20220722152550108](Anaconda-env/image-20220722152550108.png)\n\n我们可以将Anaconda的environment理解为环境管理工具，也可以在prompt中使用命令添加或删除环境。\n\n### 先前配置的环境\n\n选择Conda环境，解释器的位置为Anaconda的安装目录根目录，下面有个Python.exe，选择此目录（如果没有ProgramData目录，则手动打上去，就有了），此环境为anaconda的base目录。\n\n![image-20220722145541034](Anaconda-env/image-20220722145541034.png)\n\n如果选择其它目录，则在Python解释器中更改为指定的解释器目录。\n\n![image-20220722154032582](Anaconda-env/image-20220722154032582.png)\n","source":"_posts/Anaconda-env.md","raw":"---\ntitle: Anaconda-Python环境搭建\ndate: 2022-09-17 18:25:38\nauthor: Tony\ntags:\n  - anaconda\n  - Python\ncategories:\n  - Python\nkatex: true\n---\n\n## Anaconda Python 环境搭建\n\n## 下载并安装anaconda\n\n官网下载链接: [Anaconda | The World's Most Popular Data Science Platform](https://www.anaconda.com/))\n\n![U0I112981_%MPSVS4CXL8BF](Anaconda-env/U0I112981_%MPSVS4CXL8BF.png)\n\n下载后一键安装：\n\n<img src=\"Anaconda-env/QQ图片20220722134623.jpg\" alt=\"QQ图片20220722134623\" style=\"zoom:50%;\" />\n\n## 添加Anaconda到环境变量\n\n在计算机中搜索“环境变量”（快捷键 Win+S），选择系统变量中的path，编辑Path。\n\n![image-20220722135753076](Anaconda-env/image-20220722135753076.png)\n\n若安装Anaconda时使用的时默认安装位置，在Path中添加如下地址：\n\n```bash\nC:\\ProgramData\\Anaconda3\nC:\\ProgramData\\Anaconda3\\Scripts\nC:\\ProgramData\\Anaconda3\\Library\\bin\nC:\\ProgramData\\Anaconda3\\Library\\mingw-w64\\bin\n```\n\n![image-20220917183015892](Anaconda-env/image-20220917183015892.png)\n\n添加后验证是否成功配置环境变量，在本地计算机中搜索`prompt`，以管理员身份运行。\n\n![image-20220722141130992](Anaconda-env/image-20220722141130992-1663410673096-7.png)\n\n输入以下指令：\n\n```bash\nconda --version\nconda info\npython --version\n```\n\n![image-20220722141252367](Anaconda-env/image-20220722141252367.png)\n\n如果可以正常输出则证明安装成功，部分老机型需要重启电脑才能应用path添加的新环境，若仍不成功则检查path路径是否有误。\n\n## 运行Python\n\n打开Anaconda Navigator并运行Spyder，随便输入点什么（比如print语句），若能正常运行，则证明Python安装成功。\n\n![image-20220722141736616](Anaconda-env/image-20220722141736616.png)\n\nPycharm是Python较为常用的IDE，这里我们放一个官网链接供快捷跳转下载。\n\n[Pycharm官网安装网址](https://www.jetbrains.com/pycharm/)\n\n![image-20220722142107169](Anaconda-env/image-20220722142107169.png)\n\n安装过程中记得勾选“添加bin到path环境变量中”，否则还得手动添加一遍，麻烦死。\n\n<img src=\"Anaconda-env/image-20220722142150620.png\" alt=\"image-20220722142150620\" style=\"zoom:67%;\" />\n\n安装好后重启电脑，Anaconda可视化界面下多出了一个Pycharm Community的图标，可从anaconda中直接打开Pycharm。\n\n![image-20220722142444023](Anaconda-env/image-20220722142444023.png)\n\n## Python环境管理\n\n当我们通过Pycharm新建一个项目时，可以选择新建环境或者使用之前配置好的环境。\n\n![image-20220722144502752](Anaconda-env/image-20220722144502752.png)\n\n### 新建环境\n\n- Virtuallenv: Pycharm的虚拟环境，项目之间默认不通用，也就是说每新建一个项目都要新开一个虚拟环境，较为占用空间。\n- Conda：Anaconda环境，也可在anaconda的environment可视化界面下添加环境，如图所示：\n\n![image-20220722152550108](Anaconda-env/image-20220722152550108.png)\n\n我们可以将Anaconda的environment理解为环境管理工具，也可以在prompt中使用命令添加或删除环境。\n\n### 先前配置的环境\n\n选择Conda环境，解释器的位置为Anaconda的安装目录根目录，下面有个Python.exe，选择此目录（如果没有ProgramData目录，则手动打上去，就有了），此环境为anaconda的base目录。\n\n![image-20220722145541034](Anaconda-env/image-20220722145541034.png)\n\n如果选择其它目录，则在Python解释器中更改为指定的解释器目录。\n\n![image-20220722154032582](Anaconda-env/image-20220722154032582.png)\n","slug":"Anaconda-env","published":1,"updated":"2022-11-01T05:53:00.478Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrc500071gzug3voay8i","content":"<h2 id=\"anaconda-python-环境搭建\"><a class=\"markdownIt-Anchor\" href=\"#anaconda-python-环境搭建\"></a> Anaconda Python 环境搭建</h2>\n<h2 id=\"下载并安装anaconda\"><a class=\"markdownIt-Anchor\" href=\"#下载并安装anaconda\"></a> 下载并安装anaconda</h2>\n<p>官网下载链接: <a href=\"https://www.anaconda.com/\">Anaconda | The World’s Most Popular Data Science Platform</a>)</p>\n<p><img src=\"/2022/09/17/Anaconda-env/U0I112981_%25MPSVS4CXL8BF.png\" alt=\"U0I112981_%MPSVS4CXL8BF\" loading=\"lazy\"></p>\n<p>下载后一键安装：</p>\n<img src=\"/2022/09/17/Anaconda-env/QQ图片20220722134623.jpg\" alt=\"QQ图片20220722134623\" style=\"zoom:50%;\" loading=\"lazy\">\n<h2 id=\"添加anaconda到环境变量\"><a class=\"markdownIt-Anchor\" href=\"#添加anaconda到环境变量\"></a> 添加Anaconda到环境变量</h2>\n<p>在计算机中搜索“环境变量”（快捷键 Win+S），选择系统变量中的path，编辑Path。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722135753076.png\" alt=\"image-20220722135753076\" loading=\"lazy\"></p>\n<p>若安装Anaconda时使用的时默认安装位置，在Path中添加如下地址：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">C:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Scripts\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Library<span class=\"token punctuation\">\\</span>bin\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Library<span class=\"token punctuation\">\\</span>mingw-w64<span class=\"token punctuation\">\\</span>bin</code></pre>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220917183015892.png\" alt=\"image-20220917183015892\" loading=\"lazy\"></p>\n<p>添加后验证是否成功配置环境变量，在本地计算机中搜索<code>prompt</code>，以管理员身份运行。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722141130992-1663410673096-7.png\" alt=\"image-20220722141130992\" loading=\"lazy\"></p>\n<p>输入以下指令：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">conda --version\nconda info\npython --version</code></pre>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722141252367.png\" alt=\"image-20220722141252367\" loading=\"lazy\"></p>\n<p>如果可以正常输出则证明安装成功，部分老机型需要重启电脑才能应用path添加的新环境，若仍不成功则检查path路径是否有误。</p>\n<h2 id=\"运行python\"><a class=\"markdownIt-Anchor\" href=\"#运行python\"></a> 运行Python</h2>\n<p>打开Anaconda Navigator并运行Spyder，随便输入点什么（比如print语句），若能正常运行，则证明Python安装成功。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722141736616.png\" alt=\"image-20220722141736616\" loading=\"lazy\"></p>\n<p>Pycharm是Python较为常用的IDE，这里我们放一个官网链接供快捷跳转下载。</p>\n<p><a href=\"https://www.jetbrains.com/pycharm/\">Pycharm官网安装网址</a></p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722142107169.png\" alt=\"image-20220722142107169\" loading=\"lazy\"></p>\n<p>安装过程中记得勾选“添加bin到path环境变量中”，否则还得手动添加一遍，麻烦死。</p>\n<img src=\"/2022/09/17/Anaconda-env/image-20220722142150620.png\" alt=\"image-20220722142150620\" style=\"zoom:67%;\" loading=\"lazy\">\n<p>安装好后重启电脑，Anaconda可视化界面下多出了一个Pycharm Community的图标，可从anaconda中直接打开Pycharm。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722142444023.png\" alt=\"image-20220722142444023\" loading=\"lazy\"></p>\n<h2 id=\"python环境管理\"><a class=\"markdownIt-Anchor\" href=\"#python环境管理\"></a> Python环境管理</h2>\n<p>当我们通过Pycharm新建一个项目时，可以选择新建环境或者使用之前配置好的环境。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722144502752.png\" alt=\"image-20220722144502752\" loading=\"lazy\"></p>\n<h3 id=\"新建环境\"><a class=\"markdownIt-Anchor\" href=\"#新建环境\"></a> 新建环境</h3>\n<ul>\n<li>Virtuallenv: Pycharm的虚拟环境，项目之间默认不通用，也就是说每新建一个项目都要新开一个虚拟环境，较为占用空间。</li>\n<li>Conda：Anaconda环境，也可在anaconda的environment可视化界面下添加环境，如图所示：</li>\n</ul>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722152550108.png\" alt=\"image-20220722152550108\" loading=\"lazy\"></p>\n<p>我们可以将Anaconda的environment理解为环境管理工具，也可以在prompt中使用命令添加或删除环境。</p>\n<h3 id=\"先前配置的环境\"><a class=\"markdownIt-Anchor\" href=\"#先前配置的环境\"></a> 先前配置的环境</h3>\n<p>选择Conda环境，解释器的位置为Anaconda的安装目录根目录，下面有个Python.exe，选择此目录（如果没有ProgramData目录，则手动打上去，就有了），此环境为anaconda的base目录。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722145541034.png\" alt=\"image-20220722145541034\" loading=\"lazy\"></p>\n<p>如果选择其它目录，则在Python解释器中更改为指定的解释器目录。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722154032582.png\" alt=\"image-20220722154032582\" loading=\"lazy\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"anaconda-python-环境搭建\"><a class=\"markdownIt-Anchor\" href=\"#anaconda-python-环境搭建\"></a> Anaconda Python 环境搭建</h2>\n<h2 id=\"下载并安装anaconda\"><a class=\"markdownIt-Anchor\" href=\"#下载并安装anaconda\"></a> 下载并安装anaconda</h2>\n<p>官网下载链接: <a href=\"https://www.anaconda.com/\">Anaconda | The World’s Most Popular Data Science Platform</a>)</p>\n<p><img src=\"/2022/09/17/Anaconda-env/U0I112981_%25MPSVS4CXL8BF.png\" alt=\"U0I112981_%MPSVS4CXL8BF\"></p>\n<p>下载后一键安装：</p>\n<img src=\"/2022/09/17/Anaconda-env/QQ图片20220722134623.jpg\" alt=\"QQ图片20220722134623\" style=\"zoom:50%;\">\n<h2 id=\"添加anaconda到环境变量\"><a class=\"markdownIt-Anchor\" href=\"#添加anaconda到环境变量\"></a> 添加Anaconda到环境变量</h2>\n<p>在计算机中搜索“环境变量”（快捷键 Win+S），选择系统变量中的path，编辑Path。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722135753076.png\" alt=\"image-20220722135753076\"></p>\n<p>若安装Anaconda时使用的时默认安装位置，在Path中添加如下地址：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">C:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Scripts\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Library<span class=\"token punctuation\">\\</span>bin\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Library<span class=\"token punctuation\">\\</span>mingw-w64<span class=\"token punctuation\">\\</span>bin</code></pre>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220917183015892.png\" alt=\"image-20220917183015892\"></p>\n<p>添加后验证是否成功配置环境变量，在本地计算机中搜索<code>prompt</code>，以管理员身份运行。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722141130992-1663410673096-7.png\" alt=\"image-20220722141130992\"></p>\n<p>输入以下指令：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">conda --version\nconda info\npython --version</code></pre>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722141252367.png\" alt=\"image-20220722141252367\"></p>\n<p>如果可以正常输出则证明安装成功，部分老机型需要重启电脑才能应用path添加的新环境，若仍不成功则检查path路径是否有误。</p>\n<h2 id=\"运行python\"><a class=\"markdownIt-Anchor\" href=\"#运行python\"></a> 运行Python</h2>\n<p>打开Anaconda Navigator并运行Spyder，随便输入点什么（比如print语句），若能正常运行，则证明Python安装成功。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722141736616.png\" alt=\"image-20220722141736616\"></p>\n<p>Pycharm是Python较为常用的IDE，这里我们放一个官网链接供快捷跳转下载。</p>\n<p><a href=\"https://www.jetbrains.com/pycharm/\">Pycharm官网安装网址</a></p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722142107169.png\" alt=\"image-20220722142107169\"></p>\n<p>安装过程中记得勾选“添加bin到path环境变量中”，否则还得手动添加一遍，麻烦死。</p>\n<img src=\"/2022/09/17/Anaconda-env/image-20220722142150620.png\" alt=\"image-20220722142150620\" style=\"zoom:67%;\">\n<p>安装好后重启电脑，Anaconda可视化界面下多出了一个Pycharm Community的图标，可从anaconda中直接打开Pycharm。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722142444023.png\" alt=\"image-20220722142444023\"></p>\n<h2 id=\"python环境管理\"><a class=\"markdownIt-Anchor\" href=\"#python环境管理\"></a> Python环境管理</h2>\n<p>当我们通过Pycharm新建一个项目时，可以选择新建环境或者使用之前配置好的环境。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722144502752.png\" alt=\"image-20220722144502752\"></p>\n<h3 id=\"新建环境\"><a class=\"markdownIt-Anchor\" href=\"#新建环境\"></a> 新建环境</h3>\n<ul>\n<li>Virtuallenv: Pycharm的虚拟环境，项目之间默认不通用，也就是说每新建一个项目都要新开一个虚拟环境，较为占用空间。</li>\n<li>Conda：Anaconda环境，也可在anaconda的environment可视化界面下添加环境，如图所示：</li>\n</ul>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722152550108.png\" alt=\"image-20220722152550108\"></p>\n<p>我们可以将Anaconda的environment理解为环境管理工具，也可以在prompt中使用命令添加或删除环境。</p>\n<h3 id=\"先前配置的环境\"><a class=\"markdownIt-Anchor\" href=\"#先前配置的环境\"></a> 先前配置的环境</h3>\n<p>选择Conda环境，解释器的位置为Anaconda的安装目录根目录，下面有个Python.exe，选择此目录（如果没有ProgramData目录，则手动打上去，就有了），此环境为anaconda的base目录。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722145541034.png\" alt=\"image-20220722145541034\"></p>\n<p>如果选择其它目录，则在Python解释器中更改为指定的解释器目录。</p>\n<p><img src=\"/2022/09/17/Anaconda-env/image-20220722154032582.png\" alt=\"image-20220722154032582\"></p>\n"},{"title":"Andriod Studio开发 1","date":"2022-09-17T11:02:16.000Z","katex":true,"author":"Tony","_content":"\n## 任务目标\n\n在Spinner中提供四个可选项，当点击BUTTON按钮时，下方文字显示对应的选项。\n\n![image-20220916130832425](Andriod-Studio-1/image-20220916130832425.png)\n\n## 项目管理\n\n![image-20220916131246387](Andriod-Studio-1/image-20220916131246387.png)\n\n该项目中我们主要用到以下四个文件：\n\n- MainActivity.java\n- BeerExport.java\n- activity_main.xml\n- strings.xml\n\n其中，MainActivity.java是核心的java文件，BeerExport.java是用来定义新的class的java文件，需要手动创建。Activity_main.xml是定义主界面控件的文件，strings.xml是用来定义特定字符串的文件。\n\n## 界面编辑\n\n```xml\n<!---Activity_main.xml--->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:padding=\"16dp\"\n    android:orientation=\"vertical\"\n    tools:context=\".MainActivity\" >\n\n    <Spinner\n        android:id=\"@+id/color\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:layout_margin=\"16dp\"\n        android:layout_marginTop=\"40dp\"\n        android:entries=\"@array/beer_color\"\n        android:minHeight=\"48dp\" />\n\n    <Button\n        android:id=\"@+id/find_beer\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:layout_margin=\"24dp\"\n        android:text=\"button\"\n        android:onClick=\"onClickFindBeer\"/>\n    <TextView\n        android:id=\"@+id/brands\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Hello World!\"\n        android:layout_gravity=\"center\"\n        android:layout_margin=\"16dp\" />\n\n</LinearLayout>\n```\n\n我们分别定义了三个主要的控件，其中Spinner的名字是color，Button的名字是find_beer，TextView的名字是brands.\n\n需要注意的是，spinner控件中定义了名为beer_color的entries，而我们可以在strings.xml中定义一个字符串数组来储存这些选项。\n\n```xml\n<!---strings.xml--->\n<resources>\n    <string name=\"app_name\">My Application test911</string>\n    <string-array name=\"beer_color\">\n        <item>light</item>\n        <item>amber</item>\n        <item>brown</item>\n        <item>dark</item>\n    </string-array>\n</resources>\n```\n\n## Java逻辑编辑\n\n注意到在activity_main.xml的Button控件中，我们定义了一个Onclick功能，每次按下按钮时，都会执行该功能。因此我们需要在MainActivity.java中定义该函数。\n\n```java\npublic class MainActivity extends AppCompatActivity\n{\n    private final BeerExpert expert = new BeerExpert();\n\n    public void onClickFindBeer(View view)\n    {\n        TextView brands = findViewById(R.id.brands);\n        Spinner color = findViewById(R.id.color);\n        String beerType = String.valueOf(color.getSelectedItemId());\n        brands.setText(beerType); //0-3\n\n        List<String> brandlist = expert.getBrands(beerType);\n        StringBuilder brandFormatted = new StringBuilder();\n        for (String brand:brandlist)\n        {\n            brandFormatted.append(brand).append(\"\\n\");\n        }\n        brands.setText(brandFormatted);\n    }\n\n    @SuppressLint(\"SetTextI18n\")\n    @Override\n    protected void onCreate(Bundle savedInstanceState) \n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        TextView Brands = findViewById(R.id.brands);\n        Brands.setText(\"This is the initial TEXT\");\n    }\n}\n```\n\n而BeerExpert.java中的函数则是判断Spinner中选中了哪个选项，并返回相应的文字。然后将文字打印到下方的文字框中。对于这个程序，其实完全可以在MainActivity中定义一个函数，我们这里选择新建一个Class的原因是为了体现面向对象的编程。\n\n```java\npublic class BeerExpert\n{\n    public BeerExpert()\n    {\n\n    }\n    List<String> getBrands(String color)\n    {\n        List<String> bands = new ArrayList<>();\n        if(color.equals(\"1\"))\n        {\n            bands.add(\"Amber\");\n        }\n        else if(color.equals(\"0\"))\n        {\n            bands.add(\"Light\");\n        }\n        else if(color.equals(\"2\"))\n        {\n            bands.add(\"Brown\");\n        }\n        else if(color.equals(\"3\"))\n        {\n            bands.add(\"Dark\");\n        }\n        else\n        {\n            bands.add(\"Error!!!\");\n        }\n        return bands;\n    }\n}\n```\n\n## 程序运行\n\n![image-20220916143713242](Andriod-Studio-1/image-20220916143713242.png)\n\n## Kotlin语言\n\n```kotlin\npackage com.example.kotlin_test\n\nimport android.os.Bundle\nimport android.view.View\nimport android.widget.Spinner\nimport android.widget.TextView\nimport androidx.appcompat.app.AppCompatActivity\n\nclass MainActivity : AppCompatActivity()\n{\n    fun getBrands(color: String): MutableList<String>\n    {\n        val bands: MutableList<String> = ArrayList()\n        if (color == \"0\") \n            bands.add(\"Black\")\n        else if (color == \"1\") \n            bands.add(\"White\")\n        else if (color == \"2\") \n            bands.add(\"Brown\")\n        else if (color == \"3\")\n            bands.add(\"Pink\")\n        else\n            bands.add(\"Error!!!\")\n        return bands\n    }\n    fun onClickButton(view: View)\n    {\n        val brands = findViewById<TextView>(R.id.textView)\n        val color = findViewById<Spinner>(R.id.spinner)\n        val beerType = color.selectedItemId.toString()\n        brands.text = beerType //0-3\n\n\n        val brandlist: List<String> = getBrands(beerType)\n        val brandFormatted = StringBuilder()\n        for (brand in brandlist)\n        {\n            brandFormatted.append(brand).append(\"\\n\")\n        }\n        brands.text = brandFormatted\n    }\n    override fun onCreate(savedInstanceState: Bundle?)\n    {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        var Text = findViewById<TextView>(R.id.textView)\n        Text.text = \"Powered by Kotlin\"\n    }\n}\n```\n\n![image-20220918210702397](Andriod-Studio-1/image-20220918210702397.png)\n\n---\n\n下一篇：[Android Studio开发 2 | Tony](http://tonylsx.top/2022/09/27/Android-studio-2/)\n","source":"_posts/Andriod-Studio-1.md","raw":"---\ntitle: Andriod Studio开发 1\ndate: 2022-09-17 19:02:16\ntags: \n  - Android Studio\n  - Java\n  - Kotlin\ncategories:\n  - Android Studio\nkatex: true\nauthor: Tony\n---\n\n## 任务目标\n\n在Spinner中提供四个可选项，当点击BUTTON按钮时，下方文字显示对应的选项。\n\n![image-20220916130832425](Andriod-Studio-1/image-20220916130832425.png)\n\n## 项目管理\n\n![image-20220916131246387](Andriod-Studio-1/image-20220916131246387.png)\n\n该项目中我们主要用到以下四个文件：\n\n- MainActivity.java\n- BeerExport.java\n- activity_main.xml\n- strings.xml\n\n其中，MainActivity.java是核心的java文件，BeerExport.java是用来定义新的class的java文件，需要手动创建。Activity_main.xml是定义主界面控件的文件，strings.xml是用来定义特定字符串的文件。\n\n## 界面编辑\n\n```xml\n<!---Activity_main.xml--->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:padding=\"16dp\"\n    android:orientation=\"vertical\"\n    tools:context=\".MainActivity\" >\n\n    <Spinner\n        android:id=\"@+id/color\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:layout_margin=\"16dp\"\n        android:layout_marginTop=\"40dp\"\n        android:entries=\"@array/beer_color\"\n        android:minHeight=\"48dp\" />\n\n    <Button\n        android:id=\"@+id/find_beer\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:layout_margin=\"24dp\"\n        android:text=\"button\"\n        android:onClick=\"onClickFindBeer\"/>\n    <TextView\n        android:id=\"@+id/brands\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Hello World!\"\n        android:layout_gravity=\"center\"\n        android:layout_margin=\"16dp\" />\n\n</LinearLayout>\n```\n\n我们分别定义了三个主要的控件，其中Spinner的名字是color，Button的名字是find_beer，TextView的名字是brands.\n\n需要注意的是，spinner控件中定义了名为beer_color的entries，而我们可以在strings.xml中定义一个字符串数组来储存这些选项。\n\n```xml\n<!---strings.xml--->\n<resources>\n    <string name=\"app_name\">My Application test911</string>\n    <string-array name=\"beer_color\">\n        <item>light</item>\n        <item>amber</item>\n        <item>brown</item>\n        <item>dark</item>\n    </string-array>\n</resources>\n```\n\n## Java逻辑编辑\n\n注意到在activity_main.xml的Button控件中，我们定义了一个Onclick功能，每次按下按钮时，都会执行该功能。因此我们需要在MainActivity.java中定义该函数。\n\n```java\npublic class MainActivity extends AppCompatActivity\n{\n    private final BeerExpert expert = new BeerExpert();\n\n    public void onClickFindBeer(View view)\n    {\n        TextView brands = findViewById(R.id.brands);\n        Spinner color = findViewById(R.id.color);\n        String beerType = String.valueOf(color.getSelectedItemId());\n        brands.setText(beerType); //0-3\n\n        List<String> brandlist = expert.getBrands(beerType);\n        StringBuilder brandFormatted = new StringBuilder();\n        for (String brand:brandlist)\n        {\n            brandFormatted.append(brand).append(\"\\n\");\n        }\n        brands.setText(brandFormatted);\n    }\n\n    @SuppressLint(\"SetTextI18n\")\n    @Override\n    protected void onCreate(Bundle savedInstanceState) \n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        TextView Brands = findViewById(R.id.brands);\n        Brands.setText(\"This is the initial TEXT\");\n    }\n}\n```\n\n而BeerExpert.java中的函数则是判断Spinner中选中了哪个选项，并返回相应的文字。然后将文字打印到下方的文字框中。对于这个程序，其实完全可以在MainActivity中定义一个函数，我们这里选择新建一个Class的原因是为了体现面向对象的编程。\n\n```java\npublic class BeerExpert\n{\n    public BeerExpert()\n    {\n\n    }\n    List<String> getBrands(String color)\n    {\n        List<String> bands = new ArrayList<>();\n        if(color.equals(\"1\"))\n        {\n            bands.add(\"Amber\");\n        }\n        else if(color.equals(\"0\"))\n        {\n            bands.add(\"Light\");\n        }\n        else if(color.equals(\"2\"))\n        {\n            bands.add(\"Brown\");\n        }\n        else if(color.equals(\"3\"))\n        {\n            bands.add(\"Dark\");\n        }\n        else\n        {\n            bands.add(\"Error!!!\");\n        }\n        return bands;\n    }\n}\n```\n\n## 程序运行\n\n![image-20220916143713242](Andriod-Studio-1/image-20220916143713242.png)\n\n## Kotlin语言\n\n```kotlin\npackage com.example.kotlin_test\n\nimport android.os.Bundle\nimport android.view.View\nimport android.widget.Spinner\nimport android.widget.TextView\nimport androidx.appcompat.app.AppCompatActivity\n\nclass MainActivity : AppCompatActivity()\n{\n    fun getBrands(color: String): MutableList<String>\n    {\n        val bands: MutableList<String> = ArrayList()\n        if (color == \"0\") \n            bands.add(\"Black\")\n        else if (color == \"1\") \n            bands.add(\"White\")\n        else if (color == \"2\") \n            bands.add(\"Brown\")\n        else if (color == \"3\")\n            bands.add(\"Pink\")\n        else\n            bands.add(\"Error!!!\")\n        return bands\n    }\n    fun onClickButton(view: View)\n    {\n        val brands = findViewById<TextView>(R.id.textView)\n        val color = findViewById<Spinner>(R.id.spinner)\n        val beerType = color.selectedItemId.toString()\n        brands.text = beerType //0-3\n\n\n        val brandlist: List<String> = getBrands(beerType)\n        val brandFormatted = StringBuilder()\n        for (brand in brandlist)\n        {\n            brandFormatted.append(brand).append(\"\\n\")\n        }\n        brands.text = brandFormatted\n    }\n    override fun onCreate(savedInstanceState: Bundle?)\n    {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        var Text = findViewById<TextView>(R.id.textView)\n        Text.text = \"Powered by Kotlin\"\n    }\n}\n```\n\n![image-20220918210702397](Andriod-Studio-1/image-20220918210702397.png)\n\n---\n\n下一篇：[Android Studio开发 2 | Tony](http://tonylsx.top/2022/09/27/Android-studio-2/)\n","slug":"Andriod-Studio-1","published":1,"updated":"2022-11-01T05:53:00.503Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrc700081gzucr9381zo","content":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>在Spinner中提供四个可选项，当点击BUTTON按钮时，下方文字显示对应的选项。</p>\n<p><img src=\"/2022/09/17/Andriod-Studio-1/image-20220916130832425.png\" alt=\"image-20220916130832425\" loading=\"lazy\"></p>\n<h2 id=\"项目管理\"><a class=\"markdownIt-Anchor\" href=\"#项目管理\"></a> 项目管理</h2>\n<p><img src=\"/2022/09/17/Andriod-Studio-1/image-20220916131246387.png\" alt=\"image-20220916131246387\" loading=\"lazy\"></p>\n<p>该项目中我们主要用到以下四个文件：</p>\n<ul>\n<li>MainActivity.java</li>\n<li>BeerExport.java</li>\n<li>activity_main.xml</li>\n<li>strings.xml</li>\n</ul>\n<p>其中，MainActivity.java是核心的java文件，BeerExport.java是用来定义新的class的java文件，需要手动创建。Activity_main.xml是定义主界面控件的文件，strings.xml是用来定义特定字符串的文件。</p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!---Activity_main.xml---></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>LinearLayout</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>padding</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16dp<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>orientation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>vertical<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Spinner</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/color<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_margin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>40dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>entries</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@array/beer_color<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>minHeight</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>48dp<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/find_beer<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_margin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>24dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickFindBeer<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/brands<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hello World!<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_margin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16dp<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>LinearLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>我们分别定义了三个主要的控件，其中Spinner的名字是color，Button的名字是find_beer，TextView的名字是brands.</p>\n<p>需要注意的是，spinner控件中定义了名为beer_color的entries，而我们可以在strings.xml中定义一个字符串数组来储存这些选项。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!---strings.xml---></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resources</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>string</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app_name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>My Application test911<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>string</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>string-array</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>beer_color<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span><span class=\"token punctuation\">></span></span>light<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>item</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span><span class=\"token punctuation\">></span></span>amber<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>item</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span><span class=\"token punctuation\">></span></span>brown<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>item</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span><span class=\"token punctuation\">></span></span>dark<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>item</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>string-array</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resources</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"java逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java逻辑编辑\"></a> Java逻辑编辑</h2>\n<p>注意到在activity_main.xml的Button控件中，我们定义了一个Onclick功能，每次按下按钮时，都会执行该功能。因此我们需要在MainActivity.java中定义该函数。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">BeerExpert</span> expert <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BeerExpert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickFindBeer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">TextView</span> brands <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>brands<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Spinner</span> color <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> beerType <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">getSelectedItemId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        brands<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>beerType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//0-3</span>\n\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> brandlist <span class=\"token operator\">=</span> expert<span class=\"token punctuation\">.</span><span class=\"token function\">getBrands</span><span class=\"token punctuation\">(</span>beerType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">StringBuilder</span> brandFormatted <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> brand<span class=\"token operator\">:</span>brandlist<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            brandFormatted<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>brand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        brands<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>brandFormatted<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@SuppressLint</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SetTextI18n\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">TextView</span> <span class=\"token class-name\">Brands</span> <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>brands<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Brands</span><span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This is the initial TEXT\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>而BeerExpert.java中的函数则是判断Spinner中选中了哪个选项，并返回相应的文字。然后将文字打印到下方的文字框中。对于这个程序，其实完全可以在MainActivity中定义一个函数，我们这里选择新建一个Class的原因是为了体现面向对象的编程。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BeerExpert</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BeerExpert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getBrands</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> color<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> bands <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Amber\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Light\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Brown\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Dark\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error!!!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> bands<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"程序运行\"><a class=\"markdownIt-Anchor\" href=\"#程序运行\"></a> 程序运行</h2>\n<p><img src=\"/2022/09/17/Andriod-Studio-1/image-20220916143713242.png\" alt=\"image-20220916143713242\" loading=\"lazy\"></p>\n<h2 id=\"kotlin语言\"><a class=\"markdownIt-Anchor\" href=\"#kotlin语言\"></a> Kotlin语言</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>kotlin_test\n\n<span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span>Bundle\n<span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>view<span class=\"token punctuation\">.</span>View\n<span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>widget<span class=\"token punctuation\">.</span>Spinner\n<span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>widget<span class=\"token punctuation\">.</span>TextView\n<span class=\"token keyword\">import</span> androidx<span class=\"token punctuation\">.</span>appcompat<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>AppCompatActivity\n\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getBrands</span><span class=\"token punctuation\">(</span>color<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> bands<span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">ArrayList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>color <span class=\"token operator\">==</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"0\"</span></span><span class=\"token punctuation\">)</span> \n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Black\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>color <span class=\"token operator\">==</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"1\"</span></span><span class=\"token punctuation\">)</span> \n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"White\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>color <span class=\"token operator\">==</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"2\"</span></span><span class=\"token punctuation\">)</span> \n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Brown\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>color <span class=\"token operator\">==</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"3\"</span></span><span class=\"token punctuation\">)</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Pink\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Error!!!\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> bands\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickButton</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> brands <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> color <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>Spinner<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>spinner<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> beerType <span class=\"token operator\">=</span> color<span class=\"token punctuation\">.</span>selectedItemId<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        brands<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> beerType <span class=\"token comment\">//0-3</span>\n\n\n        <span class=\"token keyword\">val</span> brandlist<span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">getBrands</span><span class=\"token punctuation\">(</span>beerType<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> brandFormatted <span class=\"token operator\">=</span> <span class=\"token function\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>brand <span class=\"token keyword\">in</span> brandlist<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            brandFormatted<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>brand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        brands<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> brandFormatted\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">var</span> Text <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView<span class=\"token punctuation\">)</span>\n        Text<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Powered by Kotlin\"</span></span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p><img src=\"/2022/09/17/Andriod-Studio-1/image-20220918210702397.png\" alt=\"image-20220918210702397\" loading=\"lazy\"></p>\n<hr>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/09/27/Android-studio-2/\">Android Studio开发 2 | Tony</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>在Spinner中提供四个可选项，当点击BUTTON按钮时，下方文字显示对应的选项。</p>\n<p><img src=\"/2022/09/17/Andriod-Studio-1/image-20220916130832425.png\" alt=\"image-20220916130832425\"></p>\n<h2 id=\"项目管理\"><a class=\"markdownIt-Anchor\" href=\"#项目管理\"></a> 项目管理</h2>\n<p><img src=\"/2022/09/17/Andriod-Studio-1/image-20220916131246387.png\" alt=\"image-20220916131246387\"></p>\n<p>该项目中我们主要用到以下四个文件：</p>\n<ul>\n<li>MainActivity.java</li>\n<li>BeerExport.java</li>\n<li>activity_main.xml</li>\n<li>strings.xml</li>\n</ul>\n<p>其中，MainActivity.java是核心的java文件，BeerExport.java是用来定义新的class的java文件，需要手动创建。Activity_main.xml是定义主界面控件的文件，strings.xml是用来定义特定字符串的文件。</p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!---Activity_main.xml---></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>LinearLayout</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>padding</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16dp<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>orientation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>vertical<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Spinner</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/color<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_margin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>40dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>entries</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@array/beer_color<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>minHeight</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>48dp<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/find_beer<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_margin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>24dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickFindBeer<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/brands<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hello World!<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_margin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16dp<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>LinearLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>我们分别定义了三个主要的控件，其中Spinner的名字是color，Button的名字是find_beer，TextView的名字是brands.</p>\n<p>需要注意的是，spinner控件中定义了名为beer_color的entries，而我们可以在strings.xml中定义一个字符串数组来储存这些选项。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!---strings.xml---></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resources</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>string</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app_name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>My Application test911<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>string</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>string-array</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>beer_color<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span><span class=\"token punctuation\">></span></span>light<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>item</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span><span class=\"token punctuation\">></span></span>amber<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>item</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span><span class=\"token punctuation\">></span></span>brown<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>item</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span><span class=\"token punctuation\">></span></span>dark<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>item</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>string-array</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resources</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"java逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java逻辑编辑\"></a> Java逻辑编辑</h2>\n<p>注意到在activity_main.xml的Button控件中，我们定义了一个Onclick功能，每次按下按钮时，都会执行该功能。因此我们需要在MainActivity.java中定义该函数。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">BeerExpert</span> expert <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BeerExpert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickFindBeer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">TextView</span> brands <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>brands<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Spinner</span> color <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> beerType <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">getSelectedItemId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        brands<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>beerType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//0-3</span>\n\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> brandlist <span class=\"token operator\">=</span> expert<span class=\"token punctuation\">.</span><span class=\"token function\">getBrands</span><span class=\"token punctuation\">(</span>beerType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">StringBuilder</span> brandFormatted <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> brand<span class=\"token operator\">:</span>brandlist<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            brandFormatted<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>brand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        brands<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>brandFormatted<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@SuppressLint</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SetTextI18n\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">TextView</span> <span class=\"token class-name\">Brands</span> <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>brands<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Brands</span><span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This is the initial TEXT\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>而BeerExpert.java中的函数则是判断Spinner中选中了哪个选项，并返回相应的文字。然后将文字打印到下方的文字框中。对于这个程序，其实完全可以在MainActivity中定义一个函数，我们这里选择新建一个Class的原因是为了体现面向对象的编程。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BeerExpert</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BeerExpert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getBrands</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> color<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> bands <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Amber\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Light\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Brown\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Dark\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error!!!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> bands<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"程序运行\"><a class=\"markdownIt-Anchor\" href=\"#程序运行\"></a> 程序运行</h2>\n<p><img src=\"/2022/09/17/Andriod-Studio-1/image-20220916143713242.png\" alt=\"image-20220916143713242\"></p>\n<h2 id=\"kotlin语言\"><a class=\"markdownIt-Anchor\" href=\"#kotlin语言\"></a> Kotlin语言</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>kotlin_test\n\n<span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span>Bundle\n<span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>view<span class=\"token punctuation\">.</span>View\n<span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>widget<span class=\"token punctuation\">.</span>Spinner\n<span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>widget<span class=\"token punctuation\">.</span>TextView\n<span class=\"token keyword\">import</span> androidx<span class=\"token punctuation\">.</span>appcompat<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>AppCompatActivity\n\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getBrands</span><span class=\"token punctuation\">(</span>color<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> bands<span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">ArrayList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>color <span class=\"token operator\">==</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"0\"</span></span><span class=\"token punctuation\">)</span> \n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Black\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>color <span class=\"token operator\">==</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"1\"</span></span><span class=\"token punctuation\">)</span> \n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"White\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>color <span class=\"token operator\">==</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"2\"</span></span><span class=\"token punctuation\">)</span> \n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Brown\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>color <span class=\"token operator\">==</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"3\"</span></span><span class=\"token punctuation\">)</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Pink\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span>\n            bands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Error!!!\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> bands\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickButton</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> brands <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> color <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>Spinner<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>spinner<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> beerType <span class=\"token operator\">=</span> color<span class=\"token punctuation\">.</span>selectedItemId<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        brands<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> beerType <span class=\"token comment\">//0-3</span>\n\n\n        <span class=\"token keyword\">val</span> brandlist<span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">getBrands</span><span class=\"token punctuation\">(</span>beerType<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> brandFormatted <span class=\"token operator\">=</span> <span class=\"token function\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>brand <span class=\"token keyword\">in</span> brandlist<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            brandFormatted<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>brand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        brands<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> brandFormatted\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">var</span> Text <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView<span class=\"token punctuation\">)</span>\n        Text<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Powered by Kotlin\"</span></span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p><img src=\"/2022/09/17/Andriod-Studio-1/image-20220918210702397.png\" alt=\"image-20220918210702397\"></p>\n<hr>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/09/27/Android-studio-2/\">Android Studio开发 2 | Tony</a></p>\n"},{"title":"Android-Studio开发3","date":"2022-10-10T13:48:43.000Z","katex":true,"author":"Tony","_content":"\n## 任务目标\n\n用按钮设计一个输入电话号码的拨号盘，上面可以显示输入的电话号码。\n\n设计一个发送按钮和删除按钮，点击删除按钮可以撤销输入的号码，点击发送按钮需要判断电话号码是否少于8位或大于11位，如果不满足要求需要提示用户输入的格式不正确，满足要求则需要将号码存放到手机外部储存的txt文件中。\n\n<img src=\"Android-Studio-3/image-20221010220838199.png\" alt=\"image-20221010220838199\" style=\"zoom:80%;\" />\n\n<img src=\"Android-Studio-3/image-20221010221037424.png\" alt=\"image-20221010221037424\" style=\"zoom:80%;\" />\n\n## 项目管理\n\n![image-20221010221157489](Android-Studio-3/image-20221010221157489.png)\n\n该项目中我们主要用到以下四个文件：\n\n- MainActivity.java\n- MainActivity.xml\n- AndroidManifest.xml\n- color_bg.xml\n\n其中，color_bg.xml需要在drawable文件夹下手动创建，其目的是更改号码按钮的背景颜色和背景图案。\n\nAndroidManifest.xml文件需要添加几行代码，其作用是允许程序读取和写入手机内部储存，后面会详细说明。\n\n## 界面编辑\n\n拨号盘界面定义了12个TextView类型的控件，由于代码过于冗余且控件定义方式一模一样，这里以数字5的控件为例，其它数字控件的定义均省略。\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <TextView\n        android:id=\"@+id/textView5\"\n        android:layout_width=\"50dp\"\n        android:layout_height=\"50dp\"\n        android:background=\"@drawable/color_bg\"\n        android:gravity=\"center\"\n        android:onClick=\"onClickNumber\"\n        android:text=\"@string/number_5\"\n        android:textColor=\"#455A64\"\n        android:textSize=\"32sp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <TextView .../>\n    \n    <TextView\n        android:id=\"@+id/textView_del\"\n        android:layout_width=\"50dp\"\n        android:layout_height=\"50dp\"\n        android:background=\"@drawable/color_bg\"\n        android:gravity=\"center\"\n        android:onClick=\"onClickDelete\"\n        android:text=\"@string/del\"\n        android:textColor=\"#4E342E\"\n        android:textSize=\"18sp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.3\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.7\" />\n\n    <TextView\n        android:id=\"@+id/textView_Send\"\n        android:layout_width=\"50dp\"\n        android:layout_height=\"50dp\"\n        android:background=\"@drawable/color_bg\"\n        android:gravity=\"center\"\n        android:onClick=\"onClickSend\"\n        android:text=\"@string/send\"\n        android:textColor=\"#455A64\"\n        android:textSize=\"20sp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.7\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.7\" />\n\n    <EditText\n        android:id=\"@+id/editTextPhone\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:ems=\"7\"\n        android:inputType=\"phone\"\n        android:textSize=\"30sp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.3\"\n        android:autofillHints=\"Press Phone Number\" />\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n另外，`background=\"@drawable/color_bg\"`代码是用来对控件进行背景美化和边缘棱角处理的方法，具体代码如下：\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<shape xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <corners\n        android:radius=\"20dp\"/>\n    <solid\n        android:color=\"@android:color/holo_blue_light\"/>\n</shape>\n```\n\n最终样式如下：\n\n![image-20221010222245715](Android-Studio-3/image-20221010222245715.png)\n\n## Java逻辑编辑\n\n首先，我们需要定义一个String类型字符串用来储存电话号码，然后我们需要对每个控件进行对应的按钮进行函数编辑，根据[Andriod Studio开发1 | Tony (tonylsx.top)](http://tonylsx.top/2022/09/17/Andriod-Studio-1/)，我们可以很容易的在MainActivity类中写出每个按钮需要进行的操作。\n\n```java\npublic class MainActivity extends AppCompatActivity\n{\n\tString PhoneNumber = \"\";\n    \n    public void onClickNumber0(View view)\n    {\n        EditText number = findViewById(R.id.editTextPhone);\n        PhoneNumber += \"0\";\n        number.setText(PhoneNumber);\n    }\n    \n    //省略1-9的OnClickNumber()函数...\n    \n    public void onClickDelete(View view)\n    {\n        EditText number = findViewById(R.id.editTextPhone);\n        if(PhoneNumber.length() > 0)\n            PhoneNumber = PhoneNumber.substring(0, PhoneNumber.length()-1);\n        number.setText(PhoneNumber);\n    }\n    \n    public void onClickSend(View view)\n    {\n        EditText number = findViewById(R.id.editTextPhone);\n        if(PhoneNumber.length() > 11 || PhoneNumber.length() < 8)\n        {\n            new AlertDialog.Builder(MainActivity.this)\n                    .setIcon(android.R.drawable.ic_dialog_alert)\n                    .setTitle(\"Invalid Phone Number\")\n                    .setMessage(\"Phone number should between 8 and 11 digits!\")\n                    .setPositiveButton(\"Okay fine\", (dialogInterface, i) -> {}).create().show();\n        }\n        else //Print to a txt file\n            Save_to_txt(PhoneNumber);\n        PhoneNumber = \"\";\n        number.setText(PhoneNumber);\n    }\n}\n```\n\n首先我们需要关注`onClickDelete()`函数，需要注意的是`if`语句的重要性，如果没有写`if`的话，当`PhoneNumber`为空时再次删除最后一个元素时，即调用`substring()`函数时就会出现错误，导致程序崩溃！\n\n然后，这里面需要关注的是`OnClickSend()`函数，当数字长度不满足要求时，Android会弹出警告，提示有误并将`PhoneNumber`清空让用户重新输入，如果没有问题的话执行`Save_to_txt(PhoneNumber);`该函数的作用是在手机的根目录下创建一个新的文件夹，并在该文件夹下创建一个新的TXT文件，并将`PhoneNumber`存放到该TXT文件中。其详细代码如下：\n\n```java\npublic void Save_to_txt(String number)\n    {\n        String path = Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + \"Tony\";\n\n        File folder = new File(path);\n        if(!folder.exists())\n            folder.mkdirs();\n        try\n        {\n            File file = new File(path + File.separator + \"New_File.txt\");\n            System.out.println(path + File.separator + \"New_File.txt\");\n            file.createNewFile();\n            FileWriter fw = new FileWriter(file);\n            fw.write(number);\n            fw.close();\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n```\n\n其中，`Environment.getExternalStorageDirectory()`代表的是手机的内部存储根目录，也即`/storage/emulated/0`（`/storage/emulated/1`代表的是手机外部存储根目录）；`File.separator`代表的是`/`，对，就是斜杠。\n\n此外，如果需要写入手机外部存储（即SD卡），需要在`AndroidManifest.xml`中加入以下内容，作用是申请程序的外部存储读取权限。\n\n```xml\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/>\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"/>\n    <application\n        android:requestLegacyExternalStorage=\"true\"\n        ...\n```\n\n当然，上面的代码是存储到手机的内存中去，因此需要在手机APP权限中手动开启存储权限，如下图所示。否则将无法创建文件夹和对应的文件，并会像下面这样报错：\n\n```http\nW/System.err: java.io.FileNotFoundException: /storage/emulated/0/NewFolder/New_File.txt: open failed: EACCES (Permission denied)\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:496)\nW/System.err:     at java.io.FileOutputStream.<init>(FileOutputStream.java:235)\nW/System.err:     at java.io.FileOutputStream.<init>(FileOutputStream.java:186)\nW/System.err:     at java.io.FileWriter.<init>(FileWriter.java:90)\nW/System.err:     at com.example.assignment1.MainActivity.Save_to_txt(MainActivity.java:166)\nW/System.err:     at com.example.assignment1.MainActivity.onClickSend(MainActivity.java:148)\nW/System.err:     at java.lang.reflect.Method.invoke(Native Method)\n```\n\n\n\n![image-20221010225547722](Android-Studio-3/image-20221010225547722.png)\n\n## 针对按钮响应函数的一些优化\n\n为什么要对`OnClickNumberX()`函数进行优化呢，因为这些函数的功能一毛一样，那为什么不写成一个函数呢，在调用的时候多个按钮都可以调用同一个函数，不是更加简洁嘛？在Java中我们可以使用`switch-case`函数进行编辑，具体代码如下：\n\n```java\npublic void onClickNumber(View view)\n    {\n        EditText number = findViewById(R.id.editTextPhone);\n        switch(view.getId())\n        {\n            case R.id.textView0:\n                PhoneNumber += \"0\";\n                break;\n            case R.id.textView1:\n                PhoneNumber += \"1\";\n                break;\n            case ...\n        }\n        number.setText(PhoneNumber);\n    }\n```\n\n## Kotlin逻辑编辑\n\n不做解释了，直接看代码（还是Kotlin简洁啊！）\n\n```kotlin\nclass MainActivity : AppCompatActivity() \n{\n    private var PhoneNumber = \"\"\n    \n    fun onClickNumber(view: View)\n    {\n        val number = findViewById<EditText>(R.id.editTextPhone)\n        when (view.id)\n        {\n            R.id.textView0 -> PhoneNumber += \"0\"\n            R.id.textView1 -> PhoneNumber += \"1\"\n            R.id.textView2 -> PhoneNumber += \"2\"\n            R.id.textView3 -> PhoneNumber += \"3\"\n            R.id.textView4 -> PhoneNumber += \"4\"\n            R.id.textView5 -> PhoneNumber += \"5\"\n            R.id.textView6 -> PhoneNumber += \"6\"\n            R.id.textView7 -> PhoneNumber += \"7\"\n            R.id.textView8 -> PhoneNumber += \"8\"\n            R.id.textView9 -> PhoneNumber += \"9\"\n        }\n        number.setText(PhoneNumber)\n    }\n\n    fun onClickDelete(view: View)\n    {\n        val number = findViewById<EditText>(R.id.editTextPhone)\n        if (PhoneNumber.isNotEmpty())\n            PhoneNumber = PhoneNumber.substring(0, PhoneNumber.length - 1)\n        number.setText(PhoneNumber)\n    }\n\n    fun onClickSend(view: View)\n    {\n        val number = findViewById<EditText>(R.id.editTextPhone)\n        if (PhoneNumber.length > 11 || PhoneNumber.length < 8) {\n            AlertDialog.Builder(this@MainActivity)\n                .setIcon(android.R.drawable.ic_dialog_alert)\n                .setTitle(\"Invalid Phone Number\")\n                .setMessage(\"Phone number should between 8 and 11 digits!\")\n                .setPositiveButton(\n                    \"Okay fine\"\n                ) { _: DialogInterface?, _: Int -> }.create().show()\n        }\n        else  //Print to a txt file\n        {\n            Save_to_txt(PhoneNumber)\n        }\n        PhoneNumber = \"\"\n        number.setText(PhoneNumber)\n    }\n\n    private fun Save_to_txt(number: String?) \n    {\n        val path = Environment.getExternalStorageDirectory().absolutePath + File.separator + \"NewFolder\"\n        val folder = File(path)\n        if (!folder.exists()) \n            folder.mkdirs()\n        try \n        {\n            val file = File(path + File.separator + \"New_File.txt\")\n            println(path + File.separator + \"New_File.txt\")\n            file.createNewFile()\n            val fw = FileWriter(file)\n            fw.write(number)\n            fw.close()\n        } \n        catch (e: Exception) \n        {\n            e.printStackTrace()\n        }\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) \n    {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n}\n```\n\n## 效果展示\n\n<img src=\"Android-Studio-3/image-20221010232513124.png\" alt=\"image-20221010232513124\" style=\"zoom:80%;\" />\n\n---\n\n上一篇：[Android Studio开发 2 | Tony](http://tonylsx.top/2022/09/27/Android-studio-2/)\n\n下一篇：[Android-Studio开发 4 | Tony](http://tonylsx.top/2022/10/11/Android-Studio-4/)\n","source":"_posts/Android-Studio-3.md","raw":"---\ntitle: Android-Studio开发3\ndate: 2022-10-10 21:48:43\ntags: \n  - Android Studio\n  - Java\n  - Kotlin\ncategories:\n  - Android Studio\nkatex: true\nauthor: Tony\n---\n\n## 任务目标\n\n用按钮设计一个输入电话号码的拨号盘，上面可以显示输入的电话号码。\n\n设计一个发送按钮和删除按钮，点击删除按钮可以撤销输入的号码，点击发送按钮需要判断电话号码是否少于8位或大于11位，如果不满足要求需要提示用户输入的格式不正确，满足要求则需要将号码存放到手机外部储存的txt文件中。\n\n<img src=\"Android-Studio-3/image-20221010220838199.png\" alt=\"image-20221010220838199\" style=\"zoom:80%;\" />\n\n<img src=\"Android-Studio-3/image-20221010221037424.png\" alt=\"image-20221010221037424\" style=\"zoom:80%;\" />\n\n## 项目管理\n\n![image-20221010221157489](Android-Studio-3/image-20221010221157489.png)\n\n该项目中我们主要用到以下四个文件：\n\n- MainActivity.java\n- MainActivity.xml\n- AndroidManifest.xml\n- color_bg.xml\n\n其中，color_bg.xml需要在drawable文件夹下手动创建，其目的是更改号码按钮的背景颜色和背景图案。\n\nAndroidManifest.xml文件需要添加几行代码，其作用是允许程序读取和写入手机内部储存，后面会详细说明。\n\n## 界面编辑\n\n拨号盘界面定义了12个TextView类型的控件，由于代码过于冗余且控件定义方式一模一样，这里以数字5的控件为例，其它数字控件的定义均省略。\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <TextView\n        android:id=\"@+id/textView5\"\n        android:layout_width=\"50dp\"\n        android:layout_height=\"50dp\"\n        android:background=\"@drawable/color_bg\"\n        android:gravity=\"center\"\n        android:onClick=\"onClickNumber\"\n        android:text=\"@string/number_5\"\n        android:textColor=\"#455A64\"\n        android:textSize=\"32sp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <TextView .../>\n    \n    <TextView\n        android:id=\"@+id/textView_del\"\n        android:layout_width=\"50dp\"\n        android:layout_height=\"50dp\"\n        android:background=\"@drawable/color_bg\"\n        android:gravity=\"center\"\n        android:onClick=\"onClickDelete\"\n        android:text=\"@string/del\"\n        android:textColor=\"#4E342E\"\n        android:textSize=\"18sp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.3\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.7\" />\n\n    <TextView\n        android:id=\"@+id/textView_Send\"\n        android:layout_width=\"50dp\"\n        android:layout_height=\"50dp\"\n        android:background=\"@drawable/color_bg\"\n        android:gravity=\"center\"\n        android:onClick=\"onClickSend\"\n        android:text=\"@string/send\"\n        android:textColor=\"#455A64\"\n        android:textSize=\"20sp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.7\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.7\" />\n\n    <EditText\n        android:id=\"@+id/editTextPhone\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:ems=\"7\"\n        android:inputType=\"phone\"\n        android:textSize=\"30sp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.3\"\n        android:autofillHints=\"Press Phone Number\" />\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n另外，`background=\"@drawable/color_bg\"`代码是用来对控件进行背景美化和边缘棱角处理的方法，具体代码如下：\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<shape xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <corners\n        android:radius=\"20dp\"/>\n    <solid\n        android:color=\"@android:color/holo_blue_light\"/>\n</shape>\n```\n\n最终样式如下：\n\n![image-20221010222245715](Android-Studio-3/image-20221010222245715.png)\n\n## Java逻辑编辑\n\n首先，我们需要定义一个String类型字符串用来储存电话号码，然后我们需要对每个控件进行对应的按钮进行函数编辑，根据[Andriod Studio开发1 | Tony (tonylsx.top)](http://tonylsx.top/2022/09/17/Andriod-Studio-1/)，我们可以很容易的在MainActivity类中写出每个按钮需要进行的操作。\n\n```java\npublic class MainActivity extends AppCompatActivity\n{\n\tString PhoneNumber = \"\";\n    \n    public void onClickNumber0(View view)\n    {\n        EditText number = findViewById(R.id.editTextPhone);\n        PhoneNumber += \"0\";\n        number.setText(PhoneNumber);\n    }\n    \n    //省略1-9的OnClickNumber()函数...\n    \n    public void onClickDelete(View view)\n    {\n        EditText number = findViewById(R.id.editTextPhone);\n        if(PhoneNumber.length() > 0)\n            PhoneNumber = PhoneNumber.substring(0, PhoneNumber.length()-1);\n        number.setText(PhoneNumber);\n    }\n    \n    public void onClickSend(View view)\n    {\n        EditText number = findViewById(R.id.editTextPhone);\n        if(PhoneNumber.length() > 11 || PhoneNumber.length() < 8)\n        {\n            new AlertDialog.Builder(MainActivity.this)\n                    .setIcon(android.R.drawable.ic_dialog_alert)\n                    .setTitle(\"Invalid Phone Number\")\n                    .setMessage(\"Phone number should between 8 and 11 digits!\")\n                    .setPositiveButton(\"Okay fine\", (dialogInterface, i) -> {}).create().show();\n        }\n        else //Print to a txt file\n            Save_to_txt(PhoneNumber);\n        PhoneNumber = \"\";\n        number.setText(PhoneNumber);\n    }\n}\n```\n\n首先我们需要关注`onClickDelete()`函数，需要注意的是`if`语句的重要性，如果没有写`if`的话，当`PhoneNumber`为空时再次删除最后一个元素时，即调用`substring()`函数时就会出现错误，导致程序崩溃！\n\n然后，这里面需要关注的是`OnClickSend()`函数，当数字长度不满足要求时，Android会弹出警告，提示有误并将`PhoneNumber`清空让用户重新输入，如果没有问题的话执行`Save_to_txt(PhoneNumber);`该函数的作用是在手机的根目录下创建一个新的文件夹，并在该文件夹下创建一个新的TXT文件，并将`PhoneNumber`存放到该TXT文件中。其详细代码如下：\n\n```java\npublic void Save_to_txt(String number)\n    {\n        String path = Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + \"Tony\";\n\n        File folder = new File(path);\n        if(!folder.exists())\n            folder.mkdirs();\n        try\n        {\n            File file = new File(path + File.separator + \"New_File.txt\");\n            System.out.println(path + File.separator + \"New_File.txt\");\n            file.createNewFile();\n            FileWriter fw = new FileWriter(file);\n            fw.write(number);\n            fw.close();\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n```\n\n其中，`Environment.getExternalStorageDirectory()`代表的是手机的内部存储根目录，也即`/storage/emulated/0`（`/storage/emulated/1`代表的是手机外部存储根目录）；`File.separator`代表的是`/`，对，就是斜杠。\n\n此外，如果需要写入手机外部存储（即SD卡），需要在`AndroidManifest.xml`中加入以下内容，作用是申请程序的外部存储读取权限。\n\n```xml\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/>\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"/>\n    <application\n        android:requestLegacyExternalStorage=\"true\"\n        ...\n```\n\n当然，上面的代码是存储到手机的内存中去，因此需要在手机APP权限中手动开启存储权限，如下图所示。否则将无法创建文件夹和对应的文件，并会像下面这样报错：\n\n```http\nW/System.err: java.io.FileNotFoundException: /storage/emulated/0/NewFolder/New_File.txt: open failed: EACCES (Permission denied)\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:496)\nW/System.err:     at java.io.FileOutputStream.<init>(FileOutputStream.java:235)\nW/System.err:     at java.io.FileOutputStream.<init>(FileOutputStream.java:186)\nW/System.err:     at java.io.FileWriter.<init>(FileWriter.java:90)\nW/System.err:     at com.example.assignment1.MainActivity.Save_to_txt(MainActivity.java:166)\nW/System.err:     at com.example.assignment1.MainActivity.onClickSend(MainActivity.java:148)\nW/System.err:     at java.lang.reflect.Method.invoke(Native Method)\n```\n\n\n\n![image-20221010225547722](Android-Studio-3/image-20221010225547722.png)\n\n## 针对按钮响应函数的一些优化\n\n为什么要对`OnClickNumberX()`函数进行优化呢，因为这些函数的功能一毛一样，那为什么不写成一个函数呢，在调用的时候多个按钮都可以调用同一个函数，不是更加简洁嘛？在Java中我们可以使用`switch-case`函数进行编辑，具体代码如下：\n\n```java\npublic void onClickNumber(View view)\n    {\n        EditText number = findViewById(R.id.editTextPhone);\n        switch(view.getId())\n        {\n            case R.id.textView0:\n                PhoneNumber += \"0\";\n                break;\n            case R.id.textView1:\n                PhoneNumber += \"1\";\n                break;\n            case ...\n        }\n        number.setText(PhoneNumber);\n    }\n```\n\n## Kotlin逻辑编辑\n\n不做解释了，直接看代码（还是Kotlin简洁啊！）\n\n```kotlin\nclass MainActivity : AppCompatActivity() \n{\n    private var PhoneNumber = \"\"\n    \n    fun onClickNumber(view: View)\n    {\n        val number = findViewById<EditText>(R.id.editTextPhone)\n        when (view.id)\n        {\n            R.id.textView0 -> PhoneNumber += \"0\"\n            R.id.textView1 -> PhoneNumber += \"1\"\n            R.id.textView2 -> PhoneNumber += \"2\"\n            R.id.textView3 -> PhoneNumber += \"3\"\n            R.id.textView4 -> PhoneNumber += \"4\"\n            R.id.textView5 -> PhoneNumber += \"5\"\n            R.id.textView6 -> PhoneNumber += \"6\"\n            R.id.textView7 -> PhoneNumber += \"7\"\n            R.id.textView8 -> PhoneNumber += \"8\"\n            R.id.textView9 -> PhoneNumber += \"9\"\n        }\n        number.setText(PhoneNumber)\n    }\n\n    fun onClickDelete(view: View)\n    {\n        val number = findViewById<EditText>(R.id.editTextPhone)\n        if (PhoneNumber.isNotEmpty())\n            PhoneNumber = PhoneNumber.substring(0, PhoneNumber.length - 1)\n        number.setText(PhoneNumber)\n    }\n\n    fun onClickSend(view: View)\n    {\n        val number = findViewById<EditText>(R.id.editTextPhone)\n        if (PhoneNumber.length > 11 || PhoneNumber.length < 8) {\n            AlertDialog.Builder(this@MainActivity)\n                .setIcon(android.R.drawable.ic_dialog_alert)\n                .setTitle(\"Invalid Phone Number\")\n                .setMessage(\"Phone number should between 8 and 11 digits!\")\n                .setPositiveButton(\n                    \"Okay fine\"\n                ) { _: DialogInterface?, _: Int -> }.create().show()\n        }\n        else  //Print to a txt file\n        {\n            Save_to_txt(PhoneNumber)\n        }\n        PhoneNumber = \"\"\n        number.setText(PhoneNumber)\n    }\n\n    private fun Save_to_txt(number: String?) \n    {\n        val path = Environment.getExternalStorageDirectory().absolutePath + File.separator + \"NewFolder\"\n        val folder = File(path)\n        if (!folder.exists()) \n            folder.mkdirs()\n        try \n        {\n            val file = File(path + File.separator + \"New_File.txt\")\n            println(path + File.separator + \"New_File.txt\")\n            file.createNewFile()\n            val fw = FileWriter(file)\n            fw.write(number)\n            fw.close()\n        } \n        catch (e: Exception) \n        {\n            e.printStackTrace()\n        }\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) \n    {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n}\n```\n\n## 效果展示\n\n<img src=\"Android-Studio-3/image-20221010232513124.png\" alt=\"image-20221010232513124\" style=\"zoom:80%;\" />\n\n---\n\n上一篇：[Android Studio开发 2 | Tony](http://tonylsx.top/2022/09/27/Android-studio-2/)\n\n下一篇：[Android-Studio开发 4 | Tony](http://tonylsx.top/2022/10/11/Android-Studio-4/)\n","slug":"Android-Studio-3","published":1,"updated":"2022-11-01T05:53:00.503Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrc800091gzu43xg12n2","content":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>用按钮设计一个输入电话号码的拨号盘，上面可以显示输入的电话号码。</p>\n<p>设计一个发送按钮和删除按钮，点击删除按钮可以撤销输入的号码，点击发送按钮需要判断电话号码是否少于8位或大于11位，如果不满足要求需要提示用户输入的格式不正确，满足要求则需要将号码存放到手机外部储存的txt文件中。</p>\n<img src=\"/2022/10/10/Android-Studio-3/image-20221010220838199.png\" alt=\"image-20221010220838199\" style=\"zoom:80%;\" loading=\"lazy\">\n<img src=\"/2022/10/10/Android-Studio-3/image-20221010221037424.png\" alt=\"image-20221010221037424\" style=\"zoom:80%;\" loading=\"lazy\">\n<h2 id=\"项目管理\"><a class=\"markdownIt-Anchor\" href=\"#项目管理\"></a> 项目管理</h2>\n<p><img src=\"/2022/10/10/Android-Studio-3/image-20221010221157489.png\" alt=\"image-20221010221157489\" loading=\"lazy\"></p>\n<p>该项目中我们主要用到以下四个文件：</p>\n<ul>\n<li>MainActivity.java</li>\n<li>MainActivity.xml</li>\n<li>AndroidManifest.xml</li>\n<li>color_bg.xml</li>\n</ul>\n<p>其中，color_bg.xml需要在drawable文件夹下手动创建，其目的是更改号码按钮的背景颜色和背景图案。</p>\n<p>AndroidManifest.xml文件需要添加几行代码，其作用是允许程序读取和写入手机内部储存，后面会详细说明。</p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<p>拨号盘界面定义了12个TextView类型的控件，由于代码过于冗余且控件定义方式一模一样，这里以数字5的控件为例，其它数字控件的定义均省略。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/textView5<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>background</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@drawable/color_bg<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickNumber<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@string/number_5<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textColor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#455A64<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textSize</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>32sp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span> <span class=\"token attr-name\">...</span><span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/textView_del<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>background</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@drawable/color_bg<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickDelete<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@string/del<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textColor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#4E342E<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textSize</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>18sp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintHorizontal_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.3<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.7<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/textView_Send<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>background</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@drawable/color_bg<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickSend<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@string/send<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textColor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#455A64<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textSize</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20sp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintHorizontal_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.7<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.7<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>EditText</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/editTextPhone<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>ems</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>7<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>inputType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>phone<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textSize</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>30sp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.3<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>autofillHints</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Press Phone Number<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>另外，<code>background=&quot;@drawable/color_bg&quot;</code>代码是用来对控件进行背景美化和边缘棱角处理的方法，具体代码如下：</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>shape</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>corners</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>radius</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20dp<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>solid</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@android:color/holo_blue_light<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>shape</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>最终样式如下：</p>\n<p><img src=\"/2022/10/10/Android-Studio-3/image-20221010222245715.png\" alt=\"image-20221010222245715\" loading=\"lazy\"></p>\n<h2 id=\"java逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java逻辑编辑\"></a> Java逻辑编辑</h2>\n<p>首先，我们需要定义一个String类型字符串用来储存电话号码，然后我们需要对每个控件进行对应的按钮进行函数编辑，根据<a href=\"http://tonylsx.top/2022/09/17/Andriod-Studio-1/\">Andriod Studio开发1 | Tony (tonylsx.top)</a>，我们可以很容易的在MainActivity类中写出每个按钮需要进行的操作。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token class-name\">String</span> <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickNumber0</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> number <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">+=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">;</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">//省略1-9的OnClickNumber()函数...</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickDelete</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> number <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickSend</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> number <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">11</span> <span class=\"token operator\">||</span> <span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">AlertDialog<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MainActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span></span>R</span><span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>ic_dialog_alert<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid Phone Number\"</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Phone number should between 8 and 11 digits!\"</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">setPositiveButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Okay fine\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>dialogInterface<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token comment\">//Print to a txt file</span>\n            <span class=\"token class-name\">Save_to_txt</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>首先我们需要关注<code>onClickDelete()</code>函数，需要注意的是<code>if</code>语句的重要性，如果没有写<code>if</code>的话，当<code>PhoneNumber</code>为空时再次删除最后一个元素时，即调用<code>substring()</code>函数时就会出现错误，导致程序崩溃！</p>\n<p>然后，这里面需要关注的是<code>OnClickSend()</code>函数，当数字长度不满足要求时，Android会弹出警告，提示有误并将<code>PhoneNumber</code>清空让用户重新输入，如果没有问题的话执行<code>Save_to_txt(PhoneNumber);</code>该函数的作用是在手机的根目录下创建一个新的文件夹，并在该文件夹下创建一个新的TXT文件，并将<code>PhoneNumber</code>存放到该TXT文件中。其详细代码如下：</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">Save_to_txt</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> number<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">String</span> path <span class=\"token operator\">=</span> <span class=\"token class-name\">Environment</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExternalStorageDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAbsolutePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">File</span> folder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>folder<span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            folder<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">File</span> file <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span>path <span class=\"token operator\">+</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string\">\"New_File.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>path <span class=\"token operator\">+</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string\">\"New_File.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            file<span class=\"token punctuation\">.</span><span class=\"token function\">createNewFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">FileWriter</span> fw <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileWriter</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            fw<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            fw<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span></code></pre>\n<p>其中，<code>Environment.getExternalStorageDirectory()</code>代表的是手机的内部存储根目录，也即<code>/storage/emulated/0</code>（<code>/storage/emulated/1</code>代表的是手机外部存储根目录）；<code>File.separator</code>代表的是<code>/</code>，对，就是斜杠。</p>\n<p>此外，如果需要写入手机外部存储（即SD卡），需要在<code>AndroidManifest.xml</code>中加入以下内容，作用是申请程序的外部存储读取权限。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>uses-permission</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.permission.WRITE_EXTERNAL_STORAGE<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>uses-permission</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.permission.READ_EXTERNAL_STORAGE<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n&lt;application\n    android:requestLegacyExternalStorage=\"true\"\n    ...</code></pre>\n<p>当然，上面的代码是存储到手机的内存中去，因此需要在手机APP权限中手动开启存储权限，如下图所示。否则将无法创建文件夹和对应的文件，并会像下面这样报错：</p>\n<pre class=\"language-http\" data-language=\"http\"><code class=\"language-http\">W/System.err: java.io.FileNotFoundException: /storage/emulated/0/NewFolder/New_File.txt: open failed: EACCES (Permission denied)\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:496)\nW/System.err:     at java.io.FileOutputStream.&lt;init>(FileOutputStream.java:235)\nW/System.err:     at java.io.FileOutputStream.&lt;init>(FileOutputStream.java:186)\nW/System.err:     at java.io.FileWriter.&lt;init>(FileWriter.java:90)\nW/System.err:     at com.example.assignment1.MainActivity.Save_to_txt(MainActivity.java:166)\nW/System.err:     at com.example.assignment1.MainActivity.onClickSend(MainActivity.java:148)\nW/System.err:     at java.lang.reflect.Method.invoke(Native Method)</code></pre>\n<p><img src=\"/2022/10/10/Android-Studio-3/image-20221010225547722.png\" alt=\"image-20221010225547722\" loading=\"lazy\"></p>\n<h2 id=\"针对按钮响应函数的一些优化\"><a class=\"markdownIt-Anchor\" href=\"#针对按钮响应函数的一些优化\"></a> 针对按钮响应函数的一些优化</h2>\n<p>为什么要对<code>OnClickNumberX()</code>函数进行优化呢，因为这些函数的功能一毛一样，那为什么不写成一个函数呢，在调用的时候多个按钮都可以调用同一个函数，不是更加简洁嘛？在Java中我们可以使用<code>switch-case</code>函数进行编辑，具体代码如下：</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickNumber</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> number <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>view<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView0<span class=\"token operator\">:</span>\n                <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">+=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView1<span class=\"token operator\">:</span>\n                <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">+=</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        <span class=\"token punctuation\">&#125;</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin逻辑编辑\"></a> Kotlin逻辑编辑</h2>\n<p>不做解释了，直接看代码（还是Kotlin简洁啊！）</p>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> PhoneNumber <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span>\n    \n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickNumber</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> number <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">when</span> <span class=\"token punctuation\">(</span>view<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView0 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"0\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView1 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"1\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView2 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"2\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView3 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"3\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView4 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"4\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView5 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"5\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView6 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"6\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView7 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"7\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView8 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"8\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView9 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"9\"</span></span>\n        <span class=\"token punctuation\">&#125;</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickDelete</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> number <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">.</span><span class=\"token function\">isNotEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            PhoneNumber <span class=\"token operator\">=</span> PhoneNumber<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> PhoneNumber<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickSend</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> number <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">11</span> <span class=\"token operator\">||</span> PhoneNumber<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            AlertDialog<span class=\"token punctuation\">.</span><span class=\"token function\">Builder</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token label symbol\">@MainActivity</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span>android<span class=\"token punctuation\">.</span>R<span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>ic_dialog_alert<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Invalid Phone Number\"</span></span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Phone number should between 8 and 11 digits!\"</span></span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setPositiveButton</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token string-literal singleline\"><span class=\"token string\">\"Okay fine\"</span></span>\n                <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> _<span class=\"token operator\">:</span> DialogInterface<span class=\"token operator\">?</span><span class=\"token punctuation\">,</span> _<span class=\"token operator\">:</span> Int <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span>  <span class=\"token comment\">//Print to a txt file</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">Save_to_txt</span><span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        PhoneNumber <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">Save_to_txt</span><span class=\"token punctuation\">(</span>number<span class=\"token operator\">:</span> String<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> path <span class=\"token operator\">=</span> Environment<span class=\"token punctuation\">.</span><span class=\"token function\">getExternalStorageDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>absolutePath <span class=\"token operator\">+</span> File<span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"NewFolder\"</span></span>\n        <span class=\"token keyword\">val</span> folder <span class=\"token operator\">=</span> <span class=\"token function\">File</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>folder<span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \n            folder<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">try</span> \n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">val</span> file <span class=\"token operator\">=</span> <span class=\"token function\">File</span><span class=\"token punctuation\">(</span>path <span class=\"token operator\">+</span> File<span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"New_File.txt\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>path <span class=\"token operator\">+</span> File<span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"New_File.txt\"</span></span><span class=\"token punctuation\">)</span>\n            file<span class=\"token punctuation\">.</span><span class=\"token function\">createNewFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">val</span> fw <span class=\"token operator\">=</span> <span class=\"token function\">FileWriter</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span>\n            fw<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span>\n            fw<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span> \n        <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token operator\">:</span> Exception<span class=\"token punctuation\">)</span> \n        <span class=\"token punctuation\">&#123;</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"效果展示\"><a class=\"markdownIt-Anchor\" href=\"#效果展示\"></a> 效果展示</h2>\n<img src=\"/2022/10/10/Android-Studio-3/image-20221010232513124.png\" alt=\"image-20221010232513124\" style=\"zoom:80%;\" loading=\"lazy\">\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/09/27/Android-studio-2/\">Android Studio开发 2 | Tony</a></p>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/10/11/Android-Studio-4/\">Android-Studio开发 4 | Tony</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>用按钮设计一个输入电话号码的拨号盘，上面可以显示输入的电话号码。</p>\n<p>设计一个发送按钮和删除按钮，点击删除按钮可以撤销输入的号码，点击发送按钮需要判断电话号码是否少于8位或大于11位，如果不满足要求需要提示用户输入的格式不正确，满足要求则需要将号码存放到手机外部储存的txt文件中。</p>\n<img src=\"/2022/10/10/Android-Studio-3/image-20221010220838199.png\" alt=\"image-20221010220838199\" style=\"zoom:80%;\">\n<img src=\"/2022/10/10/Android-Studio-3/image-20221010221037424.png\" alt=\"image-20221010221037424\" style=\"zoom:80%;\">\n<h2 id=\"项目管理\"><a class=\"markdownIt-Anchor\" href=\"#项目管理\"></a> 项目管理</h2>\n<p><img src=\"/2022/10/10/Android-Studio-3/image-20221010221157489.png\" alt=\"image-20221010221157489\"></p>\n<p>该项目中我们主要用到以下四个文件：</p>\n<ul>\n<li>MainActivity.java</li>\n<li>MainActivity.xml</li>\n<li>AndroidManifest.xml</li>\n<li>color_bg.xml</li>\n</ul>\n<p>其中，color_bg.xml需要在drawable文件夹下手动创建，其目的是更改号码按钮的背景颜色和背景图案。</p>\n<p>AndroidManifest.xml文件需要添加几行代码，其作用是允许程序读取和写入手机内部储存，后面会详细说明。</p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<p>拨号盘界面定义了12个TextView类型的控件，由于代码过于冗余且控件定义方式一模一样，这里以数字5的控件为例，其它数字控件的定义均省略。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/textView5<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>background</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@drawable/color_bg<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickNumber<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@string/number_5<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textColor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#455A64<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textSize</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>32sp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span> <span class=\"token attr-name\">...</span><span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/textView_del<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>background</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@drawable/color_bg<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickDelete<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@string/del<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textColor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#4E342E<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textSize</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>18sp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintHorizontal_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.3<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.7<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/textView_Send<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>background</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@drawable/color_bg<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>gravity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickSend<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@string/send<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textColor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#455A64<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textSize</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20sp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintHorizontal_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.7<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.7<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>EditText</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/editTextPhone<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>ems</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>7<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>inputType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>phone<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textSize</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>30sp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.3<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>autofillHints</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Press Phone Number<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>另外，<code>background=&quot;@drawable/color_bg&quot;</code>代码是用来对控件进行背景美化和边缘棱角处理的方法，具体代码如下：</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>shape</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>corners</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>radius</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20dp<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>solid</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@android:color/holo_blue_light<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>shape</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>最终样式如下：</p>\n<p><img src=\"/2022/10/10/Android-Studio-3/image-20221010222245715.png\" alt=\"image-20221010222245715\"></p>\n<h2 id=\"java逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java逻辑编辑\"></a> Java逻辑编辑</h2>\n<p>首先，我们需要定义一个String类型字符串用来储存电话号码，然后我们需要对每个控件进行对应的按钮进行函数编辑，根据<a href=\"http://tonylsx.top/2022/09/17/Andriod-Studio-1/\">Andriod Studio开发1 | Tony (tonylsx.top)</a>，我们可以很容易的在MainActivity类中写出每个按钮需要进行的操作。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token class-name\">String</span> <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickNumber0</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> number <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">+=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">;</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">//省略1-9的OnClickNumber()函数...</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickDelete</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> number <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickSend</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> number <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">11</span> <span class=\"token operator\">||</span> <span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">AlertDialog<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MainActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span></span>R</span><span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>ic_dialog_alert<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid Phone Number\"</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Phone number should between 8 and 11 digits!\"</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">setPositiveButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Okay fine\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>dialogInterface<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token comment\">//Print to a txt file</span>\n            <span class=\"token class-name\">Save_to_txt</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>首先我们需要关注<code>onClickDelete()</code>函数，需要注意的是<code>if</code>语句的重要性，如果没有写<code>if</code>的话，当<code>PhoneNumber</code>为空时再次删除最后一个元素时，即调用<code>substring()</code>函数时就会出现错误，导致程序崩溃！</p>\n<p>然后，这里面需要关注的是<code>OnClickSend()</code>函数，当数字长度不满足要求时，Android会弹出警告，提示有误并将<code>PhoneNumber</code>清空让用户重新输入，如果没有问题的话执行<code>Save_to_txt(PhoneNumber);</code>该函数的作用是在手机的根目录下创建一个新的文件夹，并在该文件夹下创建一个新的TXT文件，并将<code>PhoneNumber</code>存放到该TXT文件中。其详细代码如下：</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">Save_to_txt</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> number<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">String</span> path <span class=\"token operator\">=</span> <span class=\"token class-name\">Environment</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExternalStorageDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAbsolutePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">File</span> folder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>folder<span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            folder<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">File</span> file <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span>path <span class=\"token operator\">+</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string\">\"New_File.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>path <span class=\"token operator\">+</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string\">\"New_File.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            file<span class=\"token punctuation\">.</span><span class=\"token function\">createNewFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">FileWriter</span> fw <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileWriter</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            fw<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            fw<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span></code></pre>\n<p>其中，<code>Environment.getExternalStorageDirectory()</code>代表的是手机的内部存储根目录，也即<code>/storage/emulated/0</code>（<code>/storage/emulated/1</code>代表的是手机外部存储根目录）；<code>File.separator</code>代表的是<code>/</code>，对，就是斜杠。</p>\n<p>此外，如果需要写入手机外部存储（即SD卡），需要在<code>AndroidManifest.xml</code>中加入以下内容，作用是申请程序的外部存储读取权限。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>uses-permission</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.permission.WRITE_EXTERNAL_STORAGE<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>uses-permission</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.permission.READ_EXTERNAL_STORAGE<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n&lt;application\n    android:requestLegacyExternalStorage=\"true\"\n    ...</code></pre>\n<p>当然，上面的代码是存储到手机的内存中去，因此需要在手机APP权限中手动开启存储权限，如下图所示。否则将无法创建文件夹和对应的文件，并会像下面这样报错：</p>\n<pre class=\"language-http\" data-language=\"http\"><code class=\"language-http\">W/System.err: java.io.FileNotFoundException: /storage/emulated/0/NewFolder/New_File.txt: open failed: EACCES (Permission denied)\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:496)\nW/System.err:     at java.io.FileOutputStream.&lt;init>(FileOutputStream.java:235)\nW/System.err:     at java.io.FileOutputStream.&lt;init>(FileOutputStream.java:186)\nW/System.err:     at java.io.FileWriter.&lt;init>(FileWriter.java:90)\nW/System.err:     at com.example.assignment1.MainActivity.Save_to_txt(MainActivity.java:166)\nW/System.err:     at com.example.assignment1.MainActivity.onClickSend(MainActivity.java:148)\nW/System.err:     at java.lang.reflect.Method.invoke(Native Method)</code></pre>\n<p><img src=\"/2022/10/10/Android-Studio-3/image-20221010225547722.png\" alt=\"image-20221010225547722\"></p>\n<h2 id=\"针对按钮响应函数的一些优化\"><a class=\"markdownIt-Anchor\" href=\"#针对按钮响应函数的一些优化\"></a> 针对按钮响应函数的一些优化</h2>\n<p>为什么要对<code>OnClickNumberX()</code>函数进行优化呢，因为这些函数的功能一毛一样，那为什么不写成一个函数呢，在调用的时候多个按钮都可以调用同一个函数，不是更加简洁嘛？在Java中我们可以使用<code>switch-case</code>函数进行编辑，具体代码如下：</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickNumber</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> number <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>view<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView0<span class=\"token operator\">:</span>\n                <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">+=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView1<span class=\"token operator\">:</span>\n                <span class=\"token class-name\">PhoneNumber</span> <span class=\"token operator\">+=</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        <span class=\"token punctuation\">&#125;</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PhoneNumber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin逻辑编辑\"></a> Kotlin逻辑编辑</h2>\n<p>不做解释了，直接看代码（还是Kotlin简洁啊！）</p>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> PhoneNumber <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span>\n    \n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickNumber</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> number <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">when</span> <span class=\"token punctuation\">(</span>view<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView0 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"0\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView1 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"1\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView2 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"2\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView3 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"3\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView4 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"4\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView5 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"5\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView6 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"6\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView7 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"7\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView8 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"8\"</span></span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>textView9 <span class=\"token operator\">-></span> PhoneNumber <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"9\"</span></span>\n        <span class=\"token punctuation\">&#125;</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickDelete</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> number <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">.</span><span class=\"token function\">isNotEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            PhoneNumber <span class=\"token operator\">=</span> PhoneNumber<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> PhoneNumber<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickSend</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> number <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>editTextPhone<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">11</span> <span class=\"token operator\">||</span> PhoneNumber<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            AlertDialog<span class=\"token punctuation\">.</span><span class=\"token function\">Builder</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token label symbol\">@MainActivity</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span>android<span class=\"token punctuation\">.</span>R<span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>ic_dialog_alert<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Invalid Phone Number\"</span></span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Phone number should between 8 and 11 digits!\"</span></span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setPositiveButton</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token string-literal singleline\"><span class=\"token string\">\"Okay fine\"</span></span>\n                <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> _<span class=\"token operator\">:</span> DialogInterface<span class=\"token operator\">?</span><span class=\"token punctuation\">,</span> _<span class=\"token operator\">:</span> Int <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span>  <span class=\"token comment\">//Print to a txt file</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">Save_to_txt</span><span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        PhoneNumber <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span>\n        number<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>PhoneNumber<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">Save_to_txt</span><span class=\"token punctuation\">(</span>number<span class=\"token operator\">:</span> String<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> path <span class=\"token operator\">=</span> Environment<span class=\"token punctuation\">.</span><span class=\"token function\">getExternalStorageDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>absolutePath <span class=\"token operator\">+</span> File<span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"NewFolder\"</span></span>\n        <span class=\"token keyword\">val</span> folder <span class=\"token operator\">=</span> <span class=\"token function\">File</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>folder<span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \n            folder<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">try</span> \n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">val</span> file <span class=\"token operator\">=</span> <span class=\"token function\">File</span><span class=\"token punctuation\">(</span>path <span class=\"token operator\">+</span> File<span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"New_File.txt\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>path <span class=\"token operator\">+</span> File<span class=\"token punctuation\">.</span>separator <span class=\"token operator\">+</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"New_File.txt\"</span></span><span class=\"token punctuation\">)</span>\n            file<span class=\"token punctuation\">.</span><span class=\"token function\">createNewFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">val</span> fw <span class=\"token operator\">=</span> <span class=\"token function\">FileWriter</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span>\n            fw<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span>\n            fw<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span> \n        <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token operator\">:</span> Exception<span class=\"token punctuation\">)</span> \n        <span class=\"token punctuation\">&#123;</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"效果展示\"><a class=\"markdownIt-Anchor\" href=\"#效果展示\"></a> 效果展示</h2>\n<img src=\"/2022/10/10/Android-Studio-3/image-20221010232513124.png\" alt=\"image-20221010232513124\" style=\"zoom:80%;\">\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/09/27/Android-studio-2/\">Android Studio开发 2 | Tony</a></p>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/10/11/Android-Studio-4/\">Android-Studio开发 4 | Tony</a></p>\n"},{"title":"Android Studio开发 4","date":"2022-10-10T16:59:18.000Z","katex":true,"author":"Tony","_content":"\n## 任务目标\n\n制作一个简易计时器（秒表），实现Start, Stop, Restart三个按钮的功能。\n\n在此基础上，实现当屏幕旋转后依旧可以继续计时，且当程序在后台运行时（如返回桌面或打开其它软件）暂停计时，并在返回该程序时继续计时。\n\n![image-20221011010417986](Android-Studio-4/image-20221011010417986.png)\n\n## 界面编辑\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <TextView\n        android:id=\"@+id/time_view\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"00：00：00\"\n        android:textAppearance=\"@android:style/TextAppearance.Large\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.2\" />\n\n    <Button\n        android:id=\"@+id/button_start\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Start\"\n        android:onClick=\"onClickStart\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <Button\n        android:id=\"@+id/button_stop\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Stop\"\n        android:onClick=\"onClickStop\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.4\" />\n\n    <Button\n        android:id=\"@+id/button_Reset\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Reset\"\n        android:onClick=\"onClickReset\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.3\" />\n\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n## Java编程逻辑\n\n我们通过`Handler.post(Runnable())`来更新UI界面，`Runnable`会调用重写的`run()`函数，然后通过`handler.postDelayed()`函数控制每次更新UI的延迟时间。具体原理还挺复杂的哈，希望深入了解handler机制和runnable函数的原理可以自行查阅资料或参考[你不知道的Runnable接口，深度解析Runnable接口_程序员七哥的博客-CSDN博客_runnable](https://blog.csdn.net/zxw136511485/article/details/53032658)\n\n```java\npublic class MainActivity extends AppCompatActivity\n{\n    private int seconds = 0;\n    private boolean running;\n\n    public void onClickStart(View view)\n    {\n        running = true;\n    }\n    public void onClickStop(View view)\n    {\n        running = false;\n    }\n\n    public void onClickReset(View view)\n    {\n        running = false;\n        seconds = 0;\n        //下面这两行是为了防止点击Reset按钮后有1s的延迟\n        final TextView timeView = findViewById(R.id.time_view);\n        timeView.setText(\"00:00:00\");\n    }\n\n    private void runTimer()\n    {\n        final TextView timeView = findViewById(R.id.time_view);\n        final Handler handler = new Handler();\n        handler.post(new Runnable()\n        {\n            @Override\n            public void run()\n            {\n                if (running)\n                    seconds++;\n                int hours = seconds / 3600;\n                int minutes = seconds % 3600 / 60;\n                int secs = seconds % 3600 % 60;\n                String time = String.format(Locale.getDefault(), \"%02d:%02d:%02d\", hours, minutes, secs);\n                timeView.setText(time);\n                handler.postDelayed(this, 1000);\n            }\n        });\n    }\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        runTimer();\n    }\n}\n```\n\n以上，我们仅仅实现了最基本的计时器功能，如何实现在屏幕旋转后仍然计时呢？我们需要通过`Bundle`来暂时储存一些变量，在程序在后台运行或程序自动刷新时通过`bundle.getInt()`即使保存这些变量，然后在适当的时间通过`bundle.putInt()`释放这些保存的变量。这里我们要重写`onCreate(), onStop(), onStart()`等函数来完成目标任务，具体逻辑如下不做过多解释，代码如下：\n\n```java\n    private boolean wasRunning;\n    @Override\n    protected void onCreate(Bundle bundle) \n    {\n        super.onCreate(bundle);\n        setContentView(R.layout.activity_main);\n        if(bundle != null)\n        {\n            seconds = bundle.getInt(\"seconds\");\n            running = bundle.getBoolean(\"running\");\n            wasRunning = bundle.getBoolean(\"wasRunning\");\n        }\n        runTimer();\n    }\n    @Override\n    public void onSaveInstanceState(Bundle bundle)\n    {\n        super.onSaveInstanceState(bundle);\n        bundle.putInt(\"seconds\", seconds);\n        bundle.putBoolean(\"running\", running);\n        bundle.putBoolean(\"wasRunning\", wasRunning);\n    }\n    @Override\n    protected void onStop()\n    {\n        super.onStop();\n        wasRunning = running;\n        running = false;\n    }\n    @Override\n    protected void onStart()\n    {\n        super.onStart();\n        if(wasRunning)\n            running = true;\n    }\n```\n\n## Kotlin编程逻辑\n\n```kotlin\nclass MainActivity : AppCompatActivity()\n{\n    private var seconds = 0\n    private var running = false\n    fun onClickStart(view: View?)\n    {\n        running = true\n    }\n\n    fun onClickStop(view: View?)\n    {\n        running = false\n    }\n\n    @SuppressLint(\"SetTextI18n\")\n    fun onClickReset(view: View?)\n    {\n        running = false\n        seconds = 0\n        val timeView = findViewById<TextView>(R.id.time_view)\n        timeView.text = \"00:00:00\"\n    }\n\n    private fun runTimer()\n    {\n        val timeView = findViewById<TextView>(R.id.time_view)\n        val handler = Handler()\n        handler.post(object : Runnable\n        {\n            override fun run() \n            {\n                if (running) seconds++\n                val hours = seconds / 3600\n                val minutes = seconds % 3600 / 60\n                val secs = seconds % 3600 % 60\n                val time =\n                    String.format(Locale.getDefault(), \"%02d:%02d:%02d\", hours, minutes, secs)\n                timeView.text = time\n                handler.postDelayed(this, 1000)\n            }\n        })\n    }\n\n    private var wasRunning = false\n    override fun onCreate(bundle: Bundle?)\n    {\n        super.onCreate(bundle)\n        setContentView(R.layout.activity_main)\n        if (bundle != null)\n        {\n            seconds = bundle.getInt(\"seconds\")\n            running = bundle.getBoolean(\"running\")\n            wasRunning = bundle.getBoolean(\"wasRunning\")\n        }\n        runTimer()\n    }\n\n    public override fun onSaveInstanceState(bundle: Bundle)\n    {\n        super.onSaveInstanceState(bundle)\n        bundle.putInt(\"seconds\", seconds)\n        bundle.putBoolean(\"running\", running)\n        bundle.putBoolean(\"wasRunning\", wasRunning)\n    }\n\n    override fun onStop()\n    {\n        super.onStop()\n        wasRunning = running\n        running = false\n    }\n\n    override fun onStart()\n    {\n        super.onStart()\n        if (wasRunning) running = true\n    }\n}\n```\n\n---\n\n上一篇：[Android-Studio开发3 | Tony](http://tonylsx.top/2022/10/10/Android-Studio-3/)\n\n下一篇：[Android Studio开发 5 | Tony ](http://tonylsx.top/2022/11/09/Android-Studio-5/)\n","source":"_posts/Android-Studio-4.md","raw":"---\ntitle: Android Studio开发 4\ndate: 2022-10-11 00:59:18\ntags: \n  - Android Studio\n  - Java\n  - Kotlin\ncategories:\n  - Android Studio\nkatex: true\nauthor: Tony\n---\n\n## 任务目标\n\n制作一个简易计时器（秒表），实现Start, Stop, Restart三个按钮的功能。\n\n在此基础上，实现当屏幕旋转后依旧可以继续计时，且当程序在后台运行时（如返回桌面或打开其它软件）暂停计时，并在返回该程序时继续计时。\n\n![image-20221011010417986](Android-Studio-4/image-20221011010417986.png)\n\n## 界面编辑\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <TextView\n        android:id=\"@+id/time_view\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"00：00：00\"\n        android:textAppearance=\"@android:style/TextAppearance.Large\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.2\" />\n\n    <Button\n        android:id=\"@+id/button_start\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Start\"\n        android:onClick=\"onClickStart\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <Button\n        android:id=\"@+id/button_stop\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Stop\"\n        android:onClick=\"onClickStop\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.4\" />\n\n    <Button\n        android:id=\"@+id/button_Reset\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Reset\"\n        android:onClick=\"onClickReset\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.3\" />\n\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n## Java编程逻辑\n\n我们通过`Handler.post(Runnable())`来更新UI界面，`Runnable`会调用重写的`run()`函数，然后通过`handler.postDelayed()`函数控制每次更新UI的延迟时间。具体原理还挺复杂的哈，希望深入了解handler机制和runnable函数的原理可以自行查阅资料或参考[你不知道的Runnable接口，深度解析Runnable接口_程序员七哥的博客-CSDN博客_runnable](https://blog.csdn.net/zxw136511485/article/details/53032658)\n\n```java\npublic class MainActivity extends AppCompatActivity\n{\n    private int seconds = 0;\n    private boolean running;\n\n    public void onClickStart(View view)\n    {\n        running = true;\n    }\n    public void onClickStop(View view)\n    {\n        running = false;\n    }\n\n    public void onClickReset(View view)\n    {\n        running = false;\n        seconds = 0;\n        //下面这两行是为了防止点击Reset按钮后有1s的延迟\n        final TextView timeView = findViewById(R.id.time_view);\n        timeView.setText(\"00:00:00\");\n    }\n\n    private void runTimer()\n    {\n        final TextView timeView = findViewById(R.id.time_view);\n        final Handler handler = new Handler();\n        handler.post(new Runnable()\n        {\n            @Override\n            public void run()\n            {\n                if (running)\n                    seconds++;\n                int hours = seconds / 3600;\n                int minutes = seconds % 3600 / 60;\n                int secs = seconds % 3600 % 60;\n                String time = String.format(Locale.getDefault(), \"%02d:%02d:%02d\", hours, minutes, secs);\n                timeView.setText(time);\n                handler.postDelayed(this, 1000);\n            }\n        });\n    }\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        runTimer();\n    }\n}\n```\n\n以上，我们仅仅实现了最基本的计时器功能，如何实现在屏幕旋转后仍然计时呢？我们需要通过`Bundle`来暂时储存一些变量，在程序在后台运行或程序自动刷新时通过`bundle.getInt()`即使保存这些变量，然后在适当的时间通过`bundle.putInt()`释放这些保存的变量。这里我们要重写`onCreate(), onStop(), onStart()`等函数来完成目标任务，具体逻辑如下不做过多解释，代码如下：\n\n```java\n    private boolean wasRunning;\n    @Override\n    protected void onCreate(Bundle bundle) \n    {\n        super.onCreate(bundle);\n        setContentView(R.layout.activity_main);\n        if(bundle != null)\n        {\n            seconds = bundle.getInt(\"seconds\");\n            running = bundle.getBoolean(\"running\");\n            wasRunning = bundle.getBoolean(\"wasRunning\");\n        }\n        runTimer();\n    }\n    @Override\n    public void onSaveInstanceState(Bundle bundle)\n    {\n        super.onSaveInstanceState(bundle);\n        bundle.putInt(\"seconds\", seconds);\n        bundle.putBoolean(\"running\", running);\n        bundle.putBoolean(\"wasRunning\", wasRunning);\n    }\n    @Override\n    protected void onStop()\n    {\n        super.onStop();\n        wasRunning = running;\n        running = false;\n    }\n    @Override\n    protected void onStart()\n    {\n        super.onStart();\n        if(wasRunning)\n            running = true;\n    }\n```\n\n## Kotlin编程逻辑\n\n```kotlin\nclass MainActivity : AppCompatActivity()\n{\n    private var seconds = 0\n    private var running = false\n    fun onClickStart(view: View?)\n    {\n        running = true\n    }\n\n    fun onClickStop(view: View?)\n    {\n        running = false\n    }\n\n    @SuppressLint(\"SetTextI18n\")\n    fun onClickReset(view: View?)\n    {\n        running = false\n        seconds = 0\n        val timeView = findViewById<TextView>(R.id.time_view)\n        timeView.text = \"00:00:00\"\n    }\n\n    private fun runTimer()\n    {\n        val timeView = findViewById<TextView>(R.id.time_view)\n        val handler = Handler()\n        handler.post(object : Runnable\n        {\n            override fun run() \n            {\n                if (running) seconds++\n                val hours = seconds / 3600\n                val minutes = seconds % 3600 / 60\n                val secs = seconds % 3600 % 60\n                val time =\n                    String.format(Locale.getDefault(), \"%02d:%02d:%02d\", hours, minutes, secs)\n                timeView.text = time\n                handler.postDelayed(this, 1000)\n            }\n        })\n    }\n\n    private var wasRunning = false\n    override fun onCreate(bundle: Bundle?)\n    {\n        super.onCreate(bundle)\n        setContentView(R.layout.activity_main)\n        if (bundle != null)\n        {\n            seconds = bundle.getInt(\"seconds\")\n            running = bundle.getBoolean(\"running\")\n            wasRunning = bundle.getBoolean(\"wasRunning\")\n        }\n        runTimer()\n    }\n\n    public override fun onSaveInstanceState(bundle: Bundle)\n    {\n        super.onSaveInstanceState(bundle)\n        bundle.putInt(\"seconds\", seconds)\n        bundle.putBoolean(\"running\", running)\n        bundle.putBoolean(\"wasRunning\", wasRunning)\n    }\n\n    override fun onStop()\n    {\n        super.onStop()\n        wasRunning = running\n        running = false\n    }\n\n    override fun onStart()\n    {\n        super.onStart()\n        if (wasRunning) running = true\n    }\n}\n```\n\n---\n\n上一篇：[Android-Studio开发3 | Tony](http://tonylsx.top/2022/10/10/Android-Studio-3/)\n\n下一篇：[Android Studio开发 5 | Tony ](http://tonylsx.top/2022/11/09/Android-Studio-5/)\n","slug":"Android-Studio-4","published":1,"updated":"2022-12-01T01:38:46.017Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrca000d1gzubfw44a9v","content":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>制作一个简易计时器（秒表），实现Start, Stop, Restart三个按钮的功能。</p>\n<p>在此基础上，实现当屏幕旋转后依旧可以继续计时，且当程序在后台运行时（如返回桌面或打开其它软件）暂停计时，并在返回该程序时继续计时。</p>\n<p><img src=\"/2022/10/11/Android-Studio-4/image-20221011010417986.png\" alt=\"image-20221011010417986\" loading=\"lazy\"></p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/time_view<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>00：00：00<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textAppearance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@android:style/TextAppearance.Large<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.2<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/button_start<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Start<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickStart<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/button_stop<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Stop<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickStop<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/button_Reset<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Reset<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickReset<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.3<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"java编程逻辑\"><a class=\"markdownIt-Anchor\" href=\"#java编程逻辑\"></a> Java编程逻辑</h2>\n<p>我们通过<code>Handler.post(Runnable())</code>来更新UI界面，<code>Runnable</code>会调用重写的<code>run()</code>函数，然后通过<code>handler.postDelayed()</code>函数控制每次更新UI的延迟时间。具体原理还挺复杂的哈，希望深入了解handler机制和runnable函数的原理可以自行查阅资料或参考<a href=\"https://blog.csdn.net/zxw136511485/article/details/53032658\">你不知道的Runnable接口，深度解析Runnable接口_程序员七哥的博客-CSDN博客_runnable</a></p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> seconds <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> running<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickStart</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickStop</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickReset</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        seconds <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//下面这两行是为了防止点击Reset按钮后有1s的延迟</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">TextView</span> timeView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>time_view<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        timeView<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"00:00:00\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">runTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">TextView</span> timeView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>time_view<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Handler</span> handler <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Handler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        handler<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token annotation punctuation\">@Override</span>\n            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>running<span class=\"token punctuation\">)</span>\n                    seconds<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">int</span> hours <span class=\"token operator\">=</span> seconds <span class=\"token operator\">/</span> <span class=\"token number\">3600</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">int</span> minutes <span class=\"token operator\">=</span> seconds <span class=\"token operator\">%</span> <span class=\"token number\">3600</span> <span class=\"token operator\">/</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">int</span> secs <span class=\"token operator\">=</span> seconds <span class=\"token operator\">%</span> <span class=\"token number\">3600</span> <span class=\"token operator\">%</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">String</span> time <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Locale</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"%02d:%02d:%02d\"</span><span class=\"token punctuation\">,</span> hours<span class=\"token punctuation\">,</span> minutes<span class=\"token punctuation\">,</span> secs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                timeView<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                handler<span class=\"token punctuation\">.</span><span class=\"token function\">postDelayed</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">runTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>以上，我们仅仅实现了最基本的计时器功能，如何实现在屏幕旋转后仍然计时呢？我们需要通过<code>Bundle</code>来暂时储存一些变量，在程序在后台运行或程序自动刷新时通过<code>bundle.getInt()</code>即使保存这些变量，然后在适当的时间通过<code>bundle.putInt()</code>释放这些保存的变量。这里我们要重写<code>onCreate(), onStop(), onStart()</code>等函数来完成目标任务，具体逻辑如下不做过多解释，代码如下：</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> wasRunning<span class=\"token punctuation\">;</span>\n<span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> bundle<span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>bundle <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        seconds <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"seconds\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        running <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"running\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        wasRunning <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"wasRunning\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">runTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onSaveInstanceState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> bundle<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onSaveInstanceState</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"seconds\"</span><span class=\"token punctuation\">,</span> seconds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"running\"</span><span class=\"token punctuation\">,</span> running<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"wasRunning\"</span><span class=\"token punctuation\">,</span> wasRunning<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    wasRunning <span class=\"token operator\">=</span> running<span class=\"token punctuation\">;</span>\n    running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>wasRunning<span class=\"token punctuation\">)</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin编程逻辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin编程逻辑\"></a> Kotlin编程逻辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> seconds <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickStart</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickStop</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation builtin\">@SuppressLint</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"SetTextI18n\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickReset</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        seconds <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">val</span> timeView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>time_view<span class=\"token punctuation\">)</span>\n        timeView<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"00:00:00\"</span></span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">runTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> timeView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>time_view<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> handler <span class=\"token operator\">=</span> <span class=\"token function\">Handler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        handler<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">object</span> <span class=\"token operator\">:</span> Runnable\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>running<span class=\"token punctuation\">)</span> seconds<span class=\"token operator\">++</span>\n                <span class=\"token keyword\">val</span> hours <span class=\"token operator\">=</span> seconds <span class=\"token operator\">/</span> <span class=\"token number\">3600</span>\n                <span class=\"token keyword\">val</span> minutes <span class=\"token operator\">=</span> seconds <span class=\"token operator\">%</span> <span class=\"token number\">3600</span> <span class=\"token operator\">/</span> <span class=\"token number\">60</span>\n                <span class=\"token keyword\">val</span> secs <span class=\"token operator\">=</span> seconds <span class=\"token operator\">%</span> <span class=\"token number\">3600</span> <span class=\"token operator\">%</span> <span class=\"token number\">60</span>\n                <span class=\"token keyword\">val</span> time <span class=\"token operator\">=</span>\n                    String<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span>Locale<span class=\"token punctuation\">.</span><span class=\"token function\">getDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"%02d:%02d:%02d\"</span></span><span class=\"token punctuation\">,</span> hours<span class=\"token punctuation\">,</span> minutes<span class=\"token punctuation\">,</span> secs<span class=\"token punctuation\">)</span>\n                timeView<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> time\n                handler<span class=\"token punctuation\">.</span><span class=\"token function\">postDelayed</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> wasRunning <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>bundle<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bundle <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            seconds <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"seconds\"</span></span><span class=\"token punctuation\">)</span>\n            running <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"running\"</span></span><span class=\"token punctuation\">)</span>\n            wasRunning <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"wasRunning\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token function\">runTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onSaveInstanceState</span><span class=\"token punctuation\">(</span>bundle<span class=\"token operator\">:</span> Bundle<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onSaveInstanceState</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">)</span>\n        bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putInt</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"seconds\"</span></span><span class=\"token punctuation\">,</span> seconds<span class=\"token punctuation\">)</span>\n        bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"running\"</span></span><span class=\"token punctuation\">,</span> running<span class=\"token punctuation\">)</span>\n        bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"wasRunning\"</span></span><span class=\"token punctuation\">,</span> wasRunning<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        wasRunning <span class=\"token operator\">=</span> running\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>wasRunning<span class=\"token punctuation\">)</span> running <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/10/10/Android-Studio-3/\">Android-Studio开发3 | Tony</a></p>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/11/09/Android-Studio-5/\">Android Studio开发 5 | Tony </a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>制作一个简易计时器（秒表），实现Start, Stop, Restart三个按钮的功能。</p>\n<p>在此基础上，实现当屏幕旋转后依旧可以继续计时，且当程序在后台运行时（如返回桌面或打开其它软件）暂停计时，并在返回该程序时继续计时。</p>\n<p><img src=\"/2022/10/11/Android-Studio-4/image-20221011010417986.png\" alt=\"image-20221011010417986\"></p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/time_view<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>00：00：00<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textAppearance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@android:style/TextAppearance.Large<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.2<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/button_start<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Start<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickStart<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/button_stop<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Stop<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickStop<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/button_Reset<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Reset<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onClickReset<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintVertical_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.3<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"java编程逻辑\"><a class=\"markdownIt-Anchor\" href=\"#java编程逻辑\"></a> Java编程逻辑</h2>\n<p>我们通过<code>Handler.post(Runnable())</code>来更新UI界面，<code>Runnable</code>会调用重写的<code>run()</code>函数，然后通过<code>handler.postDelayed()</code>函数控制每次更新UI的延迟时间。具体原理还挺复杂的哈，希望深入了解handler机制和runnable函数的原理可以自行查阅资料或参考<a href=\"https://blog.csdn.net/zxw136511485/article/details/53032658\">你不知道的Runnable接口，深度解析Runnable接口_程序员七哥的博客-CSDN博客_runnable</a></p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> seconds <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> running<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickStart</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickStop</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onClickReset</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        seconds <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//下面这两行是为了防止点击Reset按钮后有1s的延迟</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">TextView</span> timeView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>time_view<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        timeView<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"00:00:00\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">runTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">TextView</span> timeView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>time_view<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Handler</span> handler <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Handler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        handler<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token annotation punctuation\">@Override</span>\n            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>running<span class=\"token punctuation\">)</span>\n                    seconds<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">int</span> hours <span class=\"token operator\">=</span> seconds <span class=\"token operator\">/</span> <span class=\"token number\">3600</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">int</span> minutes <span class=\"token operator\">=</span> seconds <span class=\"token operator\">%</span> <span class=\"token number\">3600</span> <span class=\"token operator\">/</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">int</span> secs <span class=\"token operator\">=</span> seconds <span class=\"token operator\">%</span> <span class=\"token number\">3600</span> <span class=\"token operator\">%</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">String</span> time <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Locale</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"%02d:%02d:%02d\"</span><span class=\"token punctuation\">,</span> hours<span class=\"token punctuation\">,</span> minutes<span class=\"token punctuation\">,</span> secs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                timeView<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                handler<span class=\"token punctuation\">.</span><span class=\"token function\">postDelayed</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">runTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>以上，我们仅仅实现了最基本的计时器功能，如何实现在屏幕旋转后仍然计时呢？我们需要通过<code>Bundle</code>来暂时储存一些变量，在程序在后台运行或程序自动刷新时通过<code>bundle.getInt()</code>即使保存这些变量，然后在适当的时间通过<code>bundle.putInt()</code>释放这些保存的变量。这里我们要重写<code>onCreate(), onStop(), onStart()</code>等函数来完成目标任务，具体逻辑如下不做过多解释，代码如下：</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> wasRunning<span class=\"token punctuation\">;</span>\n<span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> bundle<span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>bundle <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        seconds <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"seconds\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        running <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"running\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        wasRunning <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"wasRunning\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">runTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onSaveInstanceState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> bundle<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onSaveInstanceState</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"seconds\"</span><span class=\"token punctuation\">,</span> seconds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"running\"</span><span class=\"token punctuation\">,</span> running<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"wasRunning\"</span><span class=\"token punctuation\">,</span> wasRunning<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    wasRunning <span class=\"token operator\">=</span> running<span class=\"token punctuation\">;</span>\n    running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>wasRunning<span class=\"token punctuation\">)</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin编程逻辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin编程逻辑\"></a> Kotlin编程逻辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> seconds <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickStart</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickStop</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation builtin\">@SuppressLint</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"SetTextI18n\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onClickReset</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        seconds <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">val</span> timeView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>time_view<span class=\"token punctuation\">)</span>\n        timeView<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"00:00:00\"</span></span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">runTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> timeView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>time_view<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> handler <span class=\"token operator\">=</span> <span class=\"token function\">Handler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        handler<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">object</span> <span class=\"token operator\">:</span> Runnable\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>running<span class=\"token punctuation\">)</span> seconds<span class=\"token operator\">++</span>\n                <span class=\"token keyword\">val</span> hours <span class=\"token operator\">=</span> seconds <span class=\"token operator\">/</span> <span class=\"token number\">3600</span>\n                <span class=\"token keyword\">val</span> minutes <span class=\"token operator\">=</span> seconds <span class=\"token operator\">%</span> <span class=\"token number\">3600</span> <span class=\"token operator\">/</span> <span class=\"token number\">60</span>\n                <span class=\"token keyword\">val</span> secs <span class=\"token operator\">=</span> seconds <span class=\"token operator\">%</span> <span class=\"token number\">3600</span> <span class=\"token operator\">%</span> <span class=\"token number\">60</span>\n                <span class=\"token keyword\">val</span> time <span class=\"token operator\">=</span>\n                    String<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span>Locale<span class=\"token punctuation\">.</span><span class=\"token function\">getDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"%02d:%02d:%02d\"</span></span><span class=\"token punctuation\">,</span> hours<span class=\"token punctuation\">,</span> minutes<span class=\"token punctuation\">,</span> secs<span class=\"token punctuation\">)</span>\n                timeView<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> time\n                handler<span class=\"token punctuation\">.</span><span class=\"token function\">postDelayed</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> wasRunning <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>bundle<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bundle <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            seconds <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"seconds\"</span></span><span class=\"token punctuation\">)</span>\n            running <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"running\"</span></span><span class=\"token punctuation\">)</span>\n            wasRunning <span class=\"token operator\">=</span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"wasRunning\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token function\">runTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onSaveInstanceState</span><span class=\"token punctuation\">(</span>bundle<span class=\"token operator\">:</span> Bundle<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onSaveInstanceState</span><span class=\"token punctuation\">(</span>bundle<span class=\"token punctuation\">)</span>\n        bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putInt</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"seconds\"</span></span><span class=\"token punctuation\">,</span> seconds<span class=\"token punctuation\">)</span>\n        bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"running\"</span></span><span class=\"token punctuation\">,</span> running<span class=\"token punctuation\">)</span>\n        bundle<span class=\"token punctuation\">.</span><span class=\"token function\">putBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"wasRunning\"</span></span><span class=\"token punctuation\">,</span> wasRunning<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        wasRunning <span class=\"token operator\">=</span> running\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>wasRunning<span class=\"token punctuation\">)</span> running <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/10/10/Android-Studio-3/\">Android-Studio开发3 | Tony</a></p>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/11/09/Android-Studio-5/\">Android Studio开发 5 | Tony </a></p>\n"},{"title":"Android Studio 开发 5","date":"2022-11-09T06:54:30.000Z","katex":true,"author":"Tony","_content":"\n## 任务目标\n\n实现一个简单的饮品搜索应用，用户可以查看不同饮品的图片、名字和简介。\n\n![image-20221121161500306](Android-Studio-5/image-20221121161500306.png)\n\n## 界面编辑\n\n这里需要三个界面，分别是**主界面，饮品选择界面和饮品界面**。\n\n#### Activity_main Code\n\n```xml\n<!-- activity_main.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <ImageView\n        android:id=\"@+id/imageView\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintStart_toStartOf=\"@+id/list_options\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:srcCompat=\"@drawable/starbuzz_logo\" />\n\n    <ListView\n        android:id=\"@+id/list_options\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"471dp\"\n        android:layout_marginBottom=\"1dp\"\n        android:entries=\"@array/options\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n#### Activity_main Sample\n\n<img src=\"Android-Studio-5/image-20221109150451204.png\" alt=\"image-20221109150451204\" style=\"zoom:50%;\" />\n\n#### Activity_drink_category Code\n\n```xml\n<!-- activity_drink_category.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".DrinkCategoryActivity\">\n\n    <ListView\n        android:id=\"@+id/list_drinks\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n#### Activity_drink_category Sample\n\n![image-20221109150911874](Android-Studio-5/image-20221109150911874.png)\n\n#### Activity_drink Code\n\n```xml\n<!-- activity_drink.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".DrinkActivity\">\n\n    <TextView\n        android:id=\"@+id/name\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"TextView\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <ImageView\n        android:id=\"@+id/photo\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"80dp\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <TextView\n        android:id=\"@+id/description\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"63dp\"\n        android:layout_marginEnd=\"1dp\"\n        android:text=\"TextView\"\n        app:layout_constraintEnd_toEndOf=\"@+id/name\"\n        app:layout_constraintTop_toBottomOf=\"@+id/name\" />\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n#### Activity_drink Sample\n\n![image-20221109151131798](Android-Studio-5/image-20221109151131798.png)\n\n## Java 逻辑编辑\n\n单独创建一个`Drink.java`文件来编写`Drink`类。\n\n```java\npublic class Drink\n{\n    private String name;\n    private String description;\n    private int imageResourceID;\n    public static final Drink[] drinks = {\n            new Drink(\"Latte\", \"Description of latte\", R.drawable.latte),\n            new Drink(\"Cappuccino\", \"Description of cappuccino\", R.drawable.cappuccino),\n            new Drink(\"Filter\", \"Description of Filter\", R.drawable.filter)\n    };\n    private Drink(String name, String description, int imageResourceID)\n    {\n        this.name = name;\n        this.description = description;\n        this.imageResourceID = imageResourceID;\n    }\n    public String getDescription()\n    {\n        return description;\n    }\n    public String getName()\n    {\n        return name;\n    }\n    public int getImageResourceID()\n    {\n        return imageResourceID;\n    }\n    public String toString()\n    {\n        return this.name;\n    }\n}\n\n```\n\n主界面Java中，值得注意的是，这里使用了`OnItemClickLister()`对`ListView`进行监听，比起只能对按钮进行操作的`OnClick()`函数，这种监听方式更加安全，难以被恶意攻击，且监听时Android能够更好的利用内存和进程，此外，`OnItemClickLister()`比`OnClick()`拥有更多的参数可供调用。\n\n```java\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        AdapterView.OnItemClickListener itemClickListener = new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n                if(position == 0)\n                {\n                    Intent intent = new Intent(MainActivity.this, DrinkCategoryActivity.class);\n                    startActivity(intent);\n                }\n            }\n        };\n        ListView listView = findViewById(R.id.list_options);\n        listView.setOnItemClickListener(itemClickListener);\n    }\n}\n```\n\n接下来是饮品选择界面，同理使用`OnClickListener()`函数进行点击的监听，并将监听到的用户选择的参数`(id)`通过`intent.putExtra()`函数传入下一个界面中。值得注意的是，界面里面的`list_drinks(ListView)`是以软连接的方式来获取名字的，具体的实现方式在`Drink.java`中定义。\n\n```java\npublic class DrinkCategoryActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_drink_category);\n        ArrayAdapter<Drink> listAdapter = new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, Drink.drinks);\n        ListView listDrinks = findViewById(R.id.list_drinks);\n        listDrinks.setAdapter(listAdapter);\n\n        //Create the listener\n        AdapterView.OnItemClickListener itemClickListener = new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n                Intent intent = new Intent(DrinkCategoryActivity.this, DrinkActivity.class);\n                intent.putExtra(DrinkActivity.EXTRA_DRINKID, (int) id);//(int) is a must\n                startActivity(intent);\n            }\n        };\n        listDrinks.setOnItemClickListener(itemClickListener);\n    }\n}\n```\n\n最后便是各种饮品的详情页面了，这里需要注意的是，代码中使用了一个`EXTRA_DRINKID`的全局变量进行参数的传递，将`DrinkCategoryActivity`中的`id`值传入`DrinkActivity`的全局变量中。\n\n```java\npublic class DrinkActivity extends AppCompatActivity {\n    public static final String EXTRA_DRINKID = \"\";\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_drink);\n        int drinkID = (Integer) getIntent().getExtras().get(EXTRA_DRINKID);\n        Drink drink = Drink.drinks[drinkID];\n\n        TextView name = findViewById(R.id.name);\n        name.setText(drink.getName());\n        TextView description = findViewById(R.id.description);\n        description.setText(drink.getDescription());\n        ImageView photo = findViewById(R.id.photo);\n        photo.setImageResource(drink.getImageResourceID());\n        photo.setContentDescription(drink.getName());\n    }\n}\n```\n\n## Kotlin逻辑编辑\n\n```kotlin\n//Drink.kt\n\nclass Drink private constructor(val name: String, val description: String, val imageResourceID: Int) {\n\n    override fun toString(): String { return name }\n    @JvmName(\"GetDescription\")\n    fun getDescription(): String? { return description }\n\n    @JvmName(\"GetName\")\n    fun getName(): String? { return name }\n\n    @JvmName(\"GetImageResourceID\")\n    fun getImageResourceID(): Int { return imageResourceID }\n\n    companion object {\n        val drinks = arrayOf(\n            Drink(\"Cappuccino\", \"Description of cappuccino\", R.drawable.cappuccino),\n            Drink(\"Latte\", \"Description of latte\", R.drawable.latte),\n            Drink(\"Filter\", \"Description of Filter\", R.drawable.filter)\n        )\n    }\n}\n```\n\n```kotlin\n//MainActivity.kt\n\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val itemClickListener =\n            OnItemClickListener { parent, view, position, id ->\n                if (position == 0) {\n                    val intent = Intent(this@MainActivity, DrinkCategoryActivity::class.java)\n                    startActivity(intent)\n                }\n            }\n        val listView = findViewById<ListView>(R.id.list_options)\n        listView.onItemClickListener = itemClickListener\n    }\n}\n```\n\n```kotlin\n//DrinkCategoryActivity.kt\n\nclass DrinkCategoryActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_drink_category)\n        val listAdapter: ArrayAdapter<Drink?> =\n            ArrayAdapter<Drink?>(this, android.R.layout.simple_list_item_1, Drink.drinks)\n        val listDrinks = findViewById<ListView>(R.id.list_drinks)\n        listDrinks.adapter = listAdapter\n\n        //Create the listener\n        val itemClickListener =\n            OnItemClickListener { parent, view, position, id ->\n                val intent = Intent(this@DrinkCategoryActivity, DrinkActivity::class.java)\n                intent.putExtra(DrinkActivity.EXTRA_DRINKID, id.toInt())// .toInt() is a must\n                startActivity(intent)\n            }\n        listDrinks.onItemClickListener = itemClickListener\n    }\n}\n```\n\n```kotlin\n//DrinkActivity.kt\n\nclass DrinkActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_drink)\n        val drinkID = intent.extras!![EXTRA_DRINKID] as Int\n        val drink = Drink.drinks[drinkID]\n        val name = findViewById<TextView>(R.id.name)\n        name.setText(drink.getName())\n        val description = findViewById<TextView>(R.id.description)\n        description.setText(drink.getDescription())\n        val photo = findViewById<ImageView>(R.id.photo)\n        photo.setImageResource(drink.getImageResourceID())\n        photo.contentDescription = drink.getName()\n    }\n\n    companion object {\n        const val EXTRA_DRINKID = \"\"\n    }\n}\n```\n\n还是Kotlin简洁啊!\n\n\n\n---\n\n上一篇：[Android Studio开发 4 | Tony ](http://tonylsx.top/2022/10/11/Android-Studio-4/)\n\n下一篇：马上就好了...\n","source":"_posts/Android-Studio-5.md","raw":"---\ntitle: Android Studio 开发 5\ndate: 2022-11-09 14:54:30\ntags: \n  - Android Studio\n  - Java\n  - Kotlin\ncategories:\n  - Android Studio\nkatex: true\nauthor: Tony\n---\n\n## 任务目标\n\n实现一个简单的饮品搜索应用，用户可以查看不同饮品的图片、名字和简介。\n\n![image-20221121161500306](Android-Studio-5/image-20221121161500306.png)\n\n## 界面编辑\n\n这里需要三个界面，分别是**主界面，饮品选择界面和饮品界面**。\n\n#### Activity_main Code\n\n```xml\n<!-- activity_main.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <ImageView\n        android:id=\"@+id/imageView\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintStart_toStartOf=\"@+id/list_options\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:srcCompat=\"@drawable/starbuzz_logo\" />\n\n    <ListView\n        android:id=\"@+id/list_options\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"471dp\"\n        android:layout_marginBottom=\"1dp\"\n        android:entries=\"@array/options\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n#### Activity_main Sample\n\n<img src=\"Android-Studio-5/image-20221109150451204.png\" alt=\"image-20221109150451204\" style=\"zoom:50%;\" />\n\n#### Activity_drink_category Code\n\n```xml\n<!-- activity_drink_category.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".DrinkCategoryActivity\">\n\n    <ListView\n        android:id=\"@+id/list_drinks\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n#### Activity_drink_category Sample\n\n![image-20221109150911874](Android-Studio-5/image-20221109150911874.png)\n\n#### Activity_drink Code\n\n```xml\n<!-- activity_drink.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".DrinkActivity\">\n\n    <TextView\n        android:id=\"@+id/name\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"TextView\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <ImageView\n        android:id=\"@+id/photo\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"80dp\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <TextView\n        android:id=\"@+id/description\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"63dp\"\n        android:layout_marginEnd=\"1dp\"\n        android:text=\"TextView\"\n        app:layout_constraintEnd_toEndOf=\"@+id/name\"\n        app:layout_constraintTop_toBottomOf=\"@+id/name\" />\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n#### Activity_drink Sample\n\n![image-20221109151131798](Android-Studio-5/image-20221109151131798.png)\n\n## Java 逻辑编辑\n\n单独创建一个`Drink.java`文件来编写`Drink`类。\n\n```java\npublic class Drink\n{\n    private String name;\n    private String description;\n    private int imageResourceID;\n    public static final Drink[] drinks = {\n            new Drink(\"Latte\", \"Description of latte\", R.drawable.latte),\n            new Drink(\"Cappuccino\", \"Description of cappuccino\", R.drawable.cappuccino),\n            new Drink(\"Filter\", \"Description of Filter\", R.drawable.filter)\n    };\n    private Drink(String name, String description, int imageResourceID)\n    {\n        this.name = name;\n        this.description = description;\n        this.imageResourceID = imageResourceID;\n    }\n    public String getDescription()\n    {\n        return description;\n    }\n    public String getName()\n    {\n        return name;\n    }\n    public int getImageResourceID()\n    {\n        return imageResourceID;\n    }\n    public String toString()\n    {\n        return this.name;\n    }\n}\n\n```\n\n主界面Java中，值得注意的是，这里使用了`OnItemClickLister()`对`ListView`进行监听，比起只能对按钮进行操作的`OnClick()`函数，这种监听方式更加安全，难以被恶意攻击，且监听时Android能够更好的利用内存和进程，此外，`OnItemClickLister()`比`OnClick()`拥有更多的参数可供调用。\n\n```java\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        AdapterView.OnItemClickListener itemClickListener = new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n                if(position == 0)\n                {\n                    Intent intent = new Intent(MainActivity.this, DrinkCategoryActivity.class);\n                    startActivity(intent);\n                }\n            }\n        };\n        ListView listView = findViewById(R.id.list_options);\n        listView.setOnItemClickListener(itemClickListener);\n    }\n}\n```\n\n接下来是饮品选择界面，同理使用`OnClickListener()`函数进行点击的监听，并将监听到的用户选择的参数`(id)`通过`intent.putExtra()`函数传入下一个界面中。值得注意的是，界面里面的`list_drinks(ListView)`是以软连接的方式来获取名字的，具体的实现方式在`Drink.java`中定义。\n\n```java\npublic class DrinkCategoryActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_drink_category);\n        ArrayAdapter<Drink> listAdapter = new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, Drink.drinks);\n        ListView listDrinks = findViewById(R.id.list_drinks);\n        listDrinks.setAdapter(listAdapter);\n\n        //Create the listener\n        AdapterView.OnItemClickListener itemClickListener = new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n                Intent intent = new Intent(DrinkCategoryActivity.this, DrinkActivity.class);\n                intent.putExtra(DrinkActivity.EXTRA_DRINKID, (int) id);//(int) is a must\n                startActivity(intent);\n            }\n        };\n        listDrinks.setOnItemClickListener(itemClickListener);\n    }\n}\n```\n\n最后便是各种饮品的详情页面了，这里需要注意的是，代码中使用了一个`EXTRA_DRINKID`的全局变量进行参数的传递，将`DrinkCategoryActivity`中的`id`值传入`DrinkActivity`的全局变量中。\n\n```java\npublic class DrinkActivity extends AppCompatActivity {\n    public static final String EXTRA_DRINKID = \"\";\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_drink);\n        int drinkID = (Integer) getIntent().getExtras().get(EXTRA_DRINKID);\n        Drink drink = Drink.drinks[drinkID];\n\n        TextView name = findViewById(R.id.name);\n        name.setText(drink.getName());\n        TextView description = findViewById(R.id.description);\n        description.setText(drink.getDescription());\n        ImageView photo = findViewById(R.id.photo);\n        photo.setImageResource(drink.getImageResourceID());\n        photo.setContentDescription(drink.getName());\n    }\n}\n```\n\n## Kotlin逻辑编辑\n\n```kotlin\n//Drink.kt\n\nclass Drink private constructor(val name: String, val description: String, val imageResourceID: Int) {\n\n    override fun toString(): String { return name }\n    @JvmName(\"GetDescription\")\n    fun getDescription(): String? { return description }\n\n    @JvmName(\"GetName\")\n    fun getName(): String? { return name }\n\n    @JvmName(\"GetImageResourceID\")\n    fun getImageResourceID(): Int { return imageResourceID }\n\n    companion object {\n        val drinks = arrayOf(\n            Drink(\"Cappuccino\", \"Description of cappuccino\", R.drawable.cappuccino),\n            Drink(\"Latte\", \"Description of latte\", R.drawable.latte),\n            Drink(\"Filter\", \"Description of Filter\", R.drawable.filter)\n        )\n    }\n}\n```\n\n```kotlin\n//MainActivity.kt\n\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val itemClickListener =\n            OnItemClickListener { parent, view, position, id ->\n                if (position == 0) {\n                    val intent = Intent(this@MainActivity, DrinkCategoryActivity::class.java)\n                    startActivity(intent)\n                }\n            }\n        val listView = findViewById<ListView>(R.id.list_options)\n        listView.onItemClickListener = itemClickListener\n    }\n}\n```\n\n```kotlin\n//DrinkCategoryActivity.kt\n\nclass DrinkCategoryActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_drink_category)\n        val listAdapter: ArrayAdapter<Drink?> =\n            ArrayAdapter<Drink?>(this, android.R.layout.simple_list_item_1, Drink.drinks)\n        val listDrinks = findViewById<ListView>(R.id.list_drinks)\n        listDrinks.adapter = listAdapter\n\n        //Create the listener\n        val itemClickListener =\n            OnItemClickListener { parent, view, position, id ->\n                val intent = Intent(this@DrinkCategoryActivity, DrinkActivity::class.java)\n                intent.putExtra(DrinkActivity.EXTRA_DRINKID, id.toInt())// .toInt() is a must\n                startActivity(intent)\n            }\n        listDrinks.onItemClickListener = itemClickListener\n    }\n}\n```\n\n```kotlin\n//DrinkActivity.kt\n\nclass DrinkActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_drink)\n        val drinkID = intent.extras!![EXTRA_DRINKID] as Int\n        val drink = Drink.drinks[drinkID]\n        val name = findViewById<TextView>(R.id.name)\n        name.setText(drink.getName())\n        val description = findViewById<TextView>(R.id.description)\n        description.setText(drink.getDescription())\n        val photo = findViewById<ImageView>(R.id.photo)\n        photo.setImageResource(drink.getImageResourceID())\n        photo.contentDescription = drink.getName()\n    }\n\n    companion object {\n        const val EXTRA_DRINKID = \"\"\n    }\n}\n```\n\n还是Kotlin简洁啊!\n\n\n\n---\n\n上一篇：[Android Studio开发 4 | Tony ](http://tonylsx.top/2022/10/11/Android-Studio-4/)\n\n下一篇：马上就好了...\n","slug":"Android-Studio-5","published":1,"updated":"2022-12-01T01:38:46.019Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcb000e1gzu19wu5ja4","content":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>实现一个简单的饮品搜索应用，用户可以查看不同饮品的图片、名字和简介。</p>\n<p><img src=\"/2022/11/09/Android-Studio-5/image-20221121161500306.png\" alt=\"image-20221121161500306\" loading=\"lazy\"></p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<p>这里需要三个界面，分别是<strong>主界面，饮品选择界面和饮品界面</strong>。</p>\n<h4 id=\"activity_main-code\"><a class=\"markdownIt-Anchor\" href=\"#activity_main-code\"></a> Activity_main Code</h4>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_main.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ImageView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/imageView<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/list_options<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>srcCompat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@drawable/starbuzz_logo<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ListView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/list_options<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>471dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginBottom</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>entries</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@array/options<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<h4 id=\"activity_main-sample\"><a class=\"markdownIt-Anchor\" href=\"#activity_main-sample\"></a> Activity_main Sample</h4>\n<img src=\"/2022/11/09/Android-Studio-5/image-20221109150451204.png\" alt=\"image-20221109150451204\" style=\"zoom:50%;\" loading=\"lazy\">\n<h4 id=\"activity_drink_category-code\"><a class=\"markdownIt-Anchor\" href=\"#activity_drink_category-code\"></a> Activity_drink_category Code</h4>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_drink_category.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.DrinkCategoryActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ListView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/list_drinks<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<h4 id=\"activity_drink_category-sample\"><a class=\"markdownIt-Anchor\" href=\"#activity_drink_category-sample\"></a> Activity_drink_category Sample</h4>\n<p><img src=\"/2022/11/09/Android-Studio-5/image-20221109150911874.png\" alt=\"image-20221109150911874\" loading=\"lazy\"></p>\n<h4 id=\"activity_drink-code\"><a class=\"markdownIt-Anchor\" href=\"#activity_drink-code\"></a> Activity_drink Code</h4>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_drink.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.DrinkActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/name<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>TextView<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ImageView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/photo<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>80dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/description<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>63dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginEnd</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>TextView<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/name<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<h4 id=\"activity_drink-sample\"><a class=\"markdownIt-Anchor\" href=\"#activity_drink-sample\"></a> Activity_drink Sample</h4>\n<p><img src=\"/2022/11/09/Android-Studio-5/image-20221109151131798.png\" alt=\"image-20221109151131798\" loading=\"lazy\"></p>\n<h2 id=\"java-逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java-逻辑编辑\"></a> Java 逻辑编辑</h2>\n<p>单独创建一个<code>Drink.java</code>文件来编写<code>Drink</code>类。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Drink</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> imageResourceID<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> drinks <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Latte\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description of latte\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>latte<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cappuccino\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description of cappuccino\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>cappuccino<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Filter\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description of Filter\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> imageResourceID<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>description <span class=\"token operator\">=</span> description<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>imageResourceID <span class=\"token operator\">=</span> imageResourceID<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> description<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getImageResourceID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> imageResourceID<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n</code></pre>\n<p>主界面Java中，值得注意的是，这里使用了<code>OnItemClickLister()</code>对<code>ListView</code>进行监听，比起只能对按钮进行操作的<code>OnClick()</code>函数，这种监听方式更加安全，难以被恶意攻击，且监听时Android能够更好的利用内存和进程，此外，<code>OnItemClickLister()</code>比<code>OnClick()</code>拥有更多的参数可供调用。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">AdapterView<span class=\"token punctuation\">.</span>OnItemClickListener</span> itemClickListener <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AdapterView<span class=\"token punctuation\">.</span>OnItemClickListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token annotation punctuation\">@Override</span>\n            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onItemClick</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AdapterView</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> parent<span class=\"token punctuation\">,</span> <span class=\"token class-name\">View</span> view<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MainActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DrinkCategoryActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ListView</span> listView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>list_options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        listView<span class=\"token punctuation\">.</span><span class=\"token function\">setOnItemClickListener</span><span class=\"token punctuation\">(</span>itemClickListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>接下来是饮品选择界面，同理使用<code>OnClickListener()</code>函数进行点击的监听，并将监听到的用户选择的参数<code>(id)</code>通过<code>intent.putExtra()</code>函数传入下一个界面中。值得注意的是，界面里面的<code>list_drinks(ListView)</code>是以软连接的方式来获取名字的，具体的实现方式在<code>Drink.java</code>中定义。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DrinkCategoryActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_drink_category<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ArrayAdapter</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Drink</span><span class=\"token punctuation\">></span></span> listAdapter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayAdapter</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span></span>R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>simple_list_item_1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">.</span>drinks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ListView</span> listDrinks <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>list_drinks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        listDrinks<span class=\"token punctuation\">.</span><span class=\"token function\">setAdapter</span><span class=\"token punctuation\">(</span>listAdapter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//Create the listener</span>\n        <span class=\"token class-name\">AdapterView<span class=\"token punctuation\">.</span>OnItemClickListener</span> itemClickListener <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AdapterView<span class=\"token punctuation\">.</span>OnItemClickListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token annotation punctuation\">@Override</span>\n            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onItemClick</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AdapterView</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> parent<span class=\"token punctuation\">,</span> <span class=\"token class-name\">View</span> view<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DrinkCategoryActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DrinkActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DrinkActivity</span><span class=\"token punctuation\">.</span>EXTRA_DRINKID<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//(int) is a must</span>\n                <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n        listDrinks<span class=\"token punctuation\">.</span><span class=\"token function\">setOnItemClickListener</span><span class=\"token punctuation\">(</span>itemClickListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>最后便是各种饮品的详情页面了，这里需要注意的是，代码中使用了一个<code>EXTRA_DRINKID</code>的全局变量进行参数的传递，将<code>DrinkCategoryActivity</code>中的<code>id</code>值传入<code>DrinkActivity</code>的全局变量中。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DrinkActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> EXTRA_DRINKID <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_drink<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> drinkID <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">)</span> <span class=\"token function\">getIntent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExtras</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>EXTRA_DRINKID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Drink</span> drink <span class=\"token operator\">=</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">.</span>drinks<span class=\"token punctuation\">[</span>drinkID<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">TextView</span> name <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        name<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">TextView</span> description <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        description<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ImageView</span> photo <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>photo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        photo<span class=\"token punctuation\">.</span><span class=\"token function\">setImageResource</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getImageResourceID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        photo<span class=\"token punctuation\">.</span><span class=\"token function\">setContentDescription</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin逻辑编辑\"></a> Kotlin逻辑编辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//Drink.kt</span>\n\n<span class=\"token keyword\">class</span> Drink <span class=\"token keyword\">private</span> <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> <span class=\"token keyword\">val</span> description<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> <span class=\"token keyword\">val</span> imageResourceID<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> name <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token annotation builtin\">@JvmName</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"GetDescription\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String<span class=\"token operator\">?</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> description <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation builtin\">@JvmName</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"GetName\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String<span class=\"token operator\">?</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> name <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation builtin\">@JvmName</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"GetImageResourceID\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getImageResourceID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Int <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> imageResourceID <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> drinks <span class=\"token operator\">=</span> <span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span>\n            <span class=\"token function\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Cappuccino\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description of cappuccino\"</span></span><span class=\"token punctuation\">,</span> R<span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>cappuccino<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Latte\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description of latte\"</span></span><span class=\"token punctuation\">,</span> R<span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>latte<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Filter\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description of Filter\"</span></span><span class=\"token punctuation\">,</span> R<span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//MainActivity.kt</span>\n\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> itemClickListener <span class=\"token operator\">=</span>\n            OnItemClickListener <span class=\"token punctuation\">&#123;</span> parent<span class=\"token punctuation\">,</span> view<span class=\"token punctuation\">,</span> position<span class=\"token punctuation\">,</span> id <span class=\"token operator\">-></span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token label symbol\">@MainActivity</span><span class=\"token punctuation\">,</span> DrinkCategoryActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n                    <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">val</span> listView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>ListView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>list_options<span class=\"token punctuation\">)</span>\n        listView<span class=\"token punctuation\">.</span>onItemClickListener <span class=\"token operator\">=</span> itemClickListener\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//DrinkCategoryActivity.kt</span>\n\n<span class=\"token keyword\">class</span> DrinkCategoryActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_drink_category<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> listAdapter<span class=\"token operator\">:</span> ArrayAdapter<span class=\"token operator\">&lt;</span>Drink<span class=\"token operator\">?</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n            ArrayAdapter<span class=\"token operator\">&lt;</span>Drink<span class=\"token operator\">?</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> android<span class=\"token punctuation\">.</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>simple_list_item_1<span class=\"token punctuation\">,</span> Drink<span class=\"token punctuation\">.</span>drinks<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> listDrinks <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>ListView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>list_drinks<span class=\"token punctuation\">)</span>\n        listDrinks<span class=\"token punctuation\">.</span>adapter <span class=\"token operator\">=</span> listAdapter\n\n        <span class=\"token comment\">//Create the listener</span>\n        <span class=\"token keyword\">val</span> itemClickListener <span class=\"token operator\">=</span>\n            OnItemClickListener <span class=\"token punctuation\">&#123;</span> parent<span class=\"token punctuation\">,</span> view<span class=\"token punctuation\">,</span> position<span class=\"token punctuation\">,</span> id <span class=\"token operator\">-></span>\n                <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token label symbol\">@DrinkCategoryActivity</span><span class=\"token punctuation\">,</span> DrinkActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n                intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span>DrinkActivity<span class=\"token punctuation\">.</span>EXTRA_DRINKID<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// .toInt() is a must</span>\n                <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n        listDrinks<span class=\"token punctuation\">.</span>onItemClickListener <span class=\"token operator\">=</span> itemClickListener\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//DrinkActivity.kt</span>\n\n<span class=\"token keyword\">class</span> DrinkActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_drink<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> drinkID <span class=\"token operator\">=</span> intent<span class=\"token punctuation\">.</span>extras<span class=\"token operator\">!!</span><span class=\"token punctuation\">[</span>EXTRA_DRINKID<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> Int\n        <span class=\"token keyword\">val</span> drink <span class=\"token operator\">=</span> Drink<span class=\"token punctuation\">.</span>drinks<span class=\"token punctuation\">[</span>drinkID<span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">val</span> name <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n        name<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> description <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">)</span>\n        description<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> photo <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>ImageView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>photo<span class=\"token punctuation\">)</span>\n        photo<span class=\"token punctuation\">.</span><span class=\"token function\">setImageResource</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getImageResourceID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        photo<span class=\"token punctuation\">.</span>contentDescription <span class=\"token operator\">=</span> drink<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">const</span> <span class=\"token keyword\">val</span> EXTRA_DRINKID <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>还是Kotlin简洁啊!</p>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/10/11/Android-Studio-4/\">Android Studio开发 4 | Tony </a></p>\n<p>下一篇：马上就好了…</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>实现一个简单的饮品搜索应用，用户可以查看不同饮品的图片、名字和简介。</p>\n<p><img src=\"/2022/11/09/Android-Studio-5/image-20221121161500306.png\" alt=\"image-20221121161500306\"></p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<p>这里需要三个界面，分别是<strong>主界面，饮品选择界面和饮品界面</strong>。</p>\n<h4 id=\"activity_main-code\"><a class=\"markdownIt-Anchor\" href=\"#activity_main-code\"></a> Activity_main Code</h4>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_main.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ImageView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/imageView<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/list_options<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>srcCompat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@drawable/starbuzz_logo<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ListView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/list_options<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>471dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginBottom</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>entries</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@array/options<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<h4 id=\"activity_main-sample\"><a class=\"markdownIt-Anchor\" href=\"#activity_main-sample\"></a> Activity_main Sample</h4>\n<img src=\"/2022/11/09/Android-Studio-5/image-20221109150451204.png\" alt=\"image-20221109150451204\" style=\"zoom:50%;\">\n<h4 id=\"activity_drink_category-code\"><a class=\"markdownIt-Anchor\" href=\"#activity_drink_category-code\"></a> Activity_drink_category Code</h4>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_drink_category.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.DrinkCategoryActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ListView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/list_drinks<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<h4 id=\"activity_drink_category-sample\"><a class=\"markdownIt-Anchor\" href=\"#activity_drink_category-sample\"></a> Activity_drink_category Sample</h4>\n<p><img src=\"/2022/11/09/Android-Studio-5/image-20221109150911874.png\" alt=\"image-20221109150911874\"></p>\n<h4 id=\"activity_drink-code\"><a class=\"markdownIt-Anchor\" href=\"#activity_drink-code\"></a> Activity_drink Code</h4>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_drink.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.DrinkActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/name<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>TextView<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ImageView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/photo<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>80dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/description<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>63dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginEnd</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>TextView<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/name<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<h4 id=\"activity_drink-sample\"><a class=\"markdownIt-Anchor\" href=\"#activity_drink-sample\"></a> Activity_drink Sample</h4>\n<p><img src=\"/2022/11/09/Android-Studio-5/image-20221109151131798.png\" alt=\"image-20221109151131798\"></p>\n<h2 id=\"java-逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java-逻辑编辑\"></a> Java 逻辑编辑</h2>\n<p>单独创建一个<code>Drink.java</code>文件来编写<code>Drink</code>类。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Drink</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> imageResourceID<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> drinks <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Latte\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description of latte\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>latte<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cappuccino\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description of cappuccino\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>cappuccino<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Filter\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description of Filter\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> imageResourceID<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>description <span class=\"token operator\">=</span> description<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>imageResourceID <span class=\"token operator\">=</span> imageResourceID<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> description<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getImageResourceID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> imageResourceID<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n</code></pre>\n<p>主界面Java中，值得注意的是，这里使用了<code>OnItemClickLister()</code>对<code>ListView</code>进行监听，比起只能对按钮进行操作的<code>OnClick()</code>函数，这种监听方式更加安全，难以被恶意攻击，且监听时Android能够更好的利用内存和进程，此外，<code>OnItemClickLister()</code>比<code>OnClick()</code>拥有更多的参数可供调用。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">AdapterView<span class=\"token punctuation\">.</span>OnItemClickListener</span> itemClickListener <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AdapterView<span class=\"token punctuation\">.</span>OnItemClickListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token annotation punctuation\">@Override</span>\n            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onItemClick</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AdapterView</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> parent<span class=\"token punctuation\">,</span> <span class=\"token class-name\">View</span> view<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MainActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DrinkCategoryActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ListView</span> listView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>list_options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        listView<span class=\"token punctuation\">.</span><span class=\"token function\">setOnItemClickListener</span><span class=\"token punctuation\">(</span>itemClickListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>接下来是饮品选择界面，同理使用<code>OnClickListener()</code>函数进行点击的监听，并将监听到的用户选择的参数<code>(id)</code>通过<code>intent.putExtra()</code>函数传入下一个界面中。值得注意的是，界面里面的<code>list_drinks(ListView)</code>是以软连接的方式来获取名字的，具体的实现方式在<code>Drink.java</code>中定义。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DrinkCategoryActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_drink_category<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ArrayAdapter</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Drink</span><span class=\"token punctuation\">></span></span> listAdapter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayAdapter</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span></span>R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>simple_list_item_1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">.</span>drinks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ListView</span> listDrinks <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>list_drinks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        listDrinks<span class=\"token punctuation\">.</span><span class=\"token function\">setAdapter</span><span class=\"token punctuation\">(</span>listAdapter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//Create the listener</span>\n        <span class=\"token class-name\">AdapterView<span class=\"token punctuation\">.</span>OnItemClickListener</span> itemClickListener <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AdapterView<span class=\"token punctuation\">.</span>OnItemClickListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token annotation punctuation\">@Override</span>\n            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onItemClick</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AdapterView</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> parent<span class=\"token punctuation\">,</span> <span class=\"token class-name\">View</span> view<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DrinkCategoryActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DrinkActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DrinkActivity</span><span class=\"token punctuation\">.</span>EXTRA_DRINKID<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//(int) is a must</span>\n                <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n        listDrinks<span class=\"token punctuation\">.</span><span class=\"token function\">setOnItemClickListener</span><span class=\"token punctuation\">(</span>itemClickListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>最后便是各种饮品的详情页面了，这里需要注意的是，代码中使用了一个<code>EXTRA_DRINKID</code>的全局变量进行参数的传递，将<code>DrinkCategoryActivity</code>中的<code>id</code>值传入<code>DrinkActivity</code>的全局变量中。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DrinkActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> EXTRA_DRINKID <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_drink<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> drinkID <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">)</span> <span class=\"token function\">getIntent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExtras</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>EXTRA_DRINKID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Drink</span> drink <span class=\"token operator\">=</span> <span class=\"token class-name\">Drink</span><span class=\"token punctuation\">.</span>drinks<span class=\"token punctuation\">[</span>drinkID<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">TextView</span> name <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        name<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">TextView</span> description <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        description<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ImageView</span> photo <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>photo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        photo<span class=\"token punctuation\">.</span><span class=\"token function\">setImageResource</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getImageResourceID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        photo<span class=\"token punctuation\">.</span><span class=\"token function\">setContentDescription</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin逻辑编辑\"></a> Kotlin逻辑编辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//Drink.kt</span>\n\n<span class=\"token keyword\">class</span> Drink <span class=\"token keyword\">private</span> <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> <span class=\"token keyword\">val</span> description<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> <span class=\"token keyword\">val</span> imageResourceID<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> name <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token annotation builtin\">@JvmName</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"GetDescription\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String<span class=\"token operator\">?</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> description <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation builtin\">@JvmName</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"GetName\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String<span class=\"token operator\">?</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> name <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation builtin\">@JvmName</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"GetImageResourceID\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getImageResourceID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Int <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> imageResourceID <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> drinks <span class=\"token operator\">=</span> <span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span>\n            <span class=\"token function\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Cappuccino\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description of cappuccino\"</span></span><span class=\"token punctuation\">,</span> R<span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>cappuccino<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Latte\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description of latte\"</span></span><span class=\"token punctuation\">,</span> R<span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>latte<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Drink</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Filter\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description of Filter\"</span></span><span class=\"token punctuation\">,</span> R<span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//MainActivity.kt</span>\n\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> itemClickListener <span class=\"token operator\">=</span>\n            OnItemClickListener <span class=\"token punctuation\">&#123;</span> parent<span class=\"token punctuation\">,</span> view<span class=\"token punctuation\">,</span> position<span class=\"token punctuation\">,</span> id <span class=\"token operator\">-></span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>position <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token label symbol\">@MainActivity</span><span class=\"token punctuation\">,</span> DrinkCategoryActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n                    <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">val</span> listView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>ListView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>list_options<span class=\"token punctuation\">)</span>\n        listView<span class=\"token punctuation\">.</span>onItemClickListener <span class=\"token operator\">=</span> itemClickListener\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//DrinkCategoryActivity.kt</span>\n\n<span class=\"token keyword\">class</span> DrinkCategoryActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_drink_category<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> listAdapter<span class=\"token operator\">:</span> ArrayAdapter<span class=\"token operator\">&lt;</span>Drink<span class=\"token operator\">?</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n            ArrayAdapter<span class=\"token operator\">&lt;</span>Drink<span class=\"token operator\">?</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> android<span class=\"token punctuation\">.</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>simple_list_item_1<span class=\"token punctuation\">,</span> Drink<span class=\"token punctuation\">.</span>drinks<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> listDrinks <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>ListView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>list_drinks<span class=\"token punctuation\">)</span>\n        listDrinks<span class=\"token punctuation\">.</span>adapter <span class=\"token operator\">=</span> listAdapter\n\n        <span class=\"token comment\">//Create the listener</span>\n        <span class=\"token keyword\">val</span> itemClickListener <span class=\"token operator\">=</span>\n            OnItemClickListener <span class=\"token punctuation\">&#123;</span> parent<span class=\"token punctuation\">,</span> view<span class=\"token punctuation\">,</span> position<span class=\"token punctuation\">,</span> id <span class=\"token operator\">-></span>\n                <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token label symbol\">@DrinkCategoryActivity</span><span class=\"token punctuation\">,</span> DrinkActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n                intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span>DrinkActivity<span class=\"token punctuation\">.</span>EXTRA_DRINKID<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// .toInt() is a must</span>\n                <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n        listDrinks<span class=\"token punctuation\">.</span>onItemClickListener <span class=\"token operator\">=</span> itemClickListener\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//DrinkActivity.kt</span>\n\n<span class=\"token keyword\">class</span> DrinkActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_drink<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> drinkID <span class=\"token operator\">=</span> intent<span class=\"token punctuation\">.</span>extras<span class=\"token operator\">!!</span><span class=\"token punctuation\">[</span>EXTRA_DRINKID<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> Int\n        <span class=\"token keyword\">val</span> drink <span class=\"token operator\">=</span> Drink<span class=\"token punctuation\">.</span>drinks<span class=\"token punctuation\">[</span>drinkID<span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">val</span> name <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n        name<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> description <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">)</span>\n        description<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> photo <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>ImageView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>photo<span class=\"token punctuation\">)</span>\n        photo<span class=\"token punctuation\">.</span><span class=\"token function\">setImageResource</span><span class=\"token punctuation\">(</span>drink<span class=\"token punctuation\">.</span><span class=\"token function\">getImageResourceID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        photo<span class=\"token punctuation\">.</span>contentDescription <span class=\"token operator\">=</span> drink<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">const</span> <span class=\"token keyword\">val</span> EXTRA_DRINKID <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>还是Kotlin简洁啊!</p>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/10/11/Android-Studio-4/\">Android Studio开发 4 | Tony </a></p>\n<p>下一篇：马上就好了…</p>\n"},{"title":"Android Studio 开发 6","date":"2022-11-21T08:21:18.000Z","katex":true,"author":"Tony","_content":"\n## 任务目标\n\n​\t点击菜单栏右上角的“+号”按钮即可进入新的页面，在新的页面中点击菜单栏左上角“返回”按钮即可返回主界面。\n\n![image-20221121181019527](Android-Studio-6/image-20221121181019527.png)\n\n## Menu Bar设置步骤\n\n##### 1. 删除自带的basic app bar\n\n在`res->values->themes.xml`下，将`parent`值中的`DarkActionBar`改为`NoActionBar`.\n\n```xml\n<resources xmlns:tools=\"http://schemas.android.com/tools\">\n    <!-- Base application theme. -->\n    <style name=\"Theme.MenuBar\"\n        parent=\"Theme.MaterialComponents.DayNight.NoActionBar\">\n        <!-- Primary brand color. -->\n        <...>\n        </...>\n    </style>\n</resources>\n```\n\n##### 2. 创建自己的Tool Bar\n\n在`res`文件夹下新建`Android Resource Directory`，将`Resource type`选定为`menu`类型，文件夹名字随意。\n\n![image-20221121182649615](Android-Studio-6/image-20221121182649615.png)\n\n![image-20221121182911410](Android-Studio-6/image-20221121182911410.png)\n\nAndroid Studio有可能不显示用户自行创建的文件夹，请将左上角的Android目录列表转换为工程目录列表即可。\n\n![image-20221121230804933](Android-Studio-6/image-20221121230804933.png)\n\n创建好文件夹之后，在该`menu`类型的文件夹下创建一个`Menu Resource File`文件，名字随意。\n\n![image-20221121183031659](Android-Studio-6/image-20221121183031659.png)\n\n##### 3. 添加Toolbar到layout\n\n可以根据需要高度自行定制Toolbar的颜色、样式、大小等。\n\n```xml\n<!-- activity_main.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <androidx.appcompat.widget.Toolbar\n        android:id=\"@+id/toolbar\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"?attr/actionBarSize\"\n        android:background=\"?attr/colorPrimary\"\n        android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n在`activity_order.xml`中，添加`include`的方法，可以实现对`layout`的覆用。这样可以省去重写一遍`ToolBar`的参数喽。\n\n```xml\n<!-- activity_order.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".OrderActivity\">\n    <include layout=\"@layout/activity_main\"/>\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n##### 4. 配置自己的Tool Bar\n\n在`toolbar.xml`文件中(文件名或许与我不同)配置自己希望的Actions，如返回按钮和添加按钮。\n\n```xml\n<!-- toolbar.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\n    <!-- 这个item是右上角的“+”按钮 -->\n    <item android:id=\"@+id/action_create_order\"\n        android:title=\"@string/create_order_title\"\n        android:icon=\"@drawable/ic_add_white_24dp\"\n        android:orderInCategory=\"1\"\n        app:showAsAction=\"ifRoom\"/>\n    <!-- 这个item是右上角的“share”按钮 -->\n    <item\n        android:id=\"@+id/action_share\"\n        android:title=\"@string/action_share\"\n        android:orderInCategory=\"2\"\n        app:showAsAction=\"ifRoom\"\n        app:actionProviderClass=\"androidx.appcompat.widget.ShareActionProvider\" />\n</menu>\n```\n\n## Java逻辑编辑\n\n```java\n//MainActivity.java\npublic class MainActivity extends AppCompatActivity {\n\n    private ShareActionProvider shareActionProvider;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        \n        Toolbar toolbar = findViewById(R.id.toolbar);\n        toolbar.setTitle(\"Main menu\");\n        setSupportActionBar(toolbar);\n    }\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        getMenuInflater().inflate(R.menu.toolbar, menu);\n        MenuItem menuItem = menu.findItem(R.id.action_share);\n        shareActionProvider = (ShareActionProvider) MenuItemCompat.getActionProvider(menuItem);\n        setShareActionIntent(\"Tony\");\n        return super.onCreateOptionsMenu(menu);\n    }\n\n    private void setShareActionIntent(String text) {\n        Intent intent = new Intent(Intent.ACTION_SEND);\n        intent.setType(\"text/plain\");\n        intent.putExtra(Intent.EXTRA_TEXT, text);\n        shareActionProvider.setShareIntent(intent);\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        switch (item.getItemId()) {\n            case R.id.action_create_order:\n                //Code to run when the Create Order item is clicked\n                Intent intent = new Intent(this, OrderActivity.class);\n                startActivity(intent);\n                return true;\n            default:\n                return super.onOptionsItemSelected(item);\n        }\n    }\n}\n```\n\n\n\n```java\n//OrderActivity.java\npublic class OrderActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_order);\n        \n        Toolbar toolbar = findViewById(R.id.toolbar);\n        toolbar.setTitle(\"Order Menu\");\n        setSupportActionBar(toolbar);\n        \n        //Add return key <-\n        ActionBar actionBar = getSupportActionBar();\n        actionBar.setDisplayHomeAsUpEnabled(true);\n    }\n}\n```\n\n在`AndroidMainfest.xml`中应当添加`parentActivityName`变量，应在子Activity中加入父Activity的名字，如下图所示，如果不添加则无法通过单机返回键返回父页面。\n\n![image-20221121232452816](Android-Studio-6/image-20221121232452816.png)\n\n## Kotlin 逻辑编辑\n\n```kotlin\n//MainActivity.kt\nclass MainActivity : AppCompatActivity() {\n    private var shareActionProvider: ShareActionProvider? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val toolbar = findViewById<Toolbar>(R.id.toolbar)\n        toolbar.title = \"Main menu\"\n        setSupportActionBar(toolbar)\n    }\n\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\n        menuInflater.inflate(R.menu.toolbar, menu)\n        val menuItem = menu.findItem(R.id.action_share)\n        shareActionProvider = MenuItemCompat.getActionProvider(menuItem) as ShareActionProvider?\n        setShareActionIntent(\"Tony\")\n        return super.onCreateOptionsMenu(menu)\n    }\n\n    private fun setShareActionIntent(text: String) {\n        val intent = Intent(Intent.ACTION_SEND)\n        intent.type = \"text/plain\"\n        intent.putExtra(Intent.EXTRA_TEXT, text)\n        shareActionProvider?.setShareIntent(intent)\n    }\n\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n        return when (item.itemId) {\n            R.id.action_create_order -> {\n                //Code to run when the Create Order item is clicked\n                val intent = Intent(this, OrderActivity::class.java)\n                startActivity(intent)\n                true\n            }\n            else -> super.onOptionsItemSelected(item)\n        }\n    }\n}\n```\n\n```kotlin\nclass OrderActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_order)\n        val toolbar = findViewById<Toolbar>(R.id.toolbar)\n        toolbar.title = \"Order Menu\"\n        setSupportActionBar(toolbar)\n\n        //return key <-\n        val actionBar = supportActionBar\n        actionBar!!.setDisplayHomeAsUpEnabled(true)\n    }\n}\n```\n\n同理，仍然需在`AndroidMainfest`中添加以下代码：\n\n```xml\n<activity\n    android:name=\".OrderActivity\"\n    android:parentActivityName=\".MainActivity\"\n    android:exported=\"false\">\n    <meta-data\n        android:name=\"android.app.lib_name\"\n        android:value=\"\" />\n</activity>\n```\n\n---\n\n上一篇：[Android Studio开发 5 | Tony ](http://tonylsx.top/2022/10/11/Android-Studio-4/)\n\n下一篇：[Android Studio开发 7 | Tony](http://tonylsx.top/2022/11/25/Android-Studio-7/)\n","source":"_posts/Android-Studio-6.md","raw":"---\ntitle: Android Studio 开发 6\ndate: 2022-11-21 16:21:18\ntags: \n  - Android Studio\n  - Java\n  - Kotlin\ncategories:\n  - Android Studio\nkatex: true\nauthor: Tony\n---\n\n## 任务目标\n\n​\t点击菜单栏右上角的“+号”按钮即可进入新的页面，在新的页面中点击菜单栏左上角“返回”按钮即可返回主界面。\n\n![image-20221121181019527](Android-Studio-6/image-20221121181019527.png)\n\n## Menu Bar设置步骤\n\n##### 1. 删除自带的basic app bar\n\n在`res->values->themes.xml`下，将`parent`值中的`DarkActionBar`改为`NoActionBar`.\n\n```xml\n<resources xmlns:tools=\"http://schemas.android.com/tools\">\n    <!-- Base application theme. -->\n    <style name=\"Theme.MenuBar\"\n        parent=\"Theme.MaterialComponents.DayNight.NoActionBar\">\n        <!-- Primary brand color. -->\n        <...>\n        </...>\n    </style>\n</resources>\n```\n\n##### 2. 创建自己的Tool Bar\n\n在`res`文件夹下新建`Android Resource Directory`，将`Resource type`选定为`menu`类型，文件夹名字随意。\n\n![image-20221121182649615](Android-Studio-6/image-20221121182649615.png)\n\n![image-20221121182911410](Android-Studio-6/image-20221121182911410.png)\n\nAndroid Studio有可能不显示用户自行创建的文件夹，请将左上角的Android目录列表转换为工程目录列表即可。\n\n![image-20221121230804933](Android-Studio-6/image-20221121230804933.png)\n\n创建好文件夹之后，在该`menu`类型的文件夹下创建一个`Menu Resource File`文件，名字随意。\n\n![image-20221121183031659](Android-Studio-6/image-20221121183031659.png)\n\n##### 3. 添加Toolbar到layout\n\n可以根据需要高度自行定制Toolbar的颜色、样式、大小等。\n\n```xml\n<!-- activity_main.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <androidx.appcompat.widget.Toolbar\n        android:id=\"@+id/toolbar\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"?attr/actionBarSize\"\n        android:background=\"?attr/colorPrimary\"\n        android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n在`activity_order.xml`中，添加`include`的方法，可以实现对`layout`的覆用。这样可以省去重写一遍`ToolBar`的参数喽。\n\n```xml\n<!-- activity_order.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".OrderActivity\">\n    <include layout=\"@layout/activity_main\"/>\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n##### 4. 配置自己的Tool Bar\n\n在`toolbar.xml`文件中(文件名或许与我不同)配置自己希望的Actions，如返回按钮和添加按钮。\n\n```xml\n<!-- toolbar.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\n    <!-- 这个item是右上角的“+”按钮 -->\n    <item android:id=\"@+id/action_create_order\"\n        android:title=\"@string/create_order_title\"\n        android:icon=\"@drawable/ic_add_white_24dp\"\n        android:orderInCategory=\"1\"\n        app:showAsAction=\"ifRoom\"/>\n    <!-- 这个item是右上角的“share”按钮 -->\n    <item\n        android:id=\"@+id/action_share\"\n        android:title=\"@string/action_share\"\n        android:orderInCategory=\"2\"\n        app:showAsAction=\"ifRoom\"\n        app:actionProviderClass=\"androidx.appcompat.widget.ShareActionProvider\" />\n</menu>\n```\n\n## Java逻辑编辑\n\n```java\n//MainActivity.java\npublic class MainActivity extends AppCompatActivity {\n\n    private ShareActionProvider shareActionProvider;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        \n        Toolbar toolbar = findViewById(R.id.toolbar);\n        toolbar.setTitle(\"Main menu\");\n        setSupportActionBar(toolbar);\n    }\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        getMenuInflater().inflate(R.menu.toolbar, menu);\n        MenuItem menuItem = menu.findItem(R.id.action_share);\n        shareActionProvider = (ShareActionProvider) MenuItemCompat.getActionProvider(menuItem);\n        setShareActionIntent(\"Tony\");\n        return super.onCreateOptionsMenu(menu);\n    }\n\n    private void setShareActionIntent(String text) {\n        Intent intent = new Intent(Intent.ACTION_SEND);\n        intent.setType(\"text/plain\");\n        intent.putExtra(Intent.EXTRA_TEXT, text);\n        shareActionProvider.setShareIntent(intent);\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        switch (item.getItemId()) {\n            case R.id.action_create_order:\n                //Code to run when the Create Order item is clicked\n                Intent intent = new Intent(this, OrderActivity.class);\n                startActivity(intent);\n                return true;\n            default:\n                return super.onOptionsItemSelected(item);\n        }\n    }\n}\n```\n\n\n\n```java\n//OrderActivity.java\npublic class OrderActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_order);\n        \n        Toolbar toolbar = findViewById(R.id.toolbar);\n        toolbar.setTitle(\"Order Menu\");\n        setSupportActionBar(toolbar);\n        \n        //Add return key <-\n        ActionBar actionBar = getSupportActionBar();\n        actionBar.setDisplayHomeAsUpEnabled(true);\n    }\n}\n```\n\n在`AndroidMainfest.xml`中应当添加`parentActivityName`变量，应在子Activity中加入父Activity的名字，如下图所示，如果不添加则无法通过单机返回键返回父页面。\n\n![image-20221121232452816](Android-Studio-6/image-20221121232452816.png)\n\n## Kotlin 逻辑编辑\n\n```kotlin\n//MainActivity.kt\nclass MainActivity : AppCompatActivity() {\n    private var shareActionProvider: ShareActionProvider? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val toolbar = findViewById<Toolbar>(R.id.toolbar)\n        toolbar.title = \"Main menu\"\n        setSupportActionBar(toolbar)\n    }\n\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\n        menuInflater.inflate(R.menu.toolbar, menu)\n        val menuItem = menu.findItem(R.id.action_share)\n        shareActionProvider = MenuItemCompat.getActionProvider(menuItem) as ShareActionProvider?\n        setShareActionIntent(\"Tony\")\n        return super.onCreateOptionsMenu(menu)\n    }\n\n    private fun setShareActionIntent(text: String) {\n        val intent = Intent(Intent.ACTION_SEND)\n        intent.type = \"text/plain\"\n        intent.putExtra(Intent.EXTRA_TEXT, text)\n        shareActionProvider?.setShareIntent(intent)\n    }\n\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n        return when (item.itemId) {\n            R.id.action_create_order -> {\n                //Code to run when the Create Order item is clicked\n                val intent = Intent(this, OrderActivity::class.java)\n                startActivity(intent)\n                true\n            }\n            else -> super.onOptionsItemSelected(item)\n        }\n    }\n}\n```\n\n```kotlin\nclass OrderActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_order)\n        val toolbar = findViewById<Toolbar>(R.id.toolbar)\n        toolbar.title = \"Order Menu\"\n        setSupportActionBar(toolbar)\n\n        //return key <-\n        val actionBar = supportActionBar\n        actionBar!!.setDisplayHomeAsUpEnabled(true)\n    }\n}\n```\n\n同理，仍然需在`AndroidMainfest`中添加以下代码：\n\n```xml\n<activity\n    android:name=\".OrderActivity\"\n    android:parentActivityName=\".MainActivity\"\n    android:exported=\"false\">\n    <meta-data\n        android:name=\"android.app.lib_name\"\n        android:value=\"\" />\n</activity>\n```\n\n---\n\n上一篇：[Android Studio开发 5 | Tony ](http://tonylsx.top/2022/10/11/Android-Studio-4/)\n\n下一篇：[Android Studio开发 7 | Tony](http://tonylsx.top/2022/11/25/Android-Studio-7/)\n","slug":"Android-Studio-6","published":1,"updated":"2022-12-01T01:38:46.022Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcc000i1gzua9uvb3fj","content":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>​\t点击菜单栏右上角的“+号”按钮即可进入新的页面，在新的页面中点击菜单栏左上角“返回”按钮即可返回主界面。</p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121181019527.png\" alt=\"image-20221121181019527\" loading=\"lazy\"></p>\n<h2 id=\"menu-bar设置步骤\"><a class=\"markdownIt-Anchor\" href=\"#menu-bar设置步骤\"></a> Menu Bar设置步骤</h2>\n<h5 id=\"1-删除自带的basic-app-bar\"><a class=\"markdownIt-Anchor\" href=\"#1-删除自带的basic-app-bar\"></a> 1. 删除自带的basic app bar</h5>\n<p>在<code>res-&gt;values-&gt;themes.xml</code>下，将<code>parent</code>值中的<code>DarkActionBar</code>改为<code>NoActionBar</code>.</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resources</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- Base application theme. --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Theme.MenuBar<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">parent</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Theme.MaterialComponents.DayNight.NoActionBar<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- Primary brand color. --></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>...</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>...</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resources</span><span class=\"token punctuation\">></span></span></code></pre>\n<h5 id=\"2-创建自己的tool-bar\"><a class=\"markdownIt-Anchor\" href=\"#2-创建自己的tool-bar\"></a> 2. 创建自己的Tool Bar</h5>\n<p>在<code>res</code>文件夹下新建<code>Android Resource Directory</code>，将<code>Resource type</code>选定为<code>menu</code>类型，文件夹名字随意。</p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121182649615.png\" alt=\"image-20221121182649615\" loading=\"lazy\"></p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121182911410.png\" alt=\"image-20221121182911410\" loading=\"lazy\"></p>\n<p>Android Studio有可能不显示用户自行创建的文件夹，请将左上角的Android目录列表转换为工程目录列表即可。</p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121230804933.png\" alt=\"image-20221121230804933\" loading=\"lazy\"></p>\n<p>创建好文件夹之后，在该<code>menu</code>类型的文件夹下创建一个<code>Menu Resource File</code>文件，名字随意。</p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121183031659.png\" alt=\"image-20221121183031659\" loading=\"lazy\"></p>\n<h5 id=\"3-添加toolbar到layout\"><a class=\"markdownIt-Anchor\" href=\"#3-添加toolbar到layout\"></a> 3. 添加Toolbar到layout</h5>\n<p>可以根据需要高度自行定制Toolbar的颜色、样式、大小等。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_main.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.appcompat.widget.Toolbar</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/toolbar<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>?attr/actionBarSize<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>background</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>?attr/colorPrimary<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>theme</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@style/ThemeOverlay.AppCompat.Dark.ActionBar<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>在<code>activity_order.xml</code>中，添加<code>include</code>的方法，可以实现对<code>layout</code>的覆用。这样可以省去重写一遍<code>ToolBar</code>的参数喽。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_order.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.OrderActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">layout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@layout/activity_main<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<h5 id=\"4-配置自己的tool-bar\"><a class=\"markdownIt-Anchor\" href=\"#4-配置自己的tool-bar\"></a> 4. 配置自己的Tool Bar</h5>\n<p>在<code>toolbar.xml</code>文件中(文件名或许与我不同)配置自己希望的Actions，如返回按钮和添加按钮。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- toolbar.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>menu</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 这个item是右上角的“+”按钮 --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/action_create_order<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@string/create_order_title<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>icon</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@drawable/ic_add_white_24dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>orderInCategory</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>showAsAction</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ifRoom<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token comment\">&lt;!-- 这个item是右上角的“share”按钮 --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/action_share<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@string/action_share<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>orderInCategory</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>showAsAction</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ifRoom<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>actionProviderClass</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>androidx.appcompat.widget.ShareActionProvider<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>menu</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"java逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java逻辑编辑\"></a> Java逻辑编辑</h2>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//MainActivity.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">ShareActionProvider</span> shareActionProvider<span class=\"token punctuation\">;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token class-name\">Toolbar</span> toolbar <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        toolbar<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Main menu\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setSupportActionBar</span><span class=\"token punctuation\">(</span>toolbar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">onCreateOptionsMenu</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Menu</span> menu<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">getMenuInflater</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">inflate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>menu<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">,</span> menu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MenuItem</span> menuItem <span class=\"token operator\">=</span> menu<span class=\"token punctuation\">.</span><span class=\"token function\">findItem</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>action_share<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        shareActionProvider <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ShareActionProvider</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">MenuItemCompat</span><span class=\"token punctuation\">.</span><span class=\"token function\">getActionProvider</span><span class=\"token punctuation\">(</span>menuItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setShareActionIntent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreateOptionsMenu</span><span class=\"token punctuation\">(</span>menu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setShareActionIntent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span>ACTION_SEND<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span>EXTRA_TEXT<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        shareActionProvider<span class=\"token punctuation\">.</span><span class=\"token function\">setShareIntent</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">onOptionsItemSelected</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MenuItem</span> item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span><span class=\"token function\">getItemId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>action_create_order<span class=\"token operator\">:</span>\n                <span class=\"token comment\">//Code to run when the Create Order item is clicked</span>\n                <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">OrderActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onOptionsItemSelected</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//OrderActivity.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_order<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token class-name\">Toolbar</span> toolbar <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        toolbar<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Order Menu\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setSupportActionBar</span><span class=\"token punctuation\">(</span>toolbar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">//Add return key &lt;-</span>\n        <span class=\"token class-name\">ActionBar</span> actionBar <span class=\"token operator\">=</span> <span class=\"token function\">getSupportActionBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        actionBar<span class=\"token punctuation\">.</span><span class=\"token function\">setDisplayHomeAsUpEnabled</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>在<code>AndroidMainfest.xml</code>中应当添加<code>parentActivityName</code>变量，应在子Activity中加入父Activity的名字，如下图所示，如果不添加则无法通过单机返回键返回父页面。</p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121232452816.png\" alt=\"image-20221121232452816\" loading=\"lazy\"></p>\n<h2 id=\"kotlin-逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin-逻辑编辑\"></a> Kotlin 逻辑编辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//MainActivity.kt</span>\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> shareActionProvider<span class=\"token operator\">:</span> ShareActionProvider<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> toolbar <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>Toolbar<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">)</span>\n        toolbar<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Main menu\"</span></span>\n        <span class=\"token function\">setSupportActionBar</span><span class=\"token punctuation\">(</span>toolbar<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreateOptionsMenu</span><span class=\"token punctuation\">(</span>menu<span class=\"token operator\">:</span> Menu<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Boolean <span class=\"token punctuation\">&#123;</span>\n        menuInflater<span class=\"token punctuation\">.</span><span class=\"token function\">inflate</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>menu<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">,</span> menu<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> menuItem <span class=\"token operator\">=</span> menu<span class=\"token punctuation\">.</span><span class=\"token function\">findItem</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>action_share<span class=\"token punctuation\">)</span>\n        shareActionProvider <span class=\"token operator\">=</span> MenuItemCompat<span class=\"token punctuation\">.</span><span class=\"token function\">getActionProvider</span><span class=\"token punctuation\">(</span>menuItem<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> ShareActionProvider<span class=\"token operator\">?</span>\n        <span class=\"token function\">setShareActionIntent</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Tony\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreateOptionsMenu</span><span class=\"token punctuation\">(</span>menu<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">setShareActionIntent</span><span class=\"token punctuation\">(</span>text<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>ACTION_SEND<span class=\"token punctuation\">)</span>\n        intent<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"text/plain\"</span></span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>EXTRA_TEXT<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span>\n        shareActionProvider<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">setShareIntent</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onOptionsItemSelected</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> MenuItem<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Boolean <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">when</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>itemId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>action_create_order <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token comment\">//Code to run when the Create Order item is clicked</span>\n                <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> OrderActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n                <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n                <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">else</span> <span class=\"token operator\">-></span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onOptionsItemSelected</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> OrderActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_order<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> toolbar <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>Toolbar<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">)</span>\n        toolbar<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Order Menu\"</span></span>\n        <span class=\"token function\">setSupportActionBar</span><span class=\"token punctuation\">(</span>toolbar<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">//return key &lt;-</span>\n        <span class=\"token keyword\">val</span> actionBar <span class=\"token operator\">=</span> supportActionBar\n        actionBar<span class=\"token operator\">!!</span><span class=\"token punctuation\">.</span><span class=\"token function\">setDisplayHomeAsUpEnabled</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>同理，仍然需在<code>AndroidMainfest</code>中添加以下代码：</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>activity</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.OrderActivity<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>parentActivityName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>exported</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta-data</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.app.lib_name<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>activity</span><span class=\"token punctuation\">></span></span></code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/10/11/Android-Studio-4/\">Android Studio开发 5 | Tony </a></p>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/11/25/Android-Studio-7/\">Android Studio开发 7 | Tony</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>​\t点击菜单栏右上角的“+号”按钮即可进入新的页面，在新的页面中点击菜单栏左上角“返回”按钮即可返回主界面。</p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121181019527.png\" alt=\"image-20221121181019527\"></p>\n<h2 id=\"menu-bar设置步骤\"><a class=\"markdownIt-Anchor\" href=\"#menu-bar设置步骤\"></a> Menu Bar设置步骤</h2>\n<h5 id=\"1-删除自带的basic-app-bar\"><a class=\"markdownIt-Anchor\" href=\"#1-删除自带的basic-app-bar\"></a> 1. 删除自带的basic app bar</h5>\n<p>在<code>res-&gt;values-&gt;themes.xml</code>下，将<code>parent</code>值中的<code>DarkActionBar</code>改为<code>NoActionBar</code>.</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resources</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- Base application theme. --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Theme.MenuBar<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">parent</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Theme.MaterialComponents.DayNight.NoActionBar<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- Primary brand color. --></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>...</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>...</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resources</span><span class=\"token punctuation\">></span></span></code></pre>\n<h5 id=\"2-创建自己的tool-bar\"><a class=\"markdownIt-Anchor\" href=\"#2-创建自己的tool-bar\"></a> 2. 创建自己的Tool Bar</h5>\n<p>在<code>res</code>文件夹下新建<code>Android Resource Directory</code>，将<code>Resource type</code>选定为<code>menu</code>类型，文件夹名字随意。</p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121182649615.png\" alt=\"image-20221121182649615\"></p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121182911410.png\" alt=\"image-20221121182911410\"></p>\n<p>Android Studio有可能不显示用户自行创建的文件夹，请将左上角的Android目录列表转换为工程目录列表即可。</p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121230804933.png\" alt=\"image-20221121230804933\"></p>\n<p>创建好文件夹之后，在该<code>menu</code>类型的文件夹下创建一个<code>Menu Resource File</code>文件，名字随意。</p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121183031659.png\" alt=\"image-20221121183031659\"></p>\n<h5 id=\"3-添加toolbar到layout\"><a class=\"markdownIt-Anchor\" href=\"#3-添加toolbar到layout\"></a> 3. 添加Toolbar到layout</h5>\n<p>可以根据需要高度自行定制Toolbar的颜色、样式、大小等。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_main.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.appcompat.widget.Toolbar</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/toolbar<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>?attr/actionBarSize<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>background</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>?attr/colorPrimary<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>theme</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@style/ThemeOverlay.AppCompat.Dark.ActionBar<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>在<code>activity_order.xml</code>中，添加<code>include</code>的方法，可以实现对<code>layout</code>的覆用。这样可以省去重写一遍<code>ToolBar</code>的参数喽。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_order.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.OrderActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">layout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@layout/activity_main<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<h5 id=\"4-配置自己的tool-bar\"><a class=\"markdownIt-Anchor\" href=\"#4-配置自己的tool-bar\"></a> 4. 配置自己的Tool Bar</h5>\n<p>在<code>toolbar.xml</code>文件中(文件名或许与我不同)配置自己希望的Actions，如返回按钮和添加按钮。</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- toolbar.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>menu</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 这个item是右上角的“+”按钮 --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/action_create_order<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@string/create_order_title<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>icon</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@drawable/ic_add_white_24dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>orderInCategory</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>showAsAction</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ifRoom<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token comment\">&lt;!-- 这个item是右上角的“share”按钮 --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/action_share<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@string/action_share<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>orderInCategory</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>showAsAction</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ifRoom<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>actionProviderClass</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>androidx.appcompat.widget.ShareActionProvider<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>menu</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"java逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java逻辑编辑\"></a> Java逻辑编辑</h2>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//MainActivity.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">ShareActionProvider</span> shareActionProvider<span class=\"token punctuation\">;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token class-name\">Toolbar</span> toolbar <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        toolbar<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Main menu\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setSupportActionBar</span><span class=\"token punctuation\">(</span>toolbar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">onCreateOptionsMenu</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Menu</span> menu<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">getMenuInflater</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">inflate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>menu<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">,</span> menu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MenuItem</span> menuItem <span class=\"token operator\">=</span> menu<span class=\"token punctuation\">.</span><span class=\"token function\">findItem</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>action_share<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        shareActionProvider <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ShareActionProvider</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">MenuItemCompat</span><span class=\"token punctuation\">.</span><span class=\"token function\">getActionProvider</span><span class=\"token punctuation\">(</span>menuItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setShareActionIntent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreateOptionsMenu</span><span class=\"token punctuation\">(</span>menu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setShareActionIntent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span>ACTION_SEND<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span>EXTRA_TEXT<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        shareActionProvider<span class=\"token punctuation\">.</span><span class=\"token function\">setShareIntent</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">onOptionsItemSelected</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MenuItem</span> item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span><span class=\"token function\">getItemId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>action_create_order<span class=\"token operator\">:</span>\n                <span class=\"token comment\">//Code to run when the Create Order item is clicked</span>\n                <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">OrderActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onOptionsItemSelected</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//OrderActivity.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_order<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token class-name\">Toolbar</span> toolbar <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        toolbar<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Order Menu\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setSupportActionBar</span><span class=\"token punctuation\">(</span>toolbar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">//Add return key &lt;-</span>\n        <span class=\"token class-name\">ActionBar</span> actionBar <span class=\"token operator\">=</span> <span class=\"token function\">getSupportActionBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        actionBar<span class=\"token punctuation\">.</span><span class=\"token function\">setDisplayHomeAsUpEnabled</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>在<code>AndroidMainfest.xml</code>中应当添加<code>parentActivityName</code>变量，应在子Activity中加入父Activity的名字，如下图所示，如果不添加则无法通过单机返回键返回父页面。</p>\n<p><img src=\"/2022/11/21/Android-Studio-6/image-20221121232452816.png\" alt=\"image-20221121232452816\"></p>\n<h2 id=\"kotlin-逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin-逻辑编辑\"></a> Kotlin 逻辑编辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//MainActivity.kt</span>\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> shareActionProvider<span class=\"token operator\">:</span> ShareActionProvider<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> toolbar <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>Toolbar<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">)</span>\n        toolbar<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Main menu\"</span></span>\n        <span class=\"token function\">setSupportActionBar</span><span class=\"token punctuation\">(</span>toolbar<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreateOptionsMenu</span><span class=\"token punctuation\">(</span>menu<span class=\"token operator\">:</span> Menu<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Boolean <span class=\"token punctuation\">&#123;</span>\n        menuInflater<span class=\"token punctuation\">.</span><span class=\"token function\">inflate</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>menu<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">,</span> menu<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> menuItem <span class=\"token operator\">=</span> menu<span class=\"token punctuation\">.</span><span class=\"token function\">findItem</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>action_share<span class=\"token punctuation\">)</span>\n        shareActionProvider <span class=\"token operator\">=</span> MenuItemCompat<span class=\"token punctuation\">.</span><span class=\"token function\">getActionProvider</span><span class=\"token punctuation\">(</span>menuItem<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> ShareActionProvider<span class=\"token operator\">?</span>\n        <span class=\"token function\">setShareActionIntent</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Tony\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreateOptionsMenu</span><span class=\"token punctuation\">(</span>menu<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">setShareActionIntent</span><span class=\"token punctuation\">(</span>text<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>ACTION_SEND<span class=\"token punctuation\">)</span>\n        intent<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"text/plain\"</span></span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>EXTRA_TEXT<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span>\n        shareActionProvider<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">setShareIntent</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onOptionsItemSelected</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> MenuItem<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Boolean <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">when</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>itemId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>action_create_order <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token comment\">//Code to run when the Create Order item is clicked</span>\n                <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> OrderActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n                <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n                <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">else</span> <span class=\"token operator\">-></span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onOptionsItemSelected</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> OrderActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_order<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> toolbar <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>Toolbar<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>toolbar<span class=\"token punctuation\">)</span>\n        toolbar<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Order Menu\"</span></span>\n        <span class=\"token function\">setSupportActionBar</span><span class=\"token punctuation\">(</span>toolbar<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">//return key &lt;-</span>\n        <span class=\"token keyword\">val</span> actionBar <span class=\"token operator\">=</span> supportActionBar\n        actionBar<span class=\"token operator\">!!</span><span class=\"token punctuation\">.</span><span class=\"token function\">setDisplayHomeAsUpEnabled</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>同理，仍然需在<code>AndroidMainfest</code>中添加以下代码：</p>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>activity</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.OrderActivity<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>parentActivityName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>exported</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta-data</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.app.lib_name<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>activity</span><span class=\"token punctuation\">></span></span></code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/10/11/Android-Studio-4/\">Android Studio开发 5 | Tony </a></p>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/11/25/Android-Studio-7/\">Android Studio开发 7 | Tony</a></p>\n"},{"layout":"post","title":"Android Studio 开发 7","date":"2022-11-25T05:49:42.000Z","katex":true,"author":"Tony","_content":"\n## 任务目标\n\n实现针对Tablets平板设备的大屏适配，一个屏幕下显示更多信息。实现方式为Fragments。\n\n![image-20221125135252991](Android-Studio-7/image-20221125135252991.png)\n\n## 项目管理\n\n![image-20221125135412770](Android-Studio-7/image-20221125135412770.png)\n\n项目需要创建以上文件，包括创建两个Activities，分别是创建工程时自动创建的`MainActivity`和手动创建的`DetailActivity`；以及一个Fragment需要手动创建，为`WorkoutDetailFragment`（Fragment的创建方式如下如）；以及两个Java Class文件，分别是`Workout`和`WorkoutListFragment`。另外，需要在`res`文件夹下手动创建`layout-large`文件夹，用来适配Tablet的Layout文件；在该文件夹下手动创建`activity_main.xml`即可。\n\n![image-20221125135917426](Android-Studio-7/image-20221125135917426.png)\n\n## 界面编辑\n\n```xml\n<!-- activity_main.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.appcompat.widget.LinearLayoutCompat\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"horizontal\">\n\n    <fragment\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:id=\"@+id/list_fragment\"\n        android:name=\"com.example.fragment.WorkoutListFragment\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        />\n\n</androidx.appcompat.widget.LinearLayoutCompat>\n```\n\n```xml\n<!-- activity_detail.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.appcompat.widget.LinearLayoutCompat\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".DetailActivity\">\n\n    <androidx.fragment.app.FragmentContainerView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:id=\"@+id/fragment_workout\"\n        android:name=\"com.example.fragment.WorkoutDetailFragment\"\n        />\n\n</androidx.appcompat.widget.LinearLayoutCompat>\n```\n\n```xml\n<!-- fragment_workout_detail.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\">\n\n    <!-- TODO: Update blank fragment layout -->\n\n    <TextView\n        android:id=\"@+id/Title_View\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginTop=\"42dp\"\n        android:textSize=\"34dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <TextView\n        android:id=\"@+id/Description_View\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginTop=\"19dp\"\n        android:text=\"26dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/Title_View\" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n```xml\n<!-- layout-large/activity_main.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.appcompat.widget.LinearLayoutCompat\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"horizontal\">\n\n    <fragment\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:id=\"@+id/list_frag\"\n        android:name=\"com.example.fragment.WorkoutListFragment\"\n        android:layout_weight=\"2\"\n              <!-- 这个fragment在屏幕上占的比例2:3 -->\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        />\n\n    <FrameLayout\n        android:id=\"@+id/fragment_container\"\n        android:name=\"com.example.fragment.WorkoutDetailFragment\"\n        android:layout_weight=\"3\"\n                 <!-- 这个fragment在屏幕上占的比例2:3 -->\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        />\n\n</androidx.appcompat.widget.LinearLayoutCompat>\n```\n\n## Java 逻辑编辑\n\n```java\n//MainActivity.java\n\npublic class MainActivity extends AppCompatActivity implements WorkoutListFragment.Listener{\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    @Override\n    public void itemClicked(long id) {\n        View fragmentContainer = findViewById(R.id.fragment_container);\n        if(fragmentContainer != null) {\n            //fragmentContainer是为了适配fragment的容器\n            WorkoutDetailFragment details = new WorkoutDetailFragment();\n            FragmentTransaction ft = getSupportFragmentManager().beginTransaction();\n            details.setWorkoutId((int)id);//?\n            ft.replace(R.id.fragment_container, details);\n            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);\n            ft.addToBackStack(null);\n            ft.commit();\n        }\n        else {\n            //如果是手机的话，正常情况下就只有这三句话\n            Intent intent = new Intent(this, DetailActivity.class);\n            intent.putExtra(DetailActivity.EXTRA_WORKOUT_ID, (int) id);\n            startActivity(intent);\n        }\n    }\n}\n```\n\n```java\n//DetailActivity.java\n\npublic class DetailActivity extends AppCompatActivity {\n    public static final String EXTRA_WORKOUT_ID = \"id\";\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_detail);\n        WorkoutDetailFragment frag = (WorkoutDetailFragment) getSupportFragmentManager().findFragmentById(R.id.fragment_workout);\n        int workoutID = (int) getIntent().getExtras().get(EXTRA_WORKOUT_ID);\n        frag.setWorkoutId(workoutID);\n    }\n}\n```\n\n```java\n//Detail.java\n\npublic class Workout {\n    private String name;\n    private String description;\n    public static final Workout[] workouts = {\n            new Workout(\"Title 1\", \"Description 1\"),\n            new Workout(\"Title 2\", \"Description 2\"),\n            new Workout(\"Title 3\", \"Description 3\"),\n            new Workout(\"Title 4\", \"Description 4\")\n    };\n    private Workout(String name, String description){\n        this.name = name;\n        this.description = description;\n    }\n    public String getDescription(){\n        return description;\n    }\n    public String getName(){\n        return name;\n    }\n    public String toString()\n    {\n        return this.name;\n    }\n}\n```\n\n```java\n//WorkoutDetailFragment.java\n\npublic class WorkoutDetailFragment extends Fragment {\n    private int workoutId;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        return inflater.inflate(R.layout.fragment_workout_detail, container, false);\n    }\n\n    @Override\n    public void onStart() {\n        super.onStart();\n        View view = getView();\n        if(view!=null)\n        {\n            TextView title = view.findViewById(R.id.Title_View);\n            Workout workout = Workout.workouts[workoutId];\n            title.setText(workout.getName());\n            TextView description= view.findViewById(R.id.Description_View);\n            description.setText(workout.getDescription());\n\n        }\n    }\n    public void setWorkoutId(int i) {\n        this.workoutId = i;\n    }\n}\n```\n\n```java\n//WorkoutListFragment.java\n\npublic class WorkoutListFragment extends ListFragment {\n    static interface Listener {\n        void itemClicked(long id);\n    }\n    private Listener listener;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        String[] names = new String[Workout.workouts.length];\n        for(int i = 0; i < names.length; i++) {\n            names[i] = Workout.workouts[i].getName();\n        }\n\n        ArrayAdapter<String> adapter = new ArrayAdapter<>(inflater.getContext(), android.R.layout.simple_list_item_1, names);\n        setListAdapter(adapter);\n\n        return super.onCreateView(inflater, container, savedInstanceState);\n    }\n\n    @Override\n    public void onAttach(Context context) {\n        super.onAttach(context);\n        this.listener = (Listener) context;\n    }\n\n    @Override\n    public void onListItemClick(ListView listView, View itemView, int position, long id) {\n        if(listener != null) {\n            listener.itemClicked(id);\n        }\n    }\n}\n```\n\n## Kotlin 逻辑编辑\n\n```kotlin\n//MainActivity.kt\n\nclass MainActivity : AppCompatActivity(), WorkoutListFragment.Listener {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n\n    override fun itemClicked(id: Long) {\n        val fragmentContainer = findViewById<View>(R.id.fragment_container)\n        if (fragmentContainer != null) {\n            val details = WorkoutDetailFragment()\n            val ft = supportFragmentManager.beginTransaction()\n            details.setWorkoutId(id.toInt()) //?\n            ft.replace(R.id.fragment_container, details)\n            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE)\n            ft.addToBackStack(null)\n            ft.commit()\n        } else {\n            val intent = Intent(this, DetailActivity::class.java)\n            intent.putExtra(DetailActivity.EXTRA_WORKOUT_ID, id.toInt())\n            startActivity(intent)\n        }\n    }\n}\n```\n\n```kotlin\n//DetailActivity.kt\n\nclass DetailActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_detail)\n        val frag: WorkoutDetailFragment? =\n            supportFragmentManager.findFragmentById(R.id.fragment_workout) as WorkoutDetailFragment?\n        val workoutID = intent.extras!![EXTRA_WORKOUT_ID] as Int\n        frag?.setWorkoutId(workoutID)\n    }\n\n    companion object {\n        const val EXTRA_WORKOUT_ID = \"id\"\n    }\n}\n```\n\n```kotlin\n//Workout.kt\n\nclass Workout private constructor(private val name: String, private val description: String) {\n\n    override fun toString(): String {\n        return name\n    }\n\n    @JvmName(\"GetDescription\")\n    fun getDescription(): String {\n        return description\n    }\n\n    @JvmName(\"GetName\")\n    fun getName(): String {\n        return name\n    }\n\n    companion object {\n        val workouts = arrayOf(\n            Workout(\"Title 1\", \"Description 1\"),\n            Workout(\"Title 2\", \"Description 2\"),\n            Workout(\"Title 3\", \"Description 3\"),\n            Workout(\"Title 4\", \"Description 4\")\n        )\n    }\n}\n```\n\n```kotlin\n//WorkoutDetailFragment.kt\n\nclass WorkoutDetailFragment : Fragment() {\n    private var workoutId = 0\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        // Inflate the layout for this fragment\n        return inflater.inflate(R.layout.fragment_workout_detail, container, false)\n    }\n\n    override fun onStart() {\n        super.onStart()\n        val view = view\n        if (view != null) {\n            val title = view.findViewById<TextView>(R.id.Title_View)\n            val workout: Workout = Workout.workouts[workoutId]\n            title.text = workout.getName()\n            val description = view.findViewById<TextView>(R.id.Description_View)\n            description.text = workout.getDescription()\n        }\n    }\n\n    fun setWorkoutId(i: Int) {\n        workoutId = i\n    }\n}\n```\n\n```kotlin\n//WorkoutListFragment.kt\n\nclass WorkoutListFragment : ListFragment() {\n    internal interface Listener {\n        fun itemClicked(id: Long)\n    }\n\n    private var listener: Listener? = null\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        val names = arrayOfNulls<String>(Workout.workouts.size)\n        for (i in names.indices) {\n            names[i] = Workout.workouts[i].getName()\n        }\n        val adapter = ArrayAdapter(inflater.context, R.layout.simple_list_item_1, names)\n        listAdapter = adapter\n        return super.onCreateView(inflater, container, savedInstanceState)\n    }\n\n    override fun onAttach(context: Context) {\n        super.onAttach(context)\n        listener = context as Listener\n    }\n\n    override fun onListItemClick(listView: ListView, itemView: View, position: Int, id: Long) {\n        if (listener != null) {\n            listener!!.itemClicked(id)\n        }\n    }\n}\n```\n\n---\n\n上一篇：[Android Studio 开发 6 | Tony](http://tonylsx.top/2022/11/21/Android-Studio-6/)\n\n下一篇：马上就好了...\n","source":"_posts/Android-Studio-7.md","raw":"---\nlayout: post\ntitle: Android Studio 开发 7\ndate: 2022-11-25 13:49:42\ntags: \n  - Android Studio\n  - Java\n  - Kotlin\ncategories:\n  - Android Studio\nkatex: true\nauthor: Tony\n---\n\n## 任务目标\n\n实现针对Tablets平板设备的大屏适配，一个屏幕下显示更多信息。实现方式为Fragments。\n\n![image-20221125135252991](Android-Studio-7/image-20221125135252991.png)\n\n## 项目管理\n\n![image-20221125135412770](Android-Studio-7/image-20221125135412770.png)\n\n项目需要创建以上文件，包括创建两个Activities，分别是创建工程时自动创建的`MainActivity`和手动创建的`DetailActivity`；以及一个Fragment需要手动创建，为`WorkoutDetailFragment`（Fragment的创建方式如下如）；以及两个Java Class文件，分别是`Workout`和`WorkoutListFragment`。另外，需要在`res`文件夹下手动创建`layout-large`文件夹，用来适配Tablet的Layout文件；在该文件夹下手动创建`activity_main.xml`即可。\n\n![image-20221125135917426](Android-Studio-7/image-20221125135917426.png)\n\n## 界面编辑\n\n```xml\n<!-- activity_main.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.appcompat.widget.LinearLayoutCompat\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"horizontal\">\n\n    <fragment\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:id=\"@+id/list_fragment\"\n        android:name=\"com.example.fragment.WorkoutListFragment\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        />\n\n</androidx.appcompat.widget.LinearLayoutCompat>\n```\n\n```xml\n<!-- activity_detail.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.appcompat.widget.LinearLayoutCompat\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".DetailActivity\">\n\n    <androidx.fragment.app.FragmentContainerView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:id=\"@+id/fragment_workout\"\n        android:name=\"com.example.fragment.WorkoutDetailFragment\"\n        />\n\n</androidx.appcompat.widget.LinearLayoutCompat>\n```\n\n```xml\n<!-- fragment_workout_detail.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\">\n\n    <!-- TODO: Update blank fragment layout -->\n\n    <TextView\n        android:id=\"@+id/Title_View\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginTop=\"42dp\"\n        android:textSize=\"34dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <TextView\n        android:id=\"@+id/Description_View\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginTop=\"19dp\"\n        android:text=\"26dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/Title_View\" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n```xml\n<!-- layout-large/activity_main.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.appcompat.widget.LinearLayoutCompat\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"horizontal\">\n\n    <fragment\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:id=\"@+id/list_frag\"\n        android:name=\"com.example.fragment.WorkoutListFragment\"\n        android:layout_weight=\"2\"\n              <!-- 这个fragment在屏幕上占的比例2:3 -->\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        />\n\n    <FrameLayout\n        android:id=\"@+id/fragment_container\"\n        android:name=\"com.example.fragment.WorkoutDetailFragment\"\n        android:layout_weight=\"3\"\n                 <!-- 这个fragment在屏幕上占的比例2:3 -->\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        />\n\n</androidx.appcompat.widget.LinearLayoutCompat>\n```\n\n## Java 逻辑编辑\n\n```java\n//MainActivity.java\n\npublic class MainActivity extends AppCompatActivity implements WorkoutListFragment.Listener{\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    @Override\n    public void itemClicked(long id) {\n        View fragmentContainer = findViewById(R.id.fragment_container);\n        if(fragmentContainer != null) {\n            //fragmentContainer是为了适配fragment的容器\n            WorkoutDetailFragment details = new WorkoutDetailFragment();\n            FragmentTransaction ft = getSupportFragmentManager().beginTransaction();\n            details.setWorkoutId((int)id);//?\n            ft.replace(R.id.fragment_container, details);\n            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);\n            ft.addToBackStack(null);\n            ft.commit();\n        }\n        else {\n            //如果是手机的话，正常情况下就只有这三句话\n            Intent intent = new Intent(this, DetailActivity.class);\n            intent.putExtra(DetailActivity.EXTRA_WORKOUT_ID, (int) id);\n            startActivity(intent);\n        }\n    }\n}\n```\n\n```java\n//DetailActivity.java\n\npublic class DetailActivity extends AppCompatActivity {\n    public static final String EXTRA_WORKOUT_ID = \"id\";\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_detail);\n        WorkoutDetailFragment frag = (WorkoutDetailFragment) getSupportFragmentManager().findFragmentById(R.id.fragment_workout);\n        int workoutID = (int) getIntent().getExtras().get(EXTRA_WORKOUT_ID);\n        frag.setWorkoutId(workoutID);\n    }\n}\n```\n\n```java\n//Detail.java\n\npublic class Workout {\n    private String name;\n    private String description;\n    public static final Workout[] workouts = {\n            new Workout(\"Title 1\", \"Description 1\"),\n            new Workout(\"Title 2\", \"Description 2\"),\n            new Workout(\"Title 3\", \"Description 3\"),\n            new Workout(\"Title 4\", \"Description 4\")\n    };\n    private Workout(String name, String description){\n        this.name = name;\n        this.description = description;\n    }\n    public String getDescription(){\n        return description;\n    }\n    public String getName(){\n        return name;\n    }\n    public String toString()\n    {\n        return this.name;\n    }\n}\n```\n\n```java\n//WorkoutDetailFragment.java\n\npublic class WorkoutDetailFragment extends Fragment {\n    private int workoutId;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        return inflater.inflate(R.layout.fragment_workout_detail, container, false);\n    }\n\n    @Override\n    public void onStart() {\n        super.onStart();\n        View view = getView();\n        if(view!=null)\n        {\n            TextView title = view.findViewById(R.id.Title_View);\n            Workout workout = Workout.workouts[workoutId];\n            title.setText(workout.getName());\n            TextView description= view.findViewById(R.id.Description_View);\n            description.setText(workout.getDescription());\n\n        }\n    }\n    public void setWorkoutId(int i) {\n        this.workoutId = i;\n    }\n}\n```\n\n```java\n//WorkoutListFragment.java\n\npublic class WorkoutListFragment extends ListFragment {\n    static interface Listener {\n        void itemClicked(long id);\n    }\n    private Listener listener;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        String[] names = new String[Workout.workouts.length];\n        for(int i = 0; i < names.length; i++) {\n            names[i] = Workout.workouts[i].getName();\n        }\n\n        ArrayAdapter<String> adapter = new ArrayAdapter<>(inflater.getContext(), android.R.layout.simple_list_item_1, names);\n        setListAdapter(adapter);\n\n        return super.onCreateView(inflater, container, savedInstanceState);\n    }\n\n    @Override\n    public void onAttach(Context context) {\n        super.onAttach(context);\n        this.listener = (Listener) context;\n    }\n\n    @Override\n    public void onListItemClick(ListView listView, View itemView, int position, long id) {\n        if(listener != null) {\n            listener.itemClicked(id);\n        }\n    }\n}\n```\n\n## Kotlin 逻辑编辑\n\n```kotlin\n//MainActivity.kt\n\nclass MainActivity : AppCompatActivity(), WorkoutListFragment.Listener {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n\n    override fun itemClicked(id: Long) {\n        val fragmentContainer = findViewById<View>(R.id.fragment_container)\n        if (fragmentContainer != null) {\n            val details = WorkoutDetailFragment()\n            val ft = supportFragmentManager.beginTransaction()\n            details.setWorkoutId(id.toInt()) //?\n            ft.replace(R.id.fragment_container, details)\n            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE)\n            ft.addToBackStack(null)\n            ft.commit()\n        } else {\n            val intent = Intent(this, DetailActivity::class.java)\n            intent.putExtra(DetailActivity.EXTRA_WORKOUT_ID, id.toInt())\n            startActivity(intent)\n        }\n    }\n}\n```\n\n```kotlin\n//DetailActivity.kt\n\nclass DetailActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_detail)\n        val frag: WorkoutDetailFragment? =\n            supportFragmentManager.findFragmentById(R.id.fragment_workout) as WorkoutDetailFragment?\n        val workoutID = intent.extras!![EXTRA_WORKOUT_ID] as Int\n        frag?.setWorkoutId(workoutID)\n    }\n\n    companion object {\n        const val EXTRA_WORKOUT_ID = \"id\"\n    }\n}\n```\n\n```kotlin\n//Workout.kt\n\nclass Workout private constructor(private val name: String, private val description: String) {\n\n    override fun toString(): String {\n        return name\n    }\n\n    @JvmName(\"GetDescription\")\n    fun getDescription(): String {\n        return description\n    }\n\n    @JvmName(\"GetName\")\n    fun getName(): String {\n        return name\n    }\n\n    companion object {\n        val workouts = arrayOf(\n            Workout(\"Title 1\", \"Description 1\"),\n            Workout(\"Title 2\", \"Description 2\"),\n            Workout(\"Title 3\", \"Description 3\"),\n            Workout(\"Title 4\", \"Description 4\")\n        )\n    }\n}\n```\n\n```kotlin\n//WorkoutDetailFragment.kt\n\nclass WorkoutDetailFragment : Fragment() {\n    private var workoutId = 0\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        // Inflate the layout for this fragment\n        return inflater.inflate(R.layout.fragment_workout_detail, container, false)\n    }\n\n    override fun onStart() {\n        super.onStart()\n        val view = view\n        if (view != null) {\n            val title = view.findViewById<TextView>(R.id.Title_View)\n            val workout: Workout = Workout.workouts[workoutId]\n            title.text = workout.getName()\n            val description = view.findViewById<TextView>(R.id.Description_View)\n            description.text = workout.getDescription()\n        }\n    }\n\n    fun setWorkoutId(i: Int) {\n        workoutId = i\n    }\n}\n```\n\n```kotlin\n//WorkoutListFragment.kt\n\nclass WorkoutListFragment : ListFragment() {\n    internal interface Listener {\n        fun itemClicked(id: Long)\n    }\n\n    private var listener: Listener? = null\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        val names = arrayOfNulls<String>(Workout.workouts.size)\n        for (i in names.indices) {\n            names[i] = Workout.workouts[i].getName()\n        }\n        val adapter = ArrayAdapter(inflater.context, R.layout.simple_list_item_1, names)\n        listAdapter = adapter\n        return super.onCreateView(inflater, container, savedInstanceState)\n    }\n\n    override fun onAttach(context: Context) {\n        super.onAttach(context)\n        listener = context as Listener\n    }\n\n    override fun onListItemClick(listView: ListView, itemView: View, position: Int, id: Long) {\n        if (listener != null) {\n            listener!!.itemClicked(id)\n        }\n    }\n}\n```\n\n---\n\n上一篇：[Android Studio 开发 6 | Tony](http://tonylsx.top/2022/11/21/Android-Studio-6/)\n\n下一篇：马上就好了...\n","slug":"Android-Studio-7","published":1,"updated":"2022-12-01T01:38:46.029Z","comments":1,"photos":[],"link":"","_id":"clb4gsrcd000j1gzu9rodet3w","content":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>实现针对Tablets平板设备的大屏适配，一个屏幕下显示更多信息。实现方式为Fragments。</p>\n<p><img src=\"/2022/11/25/Android-Studio-7/image-20221125135252991.png\" alt=\"image-20221125135252991\" loading=\"lazy\"></p>\n<h2 id=\"项目管理\"><a class=\"markdownIt-Anchor\" href=\"#项目管理\"></a> 项目管理</h2>\n<p><img src=\"/2022/11/25/Android-Studio-7/image-20221125135412770.png\" alt=\"image-20221125135412770\" loading=\"lazy\"></p>\n<p>项目需要创建以上文件，包括创建两个Activities，分别是创建工程时自动创建的<code>MainActivity</code>和手动创建的<code>DetailActivity</code>；以及一个Fragment需要手动创建，为<code>WorkoutDetailFragment</code>（Fragment的创建方式如下如）；以及两个Java Class文件，分别是<code>Workout</code>和<code>WorkoutListFragment</code>。另外，需要在<code>res</code>文件夹下手动创建<code>layout-large</code>文件夹，用来适配Tablet的Layout文件；在该文件夹下手动创建<code>activity_main.xml</code>即可。</p>\n<p><img src=\"/2022/11/25/Android-Studio-7/image-20221125135917426.png\" alt=\"image-20221125135917426\" loading=\"lazy\"></p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_main.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.appcompat.widget.LinearLayoutCompat</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>orientation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>horizontal<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fragment</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/list_fragment<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.example.fragment.WorkoutListFragment<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.appcompat.widget.LinearLayoutCompat</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_detail.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.appcompat.widget.LinearLayoutCompat</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.DetailActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.fragment.app.FragmentContainerView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/fragment_workout<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.example.fragment.WorkoutDetailFragment<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.appcompat.widget.LinearLayoutCompat</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- fragment_workout_detail.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token comment\">&lt;!-- TODO: Update blank fragment layout --></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/Title_View<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginStart</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>42dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textSize</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>34dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/Description_View<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginStart</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>19dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>26dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/Title_View<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- layout-large/activity_main.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.appcompat.widget.LinearLayoutCompat</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>orientation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>horizontal<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fragment</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/list_frag<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.example.fragment.WorkoutListFragment<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_weight</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\"><span class=\"token namespace\">这个fragment在屏幕上占的比例2:</span>3</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        />\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FrameLayout</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/fragment_container<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.example.fragment.WorkoutDetailFragment<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_weight</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span>\n                 <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\"><span class=\"token namespace\">这个fragment在屏幕上占的比例2:</span>3</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        />\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.appcompat.widget.LinearLayoutCompat</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"java-逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java-逻辑编辑\"></a> Java 逻辑编辑</h2>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//MainActivity.java</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">WorkoutListFragment<span class=\"token punctuation\">.</span>Listener</span><span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">View</span> fragmentContainer <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>fragmentContainer <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token comment\">//fragmentContainer是为了适配fragment的容器</span>\n            <span class=\"token class-name\">WorkoutDetailFragment</span> details <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WorkoutDetailFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">FragmentTransaction</span> ft <span class=\"token operator\">=</span> <span class=\"token function\">getSupportFragmentManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">beginTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            details<span class=\"token punctuation\">.</span><span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//?</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_container<span class=\"token punctuation\">,</span> details<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">setTransition</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FragmentTransaction</span><span class=\"token punctuation\">.</span>TRANSIT_FRAGMENT_FADE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">addToBackStack</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token comment\">//如果是手机的话，正常情况下就只有这三句话</span>\n            <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DetailActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DetailActivity</span><span class=\"token punctuation\">.</span>EXTRA_WORKOUT_ID<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//DetailActivity.java</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DetailActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> EXTRA_WORKOUT_ID <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_detail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">WorkoutDetailFragment</span> frag <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">WorkoutDetailFragment</span><span class=\"token punctuation\">)</span> <span class=\"token function\">getSupportFragmentManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">findFragmentById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_workout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> workoutID <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> <span class=\"token function\">getIntent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExtras</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>EXTRA_WORKOUT_ID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        frag<span class=\"token punctuation\">.</span><span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span>workoutID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//Detail.java</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Workout</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> workouts <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Title 1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description 1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Title 2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description 2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Title 3\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description 3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Title 4\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description 4\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>description <span class=\"token operator\">=</span> description<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> description<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//WorkoutDetailFragment.java</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WorkoutDetailFragment</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Fragment</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> workoutId<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">View</span> <span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LayoutInflater</span> inflater<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ViewGroup</span> container<span class=\"token punctuation\">,</span>\n                             <span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// Inflate the layout for this fragment</span>\n        <span class=\"token keyword\">return</span> inflater<span class=\"token punctuation\">.</span><span class=\"token function\">inflate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>fragment_workout_detail<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">View</span> view <span class=\"token operator\">=</span> <span class=\"token function\">getView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">!=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">TextView</span> title <span class=\"token operator\">=</span> view<span class=\"token punctuation\">.</span><span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>Title_View<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Workout</span> workout <span class=\"token operator\">=</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">[</span>workoutId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            title<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>workout<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">TextView</span> description<span class=\"token operator\">=</span> view<span class=\"token punctuation\">.</span><span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>Description_View<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            description<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>workout<span class=\"token punctuation\">.</span><span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>workoutId <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//WorkoutListFragment.java</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WorkoutListFragment</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ListFragment</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Listener</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">void</span> <span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Listener</span> listener<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">View</span> <span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LayoutInflater</span> inflater<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ViewGroup</span> container<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> names <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">Workout</span><span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> names<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            names<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token class-name\">ArrayAdapter</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> adapter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayAdapter</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>inflater<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span></span>R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>simple_list_item_1<span class=\"token punctuation\">,</span> names<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setListAdapter</span><span class=\"token punctuation\">(</span>adapter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span>inflater<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">,</span> savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onAttach</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Context</span> context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onAttach</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>listener <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Listener</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onListItemClick</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ListView</span> listView<span class=\"token punctuation\">,</span> <span class=\"token class-name\">View</span> itemView<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>listener <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            listener<span class=\"token punctuation\">.</span><span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin-逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin-逻辑编辑\"></a> Kotlin 逻辑编辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//MainActivity.kt</span>\n\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> WorkoutListFragment<span class=\"token punctuation\">.</span><span class=\"token function\">Listener</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> fragmentContainer <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>View<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_container<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fragmentContainer <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">val</span> details <span class=\"token operator\">=</span> <span class=\"token function\">WorkoutDetailFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">val</span> ft <span class=\"token operator\">=</span> supportFragmentManager<span class=\"token punctuation\">.</span><span class=\"token function\">beginTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            details<span class=\"token punctuation\">.</span><span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//?</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_container<span class=\"token punctuation\">,</span> details<span class=\"token punctuation\">)</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">setTransition</span><span class=\"token punctuation\">(</span>FragmentTransaction<span class=\"token punctuation\">.</span>TRANSIT_FRAGMENT_FADE<span class=\"token punctuation\">)</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">addToBackStack</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> DetailActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n            intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span>DetailActivity<span class=\"token punctuation\">.</span>EXTRA_WORKOUT_ID<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//DetailActivity.kt</span>\n\n<span class=\"token keyword\">class</span> DetailActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_detail<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> frag<span class=\"token operator\">:</span> WorkoutDetailFragment<span class=\"token operator\">?</span> <span class=\"token operator\">=</span>\n            supportFragmentManager<span class=\"token punctuation\">.</span><span class=\"token function\">findFragmentById</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_workout<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> WorkoutDetailFragment<span class=\"token operator\">?</span>\n        <span class=\"token keyword\">val</span> workoutID <span class=\"token operator\">=</span> intent<span class=\"token punctuation\">.</span>extras<span class=\"token operator\">!!</span><span class=\"token punctuation\">[</span>EXTRA_WORKOUT_ID<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> Int\n        frag<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span>workoutID<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">const</span> <span class=\"token keyword\">val</span> EXTRA_WORKOUT_ID <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"id\"</span></span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//Workout.kt</span>\n\n<span class=\"token keyword\">class</span> Workout <span class=\"token keyword\">private</span> <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> description<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> name\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation builtin\">@JvmName</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"GetDescription\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> description\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation builtin\">@JvmName</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"GetName\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> name\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> workouts <span class=\"token operator\">=</span> <span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span>\n            <span class=\"token function\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Title 1\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description 1\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Title 2\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description 2\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Title 3\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description 3\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Title 4\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description 4\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//WorkoutDetailFragment.kt</span>\n\n<span class=\"token keyword\">class</span> WorkoutDetailFragment <span class=\"token operator\">:</span> <span class=\"token function\">Fragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> workoutId <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span>\n        inflater<span class=\"token operator\">:</span> LayoutInflater<span class=\"token punctuation\">,</span> container<span class=\"token operator\">:</span> ViewGroup<span class=\"token operator\">?</span><span class=\"token punctuation\">,</span>\n        savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span>\n    <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> View<span class=\"token operator\">?</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// Inflate the layout for this fragment</span>\n        <span class=\"token keyword\">return</span> inflater<span class=\"token punctuation\">.</span><span class=\"token function\">inflate</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>fragment_workout_detail<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> view <span class=\"token operator\">=</span> view\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>view <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">val</span> title <span class=\"token operator\">=</span> view<span class=\"token punctuation\">.</span>findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>Title_View<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">val</span> workout<span class=\"token operator\">:</span> Workout <span class=\"token operator\">=</span> Workout<span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">[</span>workoutId<span class=\"token punctuation\">]</span>\n            title<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> workout<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">val</span> description <span class=\"token operator\">=</span> view<span class=\"token punctuation\">.</span>findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>Description_View<span class=\"token punctuation\">)</span>\n            description<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> workout<span class=\"token punctuation\">.</span><span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        workoutId <span class=\"token operator\">=</span> i\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//WorkoutListFragment.kt</span>\n\n<span class=\"token keyword\">class</span> WorkoutListFragment <span class=\"token operator\">:</span> <span class=\"token function\">ListFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">internal</span> <span class=\"token keyword\">interface</span> Listener <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">fun</span> <span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> listener<span class=\"token operator\">:</span> Listener<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span>\n        inflater<span class=\"token operator\">:</span> LayoutInflater<span class=\"token punctuation\">,</span>\n        container<span class=\"token operator\">:</span> ViewGroup<span class=\"token operator\">?</span><span class=\"token punctuation\">,</span>\n        savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span>\n    <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> View<span class=\"token operator\">?</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> names <span class=\"token operator\">=</span> arrayOfNulls<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>Workout<span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> names<span class=\"token punctuation\">.</span>indices<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            names<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Workout<span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">val</span> adapter <span class=\"token operator\">=</span> <span class=\"token function\">ArrayAdapter</span><span class=\"token punctuation\">(</span>inflater<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">,</span> R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>simple_list_item_1<span class=\"token punctuation\">,</span> names<span class=\"token punctuation\">)</span>\n        listAdapter <span class=\"token operator\">=</span> adapter\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span>inflater<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">,</span> savedInstanceState<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onAttach</span><span class=\"token punctuation\">(</span>context<span class=\"token operator\">:</span> Context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onAttach</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span>\n        listener <span class=\"token operator\">=</span> context <span class=\"token keyword\">as</span> Listener\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onListItemClick</span><span class=\"token punctuation\">(</span>listView<span class=\"token operator\">:</span> ListView<span class=\"token punctuation\">,</span> itemView<span class=\"token operator\">:</span> View<span class=\"token punctuation\">,</span> position<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> id<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>listener <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            listener<span class=\"token operator\">!!</span><span class=\"token punctuation\">.</span><span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/11/21/Android-Studio-6/\">Android Studio 开发 6 | Tony</a></p>\n<p>下一篇：马上就好了…</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"任务目标\"><a class=\"markdownIt-Anchor\" href=\"#任务目标\"></a> 任务目标</h2>\n<p>实现针对Tablets平板设备的大屏适配，一个屏幕下显示更多信息。实现方式为Fragments。</p>\n<p><img src=\"/2022/11/25/Android-Studio-7/image-20221125135252991.png\" alt=\"image-20221125135252991\"></p>\n<h2 id=\"项目管理\"><a class=\"markdownIt-Anchor\" href=\"#项目管理\"></a> 项目管理</h2>\n<p><img src=\"/2022/11/25/Android-Studio-7/image-20221125135412770.png\" alt=\"image-20221125135412770\"></p>\n<p>项目需要创建以上文件，包括创建两个Activities，分别是创建工程时自动创建的<code>MainActivity</code>和手动创建的<code>DetailActivity</code>；以及一个Fragment需要手动创建，为<code>WorkoutDetailFragment</code>（Fragment的创建方式如下如）；以及两个Java Class文件，分别是<code>Workout</code>和<code>WorkoutListFragment</code>。另外，需要在<code>res</code>文件夹下手动创建<code>layout-large</code>文件夹，用来适配Tablet的Layout文件；在该文件夹下手动创建<code>activity_main.xml</code>即可。</p>\n<p><img src=\"/2022/11/25/Android-Studio-7/image-20221125135917426.png\" alt=\"image-20221125135917426\"></p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_main.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.appcompat.widget.LinearLayoutCompat</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>orientation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>horizontal<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fragment</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/list_fragment<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.example.fragment.WorkoutListFragment<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.appcompat.widget.LinearLayoutCompat</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- activity_detail.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.appcompat.widget.LinearLayoutCompat</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.DetailActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.fragment.app.FragmentContainerView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/fragment_workout<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.example.fragment.WorkoutDetailFragment<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.appcompat.widget.LinearLayoutCompat</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- fragment_workout_detail.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token comment\">&lt;!-- TODO: Update blank fragment layout --></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/Title_View<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginStart</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>42dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>textSize</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>34dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/Description_View<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginStart</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>19dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>26dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/Title_View<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- layout-large/activity_main.xml --></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.appcompat.widget.LinearLayoutCompat</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>orientation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>horizontal<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fragment</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/list_frag<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.example.fragment.WorkoutListFragment<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_weight</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\"><span class=\"token namespace\">这个fragment在屏幕上占的比例2:</span>3</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        />\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FrameLayout</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/fragment_container<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.example.fragment.WorkoutDetailFragment<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_weight</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span>\n                 <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\"><span class=\"token namespace\">这个fragment在屏幕上占的比例2:</span>3</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        />\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.appcompat.widget.LinearLayoutCompat</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"java-逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java-逻辑编辑\"></a> Java 逻辑编辑</h2>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//MainActivity.java</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">WorkoutListFragment<span class=\"token punctuation\">.</span>Listener</span><span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">View</span> fragmentContainer <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>fragmentContainer <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token comment\">//fragmentContainer是为了适配fragment的容器</span>\n            <span class=\"token class-name\">WorkoutDetailFragment</span> details <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WorkoutDetailFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">FragmentTransaction</span> ft <span class=\"token operator\">=</span> <span class=\"token function\">getSupportFragmentManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">beginTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            details<span class=\"token punctuation\">.</span><span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//?</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_container<span class=\"token punctuation\">,</span> details<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">setTransition</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FragmentTransaction</span><span class=\"token punctuation\">.</span>TRANSIT_FRAGMENT_FADE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">addToBackStack</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token comment\">//如果是手机的话，正常情况下就只有这三句话</span>\n            <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DetailActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DetailActivity</span><span class=\"token punctuation\">.</span>EXTRA_WORKOUT_ID<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//DetailActivity.java</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DetailActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> EXTRA_WORKOUT_ID <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_detail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">WorkoutDetailFragment</span> frag <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">WorkoutDetailFragment</span><span class=\"token punctuation\">)</span> <span class=\"token function\">getSupportFragmentManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">findFragmentById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_workout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> workoutID <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> <span class=\"token function\">getIntent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExtras</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>EXTRA_WORKOUT_ID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        frag<span class=\"token punctuation\">.</span><span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span>workoutID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//Detail.java</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Workout</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> workouts <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Title 1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description 1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Title 2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description 2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Title 3\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description 3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Title 4\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Description 4\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>description <span class=\"token operator\">=</span> description<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> description<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//WorkoutDetailFragment.java</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WorkoutDetailFragment</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Fragment</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> workoutId<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">View</span> <span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LayoutInflater</span> inflater<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ViewGroup</span> container<span class=\"token punctuation\">,</span>\n                             <span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// Inflate the layout for this fragment</span>\n        <span class=\"token keyword\">return</span> inflater<span class=\"token punctuation\">.</span><span class=\"token function\">inflate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>fragment_workout_detail<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">View</span> view <span class=\"token operator\">=</span> <span class=\"token function\">getView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">!=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">TextView</span> title <span class=\"token operator\">=</span> view<span class=\"token punctuation\">.</span><span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>Title_View<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Workout</span> workout <span class=\"token operator\">=</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">[</span>workoutId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            title<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>workout<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">TextView</span> description<span class=\"token operator\">=</span> view<span class=\"token punctuation\">.</span><span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>Description_View<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            description<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>workout<span class=\"token punctuation\">.</span><span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>workoutId <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//WorkoutListFragment.java</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WorkoutListFragment</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ListFragment</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Listener</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">void</span> <span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Listener</span> listener<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">View</span> <span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LayoutInflater</span> inflater<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ViewGroup</span> container<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> names <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">Workout</span><span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> names<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            names<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">Workout</span><span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token class-name\">ArrayAdapter</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> adapter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayAdapter</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>inflater<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span></span>R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>simple_list_item_1<span class=\"token punctuation\">,</span> names<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setListAdapter</span><span class=\"token punctuation\">(</span>adapter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span>inflater<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">,</span> savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onAttach</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Context</span> context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onAttach</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>listener <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Listener</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onListItemClick</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ListView</span> listView<span class=\"token punctuation\">,</span> <span class=\"token class-name\">View</span> itemView<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>listener <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            listener<span class=\"token punctuation\">.</span><span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin-逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin-逻辑编辑\"></a> Kotlin 逻辑编辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//MainActivity.kt</span>\n\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> WorkoutListFragment<span class=\"token punctuation\">.</span><span class=\"token function\">Listener</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> fragmentContainer <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>View<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_container<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fragmentContainer <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">val</span> details <span class=\"token operator\">=</span> <span class=\"token function\">WorkoutDetailFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">val</span> ft <span class=\"token operator\">=</span> supportFragmentManager<span class=\"token punctuation\">.</span><span class=\"token function\">beginTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            details<span class=\"token punctuation\">.</span><span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//?</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_container<span class=\"token punctuation\">,</span> details<span class=\"token punctuation\">)</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">setTransition</span><span class=\"token punctuation\">(</span>FragmentTransaction<span class=\"token punctuation\">.</span>TRANSIT_FRAGMENT_FADE<span class=\"token punctuation\">)</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">addToBackStack</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n            ft<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> DetailActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n            intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span>DetailActivity<span class=\"token punctuation\">.</span>EXTRA_WORKOUT_ID<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//DetailActivity.kt</span>\n\n<span class=\"token keyword\">class</span> DetailActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_detail<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> frag<span class=\"token operator\">:</span> WorkoutDetailFragment<span class=\"token operator\">?</span> <span class=\"token operator\">=</span>\n            supportFragmentManager<span class=\"token punctuation\">.</span><span class=\"token function\">findFragmentById</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>fragment_workout<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> WorkoutDetailFragment<span class=\"token operator\">?</span>\n        <span class=\"token keyword\">val</span> workoutID <span class=\"token operator\">=</span> intent<span class=\"token punctuation\">.</span>extras<span class=\"token operator\">!!</span><span class=\"token punctuation\">[</span>EXTRA_WORKOUT_ID<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> Int\n        frag<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span>workoutID<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">const</span> <span class=\"token keyword\">val</span> EXTRA_WORKOUT_ID <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"id\"</span></span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//Workout.kt</span>\n\n<span class=\"token keyword\">class</span> Workout <span class=\"token keyword\">private</span> <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> description<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> name\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation builtin\">@JvmName</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"GetDescription\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> description\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation builtin\">@JvmName</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"GetName\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> name\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> workouts <span class=\"token operator\">=</span> <span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span>\n            <span class=\"token function\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Title 1\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description 1\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Title 2\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description 2\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Title 3\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description 3\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Workout</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Title 4\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Description 4\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//WorkoutDetailFragment.kt</span>\n\n<span class=\"token keyword\">class</span> WorkoutDetailFragment <span class=\"token operator\">:</span> <span class=\"token function\">Fragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> workoutId <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span>\n        inflater<span class=\"token operator\">:</span> LayoutInflater<span class=\"token punctuation\">,</span> container<span class=\"token operator\">:</span> ViewGroup<span class=\"token operator\">?</span><span class=\"token punctuation\">,</span>\n        savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span>\n    <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> View<span class=\"token operator\">?</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// Inflate the layout for this fragment</span>\n        <span class=\"token keyword\">return</span> inflater<span class=\"token punctuation\">.</span><span class=\"token function\">inflate</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>fragment_workout_detail<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> view <span class=\"token operator\">=</span> view\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>view <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">val</span> title <span class=\"token operator\">=</span> view<span class=\"token punctuation\">.</span>findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>Title_View<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">val</span> workout<span class=\"token operator\">:</span> Workout <span class=\"token operator\">=</span> Workout<span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">[</span>workoutId<span class=\"token punctuation\">]</span>\n            title<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> workout<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">val</span> description <span class=\"token operator\">=</span> view<span class=\"token punctuation\">.</span>findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>Description_View<span class=\"token punctuation\">)</span>\n            description<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> workout<span class=\"token punctuation\">.</span><span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">setWorkoutId</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        workoutId <span class=\"token operator\">=</span> i\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//WorkoutListFragment.kt</span>\n\n<span class=\"token keyword\">class</span> WorkoutListFragment <span class=\"token operator\">:</span> <span class=\"token function\">ListFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">internal</span> <span class=\"token keyword\">interface</span> Listener <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">fun</span> <span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> listener<span class=\"token operator\">:</span> Listener<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span>\n        inflater<span class=\"token operator\">:</span> LayoutInflater<span class=\"token punctuation\">,</span>\n        container<span class=\"token operator\">:</span> ViewGroup<span class=\"token operator\">?</span><span class=\"token punctuation\">,</span>\n        savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span>\n    <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> View<span class=\"token operator\">?</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> names <span class=\"token operator\">=</span> arrayOfNulls<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>Workout<span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> names<span class=\"token punctuation\">.</span>indices<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            names<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Workout<span class=\"token punctuation\">.</span>workouts<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">val</span> adapter <span class=\"token operator\">=</span> <span class=\"token function\">ArrayAdapter</span><span class=\"token punctuation\">(</span>inflater<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">,</span> R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>simple_list_item_1<span class=\"token punctuation\">,</span> names<span class=\"token punctuation\">)</span>\n        listAdapter <span class=\"token operator\">=</span> adapter\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreateView</span><span class=\"token punctuation\">(</span>inflater<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">,</span> savedInstanceState<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onAttach</span><span class=\"token punctuation\">(</span>context<span class=\"token operator\">:</span> Context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onAttach</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span>\n        listener <span class=\"token operator\">=</span> context <span class=\"token keyword\">as</span> Listener\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onListItemClick</span><span class=\"token punctuation\">(</span>listView<span class=\"token operator\">:</span> ListView<span class=\"token punctuation\">,</span> itemView<span class=\"token operator\">:</span> View<span class=\"token punctuation\">,</span> position<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> id<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>listener <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            listener<span class=\"token operator\">!!</span><span class=\"token punctuation\">.</span><span class=\"token function\">itemClicked</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/11/21/Android-Studio-6/\">Android Studio 开发 6 | Tony</a></p>\n<p>下一篇：马上就好了…</p>\n"},{"title":"Android Studio开发 2","date":"2022-09-26T18:39:14.000Z","katex":true,"author":"Tony","_content":"\n## 任务目标——显式跳转\n\n实现两个Activities之间的文字信息传输。\n\n![image-20220927021701138](Android-studio-2/image-20220927021701138.png)\n\n## 项目管理\n\n![image-20220927021810857](Android-studio-2/image-20220927021810857.png)\n\n该项目中我们主要用到以下四个文件：\n\n- MainActivity.java\n- MainActivity.xml\n- MainActivity2.java\n- MainActivity2.xml\n\n其中，MainActivity2需要手动创建。在管理栏下点击右键选择$New\\to Activity\\to Empty\\ Activity$.创建后AndroidMainfeast.xml文件会自动生成有关MainActivity2的代码，如下图所示：\n\n![image-20220927022235374](Android-studio-2/image-20220927022235374.png)\n\n## 界面编辑\n\n```xml\n<!---activity_main.xml--->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <Button\n        android:id=\"@+id/button\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"20dp\"\n        android:text=\"Send Message\"\n        android:onClick=\"onSendMessage\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.498\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/message\" />\n\n    <EditText\n        android:id=\"@+id/message\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"30dp\"\n        android:ems=\"10\"\n        android:hint=\"Enter a message...\"\n        android:inputType=\"textPersonName\"\n        android:minHeight=\"48dp\"\n\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n![image-20220927022446373](Android-studio-2/image-20220927022446373.png)\n\n---\n\n```xml\n<!---activity_main2.xml--->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity2\">\n\n    <TextView\n        android:id=\"@+id/get_message\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"80dp\"\n        android:text=\"TextView\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.498\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n![image-20220927022539379](Android-studio-2/image-20220927022539379.png)\n\n## Java逻辑编辑\n\n首先编辑`onSendMessage()`函数用来控制按下按钮之后的操作。其中，Intent关联新的界面，对其操作可实现特定的**意图**，编辑完成后可利用StartActivity函数进行打开新的界面。\n\n```java\n// MainActivity.java\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n    public void onSendMessage(View view){\n        EditText messageView = findViewById(R.id.message);\n        String messageText = messageView.getText().toString();\n        Intent intent = new Intent(this, MainActivity2.class);\n        intent.putExtra(MainActivity2.message, messageText);//传入message\n        startActivity(intent);\n    }\n}\n```\n\n`putExtra()`函数会添加一些信息到指定的intent中，而`getIntent()`会获取之前得到的信息。这样就可以实现消息在两个activities中的传递与交互了。\n\n```java\n//MainActivity2.java\npublic class MainActivity2 extends AppCompatActivity {\n    public static final String message = \"MESSAGE!!!\";\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main2);\n        Intent intent = getIntent();//获取Message\n        String messageText = intent.getStringExtra(message);\n        TextView messageView = findViewById(R.id.get_message);\n        messageView.setText(messageText);\n    }\n```\n\n## Kotlin逻辑编辑\n\n```kotlin\n// MainActivity.kt\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n    fun onSendMessage(view: View)\n    {\n        val messageView = findViewById<EditText>(R.id.message)\n        val messageText = messageView.text.toString()\n        val intent = Intent(this, MainActivity2::class.java)\n        intent.putExtra(\"msg\", messageText)\n        startActivity(intent)\n    }\n}\n```\n\n```kotlin\n//MainActivity2.kt\nclass MainActivity2 : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main2)\n        val messageText = intent.getStringExtra(\"msg\")\n        val messageView = findViewById<TextView>(R.id.get_message)\n        messageView.text = messageText\n    }\n}\n```\n\n## 任务目标——隐式跳转\n\n实现将程序中的文字发送到指定程序（如短信）。\n\n![image-20221031161231815](Android-studio-2/image-20221031161231815.png)\n\n![image-20221031161159345](Android-studio-2/image-20221031161159345.png)\n\n## Java逻辑编辑\n\n`Intent.createChooser`是打开Android默认的选择器， 如上图所示。\n\n```java\npublic class MainActivity extends AppCompatActivity {\n\n    public void onSendMessage(View view)\n    {\n        EditText messageView = findViewById(R.id.message);\n        String messagetext = messageView.getText().toString();\n        Intent intent = new Intent(Intent.ACTION_SEND);\n        intent.setType(\"text/plain\");\n        intent.putExtra(Intent.EXTRA_TEXT, messagetext);\n        String chooserTitle = \"YZDD\";\n        Intent choosenIntent = Intent.createChooser(intent, chooserTitle);\n        startActivity(choosenIntent);\n    }\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n}\n```\n\n我们也可以直接打开自己的软件或系统自带的软件，如下面的程序就是打开短信APP的方法：\n\n```java\npublic void onSendMessage(View view)\n    {\n        EditText messageView = findViewById(R.id.message);\n        String messagetext = messageView.getText().toString();\n\n        Intent intent = new Intent(Intent.ACTION_SENDTO);\n        intent.setData(Uri.parse(\"smsto:10086\"));//使用\"smsto:\"可不指定联系人\n        intent.putExtra(\"sms_body\", messagetext);\n\n        startActivity(intent);\n    }\n```\n\n## Kotlin逻辑编辑\n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n    fun onSendMessage(view: View)\n    {\n        var messageView = findViewById<EditText>(R.id.message)\n        var messageText = messageView.text.toString()\n        var intent = Intent(Intent.ACTION_SENDTO)\n        intent.data = Uri.parse(\"smsto:10086\")\n        intent.putExtra(\"sms_body\", messageText)\n        startActivity(intent)\n    }\n}\n```\n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n    fun onSendMessage(view: View?) {\n        val messageView = findViewById<EditText>(R.id.message)\n        val messagetext = messageView.text.toString()\n        val intent = Intent(Intent.ACTION_SEND)\n        intent.type = \"text/plain\"\n        intent.putExtra(Intent.EXTRA_TEXT, messagetext)\n        val chooserTitle = \"YZDD\"\n        val choosenIntent = Intent.createChooser(intent, chooserTitle)\n        startActivity(choosenIntent)\n    }\n}\n```\n\n---\n\n上一篇：[Android Studio 开发 1| Tony](http://tonylsx.top/2022/09/17/Andriod-Studio-1/)\n\n下一篇：[Android-Studio开发 3 | Tony](http://tonylsx.top/2022/10/10/Android-Studio-3/)\n\n","source":"_posts/Android-studio-2.md","raw":"---\ntitle: Android Studio开发 2\ndate: 2022-09-27 02:39:14\ntags: \n  - Android Studio\n  - Java\n  - Kotlin\ncategories:\n  - Android Studio\nkatex: true\nauthor: Tony\n---\n\n## 任务目标——显式跳转\n\n实现两个Activities之间的文字信息传输。\n\n![image-20220927021701138](Android-studio-2/image-20220927021701138.png)\n\n## 项目管理\n\n![image-20220927021810857](Android-studio-2/image-20220927021810857.png)\n\n该项目中我们主要用到以下四个文件：\n\n- MainActivity.java\n- MainActivity.xml\n- MainActivity2.java\n- MainActivity2.xml\n\n其中，MainActivity2需要手动创建。在管理栏下点击右键选择$New\\to Activity\\to Empty\\ Activity$.创建后AndroidMainfeast.xml文件会自动生成有关MainActivity2的代码，如下图所示：\n\n![image-20220927022235374](Android-studio-2/image-20220927022235374.png)\n\n## 界面编辑\n\n```xml\n<!---activity_main.xml--->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <Button\n        android:id=\"@+id/button\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"20dp\"\n        android:text=\"Send Message\"\n        android:onClick=\"onSendMessage\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.498\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/message\" />\n\n    <EditText\n        android:id=\"@+id/message\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"30dp\"\n        android:ems=\"10\"\n        android:hint=\"Enter a message...\"\n        android:inputType=\"textPersonName\"\n        android:minHeight=\"48dp\"\n\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n![image-20220927022446373](Android-studio-2/image-20220927022446373.png)\n\n---\n\n```xml\n<!---activity_main2.xml--->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity2\">\n\n    <TextView\n        android:id=\"@+id/get_message\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"80dp\"\n        android:text=\"TextView\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.498\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n![image-20220927022539379](Android-studio-2/image-20220927022539379.png)\n\n## Java逻辑编辑\n\n首先编辑`onSendMessage()`函数用来控制按下按钮之后的操作。其中，Intent关联新的界面，对其操作可实现特定的**意图**，编辑完成后可利用StartActivity函数进行打开新的界面。\n\n```java\n// MainActivity.java\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n    public void onSendMessage(View view){\n        EditText messageView = findViewById(R.id.message);\n        String messageText = messageView.getText().toString();\n        Intent intent = new Intent(this, MainActivity2.class);\n        intent.putExtra(MainActivity2.message, messageText);//传入message\n        startActivity(intent);\n    }\n}\n```\n\n`putExtra()`函数会添加一些信息到指定的intent中，而`getIntent()`会获取之前得到的信息。这样就可以实现消息在两个activities中的传递与交互了。\n\n```java\n//MainActivity2.java\npublic class MainActivity2 extends AppCompatActivity {\n    public static final String message = \"MESSAGE!!!\";\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main2);\n        Intent intent = getIntent();//获取Message\n        String messageText = intent.getStringExtra(message);\n        TextView messageView = findViewById(R.id.get_message);\n        messageView.setText(messageText);\n    }\n```\n\n## Kotlin逻辑编辑\n\n```kotlin\n// MainActivity.kt\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n    fun onSendMessage(view: View)\n    {\n        val messageView = findViewById<EditText>(R.id.message)\n        val messageText = messageView.text.toString()\n        val intent = Intent(this, MainActivity2::class.java)\n        intent.putExtra(\"msg\", messageText)\n        startActivity(intent)\n    }\n}\n```\n\n```kotlin\n//MainActivity2.kt\nclass MainActivity2 : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main2)\n        val messageText = intent.getStringExtra(\"msg\")\n        val messageView = findViewById<TextView>(R.id.get_message)\n        messageView.text = messageText\n    }\n}\n```\n\n## 任务目标——隐式跳转\n\n实现将程序中的文字发送到指定程序（如短信）。\n\n![image-20221031161231815](Android-studio-2/image-20221031161231815.png)\n\n![image-20221031161159345](Android-studio-2/image-20221031161159345.png)\n\n## Java逻辑编辑\n\n`Intent.createChooser`是打开Android默认的选择器， 如上图所示。\n\n```java\npublic class MainActivity extends AppCompatActivity {\n\n    public void onSendMessage(View view)\n    {\n        EditText messageView = findViewById(R.id.message);\n        String messagetext = messageView.getText().toString();\n        Intent intent = new Intent(Intent.ACTION_SEND);\n        intent.setType(\"text/plain\");\n        intent.putExtra(Intent.EXTRA_TEXT, messagetext);\n        String chooserTitle = \"YZDD\";\n        Intent choosenIntent = Intent.createChooser(intent, chooserTitle);\n        startActivity(choosenIntent);\n    }\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n}\n```\n\n我们也可以直接打开自己的软件或系统自带的软件，如下面的程序就是打开短信APP的方法：\n\n```java\npublic void onSendMessage(View view)\n    {\n        EditText messageView = findViewById(R.id.message);\n        String messagetext = messageView.getText().toString();\n\n        Intent intent = new Intent(Intent.ACTION_SENDTO);\n        intent.setData(Uri.parse(\"smsto:10086\"));//使用\"smsto:\"可不指定联系人\n        intent.putExtra(\"sms_body\", messagetext);\n\n        startActivity(intent);\n    }\n```\n\n## Kotlin逻辑编辑\n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n    fun onSendMessage(view: View)\n    {\n        var messageView = findViewById<EditText>(R.id.message)\n        var messageText = messageView.text.toString()\n        var intent = Intent(Intent.ACTION_SENDTO)\n        intent.data = Uri.parse(\"smsto:10086\")\n        intent.putExtra(\"sms_body\", messageText)\n        startActivity(intent)\n    }\n}\n```\n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n    fun onSendMessage(view: View?) {\n        val messageView = findViewById<EditText>(R.id.message)\n        val messagetext = messageView.text.toString()\n        val intent = Intent(Intent.ACTION_SEND)\n        intent.type = \"text/plain\"\n        intent.putExtra(Intent.EXTRA_TEXT, messagetext)\n        val chooserTitle = \"YZDD\"\n        val choosenIntent = Intent.createChooser(intent, chooserTitle)\n        startActivity(choosenIntent)\n    }\n}\n```\n\n---\n\n上一篇：[Android Studio 开发 1| Tony](http://tonylsx.top/2022/09/17/Andriod-Studio-1/)\n\n下一篇：[Android-Studio开发 3 | Tony](http://tonylsx.top/2022/10/10/Android-Studio-3/)\n\n","slug":"Android-studio-2","published":1,"updated":"2022-11-01T05:53:00.503Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcg000n1gzu9bco3cx1","content":"<h2 id=\"任务目标显式跳转\"><a class=\"markdownIt-Anchor\" href=\"#任务目标显式跳转\"></a> 任务目标——显式跳转</h2>\n<p>实现两个Activities之间的文字信息传输。</p>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20220927021701138.png\" alt=\"image-20220927021701138\" loading=\"lazy\"></p>\n<h2 id=\"项目管理\"><a class=\"markdownIt-Anchor\" href=\"#项目管理\"></a> 项目管理</h2>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20220927021810857.png\" alt=\"image-20220927021810857\" loading=\"lazy\"></p>\n<p>该项目中我们主要用到以下四个文件：</p>\n<ul>\n<li>MainActivity.java</li>\n<li>MainActivity.xml</li>\n<li>MainActivity2.java</li>\n<li>MainActivity2.xml</li>\n</ul>\n<p>其中，MainActivity2需要手动创建。在管理栏下点击右键选择<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi><mi>e</mi><mi>w</mi><mo>→</mo><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>i</mi><mi>t</mi><mi>y</mi><mo>→</mo><mi>E</mi><mi>m</mi><mi>p</mi><mi>t</mi><mi>y</mi><mtext> </mtext><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>i</mi><mi>t</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">New\\to Activity\\to Empty\\ Activity</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span>.创建后AndroidMainfeast.xml文件会自动生成有关MainActivity2的代码，如下图所示：</p>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20220927022235374.png\" alt=\"image-20220927022235374\" loading=\"lazy\"></p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!---activity_main.xml---></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/button<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Send Message<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onSendMessage<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintHorizontal_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.498<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/message<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>EditText</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/message<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>30dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>ems</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>hint</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Enter a message...<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>inputType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>textPersonName<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>minHeight</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>48dp<span class=\"token punctuation\">\"</span></span>\n\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20220927022446373.png\" alt=\"image-20220927022446373\" loading=\"lazy\"></p>\n<hr>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!---activity_main2.xml---></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/get_message<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>80dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>TextView<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintHorizontal_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.498<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20220927022539379.png\" alt=\"image-20220927022539379\" loading=\"lazy\"></p>\n<h2 id=\"java逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java逻辑编辑\"></a> Java逻辑编辑</h2>\n<p>首先编辑<code>onSendMessage()</code>函数用来控制按下按钮之后的操作。其中，Intent关联新的界面，对其操作可实现特定的<strong>意图</strong>，编辑完成后可利用StartActivity函数进行打开新的界面。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">// MainActivity.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> messageView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> messageText <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span><span class=\"token function\">getText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MainActivity2</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MainActivity2</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span> messageText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//传入message</span>\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p><code>putExtra()</code>函数会添加一些信息到指定的intent中，而<code>getIntent()</code>会获取之前得到的信息。这样就可以实现消息在两个activities中的传递与交互了。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//MainActivity2.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> message <span class=\"token operator\">=</span> <span class=\"token string\">\"MESSAGE!!!\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">getIntent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//获取Message</span>\n        <span class=\"token class-name\">String</span> messageText <span class=\"token operator\">=</span> intent<span class=\"token punctuation\">.</span><span class=\"token function\">getStringExtra</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">TextView</span> messageView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>get_message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        messageView<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>messageText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin逻辑编辑\"></a> Kotlin逻辑编辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// MainActivity.kt</span>\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> messageView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> messageText <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> MainActivity2<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"msg\"</span></span><span class=\"token punctuation\">,</span> messageText<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//MainActivity2.kt</span>\n<span class=\"token keyword\">class</span> MainActivity2 <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main2<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> messageText <span class=\"token operator\">=</span> intent<span class=\"token punctuation\">.</span><span class=\"token function\">getStringExtra</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"msg\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> messageView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>get_message<span class=\"token punctuation\">)</span>\n        messageView<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> messageText\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"任务目标隐式跳转\"><a class=\"markdownIt-Anchor\" href=\"#任务目标隐式跳转\"></a> 任务目标——隐式跳转</h2>\n<p>实现将程序中的文字发送到指定程序（如短信）。</p>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20221031161231815.png\" alt=\"image-20221031161231815\" loading=\"lazy\"></p>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20221031161159345.png\" alt=\"image-20221031161159345\" loading=\"lazy\"></p>\n<h2 id=\"java逻辑编辑-2\"><a class=\"markdownIt-Anchor\" href=\"#java逻辑编辑-2\"></a> Java逻辑编辑</h2>\n<p><code>Intent.createChooser</code>是打开Android默认的选择器， 如上图所示。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> messageView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> messagetext <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span><span class=\"token function\">getText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span>ACTION_SEND<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span>EXTRA_TEXT<span class=\"token punctuation\">,</span> messagetext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> chooserTitle <span class=\"token operator\">=</span> <span class=\"token string\">\"YZDD\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Intent</span> choosenIntent <span class=\"token operator\">=</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token function\">createChooser</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">,</span> chooserTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>choosenIntent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>我们也可以直接打开自己的软件或系统自带的软件，如下面的程序就是打开短信APP的方法：</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> messageView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> messagetext <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span><span class=\"token function\">getText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span>ACTION_SENDTO<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Uri</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"smsto:10086\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//使用\"smsto:\"可不指定联系人</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sms_body\"</span><span class=\"token punctuation\">,</span> messagetext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin逻辑编辑-2\"><a class=\"markdownIt-Anchor\" href=\"#kotlin逻辑编辑-2\"></a> Kotlin逻辑编辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">var</span> messageView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">var</span> messageText <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">var</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>ACTION_SENDTO<span class=\"token punctuation\">)</span>\n        intent<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> Uri<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"smsto:10086\"</span></span><span class=\"token punctuation\">)</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"sms_body\"</span></span><span class=\"token punctuation\">,</span> messageText<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> messageView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> messagetext <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>ACTION_SEND<span class=\"token punctuation\">)</span>\n        intent<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"text/plain\"</span></span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>EXTRA_TEXT<span class=\"token punctuation\">,</span> messagetext<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> chooserTitle <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"YZDD\"</span></span>\n        <span class=\"token keyword\">val</span> choosenIntent <span class=\"token operator\">=</span> Intent<span class=\"token punctuation\">.</span><span class=\"token function\">createChooser</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">,</span> chooserTitle<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>choosenIntent<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/09/17/Andriod-Studio-1/\">Android Studio 开发 1| Tony</a></p>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/10/10/Android-Studio-3/\">Android-Studio开发 3 | Tony</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"任务目标显式跳转\"><a class=\"markdownIt-Anchor\" href=\"#任务目标显式跳转\"></a> 任务目标——显式跳转</h2>\n<p>实现两个Activities之间的文字信息传输。</p>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20220927021701138.png\" alt=\"image-20220927021701138\"></p>\n<h2 id=\"项目管理\"><a class=\"markdownIt-Anchor\" href=\"#项目管理\"></a> 项目管理</h2>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20220927021810857.png\" alt=\"image-20220927021810857\"></p>\n<p>该项目中我们主要用到以下四个文件：</p>\n<ul>\n<li>MainActivity.java</li>\n<li>MainActivity.xml</li>\n<li>MainActivity2.java</li>\n<li>MainActivity2.xml</li>\n</ul>\n<p>其中，MainActivity2需要手动创建。在管理栏下点击右键选择<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi><mi>e</mi><mi>w</mi><mo>→</mo><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>i</mi><mi>t</mi><mi>y</mi><mo>→</mo><mi>E</mi><mi>m</mi><mi>p</mi><mi>t</mi><mi>y</mi><mtext> </mtext><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>i</mi><mi>t</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">New\\to Activity\\to Empty\\ Activity</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span>.创建后AndroidMainfeast.xml文件会自动生成有关MainActivity2的代码，如下图所示：</p>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20220927022235374.png\" alt=\"image-20220927022235374\"></p>\n<h2 id=\"界面编辑\"><a class=\"markdownIt-Anchor\" href=\"#界面编辑\"></a> 界面编辑</h2>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!---activity_main.xml---></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/button<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Send Message<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>onClick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onSendMessage<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintHorizontal_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.498<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/message<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>EditText</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/message<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>30dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>ems</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>hint</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Enter a message...<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>inputType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>textPersonName<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>minHeight</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>48dp<span class=\"token punctuation\">\"</span></span>\n\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20220927022446373.png\" alt=\"image-20220927022446373\"></p>\n<hr>\n<pre class=\"language-xml\" data-language=\"xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!---activity_main2.xml---></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.MainActivity2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TextView</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/get_message<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap_content<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_marginTop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>80dp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>TextView<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintEnd_toEndOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintHorizontal_bias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.498<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintStart_toStartOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20220927022539379.png\" alt=\"image-20220927022539379\"></p>\n<h2 id=\"java逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#java逻辑编辑\"></a> Java逻辑编辑</h2>\n<p>首先编辑<code>onSendMessage()</code>函数用来控制按下按钮之后的操作。其中，Intent关联新的界面，对其操作可实现特定的<strong>意图</strong>，编辑完成后可利用StartActivity函数进行打开新的界面。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">// MainActivity.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> messageView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> messageText <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span><span class=\"token function\">getText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MainActivity2</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MainActivity2</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span> messageText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//传入message</span>\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p><code>putExtra()</code>函数会添加一些信息到指定的intent中，而<code>getIntent()</code>会获取之前得到的信息。这样就可以实现消息在两个activities中的传递与交互了。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token comment\">//MainActivity2.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> message <span class=\"token operator\">=</span> <span class=\"token string\">\"MESSAGE!!!\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">getIntent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//获取Message</span>\n        <span class=\"token class-name\">String</span> messageText <span class=\"token operator\">=</span> intent<span class=\"token punctuation\">.</span><span class=\"token function\">getStringExtra</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">TextView</span> messageView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>get_message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        messageView<span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>messageText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin逻辑编辑\"><a class=\"markdownIt-Anchor\" href=\"#kotlin逻辑编辑\"></a> Kotlin逻辑编辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// MainActivity.kt</span>\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> messageView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> messageText <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> MainActivity2<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"msg\"</span></span><span class=\"token punctuation\">,</span> messageText<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//MainActivity2.kt</span>\n<span class=\"token keyword\">class</span> MainActivity2 <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main2<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> messageText <span class=\"token operator\">=</span> intent<span class=\"token punctuation\">.</span><span class=\"token function\">getStringExtra</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"msg\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> messageView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>TextView<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>get_message<span class=\"token punctuation\">)</span>\n        messageView<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> messageText\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"任务目标隐式跳转\"><a class=\"markdownIt-Anchor\" href=\"#任务目标隐式跳转\"></a> 任务目标——隐式跳转</h2>\n<p>实现将程序中的文字发送到指定程序（如短信）。</p>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20221031161231815.png\" alt=\"image-20221031161231815\"></p>\n<p><img src=\"/2022/09/27/Android-studio-2/image-20221031161159345.png\" alt=\"image-20221031161159345\"></p>\n<h2 id=\"java逻辑编辑-2\"><a class=\"markdownIt-Anchor\" href=\"#java逻辑编辑-2\"></a> Java逻辑编辑</h2>\n<p><code>Intent.createChooser</code>是打开Android默认的选择器， 如上图所示。</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> messageView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> messagetext <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span><span class=\"token function\">getText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span>ACTION_SEND<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span>EXTRA_TEXT<span class=\"token punctuation\">,</span> messagetext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> chooserTitle <span class=\"token operator\">=</span> <span class=\"token string\">\"YZDD\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Intent</span> choosenIntent <span class=\"token operator\">=</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token function\">createChooser</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">,</span> chooserTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>choosenIntent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>我们也可以直接打开自己的软件或系统自带的软件，如下面的程序就是打开短信APP的方法：</p>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> view<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">EditText</span> messageView <span class=\"token operator\">=</span> <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> messagetext <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span><span class=\"token function\">getText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span>ACTION_SENDTO<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Uri</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"smsto:10086\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//使用\"smsto:\"可不指定联系人</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sms_body\"</span><span class=\"token punctuation\">,</span> messagetext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kotlin逻辑编辑-2\"><a class=\"markdownIt-Anchor\" href=\"#kotlin逻辑编辑-2\"></a> Kotlin逻辑编辑</h2>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">var</span> messageView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">var</span> messageText <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">var</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>ACTION_SENDTO<span class=\"token punctuation\">)</span>\n        intent<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> Uri<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"smsto:10086\"</span></span><span class=\"token punctuation\">)</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"sms_body\"</span></span><span class=\"token punctuation\">,</span> messageText<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<pre class=\"language-kotlin\" data-language=\"kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">onSendMessage</span><span class=\"token punctuation\">(</span>view<span class=\"token operator\">:</span> View<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">val</span> messageView <span class=\"token operator\">=</span> findViewById<span class=\"token operator\">&lt;</span>EditText<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> messagetext <span class=\"token operator\">=</span> messageView<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>ACTION_SEND<span class=\"token punctuation\">)</span>\n        intent<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"text/plain\"</span></span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>EXTRA_TEXT<span class=\"token punctuation\">,</span> messagetext<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> chooserTitle <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"YZDD\"</span></span>\n        <span class=\"token keyword\">val</span> choosenIntent <span class=\"token operator\">=</span> Intent<span class=\"token punctuation\">.</span><span class=\"token function\">createChooser</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">,</span> chooserTitle<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>choosenIntent<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/09/17/Andriod-Studio-1/\">Android Studio 开发 1| Tony</a></p>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/10/10/Android-Studio-3/\">Android-Studio开发 3 | Tony</a></p>\n"},{"title":"BFS简介","date":"2022-03-10T09:43:09.000Z","katex":true,"_content":"\n## BFS基本概念\n\n**广度优先算法**（Breadth-First-Search），简称BFS，是一种图形搜索演算法，最糟糕的情况算法时间复杂度为O(V+E)。简单的说，BFS是从根节点开始，沿着树的宽度遍历树的节点，如果发现目标，则演算终止。\n\n## **经典例题**\n\n------\n\n### 1. 填涂颜色\n\n#### 题目描述\n\n由数字$0$组成的方阵中，有一任意形状闭合圈，闭合圈由数字$1$构成，围圈时只走上下左右$4$个方向。现要求把闭合圈内的所有空间都填写成$2$。例如：$6×6$的方阵$(n=6)$，涂色前和涂色后的方阵如下：\n\n```bash\n0 0 0 0 0 0\n0 0 1 1 1 1\n0 1 1 0 0 1\n1 1 0 0 0 1\n1 0 0 0 0 1\n1 1 1 1 1 1\n-----------\n0 0 0 0 0 0\n0 0 1 1 1 1\n0 1 1 2 2 1\n1 1 2 2 2 1\n1 2 2 2 2 1\n1 1 1 1 1 1\n```\n\n#### 输入格式\n\n每组测试数据第一行一个整数$n(1≤n≤30)$\n\n接下来$n$行，由$0$和$1$组成的$n×n$的方阵。\n\n方阵内只有一个闭合圈，圈内至少有一个$0$。\n\n#### 输出格式\n\n已经填好数字$2$的完整方阵。\n\n#### 输入输出样例\n\n**输入 #1**\n\n```bash\n6\n0 0 0 0 0 0\n0 0 1 1 1 1\n0 1 1 0 0 1\n1 1 0 0 0 1\n1 0 0 0 0 1\n1 1 1 1 1 1\n```\n\n**输出 #1**\n\n```bash\n0 0 0 0 0 0\n0 0 1 1 1 1\n0 1 1 2 2 1\n1 1 2 2 2 1\n1 2 2 2 2 1\n1 1 1 1 1 1\n```\n\n#### 说明/提示\n\n$1≤n≤30$\n\n#### 答案解析\n\n```c\n#include<iostream>\nusing namespace std;\nint num[40][40];\nint main()\n{\n    int c,i,j,k;\n    cin>>c;\n    for(i=1;i<=c;i++)\n\t\tfor(j=1;j<=c;j++)\n    {\n        cin>>num[i][j];\n        if(num[i][j]==0)\n\t\t\tnum[i][j]=2;\n        //先认为所有的0都应该被修改,并且真的把它修改成了2;\n    }\n    for(i=1;i<=c;i++)\n    {\n        //边角上的'2'其实本来不应该被修改的,那我们把他们改回去,改成0\n        if(num[1][i]==2)\n\t\t\tnum[1][i]=0;\n        if(num[i][1]==2)\t\n\t\t\tnum[i][1]=0;\n        if(num[c][i]==2)\n\t\t\tnum[c][i]=0;\n        if(num[i][c]==2)\n\t\t\tnum[i][c]=0;\n    }\n    //然后来寻找与这些零相邻的'2',它们其实也是被改错了的\n    for(k=1;k<=100;k++)//广度优先搜索 阈值=100 (事实上不需要那么多)\n    \tfor(i=1;i<=c;i++)\n    \t\tfor(j=1;j<=c;j++)\n    \t\t    if(num[i][j]!=1)\n    \t\t\t    if(!num[i][j-1]||!num[i-1][j]||!num[i+1][j]||!num[i][j+1])\n    \t\t\t\t    num[i][j]=0; \n    for(i=1;i<=c;i++)\n    {\n        for(j=1;j<=c;j++)\n        cout<<num[i][j]<<\" \";\n        cout<<endl;\n    }\n    return 0;\n}\n```\n\n当然，本题仍可以用DFS来做：\n\n```c\n#include <cstdio>\nusing namespace std;\nint n;\nint a[32][32];\nvoid dfs(int x, int y)\n{\n    if(x >= 0 && x <= n + 1 && y >= 0 && y <= n + 1)\n    {\n        if(a[x][y] == 1 || a[x][y] == 3) \n        \treturn ;\n        else\n        {\n        \ta[x][y] = 3;\n            dfs(x + 1, y); \n            dfs(x - 1, y);\n            dfs(x, y + 1); \n            dfs(x, y - 1);\n        }\n    }\n}\nint main()\n{\n    scanf(\"%d\", &n);\n    for(int i = 1; i <= n; ++ i)\n    \tfor(int j = 1; j <= n; ++ j)\n    \t\tscanf(\"%d\", &a[i][j]);\n    dfs(0, 0);\n    for(int i = 1; i <= n; ++ i)\n    \tfor(int j = 1; j <= n; ++ j)\n    \t\tif(a[i][j] == 3) \n    \t\t\ta[i][j] = 0;\n    \t\telse \n    \t\t\tif(a[i][j] == 0) \n    \t\t\t\ta[i][j] = 2;\n    for(int i = 1; i <= n; ++ i)\n    {\n    \tfor(int j = 1; j <= n; ++ j) \n    \t\tprintf(\"%d \", a[i][j]);\n    \tprintf(\"\\n\")\n    }\n    return 0;\n}\n```\n\n注意：dfs在先搜索的时候应该搜索到矩阵的外面一圈$(0， n + 1)$ 否则的话就会出现错误！(边缘处被涂色)\n\n------\n\n### 01迷宫\n\n#### 题目描述\n\n有一个仅由数字$0$与$1$组成的$n×n$格迷宫。若你位于一格$0$上，那么你可以移动到相邻$4$格中的某一格$1$上，同样若你位于一格$1$上，那么你可以移动到相邻$4$格中的某一格$0$上。\n\n你的任务是：对于给定的迷宫，询问从某一格开始能移动到多少个格子（包含自身）。\n\n#### 输入格式\n\n第$1$行为两个正整数$n,m$。\n\n下面$n$行，每行*$n$*个字符，字符只可能是$0$或者$1$，字符之间没有空格。\n\n接下来$m$行，每行$2$个用空格分隔的正整数$i,j$，对应了迷宫中第$i$行第$j$列的一个格子，询问从这一格开始能移动到多少格。\n\n#### 输出格式\n\n$m$行，对于每个询问输出相应答案。\n\n#### 输入输出样例\n\n**输入 #1**\n\n```bash\n2 2\n01\n10\n1 1\n2 2\n```\n\n**输出 #1**\n\n```bash\n4\n4\n```\n\n#### 说明/提示\n\n对于20%的数据，$n≤10$；\n\n对于40%的数据，$n≤50$；\n\n对于50%的数据，$m≤5$；\n\n对于60%的数据，$n*≤100,*m≤100$；\n\n对于100%的数据，$n*≤1000,*m≤100000$。\n\n#### 答案解析\n\nBFS，70分代码：\n\n```c\n#include<iostream>\n#include<cstring>\nusing namespace std;\nstruct mg\n{\n    int x,y;\n};\nbool map[1001][1001];\nbool flag[1001][1001];\nmg q[1000001];\nint m,n;\nvoid bfs(int x,int y);\nint main()\n{\n\tcin>>n>>m;\n\tchar ch;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tcin>>ch;\n\t\t\tif(ch=='1')\n\t\t\t\tmap[i][j]=true;\n\t\t}\n\tfor(int i=0;i<m;i++)\n\t{\n\t\tint x,y;\n\t\tcin>>x>>y;\n\t\tbfs(x,y);\n\t}\n\treturn 0;\n}\nvoid bfs(int x,int y)\n{\n\tint dx[4]={0,0,-1,1};\n    int dy[4]={1,-1,0,0};\n    int ans,f,r,newx,newy;\n    ans=f=r=1;\n    q[f].x=x;\n    q[f].y=y;\n    memset(flag,false,sizeof(flag));\n    flag[x][y]=true;\n    while(f<=r)\n    {\n    \tfor(int i=0;i<4;i++)\n    \t{\n    \t\tnewx=q[f].x+dx[i];\n    \t\tnewy=q[f].y+dy[i];\n    \t\tif(newx>0 && newx<=n && newy>0 && newy<=n && !flag[newx][newy])\n    \t\t\tif((map[q[f].x][q[f].y]==0 && map[newx][newy]==1) || (map[q[f].x][q[f].y]==1 && map[newx][newy]==0))\n    \t\t\t{\n    \t\t\t\tr++;\n    \t\t\t\tans++;\n    \t\t\t\tflag[newx][newy]=true;\n    \t\t\t\tq[r].x=newx;\n    \t\t\t\tq[r].y=newy;\n\t\t\t\t}\n\t\t}\n\t\tf++;\n\t}\n\tcout<<ans<<endl;\n } \n```\n\n有三个点TEL，所以对代码进行一定时间优化，学名叫记忆化搜索，以时间换空间，优化如下：\n\n```c\n#include<iostream>\n#include<cstring>\nusing namespace std;\nstruct mg\n{\n    int x,y;\n};\nbool map[1001][1001];\nbool flag[1001][1001];\nint a[1001][1001];\nmg q[5000001];\nint m,n;\nvoid bfs(int x,int y);\nint main()\n{\n\tcin>>n>>m;\n\tchar ch;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tcin>>ch;\n\t\t\tif(ch=='1')\n\t\t\t\tmap[i][j]=true;\n\t\t}\n\tfor(int i=0;i<m;i++)\n\t{\n\t\tint x,y;\n\t\tcin>>x>>y;\n\t\tif(a[x][y]==0)\n\t\t\tbfs(x,y);\n\t\telse\n\t\t\tcout<<a[x][y]<<endl;\n\t}\n\treturn 0;\n}\nvoid bfs(int x,int y)\n{\n\tint dx[4]={0,0,-1,1};\n    int dy[4]={1,-1,0,0};\n    int ans,f,r,newx,newy;\n    ans=f=r=1;\n    q[f].x=x;\n    q[f].y=y;\n    memset(flag,false,sizeof(flag));\n    flag[x][y]=true;\n    while(f<=r)\n    {\n    \tfor(int i=0;i<4;i++)\n    \t{\n    \t\tnewx=q[f].x+dx[i];\n    \t\tnewy=q[f].y+dy[i];\n    \t\tif(newx>0 && newx<=n && newy>0 && newy<=n && !flag[newx][newy])\n    \t\t\tif((map[q[f].x][q[f].y]==0 && map[newx][newy]==1) || (map[q[f].x][q[f].y]==1 && map[newx][newy]==0))\n    \t\t\t{\n    \t\t\t\tr++;\n    \t\t\t\tans++;\n    \t\t\t\tflag[newx][newy]=true;\n    \t\t\t\tq[r].x=newx;\n    \t\t\t\tq[r].y=newy;\n\t\t\t\t}\n\t\t}\n\t\tf++;\n\t}\n\tfor(int i=1;i<n;i++)\n\t\tfor(int j=1;j<n;j++)\n\t\t\tif(flag[i][j])\n\t\t\t\ta[i][j]=ans;\n\tcout<<ans<<endl;\n } \n```\n\n当然，本题也可以用DFS来做，读者可以先自行写一写，不要看下面的答案：\n\n```c\n#include<cstdio>\n#include<cstring>\nint n,m,x,y;\nint ans[100002],f[1002][1002];\nchar s[1002][1002];\nvoid dfs(int r,int c,int z,int lll)\n{\n    if (r<0 || r>=n || c<0 || c>=n || f[r][c]!=-1 || s[r][c]-'0'!=z)\n        return;\n    f[r][c]=lll;\n    ans[lll]++;\n    dfs(r-1,c,!z,lll);\n    dfs(r+1,c,!z,lll);\n    dfs(r,c-1,!z,lll);\n    dfs(r,c+1,!z,lll);\n}\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for (int i=0;i<n;i++)\n    \tscanf(\"%s\",s[i]);\n    memset(f,-1,sizeof(f));\n    for (int i=0;i<m;i++)\n    {\n        scanf(\"%d%d\",&x,&y);\n        x--;\n        y--;\n        if (f[x][y]==-1)\n            dfs(x,y,s[x][y]-'0',i);\n        else \n            ans[i]=ans[f[x][y]];\n    }\n    for (int i=0;i<m;i++)\n    \tprintf(\"%d\\n\",ans[i]);\n    return 0;\n}\n```\n\n$$\nEND\n$$\n\n","source":"_posts/BFS.md","raw":"---\ntitle: BFS简介\ndate: 2022-03-10 17:43:09\ntags:\n\t- algorithm\n\t- BFS\n\t- DFS\ncategories:\n\t- algorithm\nkatex: true\n---\n\n## BFS基本概念\n\n**广度优先算法**（Breadth-First-Search），简称BFS，是一种图形搜索演算法，最糟糕的情况算法时间复杂度为O(V+E)。简单的说，BFS是从根节点开始，沿着树的宽度遍历树的节点，如果发现目标，则演算终止。\n\n## **经典例题**\n\n------\n\n### 1. 填涂颜色\n\n#### 题目描述\n\n由数字$0$组成的方阵中，有一任意形状闭合圈，闭合圈由数字$1$构成，围圈时只走上下左右$4$个方向。现要求把闭合圈内的所有空间都填写成$2$。例如：$6×6$的方阵$(n=6)$，涂色前和涂色后的方阵如下：\n\n```bash\n0 0 0 0 0 0\n0 0 1 1 1 1\n0 1 1 0 0 1\n1 1 0 0 0 1\n1 0 0 0 0 1\n1 1 1 1 1 1\n-----------\n0 0 0 0 0 0\n0 0 1 1 1 1\n0 1 1 2 2 1\n1 1 2 2 2 1\n1 2 2 2 2 1\n1 1 1 1 1 1\n```\n\n#### 输入格式\n\n每组测试数据第一行一个整数$n(1≤n≤30)$\n\n接下来$n$行，由$0$和$1$组成的$n×n$的方阵。\n\n方阵内只有一个闭合圈，圈内至少有一个$0$。\n\n#### 输出格式\n\n已经填好数字$2$的完整方阵。\n\n#### 输入输出样例\n\n**输入 #1**\n\n```bash\n6\n0 0 0 0 0 0\n0 0 1 1 1 1\n0 1 1 0 0 1\n1 1 0 0 0 1\n1 0 0 0 0 1\n1 1 1 1 1 1\n```\n\n**输出 #1**\n\n```bash\n0 0 0 0 0 0\n0 0 1 1 1 1\n0 1 1 2 2 1\n1 1 2 2 2 1\n1 2 2 2 2 1\n1 1 1 1 1 1\n```\n\n#### 说明/提示\n\n$1≤n≤30$\n\n#### 答案解析\n\n```c\n#include<iostream>\nusing namespace std;\nint num[40][40];\nint main()\n{\n    int c,i,j,k;\n    cin>>c;\n    for(i=1;i<=c;i++)\n\t\tfor(j=1;j<=c;j++)\n    {\n        cin>>num[i][j];\n        if(num[i][j]==0)\n\t\t\tnum[i][j]=2;\n        //先认为所有的0都应该被修改,并且真的把它修改成了2;\n    }\n    for(i=1;i<=c;i++)\n    {\n        //边角上的'2'其实本来不应该被修改的,那我们把他们改回去,改成0\n        if(num[1][i]==2)\n\t\t\tnum[1][i]=0;\n        if(num[i][1]==2)\t\n\t\t\tnum[i][1]=0;\n        if(num[c][i]==2)\n\t\t\tnum[c][i]=0;\n        if(num[i][c]==2)\n\t\t\tnum[i][c]=0;\n    }\n    //然后来寻找与这些零相邻的'2',它们其实也是被改错了的\n    for(k=1;k<=100;k++)//广度优先搜索 阈值=100 (事实上不需要那么多)\n    \tfor(i=1;i<=c;i++)\n    \t\tfor(j=1;j<=c;j++)\n    \t\t    if(num[i][j]!=1)\n    \t\t\t    if(!num[i][j-1]||!num[i-1][j]||!num[i+1][j]||!num[i][j+1])\n    \t\t\t\t    num[i][j]=0; \n    for(i=1;i<=c;i++)\n    {\n        for(j=1;j<=c;j++)\n        cout<<num[i][j]<<\" \";\n        cout<<endl;\n    }\n    return 0;\n}\n```\n\n当然，本题仍可以用DFS来做：\n\n```c\n#include <cstdio>\nusing namespace std;\nint n;\nint a[32][32];\nvoid dfs(int x, int y)\n{\n    if(x >= 0 && x <= n + 1 && y >= 0 && y <= n + 1)\n    {\n        if(a[x][y] == 1 || a[x][y] == 3) \n        \treturn ;\n        else\n        {\n        \ta[x][y] = 3;\n            dfs(x + 1, y); \n            dfs(x - 1, y);\n            dfs(x, y + 1); \n            dfs(x, y - 1);\n        }\n    }\n}\nint main()\n{\n    scanf(\"%d\", &n);\n    for(int i = 1; i <= n; ++ i)\n    \tfor(int j = 1; j <= n; ++ j)\n    \t\tscanf(\"%d\", &a[i][j]);\n    dfs(0, 0);\n    for(int i = 1; i <= n; ++ i)\n    \tfor(int j = 1; j <= n; ++ j)\n    \t\tif(a[i][j] == 3) \n    \t\t\ta[i][j] = 0;\n    \t\telse \n    \t\t\tif(a[i][j] == 0) \n    \t\t\t\ta[i][j] = 2;\n    for(int i = 1; i <= n; ++ i)\n    {\n    \tfor(int j = 1; j <= n; ++ j) \n    \t\tprintf(\"%d \", a[i][j]);\n    \tprintf(\"\\n\")\n    }\n    return 0;\n}\n```\n\n注意：dfs在先搜索的时候应该搜索到矩阵的外面一圈$(0， n + 1)$ 否则的话就会出现错误！(边缘处被涂色)\n\n------\n\n### 01迷宫\n\n#### 题目描述\n\n有一个仅由数字$0$与$1$组成的$n×n$格迷宫。若你位于一格$0$上，那么你可以移动到相邻$4$格中的某一格$1$上，同样若你位于一格$1$上，那么你可以移动到相邻$4$格中的某一格$0$上。\n\n你的任务是：对于给定的迷宫，询问从某一格开始能移动到多少个格子（包含自身）。\n\n#### 输入格式\n\n第$1$行为两个正整数$n,m$。\n\n下面$n$行，每行*$n$*个字符，字符只可能是$0$或者$1$，字符之间没有空格。\n\n接下来$m$行，每行$2$个用空格分隔的正整数$i,j$，对应了迷宫中第$i$行第$j$列的一个格子，询问从这一格开始能移动到多少格。\n\n#### 输出格式\n\n$m$行，对于每个询问输出相应答案。\n\n#### 输入输出样例\n\n**输入 #1**\n\n```bash\n2 2\n01\n10\n1 1\n2 2\n```\n\n**输出 #1**\n\n```bash\n4\n4\n```\n\n#### 说明/提示\n\n对于20%的数据，$n≤10$；\n\n对于40%的数据，$n≤50$；\n\n对于50%的数据，$m≤5$；\n\n对于60%的数据，$n*≤100,*m≤100$；\n\n对于100%的数据，$n*≤1000,*m≤100000$。\n\n#### 答案解析\n\nBFS，70分代码：\n\n```c\n#include<iostream>\n#include<cstring>\nusing namespace std;\nstruct mg\n{\n    int x,y;\n};\nbool map[1001][1001];\nbool flag[1001][1001];\nmg q[1000001];\nint m,n;\nvoid bfs(int x,int y);\nint main()\n{\n\tcin>>n>>m;\n\tchar ch;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tcin>>ch;\n\t\t\tif(ch=='1')\n\t\t\t\tmap[i][j]=true;\n\t\t}\n\tfor(int i=0;i<m;i++)\n\t{\n\t\tint x,y;\n\t\tcin>>x>>y;\n\t\tbfs(x,y);\n\t}\n\treturn 0;\n}\nvoid bfs(int x,int y)\n{\n\tint dx[4]={0,0,-1,1};\n    int dy[4]={1,-1,0,0};\n    int ans,f,r,newx,newy;\n    ans=f=r=1;\n    q[f].x=x;\n    q[f].y=y;\n    memset(flag,false,sizeof(flag));\n    flag[x][y]=true;\n    while(f<=r)\n    {\n    \tfor(int i=0;i<4;i++)\n    \t{\n    \t\tnewx=q[f].x+dx[i];\n    \t\tnewy=q[f].y+dy[i];\n    \t\tif(newx>0 && newx<=n && newy>0 && newy<=n && !flag[newx][newy])\n    \t\t\tif((map[q[f].x][q[f].y]==0 && map[newx][newy]==1) || (map[q[f].x][q[f].y]==1 && map[newx][newy]==0))\n    \t\t\t{\n    \t\t\t\tr++;\n    \t\t\t\tans++;\n    \t\t\t\tflag[newx][newy]=true;\n    \t\t\t\tq[r].x=newx;\n    \t\t\t\tq[r].y=newy;\n\t\t\t\t}\n\t\t}\n\t\tf++;\n\t}\n\tcout<<ans<<endl;\n } \n```\n\n有三个点TEL，所以对代码进行一定时间优化，学名叫记忆化搜索，以时间换空间，优化如下：\n\n```c\n#include<iostream>\n#include<cstring>\nusing namespace std;\nstruct mg\n{\n    int x,y;\n};\nbool map[1001][1001];\nbool flag[1001][1001];\nint a[1001][1001];\nmg q[5000001];\nint m,n;\nvoid bfs(int x,int y);\nint main()\n{\n\tcin>>n>>m;\n\tchar ch;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tcin>>ch;\n\t\t\tif(ch=='1')\n\t\t\t\tmap[i][j]=true;\n\t\t}\n\tfor(int i=0;i<m;i++)\n\t{\n\t\tint x,y;\n\t\tcin>>x>>y;\n\t\tif(a[x][y]==0)\n\t\t\tbfs(x,y);\n\t\telse\n\t\t\tcout<<a[x][y]<<endl;\n\t}\n\treturn 0;\n}\nvoid bfs(int x,int y)\n{\n\tint dx[4]={0,0,-1,1};\n    int dy[4]={1,-1,0,0};\n    int ans,f,r,newx,newy;\n    ans=f=r=1;\n    q[f].x=x;\n    q[f].y=y;\n    memset(flag,false,sizeof(flag));\n    flag[x][y]=true;\n    while(f<=r)\n    {\n    \tfor(int i=0;i<4;i++)\n    \t{\n    \t\tnewx=q[f].x+dx[i];\n    \t\tnewy=q[f].y+dy[i];\n    \t\tif(newx>0 && newx<=n && newy>0 && newy<=n && !flag[newx][newy])\n    \t\t\tif((map[q[f].x][q[f].y]==0 && map[newx][newy]==1) || (map[q[f].x][q[f].y]==1 && map[newx][newy]==0))\n    \t\t\t{\n    \t\t\t\tr++;\n    \t\t\t\tans++;\n    \t\t\t\tflag[newx][newy]=true;\n    \t\t\t\tq[r].x=newx;\n    \t\t\t\tq[r].y=newy;\n\t\t\t\t}\n\t\t}\n\t\tf++;\n\t}\n\tfor(int i=1;i<n;i++)\n\t\tfor(int j=1;j<n;j++)\n\t\t\tif(flag[i][j])\n\t\t\t\ta[i][j]=ans;\n\tcout<<ans<<endl;\n } \n```\n\n当然，本题也可以用DFS来做，读者可以先自行写一写，不要看下面的答案：\n\n```c\n#include<cstdio>\n#include<cstring>\nint n,m,x,y;\nint ans[100002],f[1002][1002];\nchar s[1002][1002];\nvoid dfs(int r,int c,int z,int lll)\n{\n    if (r<0 || r>=n || c<0 || c>=n || f[r][c]!=-1 || s[r][c]-'0'!=z)\n        return;\n    f[r][c]=lll;\n    ans[lll]++;\n    dfs(r-1,c,!z,lll);\n    dfs(r+1,c,!z,lll);\n    dfs(r,c-1,!z,lll);\n    dfs(r,c+1,!z,lll);\n}\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for (int i=0;i<n;i++)\n    \tscanf(\"%s\",s[i]);\n    memset(f,-1,sizeof(f));\n    for (int i=0;i<m;i++)\n    {\n        scanf(\"%d%d\",&x,&y);\n        x--;\n        y--;\n        if (f[x][y]==-1)\n            dfs(x,y,s[x][y]-'0',i);\n        else \n            ans[i]=ans[f[x][y]];\n    }\n    for (int i=0;i<m;i++)\n    \tprintf(\"%d\\n\",ans[i]);\n    return 0;\n}\n```\n\n$$\nEND\n$$\n\n","slug":"BFS","published":1,"updated":"2022-03-11T02:29:00.447Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcj000p1gzuczlj2efk","content":"<h2 id=\"bfs基本概念\"><a class=\"markdownIt-Anchor\" href=\"#bfs基本概念\"></a> BFS基本概念</h2>\n<p><strong>广度优先算法</strong>（Breadth-First-Search），简称BFS，是一种图形搜索演算法，最糟糕的情况算法时间复杂度为O(V+E)。简单的说，BFS是从根节点开始，沿着树的宽度遍历树的节点，如果发现目标，则演算终止。</p>\n<h2 id=\"经典例题\"><a class=\"markdownIt-Anchor\" href=\"#经典例题\"></a> <strong>经典例题</strong></h2>\n<hr>\n<h3 id=\"1-填涂颜色\"><a class=\"markdownIt-Anchor\" href=\"#1-填涂颜色\"></a> 1. 填涂颜色</h3>\n<h4 id=\"题目描述\"><a class=\"markdownIt-Anchor\" href=\"#题目描述\"></a> 题目描述</h4>\n<p>由数字<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>组成的方阵中，有一任意形状闭合圈，闭合圈由数字<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>构成，围圈时只走上下左右<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>个方向。现要求把闭合圈内的所有空间都填写成<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>。例如：<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>6</mn><mo>×</mo><mn>6</mn></mrow><annotation encoding=\"application/x-tex\">6×6</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span></span></span></span>的方阵<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mi>n</mi><mo>=</mo><mn>6</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(n=6)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">6</span><span class=\"mclose\">)</span></span></span></span>，涂色前和涂色后的方阵如下：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n-----------\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span></code></pre>\n<h4 id=\"输入格式\"><a class=\"markdownIt-Anchor\" href=\"#输入格式\"></a> 输入格式</h4>\n<p>每组测试数据第一行一个整数<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>30</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">n(1≤n≤30)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>接下来<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>行，由<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>和<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>组成的<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n×n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>的方阵。</p>\n<p>方阵内只有一个闭合圈，圈内至少有一个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>。</p>\n<h4 id=\"输出格式\"><a class=\"markdownIt-Anchor\" href=\"#输出格式\"></a> 输出格式</h4>\n<p>已经填好数字<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>的完整方阵。</p>\n<h4 id=\"输入输出样例\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例\"></a> 输入输出样例</h4>\n<p><strong>输入 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">6</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span></code></pre>\n<p><strong>输出 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span></code></pre>\n<h4 id=\"说明提示\"><a class=\"markdownIt-Anchor\" href=\"#说明提示\"></a> 说明/提示</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>30</mn></mrow><annotation encoding=\"application/x-tex\">1≤n≤30</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span></span></span></span></p>\n<h4 id=\"答案解析\"><a class=\"markdownIt-Anchor\" href=\"#答案解析\"></a> 答案解析</h4>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> num<span class=\"token punctuation\">[</span><span class=\"token number\">40</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">40</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> c<span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">,</span>j<span class=\"token punctuation\">,</span>k<span class=\"token punctuation\">;</span>\n    cin<span class=\"token operator\">>></span>c<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cin<span class=\"token operator\">>></span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\tnum<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//先认为所有的0都应该被修改,并且真的把它修改成了2;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">//边角上的'2'其实本来不应该被修改的,那我们把他们改回去,改成0</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\t\t\tnum<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\t\n\t\t\tnum<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\t\t\tnum<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\t\t\tnum<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//然后来寻找与这些零相邻的'2',它们其实也是被改错了的</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>k<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>k<span class=\"token operator\">&lt;=</span><span class=\"token number\">100</span><span class=\"token punctuation\">;</span>k<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//广度优先搜索 阈值=100 (事实上不需要那么多)</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t\t    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    \t\t\t    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">||</span><span class=\"token operator\">!</span>num<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">||</span><span class=\"token operator\">!</span>num<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">||</span><span class=\"token operator\">!</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    \t\t\t\t    num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>当然，本题仍可以用DFS来做：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdio></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> n<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> x <span class=\"token operator\">&lt;=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">&lt;=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span> <span class=\"token operator\">||</span> a<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> \n        \t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">&#123;</span>\n        \ta<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> i<span class=\"token punctuation\">)</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> j<span class=\"token punctuation\">)</span>\n    \t\t<span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> i<span class=\"token punctuation\">)</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> j<span class=\"token punctuation\">)</span>\n    \t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> \n    \t\t\ta<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    \t\t<span class=\"token keyword\">else</span> \n    \t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> \n    \t\t\t\ta<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> i<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> j<span class=\"token punctuation\">)</span> \n    \t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d \"</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>注意：dfs在先搜索的时候应该搜索到矩阵的外面一圈<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mi mathvariant=\"normal\">，</mi><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(0， n + 1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> 否则的话就会出现错误！(边缘处被涂色)</p>\n<hr>\n<h3 id=\"01迷宫\"><a class=\"markdownIt-Anchor\" href=\"#01迷宫\"></a> 01迷宫</h3>\n<h4 id=\"题目描述-2\"><a class=\"markdownIt-Anchor\" href=\"#题目描述-2\"></a> 题目描述</h4>\n<p>有一个仅由数字<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>与<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>组成的<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n×n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>格迷宫。若你位于一格<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>上，那么你可以移动到相邻<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>格中的某一格<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>上，同样若你位于一格<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>上，那么你可以移动到相邻<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>格中的某一格<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>上。</p>\n<p>你的任务是：对于给定的迷宫，询问从某一格开始能移动到多少个格子（包含自身）。</p>\n<h4 id=\"输入格式-2\"><a class=\"markdownIt-Anchor\" href=\"#输入格式-2\"></a> 输入格式</h4>\n<p>第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>行为两个正整数<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo separator=\"true\">,</mo><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">n,m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>。</p>\n<p>下面<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>行，每行*<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>*个字符，字符只可能是<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>或者<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>，字符之间没有空格。</p>\n<p>接下来<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>行，每行<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>个用空格分隔的正整数<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">i,j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span>，对应了迷宫中第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>行第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span>列的一个格子，询问从这一格开始能移动到多少格。</p>\n<h4 id=\"输出格式-2\"><a class=\"markdownIt-Anchor\" href=\"#输出格式-2\"></a> 输出格式</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>行，对于每个询问输出相应答案。</p>\n<h4 id=\"输入输出样例-2\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例-2\"></a> 输入输出样例</h4>\n<p><strong>输入 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">2</span> <span class=\"token number\">2</span>\n01\n<span class=\"token number\">10</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">2</span> <span class=\"token number\">2</span></code></pre>\n<p><strong>输出 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">4</span>\n<span class=\"token number\">4</span></code></pre>\n<h4 id=\"说明提示-2\"><a class=\"markdownIt-Anchor\" href=\"#说明提示-2\"></a> 说明/提示</h4>\n<p>对于20%的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>≤</mo><mn>10</mn></mrow><annotation encoding=\"application/x-tex\">n≤10</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span></span>；</p>\n<p>对于40%的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>≤</mo><mn>50</mn></mrow><annotation encoding=\"application/x-tex\">n≤50</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">5</span><span class=\"mord\">0</span></span></span></span>；</p>\n<p>对于50%的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mo>≤</mo><mn>5</mn></mrow><annotation encoding=\"application/x-tex\">m≤5</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">5</span></span></span></span>；</p>\n<p>对于60%的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>∗</mo><mo>≤</mo><mn>100</mn><mo separator=\"true\">,</mo><mo>∗</mo><mi>m</mi><mo>≤</mo><mn>100</mn></mrow><annotation encoding=\"application/x-tex\">n*≤100,*m≤100</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord\">∗</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∗</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span>；</p>\n<p>对于100%的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>∗</mo><mo>≤</mo><mn>1000</mn><mo separator=\"true\">,</mo><mo>∗</mo><mi>m</mi><mo>≤</mo><mn>100000</mn></mrow><annotation encoding=\"application/x-tex\">n*≤1000,*m≤100000</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord\">∗</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∗</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span>。</p>\n<h4 id=\"答案解析-2\"><a class=\"markdownIt-Anchor\" href=\"#答案解析-2\"></a> 答案解析</h4>\n<p>BFS，70分代码：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;cstring></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">mg</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nbool map<span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nbool flag<span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nmg q<span class=\"token punctuation\">[</span><span class=\"token number\">1000001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> m<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\tcin<span class=\"token operator\">>></span>n<span class=\"token operator\">>></span>m<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">char</span> ch<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tcin<span class=\"token operator\">>></span>ch<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>ch<span class=\"token operator\">==</span><span class=\"token char\">'1'</span><span class=\"token punctuation\">)</span>\n\t\t\t\tmap<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">;</span>\n\t\tcin<span class=\"token operator\">>></span>x<span class=\"token operator\">>></span>y<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">int</span> dx<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> dy<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ans<span class=\"token punctuation\">,</span>f<span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">,</span>newx<span class=\"token punctuation\">,</span>newy<span class=\"token punctuation\">;</span>\n    ans<span class=\"token operator\">=</span>f<span class=\"token operator\">=</span>r<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">=</span>x<span class=\"token punctuation\">;</span>\n    q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">=</span>y<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">,</span>false<span class=\"token punctuation\">,</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    flag<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>f<span class=\"token operator\">&lt;=</span>r<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">4</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n    \t\tnewx<span class=\"token operator\">=</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">+</span>dx<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \t\tnewy<span class=\"token operator\">=</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">+</span>dy<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>newx<span class=\"token operator\">></span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> newx<span class=\"token operator\">&lt;=</span>n <span class=\"token operator\">&amp;&amp;</span> newy<span class=\"token operator\">></span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> newy<span class=\"token operator\">&lt;=</span>n <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>flag<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    \t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> map<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> map<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    \t\t\t<span class=\"token punctuation\">&#123;</span>\n    \t\t\t\tr<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    \t\t\t\tans<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    \t\t\t\tflag<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    \t\t\t\tq<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">=</span>newx<span class=\"token punctuation\">;</span>\n    \t\t\t\tq<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">=</span>newy<span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\tf<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\tcout<span class=\"token operator\">&lt;&lt;</span>ans<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">&#125;</span> </code></pre>\n<p>有三个点TEL，所以对代码进行一定时间优化，学名叫记忆化搜索，以时间换空间，优化如下：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;cstring></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">mg</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nbool map<span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nbool flag<span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nmg q<span class=\"token punctuation\">[</span><span class=\"token number\">5000001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> m<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\tcin<span class=\"token operator\">>></span>n<span class=\"token operator\">>></span>m<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">char</span> ch<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tcin<span class=\"token operator\">>></span>ch<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>ch<span class=\"token operator\">==</span><span class=\"token char\">'1'</span><span class=\"token punctuation\">)</span>\n\t\t\t\tmap<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">;</span>\n\t\tcin<span class=\"token operator\">>></span>x<span class=\"token operator\">>></span>y<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t\tcout<span class=\"token operator\">&lt;&lt;</span>a<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">int</span> dx<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> dy<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ans<span class=\"token punctuation\">,</span>f<span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">,</span>newx<span class=\"token punctuation\">,</span>newy<span class=\"token punctuation\">;</span>\n    ans<span class=\"token operator\">=</span>f<span class=\"token operator\">=</span>r<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">=</span>x<span class=\"token punctuation\">;</span>\n    q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">=</span>y<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">,</span>false<span class=\"token punctuation\">,</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    flag<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>f<span class=\"token operator\">&lt;=</span>r<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">4</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n    \t\tnewx<span class=\"token operator\">=</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">+</span>dx<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \t\tnewy<span class=\"token operator\">=</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">+</span>dy<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>newx<span class=\"token operator\">></span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> newx<span class=\"token operator\">&lt;=</span>n <span class=\"token operator\">&amp;&amp;</span> newy<span class=\"token operator\">></span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> newy<span class=\"token operator\">&lt;=</span>n <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>flag<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    \t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> map<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> map<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    \t\t\t<span class=\"token punctuation\">&#123;</span>\n    \t\t\t\tr<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    \t\t\t\tans<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    \t\t\t\tflag<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    \t\t\t\tq<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">=</span>newx<span class=\"token punctuation\">;</span>\n    \t\t\t\tq<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">=</span>newy<span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\tf<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t\t\ta<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>ans<span class=\"token punctuation\">;</span>\n\tcout<span class=\"token operator\">&lt;&lt;</span>ans<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">&#125;</span> </code></pre>\n<p>当然，本题也可以用DFS来做，读者可以先自行写一写，不要看下面的答案：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;cstdio></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;cstring></span></span>\n<span class=\"token keyword\">int</span> n<span class=\"token punctuation\">,</span>m<span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> ans<span class=\"token punctuation\">[</span><span class=\"token number\">100002</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>f<span class=\"token punctuation\">[</span><span class=\"token number\">1002</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1002</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">char</span> s<span class=\"token punctuation\">[</span><span class=\"token number\">1002</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1002</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> r<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> c<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> z<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> lll<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>r<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span> <span class=\"token operator\">||</span> r<span class=\"token operator\">>=</span>n <span class=\"token operator\">||</span> c<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span> <span class=\"token operator\">||</span> c<span class=\"token operator\">>=</span>n <span class=\"token operator\">||</span> f<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">||</span> s<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">-</span><span class=\"token char\">'0'</span><span class=\"token operator\">!=</span>z<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    f<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>lll<span class=\"token punctuation\">;</span>\n    ans<span class=\"token punctuation\">[</span>lll<span class=\"token punctuation\">]</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>c<span class=\"token punctuation\">,</span><span class=\"token operator\">!</span>z<span class=\"token punctuation\">,</span>lll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>c<span class=\"token punctuation\">,</span><span class=\"token operator\">!</span>z<span class=\"token punctuation\">,</span>lll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span>c<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">!</span>z<span class=\"token punctuation\">,</span>lll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span>c<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">!</span>z<span class=\"token punctuation\">,</span>lll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d%d\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>n<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d%d\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>x<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        x<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n        y<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">-</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span> \n            ans<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>ans<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d\\n\"</span><span class=\"token punctuation\">,</span>ans<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>E</mi><mi>N</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">END\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"bfs基本概念\"><a class=\"markdownIt-Anchor\" href=\"#bfs基本概念\"></a> BFS基本概念</h2>\n<p><strong>广度优先算法</strong>（Breadth-First-Search），简称BFS，是一种图形搜索演算法，最糟糕的情况算法时间复杂度为O(V+E)。简单的说，BFS是从根节点开始，沿着树的宽度遍历树的节点，如果发现目标，则演算终止。</p>\n<h2 id=\"经典例题\"><a class=\"markdownIt-Anchor\" href=\"#经典例题\"></a> <strong>经典例题</strong></h2>\n<hr>\n<h3 id=\"1-填涂颜色\"><a class=\"markdownIt-Anchor\" href=\"#1-填涂颜色\"></a> 1. 填涂颜色</h3>\n<h4 id=\"题目描述\"><a class=\"markdownIt-Anchor\" href=\"#题目描述\"></a> 题目描述</h4>\n<p>由数字<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>组成的方阵中，有一任意形状闭合圈，闭合圈由数字<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>构成，围圈时只走上下左右<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>个方向。现要求把闭合圈内的所有空间都填写成<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>。例如：<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>6</mn><mo>×</mo><mn>6</mn></mrow><annotation encoding=\"application/x-tex\">6×6</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span></span></span></span>的方阵<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mi>n</mi><mo>=</mo><mn>6</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(n=6)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">6</span><span class=\"mclose\">)</span></span></span></span>，涂色前和涂色后的方阵如下：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n-----------\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span></code></pre>\n<h4 id=\"输入格式\"><a class=\"markdownIt-Anchor\" href=\"#输入格式\"></a> 输入格式</h4>\n<p>每组测试数据第一行一个整数<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>30</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">n(1≤n≤30)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>接下来<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>行，由<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>和<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>组成的<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n×n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>的方阵。</p>\n<p>方阵内只有一个闭合圈，圈内至少有一个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>。</p>\n<h4 id=\"输出格式\"><a class=\"markdownIt-Anchor\" href=\"#输出格式\"></a> 输出格式</h4>\n<p>已经填好数字<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>的完整方阵。</p>\n<h4 id=\"输入输出样例\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例\"></a> 输入输出样例</h4>\n<p><strong>输入 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">6</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span></code></pre>\n<p><strong>输出 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span></code></pre>\n<h4 id=\"说明提示\"><a class=\"markdownIt-Anchor\" href=\"#说明提示\"></a> 说明/提示</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>30</mn></mrow><annotation encoding=\"application/x-tex\">1≤n≤30</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span></span></span></span></p>\n<h4 id=\"答案解析\"><a class=\"markdownIt-Anchor\" href=\"#答案解析\"></a> 答案解析</h4>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> num<span class=\"token punctuation\">[</span><span class=\"token number\">40</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">40</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> c<span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">,</span>j<span class=\"token punctuation\">,</span>k<span class=\"token punctuation\">;</span>\n    cin<span class=\"token operator\">>></span>c<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cin<span class=\"token operator\">>></span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\tnum<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//先认为所有的0都应该被修改,并且真的把它修改成了2;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">//边角上的'2'其实本来不应该被修改的,那我们把他们改回去,改成0</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\t\t\tnum<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\t\n\t\t\tnum<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\t\t\tnum<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\t\t\tnum<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//然后来寻找与这些零相邻的'2',它们其实也是被改错了的</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>k<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>k<span class=\"token operator\">&lt;=</span><span class=\"token number\">100</span><span class=\"token punctuation\">;</span>k<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//广度优先搜索 阈值=100 (事实上不需要那么多)</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t\t    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    \t\t\t    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">||</span><span class=\"token operator\">!</span>num<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">||</span><span class=\"token operator\">!</span>num<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">||</span><span class=\"token operator\">!</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    \t\t\t\t    num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>c<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>num<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>当然，本题仍可以用DFS来做：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdio></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> n<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> x <span class=\"token operator\">&lt;=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">&lt;=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span> <span class=\"token operator\">||</span> a<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> \n        \t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">&#123;</span>\n        \ta<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> i<span class=\"token punctuation\">)</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> j<span class=\"token punctuation\">)</span>\n    \t\t<span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> i<span class=\"token punctuation\">)</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> j<span class=\"token punctuation\">)</span>\n    \t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> \n    \t\t\ta<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    \t\t<span class=\"token keyword\">else</span> \n    \t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> \n    \t\t\t\ta<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> i<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> j<span class=\"token punctuation\">)</span> \n    \t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d \"</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>注意：dfs在先搜索的时候应该搜索到矩阵的外面一圈<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mi mathvariant=\"normal\">，</mi><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(0， n + 1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> 否则的话就会出现错误！(边缘处被涂色)</p>\n<hr>\n<h3 id=\"01迷宫\"><a class=\"markdownIt-Anchor\" href=\"#01迷宫\"></a> 01迷宫</h3>\n<h4 id=\"题目描述-2\"><a class=\"markdownIt-Anchor\" href=\"#题目描述-2\"></a> 题目描述</h4>\n<p>有一个仅由数字<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>与<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>组成的<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n×n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>格迷宫。若你位于一格<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>上，那么你可以移动到相邻<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>格中的某一格<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>上，同样若你位于一格<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>上，那么你可以移动到相邻<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>格中的某一格<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>上。</p>\n<p>你的任务是：对于给定的迷宫，询问从某一格开始能移动到多少个格子（包含自身）。</p>\n<h4 id=\"输入格式-2\"><a class=\"markdownIt-Anchor\" href=\"#输入格式-2\"></a> 输入格式</h4>\n<p>第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>行为两个正整数<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo separator=\"true\">,</mo><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">n,m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>。</p>\n<p>下面<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>行，每行*<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>*个字符，字符只可能是<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>或者<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>，字符之间没有空格。</p>\n<p>接下来<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>行，每行<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>个用空格分隔的正整数<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">i,j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span>，对应了迷宫中第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>行第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05724em;\">j</span></span></span></span>列的一个格子，询问从这一格开始能移动到多少格。</p>\n<h4 id=\"输出格式-2\"><a class=\"markdownIt-Anchor\" href=\"#输出格式-2\"></a> 输出格式</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>行，对于每个询问输出相应答案。</p>\n<h4 id=\"输入输出样例-2\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例-2\"></a> 输入输出样例</h4>\n<p><strong>输入 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">2</span> <span class=\"token number\">2</span>\n01\n<span class=\"token number\">10</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">2</span> <span class=\"token number\">2</span></code></pre>\n<p><strong>输出 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">4</span>\n<span class=\"token number\">4</span></code></pre>\n<h4 id=\"说明提示-2\"><a class=\"markdownIt-Anchor\" href=\"#说明提示-2\"></a> 说明/提示</h4>\n<p>对于20%的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>≤</mo><mn>10</mn></mrow><annotation encoding=\"application/x-tex\">n≤10</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span></span>；</p>\n<p>对于40%的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>≤</mo><mn>50</mn></mrow><annotation encoding=\"application/x-tex\">n≤50</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">5</span><span class=\"mord\">0</span></span></span></span>；</p>\n<p>对于50%的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mo>≤</mo><mn>5</mn></mrow><annotation encoding=\"application/x-tex\">m≤5</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">5</span></span></span></span>；</p>\n<p>对于60%的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>∗</mo><mo>≤</mo><mn>100</mn><mo separator=\"true\">,</mo><mo>∗</mo><mi>m</mi><mo>≤</mo><mn>100</mn></mrow><annotation encoding=\"application/x-tex\">n*≤100,*m≤100</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord\">∗</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∗</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span>；</p>\n<p>对于100%的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>∗</mo><mo>≤</mo><mn>1000</mn><mo separator=\"true\">,</mo><mo>∗</mo><mi>m</mi><mo>≤</mo><mn>100000</mn></mrow><annotation encoding=\"application/x-tex\">n*≤1000,*m≤100000</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord\">∗</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∗</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span>。</p>\n<h4 id=\"答案解析-2\"><a class=\"markdownIt-Anchor\" href=\"#答案解析-2\"></a> 答案解析</h4>\n<p>BFS，70分代码：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;cstring></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">mg</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nbool map<span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nbool flag<span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nmg q<span class=\"token punctuation\">[</span><span class=\"token number\">1000001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> m<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\tcin<span class=\"token operator\">>></span>n<span class=\"token operator\">>></span>m<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">char</span> ch<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tcin<span class=\"token operator\">>></span>ch<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>ch<span class=\"token operator\">==</span><span class=\"token char\">'1'</span><span class=\"token punctuation\">)</span>\n\t\t\t\tmap<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">;</span>\n\t\tcin<span class=\"token operator\">>></span>x<span class=\"token operator\">>></span>y<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">int</span> dx<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> dy<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ans<span class=\"token punctuation\">,</span>f<span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">,</span>newx<span class=\"token punctuation\">,</span>newy<span class=\"token punctuation\">;</span>\n    ans<span class=\"token operator\">=</span>f<span class=\"token operator\">=</span>r<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">=</span>x<span class=\"token punctuation\">;</span>\n    q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">=</span>y<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">,</span>false<span class=\"token punctuation\">,</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    flag<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>f<span class=\"token operator\">&lt;=</span>r<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">4</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n    \t\tnewx<span class=\"token operator\">=</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">+</span>dx<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \t\tnewy<span class=\"token operator\">=</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">+</span>dy<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>newx<span class=\"token operator\">></span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> newx<span class=\"token operator\">&lt;=</span>n <span class=\"token operator\">&amp;&amp;</span> newy<span class=\"token operator\">></span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> newy<span class=\"token operator\">&lt;=</span>n <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>flag<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    \t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> map<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> map<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    \t\t\t<span class=\"token punctuation\">&#123;</span>\n    \t\t\t\tr<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    \t\t\t\tans<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    \t\t\t\tflag<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    \t\t\t\tq<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">=</span>newx<span class=\"token punctuation\">;</span>\n    \t\t\t\tq<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">=</span>newy<span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\tf<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\tcout<span class=\"token operator\">&lt;&lt;</span>ans<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">&#125;</span> </code></pre>\n<p>有三个点TEL，所以对代码进行一定时间优化，学名叫记忆化搜索，以时间换空间，优化如下：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;cstring></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">mg</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nbool map<span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nbool flag<span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nmg q<span class=\"token punctuation\">[</span><span class=\"token number\">5000001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> m<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\tcin<span class=\"token operator\">>></span>n<span class=\"token operator\">>></span>m<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">char</span> ch<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tcin<span class=\"token operator\">>></span>ch<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>ch<span class=\"token operator\">==</span><span class=\"token char\">'1'</span><span class=\"token punctuation\">)</span>\n\t\t\t\tmap<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">;</span>\n\t\tcin<span class=\"token operator\">>></span>x<span class=\"token operator\">>></span>y<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t\tcout<span class=\"token operator\">&lt;&lt;</span>a<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">int</span> dx<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> dy<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ans<span class=\"token punctuation\">,</span>f<span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">,</span>newx<span class=\"token punctuation\">,</span>newy<span class=\"token punctuation\">;</span>\n    ans<span class=\"token operator\">=</span>f<span class=\"token operator\">=</span>r<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">=</span>x<span class=\"token punctuation\">;</span>\n    q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">=</span>y<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">,</span>false<span class=\"token punctuation\">,</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    flag<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>f<span class=\"token operator\">&lt;=</span>r<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">4</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n    \t\tnewx<span class=\"token operator\">=</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">+</span>dx<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \t\tnewy<span class=\"token operator\">=</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">+</span>dy<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>newx<span class=\"token operator\">></span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> newx<span class=\"token operator\">&lt;=</span>n <span class=\"token operator\">&amp;&amp;</span> newy<span class=\"token operator\">></span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> newy<span class=\"token operator\">&lt;=</span>n <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>flag<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    \t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> map<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> map<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    \t\t\t<span class=\"token punctuation\">&#123;</span>\n    \t\t\t\tr<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    \t\t\t\tans<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    \t\t\t\tflag<span class=\"token punctuation\">[</span>newx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>newy<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    \t\t\t\tq<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">=</span>newx<span class=\"token punctuation\">;</span>\n    \t\t\t\tq<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">=</span>newy<span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\tf<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t\t\ta<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>ans<span class=\"token punctuation\">;</span>\n\tcout<span class=\"token operator\">&lt;&lt;</span>ans<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">&#125;</span> </code></pre>\n<p>当然，本题也可以用DFS来做，读者可以先自行写一写，不要看下面的答案：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;cstdio></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;cstring></span></span>\n<span class=\"token keyword\">int</span> n<span class=\"token punctuation\">,</span>m<span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> ans<span class=\"token punctuation\">[</span><span class=\"token number\">100002</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>f<span class=\"token punctuation\">[</span><span class=\"token number\">1002</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1002</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">char</span> s<span class=\"token punctuation\">[</span><span class=\"token number\">1002</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1002</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> r<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> c<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> z<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> lll<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>r<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span> <span class=\"token operator\">||</span> r<span class=\"token operator\">>=</span>n <span class=\"token operator\">||</span> c<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span> <span class=\"token operator\">||</span> c<span class=\"token operator\">>=</span>n <span class=\"token operator\">||</span> f<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">||</span> s<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">-</span><span class=\"token char\">'0'</span><span class=\"token operator\">!=</span>z<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    f<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>lll<span class=\"token punctuation\">;</span>\n    ans<span class=\"token punctuation\">[</span>lll<span class=\"token punctuation\">]</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>c<span class=\"token punctuation\">,</span><span class=\"token operator\">!</span>z<span class=\"token punctuation\">,</span>lll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>c<span class=\"token punctuation\">,</span><span class=\"token operator\">!</span>z<span class=\"token punctuation\">,</span>lll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span>c<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">!</span>z<span class=\"token punctuation\">,</span>lll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span>c<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">!</span>z<span class=\"token punctuation\">,</span>lll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d%d\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>n<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d%d\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>x<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        x<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n        y<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token operator\">-</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span> \n            ans<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>ans<span class=\"token punctuation\">[</span>f<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d\\n\"</span><span class=\"token punctuation\">,</span>ans<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>E</mi><mi>N</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">END\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span></p>\n"},{"title":"BM字符串匹配算法","date":"2022-03-27T06:55:51.000Z","author":"Tony","katex":true,"_content":"\n## 算法简介\n\nBM(Boyer-Moore)算法由Bob Boyer和J Strother Moore于1977年设计，目的在于高效的查找字符串中的的子串。该算法的执行时间是线性的$(O(N))$，且往往更优于KMP算法。与KMP算法一样的是，都是需要且只需要对目标字符串进行预处理，而非被搜索的字符串；与KMP有所不同的是，BM算法是从后向前查找匹配，先从关键字的最后一个字符开始向前对应。\n\n如果想了解KMP算法，请参看我的另一篇文章：\n\n## BM算法原理\n\nBM算法本质上只说明了两个规则：\n\n1. 坏字符规则\n2. 好后缀规则\n\n下面详细讲解一下这两个规则；在此之前我们约定，下文中提到的所有目标字符串（Key）统称为**substr**， 而需要被查找的字符串（较长的那个）统称为**str**。\n\n### 坏字符规则\n\n当substr中某个字符与str不匹配时，这个(str中的)字符就称为坏字符。找到坏字符后，substr就要向后移动，**移动的位数**$move\\_num=\\lambda_1-\\lambda_2$ ，其中$\\lambda_1$为**坏字符在substr中的位置**，$\\lambda_2$为**坏字符在substr中最后出现的位置**。如果substr中并没有坏字符，那么$\\lambda_2=-1$，也就是说，整体向右移动一个substr的长度。\n\n看到这里是不是很懵，没关系，我们来看一个例子：\n\n<img src=\"BM-algorithm/image-20220328004145309.png\" alt=\"image-20220328004145309\" style=\"zoom:50%;\" />\n\n首先从右向左查找字符，`e`和`d`是匹配的，到第三个元素`c`不匹配，因此`c`就是坏字符。找到了坏字符后我们就可以确定$\\lambda_1=2$(从0开始算起)；然后寻找坏字符`c`在substr中最后出现的位置，也就是是从右向左的第一个坏字符，我们得到$\\lambda_2=0$，因此我们应该向右移动两位，也就是将上下的两个`c`对齐的位置。\n\n### 好后缀规则\n\n当我们从后向前匹配时出现相同的字符串时（也就是说至少有一个字符是对应的），我们就称这个字符串以及该字符串的子串为好后缀$^{[1]}$。找到好后缀之后，substr就要向后移动，**移动的位数**$move\\_num=\\lambda_3-\\lambda_4$ ，其中$\\lambda_3$为**好后缀在substr中的位置**，$\\lambda_4$为**好后缀在substr中（上一次）最后出现的位置**。如果substr中再没有好后缀，那么$\\lambda_4=-1$，也就是说，整体向右移动一个substr的长度。\n\n我们发现，坏字符规则和好后缀规则的描述十分相似，如果你可以理解坏字符规则，那么好后缀规则也很容易理解，当然，需要注意的是每次判断时坏字符只有一个，好后缀却有很多。（好后缀的个数等于好后缀的长度）\n\n[1]: 这里解释一下，比如这个好后缀为abcd，那么bcd，cd，d也为好后缀。\n\n我们还是用一个例子来说明好字符规则：\n\n<img src=\"BM-algorithm/image-20220328005451919.png\" alt=\"image-20220328005451919\" style=\"zoom:51%;\" />\n\n根据好后缀规则，我们首先很容易找到最长的好后缀是`de`，那么`e`也是好后缀（因为`e`是好后缀的后缀子串）。那么下面我们要做的事情就是在substr中查找最长的能跟这些好后缀（`e,de`)匹配的子串。首先我们查找`e`这个好后缀，发现`substr[2]`与之匹配；然后查找好后缀`de`，发现`substr[1]`与之匹配。那么我们选择最长的那个子串，也就是`substr[1]`，因此$\\lambda_3=3,\\lambda_4=1，move\\_num=2$，即向右移动两位。\n\n\n\n## BM的实现\n\n### 建立坏字符的hash table\n\n为了节省时间，我们将所有待匹配的字符都建立一个映射，这样在找到坏字符的时候就可以以$O(1)$的时间知道substr应该向右移动多少。其实就是用一个最简单的hash table来寻找$\\lambda_2$的值。\n\n我们这里为了简单起见，只适配了256个ASCII字符，如果想加入中文，那么这个hash table将变得大一些。按照规则，如果substr没有出现的字符一律设置成$\\lambda_2=-1$，因此我们将hash table初始化成$-1$。\n\n```c\nvoid generate_bad_char_table(string str)\n{\n    bad_char_table = new int [256];\n    for(int i=0;i<256;i++)\n        bad_char_table[i]=-1;\n    for(int i=0;i<str.length();i++)\n    {\n        int ASCII=str[i];\n        bad_char_table[ASCII]=i;\n    }\n}\n```\n\n### 好后缀的预处理\n\n根据好后缀规则，我们完全可以暴力求解$\\lambda _3$和$\\lambda _4$的值，但是这样的效率显然不是最佳的，如果substr的长度比较大，那么每次判断好后缀的右移长度将浪费很多不必要的时间。因此我们可以对substr的所有好后缀进行预处理。建立两个长度与substr相等的数组，分别为`suffix[]`和`prefix[]`**，前者记录了substr中与好后缀匹配的最后一个字串的位置**（即$\\lambda _4$)**，后者记录了与好后缀匹配的前缀子串**（不过目前鄙人认为没啥用）。\n\n听起来很懵，看一个例子：\n\n<img src=\"BM-algorithm/image-20220328173308025.png\" alt=\"image-20220328173308025\" style=\"zoom:50%;\" />\n\n这样我们就可以知道所有好后缀的$\\lambda _4$的值，当我们找到str中的好后缀（也即$\\lambda_3$），就可以用$O(1)$的时间知道向右移动的长度。\n\n```c\nvoid generate_suffix_prefix(string str)\n{\n    int len=str.length();\n    suffix= new int [len];\n    prefix = new bool [len];\n    for(int i=0;i<len;i++)\n    {\n        prefix[i]= false;\n        suffix[i]= -1;\n    }\n    for(int i=0;i<len-1;i++)\n    {\n        int j=i;\n        int k=0;\n        while(j>=0 && str[j]==str[len-1-k])//inverse search\n        {\n            j--;\n            k++;\n            suffix[k]=j+1;\n        }\n        if(j==-1)//如果找到了开头\n            prefix[k]=true;\n    }\n}\n```\n\n\n\n## 完整代码\n\n```c\n#include <iostream>\n#include <string>\n#include <algorithm>\nusing namespace std;\n\nint* bad_char_table;\nint* suffix;\nbool* prefix;\nint move_by_GS(int ptr,int str_len);//判断好后缀移动距离\nint BM(string str, string substr);//BM实现\nvoid generate_bad_char_table(string str);//建立坏字符hash table\nvoid generate_suffix_prefix(string str);//建立好后缀数组\n\nint main()\n{\n    string str,substr;\n    str=\"abcdefgagabgag\";\n    substr=\"abg\";\n    cout<<BM(str,substr)<<endl;\n    return 0;\n}\n\nvoid generate_bad_char_table(string str)\n{\n    bad_char_table = new int [256];\n    for(int i=0;i<256;i++)\n        bad_char_table[i]=-1;\n    for(int i=0;i<str.length();i++)\n    {\n        int ASCII=str[i];\n        bad_char_table[ASCII]=i;\n    }\n}\n\nvoid generate_suffix_prefix(string str)\n{\n    int len=str.length();\n    suffix= new int [len];\n    prefix = new bool [len];\n    for(int i=0;i<len;i++)\n    {\n        prefix[i]= false;\n        suffix[i]= -1;\n    }\n    for(int i=0;i<len-1;i++)\n    {\n        int j=i;\n        int k=0;\n        while(j>=0 && str[j]==str[len-1-k])//inverse search\n        {\n            j--;\n            k++;\n            suffix[k]=j+1;\n        }\n        if(j==-1)//如果找到了开头\n            prefix[k]=true;\n    }\n}\n\nint move_by_GS(int ptr, int str_len)\n{\n    int len=str_len-1-ptr;\n    if(suffix[len]!= -1)\n        return ptr-suffix[len]+1;\n    for(int i=ptr+2;i<str_len;i++)\n        if(prefix[str_len-i])\n            return i;\n    return str_len;\n}\n\nint BM(string str, string substr)\n{\n    generate_bad_char_table(substr);\n    generate_suffix_prefix(substr);\n    int move_step,bad_char;\n    for(int i=0;i<str.length()-substr.length()+1;i+=move_step)//从头到尾遍历\n    {\n        for(int j=substr.length()-1;j>=0;j--)//从后网线查找\n        {\n            if(str[i+j]!=substr[j])//找到坏字符\n            {\n                bad_char=str[i+j];\n                move_step=j-bad_char_table[bad_char];\n                break;\n            }\n            if(j==0)//找到substr\n            {\n                delete [] bad_char_table;\n                delete [] suffix;\n                delete [] prefix;\n                return i;\n            }\n            if(j<str.length()-1)//找到好后缀\n                move_step=max(move_step, move_by_GS(j, str.length()));\n        }\n    }\n    delete [] bad_char_table;\n    delete [] suffix;\n    delete [] prefix;\n    return -1;\n}\n\n```\n\n","source":"_posts/BM-algorithm.md","raw":"---\ntitle: BM字符串匹配算法\ndate: 2022-03-27 14:55:51\ntags:\n\t- algorithm\n\t- BM\n\t- search\ncategories:\n\t- algorithm\nauthor: Tony\nkatex: true\n---\n\n## 算法简介\n\nBM(Boyer-Moore)算法由Bob Boyer和J Strother Moore于1977年设计，目的在于高效的查找字符串中的的子串。该算法的执行时间是线性的$(O(N))$，且往往更优于KMP算法。与KMP算法一样的是，都是需要且只需要对目标字符串进行预处理，而非被搜索的字符串；与KMP有所不同的是，BM算法是从后向前查找匹配，先从关键字的最后一个字符开始向前对应。\n\n如果想了解KMP算法，请参看我的另一篇文章：\n\n## BM算法原理\n\nBM算法本质上只说明了两个规则：\n\n1. 坏字符规则\n2. 好后缀规则\n\n下面详细讲解一下这两个规则；在此之前我们约定，下文中提到的所有目标字符串（Key）统称为**substr**， 而需要被查找的字符串（较长的那个）统称为**str**。\n\n### 坏字符规则\n\n当substr中某个字符与str不匹配时，这个(str中的)字符就称为坏字符。找到坏字符后，substr就要向后移动，**移动的位数**$move\\_num=\\lambda_1-\\lambda_2$ ，其中$\\lambda_1$为**坏字符在substr中的位置**，$\\lambda_2$为**坏字符在substr中最后出现的位置**。如果substr中并没有坏字符，那么$\\lambda_2=-1$，也就是说，整体向右移动一个substr的长度。\n\n看到这里是不是很懵，没关系，我们来看一个例子：\n\n<img src=\"BM-algorithm/image-20220328004145309.png\" alt=\"image-20220328004145309\" style=\"zoom:50%;\" />\n\n首先从右向左查找字符，`e`和`d`是匹配的，到第三个元素`c`不匹配，因此`c`就是坏字符。找到了坏字符后我们就可以确定$\\lambda_1=2$(从0开始算起)；然后寻找坏字符`c`在substr中最后出现的位置，也就是是从右向左的第一个坏字符，我们得到$\\lambda_2=0$，因此我们应该向右移动两位，也就是将上下的两个`c`对齐的位置。\n\n### 好后缀规则\n\n当我们从后向前匹配时出现相同的字符串时（也就是说至少有一个字符是对应的），我们就称这个字符串以及该字符串的子串为好后缀$^{[1]}$。找到好后缀之后，substr就要向后移动，**移动的位数**$move\\_num=\\lambda_3-\\lambda_4$ ，其中$\\lambda_3$为**好后缀在substr中的位置**，$\\lambda_4$为**好后缀在substr中（上一次）最后出现的位置**。如果substr中再没有好后缀，那么$\\lambda_4=-1$，也就是说，整体向右移动一个substr的长度。\n\n我们发现，坏字符规则和好后缀规则的描述十分相似，如果你可以理解坏字符规则，那么好后缀规则也很容易理解，当然，需要注意的是每次判断时坏字符只有一个，好后缀却有很多。（好后缀的个数等于好后缀的长度）\n\n[1]: 这里解释一下，比如这个好后缀为abcd，那么bcd，cd，d也为好后缀。\n\n我们还是用一个例子来说明好字符规则：\n\n<img src=\"BM-algorithm/image-20220328005451919.png\" alt=\"image-20220328005451919\" style=\"zoom:51%;\" />\n\n根据好后缀规则，我们首先很容易找到最长的好后缀是`de`，那么`e`也是好后缀（因为`e`是好后缀的后缀子串）。那么下面我们要做的事情就是在substr中查找最长的能跟这些好后缀（`e,de`)匹配的子串。首先我们查找`e`这个好后缀，发现`substr[2]`与之匹配；然后查找好后缀`de`，发现`substr[1]`与之匹配。那么我们选择最长的那个子串，也就是`substr[1]`，因此$\\lambda_3=3,\\lambda_4=1，move\\_num=2$，即向右移动两位。\n\n\n\n## BM的实现\n\n### 建立坏字符的hash table\n\n为了节省时间，我们将所有待匹配的字符都建立一个映射，这样在找到坏字符的时候就可以以$O(1)$的时间知道substr应该向右移动多少。其实就是用一个最简单的hash table来寻找$\\lambda_2$的值。\n\n我们这里为了简单起见，只适配了256个ASCII字符，如果想加入中文，那么这个hash table将变得大一些。按照规则，如果substr没有出现的字符一律设置成$\\lambda_2=-1$，因此我们将hash table初始化成$-1$。\n\n```c\nvoid generate_bad_char_table(string str)\n{\n    bad_char_table = new int [256];\n    for(int i=0;i<256;i++)\n        bad_char_table[i]=-1;\n    for(int i=0;i<str.length();i++)\n    {\n        int ASCII=str[i];\n        bad_char_table[ASCII]=i;\n    }\n}\n```\n\n### 好后缀的预处理\n\n根据好后缀规则，我们完全可以暴力求解$\\lambda _3$和$\\lambda _4$的值，但是这样的效率显然不是最佳的，如果substr的长度比较大，那么每次判断好后缀的右移长度将浪费很多不必要的时间。因此我们可以对substr的所有好后缀进行预处理。建立两个长度与substr相等的数组，分别为`suffix[]`和`prefix[]`**，前者记录了substr中与好后缀匹配的最后一个字串的位置**（即$\\lambda _4$)**，后者记录了与好后缀匹配的前缀子串**（不过目前鄙人认为没啥用）。\n\n听起来很懵，看一个例子：\n\n<img src=\"BM-algorithm/image-20220328173308025.png\" alt=\"image-20220328173308025\" style=\"zoom:50%;\" />\n\n这样我们就可以知道所有好后缀的$\\lambda _4$的值，当我们找到str中的好后缀（也即$\\lambda_3$），就可以用$O(1)$的时间知道向右移动的长度。\n\n```c\nvoid generate_suffix_prefix(string str)\n{\n    int len=str.length();\n    suffix= new int [len];\n    prefix = new bool [len];\n    for(int i=0;i<len;i++)\n    {\n        prefix[i]= false;\n        suffix[i]= -1;\n    }\n    for(int i=0;i<len-1;i++)\n    {\n        int j=i;\n        int k=0;\n        while(j>=0 && str[j]==str[len-1-k])//inverse search\n        {\n            j--;\n            k++;\n            suffix[k]=j+1;\n        }\n        if(j==-1)//如果找到了开头\n            prefix[k]=true;\n    }\n}\n```\n\n\n\n## 完整代码\n\n```c\n#include <iostream>\n#include <string>\n#include <algorithm>\nusing namespace std;\n\nint* bad_char_table;\nint* suffix;\nbool* prefix;\nint move_by_GS(int ptr,int str_len);//判断好后缀移动距离\nint BM(string str, string substr);//BM实现\nvoid generate_bad_char_table(string str);//建立坏字符hash table\nvoid generate_suffix_prefix(string str);//建立好后缀数组\n\nint main()\n{\n    string str,substr;\n    str=\"abcdefgagabgag\";\n    substr=\"abg\";\n    cout<<BM(str,substr)<<endl;\n    return 0;\n}\n\nvoid generate_bad_char_table(string str)\n{\n    bad_char_table = new int [256];\n    for(int i=0;i<256;i++)\n        bad_char_table[i]=-1;\n    for(int i=0;i<str.length();i++)\n    {\n        int ASCII=str[i];\n        bad_char_table[ASCII]=i;\n    }\n}\n\nvoid generate_suffix_prefix(string str)\n{\n    int len=str.length();\n    suffix= new int [len];\n    prefix = new bool [len];\n    for(int i=0;i<len;i++)\n    {\n        prefix[i]= false;\n        suffix[i]= -1;\n    }\n    for(int i=0;i<len-1;i++)\n    {\n        int j=i;\n        int k=0;\n        while(j>=0 && str[j]==str[len-1-k])//inverse search\n        {\n            j--;\n            k++;\n            suffix[k]=j+1;\n        }\n        if(j==-1)//如果找到了开头\n            prefix[k]=true;\n    }\n}\n\nint move_by_GS(int ptr, int str_len)\n{\n    int len=str_len-1-ptr;\n    if(suffix[len]!= -1)\n        return ptr-suffix[len]+1;\n    for(int i=ptr+2;i<str_len;i++)\n        if(prefix[str_len-i])\n            return i;\n    return str_len;\n}\n\nint BM(string str, string substr)\n{\n    generate_bad_char_table(substr);\n    generate_suffix_prefix(substr);\n    int move_step,bad_char;\n    for(int i=0;i<str.length()-substr.length()+1;i+=move_step)//从头到尾遍历\n    {\n        for(int j=substr.length()-1;j>=0;j--)//从后网线查找\n        {\n            if(str[i+j]!=substr[j])//找到坏字符\n            {\n                bad_char=str[i+j];\n                move_step=j-bad_char_table[bad_char];\n                break;\n            }\n            if(j==0)//找到substr\n            {\n                delete [] bad_char_table;\n                delete [] suffix;\n                delete [] prefix;\n                return i;\n            }\n            if(j<str.length()-1)//找到好后缀\n                move_step=max(move_step, move_by_GS(j, str.length()));\n        }\n    }\n    delete [] bad_char_table;\n    delete [] suffix;\n    delete [] prefix;\n    return -1;\n}\n\n```\n\n","slug":"BM-algorithm","published":1,"updated":"2022-03-28T09:37:31.496Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcm000u1gzu5yohbljy","content":"<h2 id=\"算法简介\"><a class=\"markdownIt-Anchor\" href=\"#算法简介\"></a> 算法简介</h2>\n<p>BM(Boyer-Moore)算法由Bob Boyer和J Strother Moore于1977年设计，目的在于高效的查找字符串中的的子串。该算法的执行时间是线性的<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(O(N))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span>，且往往更优于KMP算法。与KMP算法一样的是，都是需要且只需要对目标字符串进行预处理，而非被搜索的字符串；与KMP有所不同的是，BM算法是从后向前查找匹配，先从关键字的最后一个字符开始向前对应。</p>\n<p>如果想了解KMP算法，请参看我的另一篇文章：</p>\n<h2 id=\"bm算法原理\"><a class=\"markdownIt-Anchor\" href=\"#bm算法原理\"></a> BM算法原理</h2>\n<p>BM算法本质上只说明了两个规则：</p>\n<ol>\n<li>坏字符规则</li>\n<li>好后缀规则</li>\n</ol>\n<p>下面详细讲解一下这两个规则；在此之前我们约定，下文中提到的所有目标字符串（Key）统称为<strong>substr</strong>， 而需要被查找的字符串（较长的那个）统称为<strong>str</strong>。</p>\n<h3 id=\"坏字符规则\"><a class=\"markdownIt-Anchor\" href=\"#坏字符规则\"></a> 坏字符规则</h3>\n<p>当substr中某个字符与str不匹配时，这个(str中的)字符就称为坏字符。找到坏字符后，substr就要向后移动，<strong>移动的位数</strong><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mi>o</mi><mi>v</mi><mi>e</mi><mi mathvariant=\"normal\">_</mi><mi>n</mi><mi>u</mi><mi>m</mi><mo>=</mo><msub><mi>λ</mi><mn>1</mn></msub><mo>−</mo><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">move\\_num=\\lambda_1-\\lambda_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74056em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，其中<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>为<strong>坏字符在substr中的位置</strong>，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>为<strong>坏字符在substr中最后出现的位置</strong>。如果substr中并没有坏字符，那么<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_2=-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>，也就是说，整体向右移动一个substr的长度。</p>\n<p>看到这里是不是很懵，没关系，我们来看一个例子：</p>\n<img src=\"/2022/03/27/BM-algorithm/image-20220328004145309.png\" alt=\"image-20220328004145309\" style=\"zoom:50%;\" loading=\"lazy\">\n<p>首先从右向左查找字符，<code>e</code>和<code>d</code>是匹配的，到第三个元素<code>c</code>不匹配，因此<code>c</code>就是坏字符。找到了坏字符后我们就可以确定<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_1=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>(从0开始算起)；然后寻找坏字符<code>c</code>在substr中最后出现的位置，也就是是从右向左的第一个坏字符，我们得到<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_2=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>，因此我们应该向右移动两位，也就是将上下的两个<code>c</code>对齐的位置。</p>\n<h3 id=\"好后缀规则\"><a class=\"markdownIt-Anchor\" href=\"#好后缀规则\"></a> 好后缀规则</h3>\n<p>当我们从后向前匹配时出现相同的字符串时（也就是说至少有一个字符是对应的），我们就称这个字符串以及该字符串的子串为好后缀<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mrow></mrow><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">^{[1]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span>。找到好后缀之后，substr就要向后移动，<strong>移动的位数</strong><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mi>o</mi><mi>v</mi><mi>e</mi><mi mathvariant=\"normal\">_</mi><mi>n</mi><mi>u</mi><mi>m</mi><mo>=</mo><msub><mi>λ</mi><mn>3</mn></msub><mo>−</mo><msub><mi>λ</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">move\\_num=\\lambda_3-\\lambda_4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74056em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，其中<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>为<strong>好后缀在substr中的位置</strong>，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>为<strong>好后缀在substr中（上一次）最后出现的位置</strong>。如果substr中再没有好后缀，那么<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>4</mn></msub><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_4=-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>，也就是说，整体向右移动一个substr的长度。</p>\n<p>我们发现，坏字符规则和好后缀规则的描述十分相似，如果你可以理解坏字符规则，那么好后缀规则也很容易理解，当然，需要注意的是每次判断时坏字符只有一个，好后缀却有很多。（好后缀的个数等于好后缀的长度）</p>\n<p>我们还是用一个例子来说明好字符规则：</p>\n<img src=\"/2022/03/27/BM-algorithm/image-20220328005451919.png\" alt=\"image-20220328005451919\" style=\"zoom:51%;\" loading=\"lazy\">\n<p>根据好后缀规则，我们首先很容易找到最长的好后缀是<code>de</code>，那么<code>e</code>也是好后缀（因为<code>e</code>是好后缀的后缀子串）。那么下面我们要做的事情就是在substr中查找最长的能跟这些好后缀（<code>e,de</code>)匹配的子串。首先我们查找<code>e</code>这个好后缀，发现<code>substr[2]</code>与之匹配；然后查找好后缀<code>de</code>，发现<code>substr[1]</code>与之匹配。那么我们选择最长的那个子串，也就是<code>substr[1]</code>，因此<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>3</mn></msub><mo>=</mo><mn>3</mn><mo separator=\"true\">,</mo><msub><mi>λ</mi><mn>4</mn></msub><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">，</mi><mi>m</mi><mi>o</mi><mi>v</mi><mi>e</mi><mi mathvariant=\"normal\">_</mi><mi>n</mi><mi>u</mi><mi>m</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_3=3,\\lambda_4=1，move\\_num=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.95444em;vertical-align:-0.31em;\"></span><span class=\"mord\">1</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>，即向右移动两位。</p>\n<h2 id=\"bm的实现\"><a class=\"markdownIt-Anchor\" href=\"#bm的实现\"></a> BM的实现</h2>\n<h3 id=\"建立坏字符的hash-table\"><a class=\"markdownIt-Anchor\" href=\"#建立坏字符的hash-table\"></a> 建立坏字符的hash table</h3>\n<p>为了节省时间，我们将所有待匹配的字符都建立一个映射，这样在找到坏字符的时候就可以以<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>的时间知道substr应该向右移动多少。其实就是用一个最简单的hash table来寻找<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>的值。</p>\n<p>我们这里为了简单起见，只适配了256个ASCII字符，如果想加入中文，那么这个hash table将变得大一些。按照规则，如果substr没有出现的字符一律设置成<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_2=-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>，因此我们将hash table初始化成<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>。</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">generate_bad_char_table</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    bad_char_table <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span> <span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">256</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        bad_char_table<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> ASCII<span class=\"token operator\">=</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        bad_char_table<span class=\"token punctuation\">[</span>ASCII<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"好后缀的预处理\"><a class=\"markdownIt-Anchor\" href=\"#好后缀的预处理\"></a> 好后缀的预处理</h3>\n<p>根据好后缀规则，我们完全可以暴力求解<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda _3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>和<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda _4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>的值，但是这样的效率显然不是最佳的，如果substr的长度比较大，那么每次判断好后缀的右移长度将浪费很多不必要的时间。因此我们可以对substr的所有好后缀进行预处理。建立两个长度与substr相等的数组，分别为<code>suffix[]</code>和<code>prefix[]</code><strong>，前者记录了substr中与好后缀匹配的最后一个字串的位置</strong>（即<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda _4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>)<strong>，后者记录了与好后缀匹配的前缀子串</strong>（不过目前鄙人认为没啥用）。</p>\n<p>听起来很懵，看一个例子：</p>\n<img src=\"/2022/03/27/BM-algorithm/image-20220328173308025.png\" alt=\"image-20220328173308025\" style=\"zoom:50%;\" loading=\"lazy\">\n<p>这样我们就可以知道所有好后缀的<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda _4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>的值，当我们找到str中的好后缀（也即<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>），就可以用<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>的时间知道向右移动的长度。</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">generate_suffix_prefix</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    suffix<span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span> <span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    prefix <span class=\"token operator\">=</span> new bool <span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        prefix<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n        suffix<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span>i<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> k<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">>=</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> str<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>str<span class=\"token punctuation\">[</span>len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//inverse search</span>\n        <span class=\"token punctuation\">&#123;</span>\n            j<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n            k<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            suffix<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">==</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//如果找到了开头</span>\n            prefix<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"完整代码\"><a class=\"markdownIt-Anchor\" href=\"#完整代码\"></a> 完整代码</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;algorithm></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> bad_char_table<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> suffix<span class=\"token punctuation\">;</span>\nbool<span class=\"token operator\">*</span> prefix<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">move_by_GS</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> ptr<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> str_len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//判断好后缀移动距离</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">BM</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">,</span> string substr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//BM实现</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">generate_bad_char_table</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//建立坏字符hash table</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">generate_suffix_prefix</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//建立好后缀数组</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    string str<span class=\"token punctuation\">,</span>substr<span class=\"token punctuation\">;</span>\n    str<span class=\"token operator\">=</span><span class=\"token string\">\"abcdefgagabgag\"</span><span class=\"token punctuation\">;</span>\n    substr<span class=\"token operator\">=</span><span class=\"token string\">\"abg\"</span><span class=\"token punctuation\">;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token function\">BM</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span>substr<span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">generate_bad_char_table</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    bad_char_table <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span> <span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">256</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        bad_char_table<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> ASCII<span class=\"token operator\">=</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        bad_char_table<span class=\"token punctuation\">[</span>ASCII<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">generate_suffix_prefix</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    suffix<span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span> <span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    prefix <span class=\"token operator\">=</span> new bool <span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        prefix<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n        suffix<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span>i<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> k<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">>=</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> str<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>str<span class=\"token punctuation\">[</span>len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//inverse search</span>\n        <span class=\"token punctuation\">&#123;</span>\n            j<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n            k<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            suffix<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">==</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//如果找到了开头</span>\n            prefix<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">move_by_GS</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> ptr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> str_len<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>str_len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>ptr<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>suffix<span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> ptr<span class=\"token operator\">-</span>suffix<span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span>ptr<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>str_len<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>prefix<span class=\"token punctuation\">[</span>str_len<span class=\"token operator\">-</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> str_len<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">BM</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">,</span> string substr<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">generate_bad_char_table</span><span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">generate_suffix_prefix</span><span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> move_step<span class=\"token punctuation\">,</span>bad_char<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span>substr<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">+=</span>move_step<span class=\"token punctuation\">)</span><span class=\"token comment\">//从头到尾遍历</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span>substr<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">>=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//从后网线查找</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span>substr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//找到坏字符</span>\n            <span class=\"token punctuation\">&#123;</span>\n                bad_char<span class=\"token operator\">=</span>str<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                move_step<span class=\"token operator\">=</span>j<span class=\"token operator\">-</span>bad_char_table<span class=\"token punctuation\">[</span>bad_char<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//找到substr</span>\n            <span class=\"token punctuation\">&#123;</span>\n                delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> bad_char_table<span class=\"token punctuation\">;</span>\n                delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> suffix<span class=\"token punctuation\">;</span>\n                delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> prefix<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> i<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">&lt;</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//找到好后缀</span>\n                move_step<span class=\"token operator\">=</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>move_step<span class=\"token punctuation\">,</span> <span class=\"token function\">move_by_GS</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> bad_char_table<span class=\"token punctuation\">;</span>\n    delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> suffix<span class=\"token punctuation\">;</span>\n    delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> prefix<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n</code></pre>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"算法简介\"><a class=\"markdownIt-Anchor\" href=\"#算法简介\"></a> 算法简介</h2>\n<p>BM(Boyer-Moore)算法由Bob Boyer和J Strother Moore于1977年设计，目的在于高效的查找字符串中的的子串。该算法的执行时间是线性的<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(O(N))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span>，且往往更优于KMP算法。与KMP算法一样的是，都是需要且只需要对目标字符串进行预处理，而非被搜索的字符串；与KMP有所不同的是，BM算法是从后向前查找匹配，先从关键字的最后一个字符开始向前对应。</p>\n<p>如果想了解KMP算法，请参看我的另一篇文章：</p>\n<h2 id=\"bm算法原理\"><a class=\"markdownIt-Anchor\" href=\"#bm算法原理\"></a> BM算法原理</h2>\n<p>BM算法本质上只说明了两个规则：</p>\n<ol>\n<li>坏字符规则</li>\n<li>好后缀规则</li>\n</ol>\n<p>下面详细讲解一下这两个规则；在此之前我们约定，下文中提到的所有目标字符串（Key）统称为<strong>substr</strong>， 而需要被查找的字符串（较长的那个）统称为<strong>str</strong>。</p>\n<h3 id=\"坏字符规则\"><a class=\"markdownIt-Anchor\" href=\"#坏字符规则\"></a> 坏字符规则</h3>\n<p>当substr中某个字符与str不匹配时，这个(str中的)字符就称为坏字符。找到坏字符后，substr就要向后移动，<strong>移动的位数</strong><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mi>o</mi><mi>v</mi><mi>e</mi><mi mathvariant=\"normal\">_</mi><mi>n</mi><mi>u</mi><mi>m</mi><mo>=</mo><msub><mi>λ</mi><mn>1</mn></msub><mo>−</mo><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">move\\_num=\\lambda_1-\\lambda_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74056em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，其中<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>为<strong>坏字符在substr中的位置</strong>，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>为<strong>坏字符在substr中最后出现的位置</strong>。如果substr中并没有坏字符，那么<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_2=-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>，也就是说，整体向右移动一个substr的长度。</p>\n<p>看到这里是不是很懵，没关系，我们来看一个例子：</p>\n<img src=\"/2022/03/27/BM-algorithm/image-20220328004145309.png\" alt=\"image-20220328004145309\" style=\"zoom:50%;\">\n<p>首先从右向左查找字符，<code>e</code>和<code>d</code>是匹配的，到第三个元素<code>c</code>不匹配，因此<code>c</code>就是坏字符。找到了坏字符后我们就可以确定<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_1=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>(从0开始算起)；然后寻找坏字符<code>c</code>在substr中最后出现的位置，也就是是从右向左的第一个坏字符，我们得到<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_2=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>，因此我们应该向右移动两位，也就是将上下的两个<code>c</code>对齐的位置。</p>\n<h3 id=\"好后缀规则\"><a class=\"markdownIt-Anchor\" href=\"#好后缀规则\"></a> 好后缀规则</h3>\n<p>当我们从后向前匹配时出现相同的字符串时（也就是说至少有一个字符是对应的），我们就称这个字符串以及该字符串的子串为好后缀<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mrow></mrow><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">^{[1]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span>。找到好后缀之后，substr就要向后移动，<strong>移动的位数</strong><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mi>o</mi><mi>v</mi><mi>e</mi><mi mathvariant=\"normal\">_</mi><mi>n</mi><mi>u</mi><mi>m</mi><mo>=</mo><msub><mi>λ</mi><mn>3</mn></msub><mo>−</mo><msub><mi>λ</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">move\\_num=\\lambda_3-\\lambda_4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74056em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ，其中<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>为<strong>好后缀在substr中的位置</strong>，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>为<strong>好后缀在substr中（上一次）最后出现的位置</strong>。如果substr中再没有好后缀，那么<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>4</mn></msub><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_4=-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>，也就是说，整体向右移动一个substr的长度。</p>\n<p>我们发现，坏字符规则和好后缀规则的描述十分相似，如果你可以理解坏字符规则，那么好后缀规则也很容易理解，当然，需要注意的是每次判断时坏字符只有一个，好后缀却有很多。（好后缀的个数等于好后缀的长度）</p>\n<p>我们还是用一个例子来说明好字符规则：</p>\n<img src=\"/2022/03/27/BM-algorithm/image-20220328005451919.png\" alt=\"image-20220328005451919\" style=\"zoom:51%;\">\n<p>根据好后缀规则，我们首先很容易找到最长的好后缀是<code>de</code>，那么<code>e</code>也是好后缀（因为<code>e</code>是好后缀的后缀子串）。那么下面我们要做的事情就是在substr中查找最长的能跟这些好后缀（<code>e,de</code>)匹配的子串。首先我们查找<code>e</code>这个好后缀，发现<code>substr[2]</code>与之匹配；然后查找好后缀<code>de</code>，发现<code>substr[1]</code>与之匹配。那么我们选择最长的那个子串，也就是<code>substr[1]</code>，因此<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>3</mn></msub><mo>=</mo><mn>3</mn><mo separator=\"true\">,</mo><msub><mi>λ</mi><mn>4</mn></msub><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">，</mi><mi>m</mi><mi>o</mi><mi>v</mi><mi>e</mi><mi mathvariant=\"normal\">_</mi><mi>n</mi><mi>u</mi><mi>m</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_3=3,\\lambda_4=1，move\\_num=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.95444em;vertical-align:-0.31em;\"></span><span class=\"mord\">1</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">e</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>，即向右移动两位。</p>\n<h2 id=\"bm的实现\"><a class=\"markdownIt-Anchor\" href=\"#bm的实现\"></a> BM的实现</h2>\n<h3 id=\"建立坏字符的hash-table\"><a class=\"markdownIt-Anchor\" href=\"#建立坏字符的hash-table\"></a> 建立坏字符的hash table</h3>\n<p>为了节省时间，我们将所有待匹配的字符都建立一个映射，这样在找到坏字符的时候就可以以<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>的时间知道substr应该向右移动多少。其实就是用一个最简单的hash table来寻找<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>的值。</p>\n<p>我们这里为了简单起见，只适配了256个ASCII字符，如果想加入中文，那么这个hash table将变得大一些。按照规则，如果substr没有出现的字符一律设置成<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_2=-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>，因此我们将hash table初始化成<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>。</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">generate_bad_char_table</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    bad_char_table <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span> <span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">256</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        bad_char_table<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> ASCII<span class=\"token operator\">=</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        bad_char_table<span class=\"token punctuation\">[</span>ASCII<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"好后缀的预处理\"><a class=\"markdownIt-Anchor\" href=\"#好后缀的预处理\"></a> 好后缀的预处理</h3>\n<p>根据好后缀规则，我们完全可以暴力求解<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda _3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>和<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda _4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>的值，但是这样的效率显然不是最佳的，如果substr的长度比较大，那么每次判断好后缀的右移长度将浪费很多不必要的时间。因此我们可以对substr的所有好后缀进行预处理。建立两个长度与substr相等的数组，分别为<code>suffix[]</code>和<code>prefix[]</code><strong>，前者记录了substr中与好后缀匹配的最后一个字串的位置</strong>（即<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda _4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>)<strong>，后者记录了与好后缀匹配的前缀子串</strong>（不过目前鄙人认为没啥用）。</p>\n<p>听起来很懵，看一个例子：</p>\n<img src=\"/2022/03/27/BM-algorithm/image-20220328173308025.png\" alt=\"image-20220328173308025\" style=\"zoom:50%;\">\n<p>这样我们就可以知道所有好后缀的<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda _4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>的值，当我们找到str中的好后缀（也即<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>λ</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>），就可以用<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>的时间知道向右移动的长度。</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">generate_suffix_prefix</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    suffix<span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span> <span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    prefix <span class=\"token operator\">=</span> new bool <span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        prefix<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n        suffix<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span>i<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> k<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">>=</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> str<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>str<span class=\"token punctuation\">[</span>len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//inverse search</span>\n        <span class=\"token punctuation\">&#123;</span>\n            j<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n            k<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            suffix<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">==</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//如果找到了开头</span>\n            prefix<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"完整代码\"><a class=\"markdownIt-Anchor\" href=\"#完整代码\"></a> 完整代码</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;algorithm></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> bad_char_table<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> suffix<span class=\"token punctuation\">;</span>\nbool<span class=\"token operator\">*</span> prefix<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">move_by_GS</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> ptr<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> str_len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//判断好后缀移动距离</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">BM</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">,</span> string substr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//BM实现</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">generate_bad_char_table</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//建立坏字符hash table</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">generate_suffix_prefix</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//建立好后缀数组</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    string str<span class=\"token punctuation\">,</span>substr<span class=\"token punctuation\">;</span>\n    str<span class=\"token operator\">=</span><span class=\"token string\">\"abcdefgagabgag\"</span><span class=\"token punctuation\">;</span>\n    substr<span class=\"token operator\">=</span><span class=\"token string\">\"abg\"</span><span class=\"token punctuation\">;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token function\">BM</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span>substr<span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">generate_bad_char_table</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    bad_char_table <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span> <span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">256</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        bad_char_table<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> ASCII<span class=\"token operator\">=</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        bad_char_table<span class=\"token punctuation\">[</span>ASCII<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">generate_suffix_prefix</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    suffix<span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span> <span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    prefix <span class=\"token operator\">=</span> new bool <span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        prefix<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n        suffix<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span>i<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> k<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">>=</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> str<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>str<span class=\"token punctuation\">[</span>len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//inverse search</span>\n        <span class=\"token punctuation\">&#123;</span>\n            j<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n            k<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            suffix<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">==</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//如果找到了开头</span>\n            prefix<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">move_by_GS</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> ptr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> str_len<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>str_len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>ptr<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>suffix<span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> ptr<span class=\"token operator\">-</span>suffix<span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span>ptr<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>str_len<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>prefix<span class=\"token punctuation\">[</span>str_len<span class=\"token operator\">-</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> str_len<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">BM</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">,</span> string substr<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">generate_bad_char_table</span><span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">generate_suffix_prefix</span><span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> move_step<span class=\"token punctuation\">,</span>bad_char<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span>substr<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">+=</span>move_step<span class=\"token punctuation\">)</span><span class=\"token comment\">//从头到尾遍历</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span>substr<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">>=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//从后网线查找</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span>substr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//找到坏字符</span>\n            <span class=\"token punctuation\">&#123;</span>\n                bad_char<span class=\"token operator\">=</span>str<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                move_step<span class=\"token operator\">=</span>j<span class=\"token operator\">-</span>bad_char_table<span class=\"token punctuation\">[</span>bad_char<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//找到substr</span>\n            <span class=\"token punctuation\">&#123;</span>\n                delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> bad_char_table<span class=\"token punctuation\">;</span>\n                delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> suffix<span class=\"token punctuation\">;</span>\n                delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> prefix<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> i<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">&lt;</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//找到好后缀</span>\n                move_step<span class=\"token operator\">=</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>move_step<span class=\"token punctuation\">,</span> <span class=\"token function\">move_by_GS</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> bad_char_table<span class=\"token punctuation\">;</span>\n    delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> suffix<span class=\"token punctuation\">;</span>\n    delete <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> prefix<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n</code></pre>\n"},{"title":"背包问题","date":"2022-03-10T13:35:50.000Z","katex":true,"_content":"\n背包问题(backpack problem)是最经典也是最简单的一类动态规划(dynamic programming)问题，本篇文章重点讲解背包问题中的0-1背包，完全背包，以及多重背包三大问题，顺带也会说明一下动态规划的基本策略，**适合完全不理解相关算法的初学者**。\n\n## 0-1背包(0-1 Knapsack Problem)\n\n### 1.1 问题描述\n\n一共有$N$件物品，每件物品的价格为$W_i$，价值为$V_i$，在总重量不超过背包承载上限$W_{max}$的情况下，如何分配使得装入背包的价值最高？\n\n### 1.2 问题分析\n\n最先想到的就是暴力穷举法，把每种可能的情况都装进去然后找到最大的情况，但是这样做显然是极其低效的，总的时间复杂度是$O(2^n)$.\n\n因此，这里引用了动态规划的思路。在这里我们以此为例，每一组的价格和价值如图所示，假设这里背包的最大重量为$10$。\n\n| N=5    | 1    | 2    | 3    | 4    | 5    |\n| :----- | :--- | :--- | :--- | :--- | :--- |\n| Weight | 1    | 3    | 4    | 5    | 2    |\n| Value  | 5    | 10   | 18   | 20   | 7    |\n\n那么接下来我们要做的事情是，创建一个二维数组`dp[i][j]`，这样的数组表示将前$i$件商品装入重量为j的背包中可以获得的最大价值，其中$$0\\leq i\\leq N\\qquad 0\\leq j\\leq W_{max}$$\n\n现在我们来看一下，按照这样的规则得到的二维数组是什么样子：\n\n|      | 1    | 2    | 3    | 4    | 5    |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 1    | 5    | 5    | 5    | 5    | 5    |\n| 2    | 5    | 5    | 5    | 5    | 7    |\n| 3    | 5    | 10   | 10   | 10   | 12   |\n| 4    | 5    | 15   | 18   | 18   | 18   |\n| 5    | 5    | 15   | 23   | 23   | 23   |\n| 6    | 5    | 15   | 23   | 25   | 25   |\n| 7    | 5    | 15   | 28   | 28   | 30   |\n| 8    | 5    | 15   | 33   | 33   | 33   |\n| 9    | 5    | 15   | 33   | 38   | 38   |\n| 10   | 5    | 15   | 33   | 43   | 43   |\n\n最后的答案就是数组右下角的结果，那么我们又该如何通过程序得到这样的数组呢？\n\n当我们只有第一件物品的时候（数组的第一列），无论背包容量有多大都只能装下一个物品，所得到的价值也只有第一个物品的价值，此例中即为5.\n\n当我们拥有第二件物品的时候，就要做一个选择，**要么装入该物品（前提是能装得下），要么不装入该物品。**\n\n那么有人可能就会问了，既然是可以装得下，那么为什么不装入这个物品呢？如果一个物品很沉很沉价值又非常之低，那么我们转入了这个物品的总价值反而要少于装了其他同等重量物品的价值，这个时候装入该物品就显得很多余了。\n\n回到重点，对于这个二维数组来说，**不装入第$i$件物品的意思是`dp[i-1][j]`，装入第$i$件物品的意思是`dp[i-1][j-w[i]] + v[i]`.**\n\n请认真仔细的对照上面的数组，好好理解一下上面的表达式。那么我们得到的状态转移方程即为：$$\ndp[i][j]=max(dp[i-1][j],\\ dp[i-1][j-w[i]] + v[i]) $$\n\n### 1.3 python代码\n\n```python\nimport numpy as np\nn = 5\nw_max = 10\nw = [1, 3, 4, 5, 2]\nv = [5, 10, 18 ,20, 7]\ndp = np.zeros((n ,w_max + 1),dtype = np.int)\nfor i in range(0, n):\n    for j in range(0,w_max + 1):\n        if j - w[i] >= 0:\n            dp[i][j] = max(dp[i-1][j],dp[i-1][j-w[i]] + v[i])\n        else:\n            dp[i][j] = dp[i-1][j]\nprint(dp[n - 1][w_max])#43\n```\n\n### 1.4 算法优化\n\n我们可以看到，这样的0-1背包我们用时间复杂度为$O(W·N)$就可以解决，那么当$W_{max}$很大的时候，虽然时间复杂度是足够的，但是空间复杂度依旧为$O(W·N)$，这就导致了二维数组可能会超出内存限制。\n\n实际上，我们不难发现这样一个二维数组是从上至下一层一层进行的（上面的表格是从左至右），在每次进行下一层计算的时候，只有上一层的数据是有用的，其余的数据就没有任何作用了。即，`dp[i][j]`的值只与`dp[i-1][0]… … dp[i-1][j]`是有关系的。\n\n因此，我们可以利用这个特性，采用滚动数组的方法对空间复杂度进行优化，使其从二维变为长度为 $W_{max}$的一维数组。这种方法在动态规划中是一种常见的策略。\n\n至于为什么是一维数组，而不是两行数组(`dp[i][j]`与`dp[i-1][j]`)，我们只需要在循环j的时候做**逆向计算**，从最后一个物品往前推，这样就可以避免上一组数据被覆盖掉。（仔细想一想为什么）\n\n优化后的部分代码如下：\n\n```python\ndp = np.zeros(w_max + 1,dtype = np.int)\nfor i in range(0, n):\n    for j in range(w_max, -1, -1):\n        if j - w[i] >= 0:\n            dp[j] = max(dp[j],dp[j-w[i]] + v[i])\n```\n\n## 完全背包 (Unbounded Knapsack Problem)\n\n### 2.1 问题描述\n\n完全背包与0-1背包唯一的区别在于完全背包中每种物品可以有无限多个。\n\n### 2.2 问题分析\n\n对于完全背包问题，我们很自然的就能想到设置一个$$性价比=\\frac{V_i}{W_i}$$，这样一来只需要不停的装性价比最高的商品就能获得最优解。\n\n然而，事实上这样的作法很多时候并不能得到最高的答案，当背包即将装满但还有一定空余时（没办法再装下一个的时候），装性价比最高的商品不见得比装性价比不那么高但是能将背包装满的商品。\n\n事实上，上面的想法是完全可以进行下去的，只是稍稍麻烦一点。我们依旧围绕0-1背包的角度思考，只需要稍加修改即可。依旧是上一组数据，只不过每个物品可以无限拿取。\n\n| N=5    | 1    | 2    | 3    | 4    | 5    |\n| :----- | :--- | :--- | :--- | :--- | :--- |\n| Weight | 1    | 3    | 4    | 5    | 2    |\n| Value  | 5    | 10   | 18   | 20   | 7    |\n\n对于完全背包问题，我们依旧是做一个选择，装与不装第$i$件物品：\n\n- 不把物品$i$装入背包：`dp[i][j]=dp[i-1][j]`\n- 把物品$i$装入背包：`dp[i][j]=dp[i][j-w[i]] + v[i]`\n\n(相比于0-1背包，唯一的区别就是`dp[i][j]=dp[i-1][j-w[i]] + v[i]`\n\n这里肯定有很多小伙伴一脸懵逼，不妨停下来多思考思考。我在写这个文章的时候在这里也停顿了很久，不知道如何言简意赅的来阐述这样的思路。\n\n0-1背包当取走第$i$个物品时，需要找到第$i-1$个物品的最优解中，当取走第$i$个物品时，它也可以再次取走自己，所以只需要找到第$i$个物品的最优解即可。\n\n因此，完全背包的状态转移方程为：$$\ndp[i][j]=max(dp[i-1][j],\\ dp[i][j-w[i]] + v[i])\n\n### 2.3 算法优化\n\n对于完全背包依旧可以优化空间复杂度，如同0-1背包一样将其压缩到一维数组。唯一的不同点在于完全背包的滚动数组在循环j的时候需要**正向计算**。从第一个物品往后推，这样就可以避免上一组数据被覆盖掉。（仔细想一想为什么）\n\n优化后的部分代码如下：\n\n```python\ndp = np.zeros((w_max + 1,dtype = np.int)\nfor i in range(0, n)\n    for j in range(0,w_max + 1):\n        if j - w[i] >= 0:\n            dp[j] = max(dp[j],dp[j-w[i]] + v[i])\n```\n\n一件很有趣的事情是，我们回过头来看*1.4节*的0-1背包优化算法，有没有发现他们长得十分相似呢？\n\n此外，对于物品是无限的情况来说，如果有一个物品重量超过另一个物品然而价值又低于另一个物品，那么这样的物品就可以扔掉了。\n\n我们只需要花费$O(N^2)$的时间复杂度进行一次搜索，或许可以排除掉大量没有价值的商品，这样可以极大的节约动态规划的时间开销和空间开销。\n\n### 2.4 另一种思路\n\n我们回过头来看2.1节提到的思路，不妨在此基础上想一下，我们完全可以将完全背包转换成0-1背包。\n\n虽然每件商品的数量是无限的，但是总量$W_{max}$是有限的。因此我们可以计算出每件商品最多可以装入$$\\frac{W_{max}}{W_i}$$个，这样一来，我们就拥有了有限多个商品。\n\n当然，这种思路根本谈不上优化，因为其完全没有降低时间复杂度和空间复杂度，只是提供了另一种思路罢了。\n\n```python\ndp = np.zeros((n ,w_max + 1),dtype = np.int)\nfor i in range(0, n):\n    for j in range(0, w_max + 1):\n        for k in range(0, w_max//w[i] + 1):\n            if j - k * w[i] >= 0:\n                dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - k * w[i]] + k * v[i])\n```\n\n更高效的做法是使用二进制，即将每种物品的**取的个数**都用$$V_i=\\sum2^i\\quad 0\\leq i\\leq\\log_2V_i$$来表示（这是一个常识，任何数字都可以分解成以$2$为指数的数组），如$13$，我们可以表示为$13= 2^0 + 2^2 +2^3$.\n\n我们的目的就是要找出第i件物品要取几个好，那么与其用传统的方法每次取一个，然后询问取好呢还是不取好呢，不如用二进制的方法来代替。\n\n举例说明，第一件物品最多可以取$13$个，假设取$7$个是最优解，那么我们第一次询问取$2^0$个该物品好不好，然后询问$2^1,2^2,2^3… …$，最终得到了 $2^0 +2^2+2^1=7$这样的一个结果，我们只需要询问$4$次而非$13$次，这是一个从$n$降到$\\log n$级别的优化。\n\n现在，小伙伴们可能已经彻底蒙圈了，或许能稍稍理解这样的思想，但是却怎么也写不出来，没关系，只要稍微理解以上的思路就好，我们先来看下一节。\n\n## 多重背包(bounded knapsack problem)\n\n### 3.1 问题描述\n\n多重背包与前面的完全背包的不同点在于每种物品是有限多个。\n\n### 3.2 问题分析\n\n我们在*2.4节*中提到，完全背包每种物品其实也是有上限的，即加和不应当超过背包的最大承载重量。那么，既然完全背包可以转化成0-1背包问题进行求解，多重背包自然也可以。\n\n我们依旧是分为两个部分，装与不装。\n\n- 不把物品$i$装入背包：`dp[i][j]=dp[i-1][j]`\n- 把物品$i$装入背包：因为每种物品有数量限制，因此我们需要在限制数量中找到最大的价值，此时`dp[i][j]=dp[i-1][j-k*w[i]] + k*v[i-1]`\n\n因此，状态转移方程为：$$dp[i][j]=max(dp[i-1][j],\\ dp[i][j-k*w[i]] + k*v[i])$$\n\n### 3.3 python代码\n\n```python\nimport numpy as np\nn = 5\nw_max = 10\nw = [1, 3, 4, 5, 2]    #weight\nv = [5, 10, 18 ,20, 7] #value\nmaxx = [3, 5, 1, 8, 2] #maximum number\ndp = np.zeros((n ,w_max + 1),dtype = np.int)\nfor i in range(0, n):\n    for j in range(0, w_max + 1):\n        for k in range(0, min(w_max//w[i], maxx[i]) + 1):\n            if j - k * w[i] >= 0:\n                dp[i][j] = max(dp[i - 1][j],\n                dp[i - 1][j - k * w[i]] + k * v[i])\nprint(dp)\nprint(dp[n - 1][w_max]) #42\n```\n\n\n\n### 3.4 算法优化\n\n无论是完全背包还是多重背包，都存在着一种优化方式，就是2进制优化。","source":"_posts/Backpack.md","raw":"---\ntitle: 背包问题\ndate: 2022-03-10 21:35:50\ntags:\n\t- algorithm\n\t- 背包问题\n\t- DP\ncategories:\n\t- algorithm\nkatex: true\n---\n\n背包问题(backpack problem)是最经典也是最简单的一类动态规划(dynamic programming)问题，本篇文章重点讲解背包问题中的0-1背包，完全背包，以及多重背包三大问题，顺带也会说明一下动态规划的基本策略，**适合完全不理解相关算法的初学者**。\n\n## 0-1背包(0-1 Knapsack Problem)\n\n### 1.1 问题描述\n\n一共有$N$件物品，每件物品的价格为$W_i$，价值为$V_i$，在总重量不超过背包承载上限$W_{max}$的情况下，如何分配使得装入背包的价值最高？\n\n### 1.2 问题分析\n\n最先想到的就是暴力穷举法，把每种可能的情况都装进去然后找到最大的情况，但是这样做显然是极其低效的，总的时间复杂度是$O(2^n)$.\n\n因此，这里引用了动态规划的思路。在这里我们以此为例，每一组的价格和价值如图所示，假设这里背包的最大重量为$10$。\n\n| N=5    | 1    | 2    | 3    | 4    | 5    |\n| :----- | :--- | :--- | :--- | :--- | :--- |\n| Weight | 1    | 3    | 4    | 5    | 2    |\n| Value  | 5    | 10   | 18   | 20   | 7    |\n\n那么接下来我们要做的事情是，创建一个二维数组`dp[i][j]`，这样的数组表示将前$i$件商品装入重量为j的背包中可以获得的最大价值，其中$$0\\leq i\\leq N\\qquad 0\\leq j\\leq W_{max}$$\n\n现在我们来看一下，按照这样的规则得到的二维数组是什么样子：\n\n|      | 1    | 2    | 3    | 4    | 5    |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 1    | 5    | 5    | 5    | 5    | 5    |\n| 2    | 5    | 5    | 5    | 5    | 7    |\n| 3    | 5    | 10   | 10   | 10   | 12   |\n| 4    | 5    | 15   | 18   | 18   | 18   |\n| 5    | 5    | 15   | 23   | 23   | 23   |\n| 6    | 5    | 15   | 23   | 25   | 25   |\n| 7    | 5    | 15   | 28   | 28   | 30   |\n| 8    | 5    | 15   | 33   | 33   | 33   |\n| 9    | 5    | 15   | 33   | 38   | 38   |\n| 10   | 5    | 15   | 33   | 43   | 43   |\n\n最后的答案就是数组右下角的结果，那么我们又该如何通过程序得到这样的数组呢？\n\n当我们只有第一件物品的时候（数组的第一列），无论背包容量有多大都只能装下一个物品，所得到的价值也只有第一个物品的价值，此例中即为5.\n\n当我们拥有第二件物品的时候，就要做一个选择，**要么装入该物品（前提是能装得下），要么不装入该物品。**\n\n那么有人可能就会问了，既然是可以装得下，那么为什么不装入这个物品呢？如果一个物品很沉很沉价值又非常之低，那么我们转入了这个物品的总价值反而要少于装了其他同等重量物品的价值，这个时候装入该物品就显得很多余了。\n\n回到重点，对于这个二维数组来说，**不装入第$i$件物品的意思是`dp[i-1][j]`，装入第$i$件物品的意思是`dp[i-1][j-w[i]] + v[i]`.**\n\n请认真仔细的对照上面的数组，好好理解一下上面的表达式。那么我们得到的状态转移方程即为：$$\ndp[i][j]=max(dp[i-1][j],\\ dp[i-1][j-w[i]] + v[i]) $$\n\n### 1.3 python代码\n\n```python\nimport numpy as np\nn = 5\nw_max = 10\nw = [1, 3, 4, 5, 2]\nv = [5, 10, 18 ,20, 7]\ndp = np.zeros((n ,w_max + 1),dtype = np.int)\nfor i in range(0, n):\n    for j in range(0,w_max + 1):\n        if j - w[i] >= 0:\n            dp[i][j] = max(dp[i-1][j],dp[i-1][j-w[i]] + v[i])\n        else:\n            dp[i][j] = dp[i-1][j]\nprint(dp[n - 1][w_max])#43\n```\n\n### 1.4 算法优化\n\n我们可以看到，这样的0-1背包我们用时间复杂度为$O(W·N)$就可以解决，那么当$W_{max}$很大的时候，虽然时间复杂度是足够的，但是空间复杂度依旧为$O(W·N)$，这就导致了二维数组可能会超出内存限制。\n\n实际上，我们不难发现这样一个二维数组是从上至下一层一层进行的（上面的表格是从左至右），在每次进行下一层计算的时候，只有上一层的数据是有用的，其余的数据就没有任何作用了。即，`dp[i][j]`的值只与`dp[i-1][0]… … dp[i-1][j]`是有关系的。\n\n因此，我们可以利用这个特性，采用滚动数组的方法对空间复杂度进行优化，使其从二维变为长度为 $W_{max}$的一维数组。这种方法在动态规划中是一种常见的策略。\n\n至于为什么是一维数组，而不是两行数组(`dp[i][j]`与`dp[i-1][j]`)，我们只需要在循环j的时候做**逆向计算**，从最后一个物品往前推，这样就可以避免上一组数据被覆盖掉。（仔细想一想为什么）\n\n优化后的部分代码如下：\n\n```python\ndp = np.zeros(w_max + 1,dtype = np.int)\nfor i in range(0, n):\n    for j in range(w_max, -1, -1):\n        if j - w[i] >= 0:\n            dp[j] = max(dp[j],dp[j-w[i]] + v[i])\n```\n\n## 完全背包 (Unbounded Knapsack Problem)\n\n### 2.1 问题描述\n\n完全背包与0-1背包唯一的区别在于完全背包中每种物品可以有无限多个。\n\n### 2.2 问题分析\n\n对于完全背包问题，我们很自然的就能想到设置一个$$性价比=\\frac{V_i}{W_i}$$，这样一来只需要不停的装性价比最高的商品就能获得最优解。\n\n然而，事实上这样的作法很多时候并不能得到最高的答案，当背包即将装满但还有一定空余时（没办法再装下一个的时候），装性价比最高的商品不见得比装性价比不那么高但是能将背包装满的商品。\n\n事实上，上面的想法是完全可以进行下去的，只是稍稍麻烦一点。我们依旧围绕0-1背包的角度思考，只需要稍加修改即可。依旧是上一组数据，只不过每个物品可以无限拿取。\n\n| N=5    | 1    | 2    | 3    | 4    | 5    |\n| :----- | :--- | :--- | :--- | :--- | :--- |\n| Weight | 1    | 3    | 4    | 5    | 2    |\n| Value  | 5    | 10   | 18   | 20   | 7    |\n\n对于完全背包问题，我们依旧是做一个选择，装与不装第$i$件物品：\n\n- 不把物品$i$装入背包：`dp[i][j]=dp[i-1][j]`\n- 把物品$i$装入背包：`dp[i][j]=dp[i][j-w[i]] + v[i]`\n\n(相比于0-1背包，唯一的区别就是`dp[i][j]=dp[i-1][j-w[i]] + v[i]`\n\n这里肯定有很多小伙伴一脸懵逼，不妨停下来多思考思考。我在写这个文章的时候在这里也停顿了很久，不知道如何言简意赅的来阐述这样的思路。\n\n0-1背包当取走第$i$个物品时，需要找到第$i-1$个物品的最优解中，当取走第$i$个物品时，它也可以再次取走自己，所以只需要找到第$i$个物品的最优解即可。\n\n因此，完全背包的状态转移方程为：$$\ndp[i][j]=max(dp[i-1][j],\\ dp[i][j-w[i]] + v[i])\n\n### 2.3 算法优化\n\n对于完全背包依旧可以优化空间复杂度，如同0-1背包一样将其压缩到一维数组。唯一的不同点在于完全背包的滚动数组在循环j的时候需要**正向计算**。从第一个物品往后推，这样就可以避免上一组数据被覆盖掉。（仔细想一想为什么）\n\n优化后的部分代码如下：\n\n```python\ndp = np.zeros((w_max + 1,dtype = np.int)\nfor i in range(0, n)\n    for j in range(0,w_max + 1):\n        if j - w[i] >= 0:\n            dp[j] = max(dp[j],dp[j-w[i]] + v[i])\n```\n\n一件很有趣的事情是，我们回过头来看*1.4节*的0-1背包优化算法，有没有发现他们长得十分相似呢？\n\n此外，对于物品是无限的情况来说，如果有一个物品重量超过另一个物品然而价值又低于另一个物品，那么这样的物品就可以扔掉了。\n\n我们只需要花费$O(N^2)$的时间复杂度进行一次搜索，或许可以排除掉大量没有价值的商品，这样可以极大的节约动态规划的时间开销和空间开销。\n\n### 2.4 另一种思路\n\n我们回过头来看2.1节提到的思路，不妨在此基础上想一下，我们完全可以将完全背包转换成0-1背包。\n\n虽然每件商品的数量是无限的，但是总量$W_{max}$是有限的。因此我们可以计算出每件商品最多可以装入$$\\frac{W_{max}}{W_i}$$个，这样一来，我们就拥有了有限多个商品。\n\n当然，这种思路根本谈不上优化，因为其完全没有降低时间复杂度和空间复杂度，只是提供了另一种思路罢了。\n\n```python\ndp = np.zeros((n ,w_max + 1),dtype = np.int)\nfor i in range(0, n):\n    for j in range(0, w_max + 1):\n        for k in range(0, w_max//w[i] + 1):\n            if j - k * w[i] >= 0:\n                dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - k * w[i]] + k * v[i])\n```\n\n更高效的做法是使用二进制，即将每种物品的**取的个数**都用$$V_i=\\sum2^i\\quad 0\\leq i\\leq\\log_2V_i$$来表示（这是一个常识，任何数字都可以分解成以$2$为指数的数组），如$13$，我们可以表示为$13= 2^0 + 2^2 +2^3$.\n\n我们的目的就是要找出第i件物品要取几个好，那么与其用传统的方法每次取一个，然后询问取好呢还是不取好呢，不如用二进制的方法来代替。\n\n举例说明，第一件物品最多可以取$13$个，假设取$7$个是最优解，那么我们第一次询问取$2^0$个该物品好不好，然后询问$2^1,2^2,2^3… …$，最终得到了 $2^0 +2^2+2^1=7$这样的一个结果，我们只需要询问$4$次而非$13$次，这是一个从$n$降到$\\log n$级别的优化。\n\n现在，小伙伴们可能已经彻底蒙圈了，或许能稍稍理解这样的思想，但是却怎么也写不出来，没关系，只要稍微理解以上的思路就好，我们先来看下一节。\n\n## 多重背包(bounded knapsack problem)\n\n### 3.1 问题描述\n\n多重背包与前面的完全背包的不同点在于每种物品是有限多个。\n\n### 3.2 问题分析\n\n我们在*2.4节*中提到，完全背包每种物品其实也是有上限的，即加和不应当超过背包的最大承载重量。那么，既然完全背包可以转化成0-1背包问题进行求解，多重背包自然也可以。\n\n我们依旧是分为两个部分，装与不装。\n\n- 不把物品$i$装入背包：`dp[i][j]=dp[i-1][j]`\n- 把物品$i$装入背包：因为每种物品有数量限制，因此我们需要在限制数量中找到最大的价值，此时`dp[i][j]=dp[i-1][j-k*w[i]] + k*v[i-1]`\n\n因此，状态转移方程为：$$dp[i][j]=max(dp[i-1][j],\\ dp[i][j-k*w[i]] + k*v[i])$$\n\n### 3.3 python代码\n\n```python\nimport numpy as np\nn = 5\nw_max = 10\nw = [1, 3, 4, 5, 2]    #weight\nv = [5, 10, 18 ,20, 7] #value\nmaxx = [3, 5, 1, 8, 2] #maximum number\ndp = np.zeros((n ,w_max + 1),dtype = np.int)\nfor i in range(0, n):\n    for j in range(0, w_max + 1):\n        for k in range(0, min(w_max//w[i], maxx[i]) + 1):\n            if j - k * w[i] >= 0:\n                dp[i][j] = max(dp[i - 1][j],\n                dp[i - 1][j - k * w[i]] + k * v[i])\nprint(dp)\nprint(dp[n - 1][w_max]) #42\n```\n\n\n\n### 3.4 算法优化\n\n无论是完全背包还是多重背包，都存在着一种优化方式，就是2进制优化。","slug":"Backpack","published":1,"updated":"2022-11-01T05:53:08.424Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcn000w1gzu4vyva5gp","content":"<p>背包问题(backpack problem)是最经典也是最简单的一类动态规划(dynamic programming)问题，本篇文章重点讲解背包问题中的0-1背包，完全背包，以及多重背包三大问题，顺带也会说明一下动态规划的基本策略，<strong>适合完全不理解相关算法的初学者</strong>。</p>\n<h2 id=\"0-1背包0-1-knapsack-problem\"><a class=\"markdownIt-Anchor\" href=\"#0-1背包0-1-knapsack-problem\"></a> 0-1背包(0-1 Knapsack Problem)</h2>\n<h3 id=\"11-问题描述\"><a class=\"markdownIt-Anchor\" href=\"#11-问题描述\"></a> 1.1 问题描述</h3>\n<p>一共有<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span>件物品，每件物品的价格为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>W</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">W_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，价值为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>V</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">V_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，在总重量不超过背包承载上限<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">W_{max}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>的情况下，如何分配使得装入背包的价值最高？</p>\n<h3 id=\"12-问题分析\"><a class=\"markdownIt-Anchor\" href=\"#12-问题分析\"></a> 1.2 问题分析</h3>\n<p>最先想到的就是暴力穷举法，把每种可能的情况都装进去然后找到最大的情况，但是这样做显然是极其低效的，总的时间复杂度是<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(2^n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>.</p>\n<p>因此，这里引用了动态规划的思路。在这里我们以此为例，每一组的价格和价值如图所示，假设这里背包的最大重量为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>10</mn></mrow><annotation encoding=\"application/x-tex\">10</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span></span>。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">N=5</th>\n<th style=\"text-align:left\">1</th>\n<th style=\"text-align:left\">2</th>\n<th style=\"text-align:left\">3</th>\n<th style=\"text-align:left\">4</th>\n<th style=\"text-align:left\">5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Weight</td>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">4</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Value</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">18</td>\n<td style=\"text-align:left\">20</td>\n<td style=\"text-align:left\">7</td>\n</tr>\n</tbody>\n</table>\n<p>那么接下来我们要做的事情是，创建一个二维数组<code>dp[i][j]</code>，这样的数组表示将前<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>件商品装入重量为j的背包中可以获得的最大价值，其中$$0\\leq i\\leq N\\qquad 0\\leq j\\leq W_{max}$$</p>\n<p>现在我们来看一下，按照这样的规则得到的二维数组是什么样子：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th style=\"text-align:left\">1</th>\n<th style=\"text-align:left\">2</th>\n<th style=\"text-align:left\">3</th>\n<th style=\"text-align:left\">4</th>\n<th style=\"text-align:left\">5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">2</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">7</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">12</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">4</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">18</td>\n<td style=\"text-align:left\">18</td>\n<td style=\"text-align:left\">18</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">23</td>\n<td style=\"text-align:left\">23</td>\n<td style=\"text-align:left\">23</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">6</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">23</td>\n<td style=\"text-align:left\">25</td>\n<td style=\"text-align:left\">25</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">7</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">28</td>\n<td style=\"text-align:left\">28</td>\n<td style=\"text-align:left\">30</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">8</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">33</td>\n<td style=\"text-align:left\">33</td>\n<td style=\"text-align:left\">33</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">9</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">33</td>\n<td style=\"text-align:left\">38</td>\n<td style=\"text-align:left\">38</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">33</td>\n<td style=\"text-align:left\">43</td>\n<td style=\"text-align:left\">43</td>\n</tr>\n</tbody>\n</table>\n<p>最后的答案就是数组右下角的结果，那么我们又该如何通过程序得到这样的数组呢？</p>\n<p>当我们只有第一件物品的时候（数组的第一列），无论背包容量有多大都只能装下一个物品，所得到的价值也只有第一个物品的价值，此例中即为5.</p>\n<p>当我们拥有第二件物品的时候，就要做一个选择，<strong>要么装入该物品（前提是能装得下），要么不装入该物品。</strong></p>\n<p>那么有人可能就会问了，既然是可以装得下，那么为什么不装入这个物品呢？如果一个物品很沉很沉价值又非常之低，那么我们转入了这个物品的总价值反而要少于装了其他同等重量物品的价值，这个时候装入该物品就显得很多余了。</p>\n<p>回到重点，对于这个二维数组来说，<strong>不装入第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>件物品的意思是<code>dp[i-1][j]</code>，装入第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>件物品的意思是<code>dp[i-1][j-w[i]] + v[i]</code>.</strong></p>\n<p>请认真仔细的对照上面的数组，好好理解一下上面的表达式。那么我们得到的状态转移方程即为：$$<br>\ndp[i][j]=max(dp[i-1][j],\\ dp[i-1][j-w[i]] + v[i]) $$</p>\n<h3 id=\"13-python代码\"><a class=\"markdownIt-Anchor\" href=\"#13-python代码\"></a> 1.3 python代码</h3>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\nn <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\nw_max <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\nw <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\nv <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span> <span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span>\ndp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>n <span class=\"token punctuation\">,</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>dtype <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> j <span class=\"token operator\">-</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            dp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>dp<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token operator\">-</span>w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> v<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            dp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> dp<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>w_max<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#43</span></code></pre>\n<h3 id=\"14-算法优化\"><a class=\"markdownIt-Anchor\" href=\"#14-算法优化\"></a> 1.4 算法优化</h3>\n<p>我们可以看到，这样的0-1背包我们用时间复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>W</mi><mo separator=\"true\">⋅</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(W·N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span>就可以解决，那么当<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">W_{max}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>很大的时候，虽然时间复杂度是足够的，但是空间复杂度依旧为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>W</mi><mo separator=\"true\">⋅</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(W·N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span>，这就导致了二维数组可能会超出内存限制。</p>\n<p>实际上，我们不难发现这样一个二维数组是从上至下一层一层进行的（上面的表格是从左至右），在每次进行下一层计算的时候，只有上一层的数据是有用的，其余的数据就没有任何作用了。即，<code>dp[i][j]</code>的值只与<code>dp[i-1][0]… … dp[i-1][j]</code>是有关系的。</p>\n<p>因此，我们可以利用这个特性，采用滚动数组的方法对空间复杂度进行优化，使其从二维变为长度为 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">W_{max}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>的一维数组。这种方法在动态规划中是一种常见的策略。</p>\n<p>至于为什么是一维数组，而不是两行数组(<code>dp[i][j]</code>与<code>dp[i-1][j]</code>)，我们只需要在循环j的时候做<strong>逆向计算</strong>，从最后一个物品往前推，这样就可以避免上一组数据被覆盖掉。（仔细想一想为什么）</p>\n<p>优化后的部分代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\">dp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>dtype <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>w_max<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> j <span class=\"token operator\">-</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>dp<span class=\"token punctuation\">[</span>j<span class=\"token operator\">-</span>w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> v<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"完全背包-unbounded-knapsack-problem\"><a class=\"markdownIt-Anchor\" href=\"#完全背包-unbounded-knapsack-problem\"></a> 完全背包 (Unbounded Knapsack Problem)</h2>\n<h3 id=\"21-问题描述\"><a class=\"markdownIt-Anchor\" href=\"#21-问题描述\"></a> 2.1 问题描述</h3>\n<p>完全背包与0-1背包唯一的区别在于完全背包中每种物品可以有无限多个。</p>\n<h3 id=\"22-问题分析\"><a class=\"markdownIt-Anchor\" href=\"#22-问题分析\"></a> 2.2 问题分析</h3>\n<p>对于完全背包问题，我们很自然的就能想到设置一个$$性价比=\\frac{V_i}{W_i}$$，这样一来只需要不停的装性价比最高的商品就能获得最优解。</p>\n<p>然而，事实上这样的作法很多时候并不能得到最高的答案，当背包即将装满但还有一定空余时（没办法再装下一个的时候），装性价比最高的商品不见得比装性价比不那么高但是能将背包装满的商品。</p>\n<p>事实上，上面的想法是完全可以进行下去的，只是稍稍麻烦一点。我们依旧围绕0-1背包的角度思考，只需要稍加修改即可。依旧是上一组数据，只不过每个物品可以无限拿取。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">N=5</th>\n<th style=\"text-align:left\">1</th>\n<th style=\"text-align:left\">2</th>\n<th style=\"text-align:left\">3</th>\n<th style=\"text-align:left\">4</th>\n<th style=\"text-align:left\">5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Weight</td>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">4</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Value</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">18</td>\n<td style=\"text-align:left\">20</td>\n<td style=\"text-align:left\">7</td>\n</tr>\n</tbody>\n</table>\n<p>对于完全背包问题，我们依旧是做一个选择，装与不装第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>件物品：</p>\n<ul>\n<li>不把物品<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>装入背包：<code>dp[i][j]=dp[i-1][j]</code></li>\n<li>把物品<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>装入背包：<code>dp[i][j]=dp[i][j-w[i]] + v[i]</code></li>\n</ul>\n<p>(相比于0-1背包，唯一的区别就是<code>dp[i][j]=dp[i-1][j-w[i]] + v[i]</code></p>\n<p>这里肯定有很多小伙伴一脸懵逼，不妨停下来多思考思考。我在写这个文章的时候在这里也停顿了很久，不知道如何言简意赅的来阐述这样的思路。</p>\n<p>0-1背包当取走第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>个物品时，需要找到第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>个物品的最优解中，当取走第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>个物品时，它也可以再次取走自己，所以只需要找到第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>个物品的最优解即可。</p>\n<p>因此，完全背包的状态转移方程为：$$<br>\ndp[i][j]=max(dp[i-1][j],\\ dp[i][j-w[i]] + v[i])</p>\n<h3 id=\"23-算法优化\"><a class=\"markdownIt-Anchor\" href=\"#23-算法优化\"></a> 2.3 算法优化</h3>\n<p>对于完全背包依旧可以优化空间复杂度，如同0-1背包一样将其压缩到一维数组。唯一的不同点在于完全背包的滚动数组在循环j的时候需要<strong>正向计算</strong>。从第一个物品往后推，这样就可以避免上一组数据被覆盖掉。（仔细想一想为什么）</p>\n<p>优化后的部分代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\">dp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>dtype <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> j <span class=\"token operator\">-</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>dp<span class=\"token punctuation\">[</span>j<span class=\"token operator\">-</span>w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> v<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p>一件很有趣的事情是，我们回过头来看<em>1.4节</em>的0-1背包优化算法，有没有发现他们长得十分相似呢？</p>\n<p>此外，对于物品是无限的情况来说，如果有一个物品重量超过另一个物品然而价值又低于另一个物品，那么这样的物品就可以扔掉了。</p>\n<p>我们只需要花费<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(N^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>的时间复杂度进行一次搜索，或许可以排除掉大量没有价值的商品，这样可以极大的节约动态规划的时间开销和空间开销。</p>\n<h3 id=\"24-另一种思路\"><a class=\"markdownIt-Anchor\" href=\"#24-另一种思路\"></a> 2.4 另一种思路</h3>\n<p>我们回过头来看2.1节提到的思路，不妨在此基础上想一下，我们完全可以将完全背包转换成0-1背包。</p>\n<p>虽然每件商品的数量是无限的，但是总量<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">W_{max}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>是有限的。因此我们可以计算出每件商品最多可以装入$$\\frac{W_{max}}{W_i}$$个，这样一来，我们就拥有了有限多个商品。</p>\n<p>当然，这种思路根本谈不上优化，因为其完全没有降低时间复杂度和空间复杂度，只是提供了另一种思路罢了。</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\">dp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>n <span class=\"token punctuation\">,</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>dtype <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> w_max<span class=\"token operator\">//</span>w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> j <span class=\"token operator\">-</span> k <span class=\"token operator\">*</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n                dp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> dp<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> k <span class=\"token operator\">*</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> k <span class=\"token operator\">*</span> v<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p>更高效的做法是使用二进制，即将每种物品的<strong>取的个数</strong>都用$$V_i=\\sum2^i\\quad 0\\leq i\\leq\\log_2V_i$$来表示（这是一个常识，任何数字都可以分解成以<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>为指数的数组），如<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>13</mn></mrow><annotation encoding=\"application/x-tex\">13</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">3</span></span></span></span>，我们可以表示为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>13</mn><mo>=</mo><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><msup><mn>2</mn><mn>3</mn></msup></mrow><annotation encoding=\"application/x-tex\">13= 2^0 + 2^2 +2^3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span>.</p>\n<p>我们的目的就是要找出第i件物品要取几个好，那么与其用传统的方法每次取一个，然后询问取好呢还是不取好呢，不如用二进制的方法来代替。</p>\n<p>举例说明，第一件物品最多可以取<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>13</mn></mrow><annotation encoding=\"application/x-tex\">13</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">3</span></span></span></span>个，假设取<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>7</mn></mrow><annotation encoding=\"application/x-tex\">7</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">7</span></span></span></span>个是最优解，那么我们第一次询问取<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span></span></span>个该物品好不好，然后询问<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>1</mn></msup><mo separator=\"true\">,</mo><msup><mn>2</mn><mn>2</mn></msup><mo separator=\"true\">,</mo><msup><mn>2</mn><mn>3</mn></msup><mo>…</mo><mo>…</mo></mrow><annotation encoding=\"application/x-tex\">2^1,2^2,2^3… …</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span></span></span></span>，最终得到了 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><msup><mn>2</mn><mn>1</mn></msup><mo>=</mo><mn>7</mn></mrow><annotation encoding=\"application/x-tex\">2^0 +2^2+2^1=7</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">7</span></span></span></span>这样的一个结果，我们只需要询问<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>次而非<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>13</mn></mrow><annotation encoding=\"application/x-tex\">13</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">3</span></span></span></span>次，这是一个从<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>降到<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\log n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>级别的优化。</p>\n<p>现在，小伙伴们可能已经彻底蒙圈了，或许能稍稍理解这样的思想，但是却怎么也写不出来，没关系，只要稍微理解以上的思路就好，我们先来看下一节。</p>\n<h2 id=\"多重背包bounded-knapsack-problem\"><a class=\"markdownIt-Anchor\" href=\"#多重背包bounded-knapsack-problem\"></a> 多重背包(bounded knapsack problem)</h2>\n<h3 id=\"31-问题描述\"><a class=\"markdownIt-Anchor\" href=\"#31-问题描述\"></a> 3.1 问题描述</h3>\n<p>多重背包与前面的完全背包的不同点在于每种物品是有限多个。</p>\n<h3 id=\"32-问题分析\"><a class=\"markdownIt-Anchor\" href=\"#32-问题分析\"></a> 3.2 问题分析</h3>\n<p>我们在<em>2.4节</em>中提到，完全背包每种物品其实也是有上限的，即加和不应当超过背包的最大承载重量。那么，既然完全背包可以转化成0-1背包问题进行求解，多重背包自然也可以。</p>\n<p>我们依旧是分为两个部分，装与不装。</p>\n<ul>\n<li>不把物品<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>装入背包：<code>dp[i][j]=dp[i-1][j]</code></li>\n<li>把物品<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>装入背包：因为每种物品有数量限制，因此我们需要在限制数量中找到最大的价值，此时<code>dp[i][j]=dp[i-1][j-k*w[i]] + k*v[i-1]</code></li>\n</ul>\n<p>因此，状态转移方程为：$$dp[i][j]=max(dp[i-1][j],\\ dp[i][j-k<em>w[i]] + k</em>v[i])$$</p>\n<h3 id=\"33-python代码\"><a class=\"markdownIt-Anchor\" href=\"#33-python代码\"></a> 3.3 python代码</h3>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\nn <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\nw_max <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\nw <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span>    <span class=\"token comment\">#weight</span>\nv <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span> <span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">#value</span>\nmaxx <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">#maximum number</span>\ndp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>n <span class=\"token punctuation\">,</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>dtype <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span>w_max<span class=\"token operator\">//</span>w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> maxx<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> j <span class=\"token operator\">-</span> k <span class=\"token operator\">*</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n                dp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                dp<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> k <span class=\"token operator\">*</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> k <span class=\"token operator\">*</span> v<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>w_max<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#42</span></code></pre>\n<h3 id=\"34-算法优化\"><a class=\"markdownIt-Anchor\" href=\"#34-算法优化\"></a> 3.4 算法优化</h3>\n<p>无论是完全背包还是多重背包，都存在着一种优化方式，就是2进制优化。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>背包问题(backpack problem)是最经典也是最简单的一类动态规划(dynamic programming)问题，本篇文章重点讲解背包问题中的0-1背包，完全背包，以及多重背包三大问题，顺带也会说明一下动态规划的基本策略，<strong>适合完全不理解相关算法的初学者</strong>。</p>\n<h2 id=\"0-1背包0-1-knapsack-problem\"><a class=\"markdownIt-Anchor\" href=\"#0-1背包0-1-knapsack-problem\"></a> 0-1背包(0-1 Knapsack Problem)</h2>\n<h3 id=\"11-问题描述\"><a class=\"markdownIt-Anchor\" href=\"#11-问题描述\"></a> 1.1 问题描述</h3>\n<p>一共有<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span>件物品，每件物品的价格为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>W</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">W_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，价值为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>V</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">V_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，在总重量不超过背包承载上限<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">W_{max}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>的情况下，如何分配使得装入背包的价值最高？</p>\n<h3 id=\"12-问题分析\"><a class=\"markdownIt-Anchor\" href=\"#12-问题分析\"></a> 1.2 问题分析</h3>\n<p>最先想到的就是暴力穷举法，把每种可能的情况都装进去然后找到最大的情况，但是这样做显然是极其低效的，总的时间复杂度是<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(2^n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>.</p>\n<p>因此，这里引用了动态规划的思路。在这里我们以此为例，每一组的价格和价值如图所示，假设这里背包的最大重量为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>10</mn></mrow><annotation encoding=\"application/x-tex\">10</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span></span>。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">N=5</th>\n<th style=\"text-align:left\">1</th>\n<th style=\"text-align:left\">2</th>\n<th style=\"text-align:left\">3</th>\n<th style=\"text-align:left\">4</th>\n<th style=\"text-align:left\">5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Weight</td>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">4</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Value</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">18</td>\n<td style=\"text-align:left\">20</td>\n<td style=\"text-align:left\">7</td>\n</tr>\n</tbody>\n</table>\n<p>那么接下来我们要做的事情是，创建一个二维数组<code>dp[i][j]</code>，这样的数组表示将前<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>件商品装入重量为j的背包中可以获得的最大价值，其中$$0\\leq i\\leq N\\qquad 0\\leq j\\leq W_{max}$$</p>\n<p>现在我们来看一下，按照这样的规则得到的二维数组是什么样子：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th style=\"text-align:left\">1</th>\n<th style=\"text-align:left\">2</th>\n<th style=\"text-align:left\">3</th>\n<th style=\"text-align:left\">4</th>\n<th style=\"text-align:left\">5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">2</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">7</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">12</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">4</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">18</td>\n<td style=\"text-align:left\">18</td>\n<td style=\"text-align:left\">18</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">23</td>\n<td style=\"text-align:left\">23</td>\n<td style=\"text-align:left\">23</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">6</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">23</td>\n<td style=\"text-align:left\">25</td>\n<td style=\"text-align:left\">25</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">7</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">28</td>\n<td style=\"text-align:left\">28</td>\n<td style=\"text-align:left\">30</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">8</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">33</td>\n<td style=\"text-align:left\">33</td>\n<td style=\"text-align:left\">33</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">9</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">33</td>\n<td style=\"text-align:left\">38</td>\n<td style=\"text-align:left\">38</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">15</td>\n<td style=\"text-align:left\">33</td>\n<td style=\"text-align:left\">43</td>\n<td style=\"text-align:left\">43</td>\n</tr>\n</tbody>\n</table>\n<p>最后的答案就是数组右下角的结果，那么我们又该如何通过程序得到这样的数组呢？</p>\n<p>当我们只有第一件物品的时候（数组的第一列），无论背包容量有多大都只能装下一个物品，所得到的价值也只有第一个物品的价值，此例中即为5.</p>\n<p>当我们拥有第二件物品的时候，就要做一个选择，<strong>要么装入该物品（前提是能装得下），要么不装入该物品。</strong></p>\n<p>那么有人可能就会问了，既然是可以装得下，那么为什么不装入这个物品呢？如果一个物品很沉很沉价值又非常之低，那么我们转入了这个物品的总价值反而要少于装了其他同等重量物品的价值，这个时候装入该物品就显得很多余了。</p>\n<p>回到重点，对于这个二维数组来说，<strong>不装入第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>件物品的意思是<code>dp[i-1][j]</code>，装入第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>件物品的意思是<code>dp[i-1][j-w[i]] + v[i]</code>.</strong></p>\n<p>请认真仔细的对照上面的数组，好好理解一下上面的表达式。那么我们得到的状态转移方程即为：$$<br>\ndp[i][j]=max(dp[i-1][j],\\ dp[i-1][j-w[i]] + v[i]) $$</p>\n<h3 id=\"13-python代码\"><a class=\"markdownIt-Anchor\" href=\"#13-python代码\"></a> 1.3 python代码</h3>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\nn <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\nw_max <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\nw <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\nv <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span> <span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span>\ndp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>n <span class=\"token punctuation\">,</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>dtype <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> j <span class=\"token operator\">-</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            dp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>dp<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token operator\">-</span>w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> v<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            dp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> dp<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>w_max<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#43</span></code></pre>\n<h3 id=\"14-算法优化\"><a class=\"markdownIt-Anchor\" href=\"#14-算法优化\"></a> 1.4 算法优化</h3>\n<p>我们可以看到，这样的0-1背包我们用时间复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>W</mi><mo separator=\"true\">⋅</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(W·N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span>就可以解决，那么当<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">W_{max}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>很大的时候，虽然时间复杂度是足够的，但是空间复杂度依旧为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>W</mi><mo separator=\"true\">⋅</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(W·N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span>，这就导致了二维数组可能会超出内存限制。</p>\n<p>实际上，我们不难发现这样一个二维数组是从上至下一层一层进行的（上面的表格是从左至右），在每次进行下一层计算的时候，只有上一层的数据是有用的，其余的数据就没有任何作用了。即，<code>dp[i][j]</code>的值只与<code>dp[i-1][0]… … dp[i-1][j]</code>是有关系的。</p>\n<p>因此，我们可以利用这个特性，采用滚动数组的方法对空间复杂度进行优化，使其从二维变为长度为 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">W_{max}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>的一维数组。这种方法在动态规划中是一种常见的策略。</p>\n<p>至于为什么是一维数组，而不是两行数组(<code>dp[i][j]</code>与<code>dp[i-1][j]</code>)，我们只需要在循环j的时候做<strong>逆向计算</strong>，从最后一个物品往前推，这样就可以避免上一组数据被覆盖掉。（仔细想一想为什么）</p>\n<p>优化后的部分代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\">dp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>dtype <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>w_max<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> j <span class=\"token operator\">-</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>dp<span class=\"token punctuation\">[</span>j<span class=\"token operator\">-</span>w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> v<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"完全背包-unbounded-knapsack-problem\"><a class=\"markdownIt-Anchor\" href=\"#完全背包-unbounded-knapsack-problem\"></a> 完全背包 (Unbounded Knapsack Problem)</h2>\n<h3 id=\"21-问题描述\"><a class=\"markdownIt-Anchor\" href=\"#21-问题描述\"></a> 2.1 问题描述</h3>\n<p>完全背包与0-1背包唯一的区别在于完全背包中每种物品可以有无限多个。</p>\n<h3 id=\"22-问题分析\"><a class=\"markdownIt-Anchor\" href=\"#22-问题分析\"></a> 2.2 问题分析</h3>\n<p>对于完全背包问题，我们很自然的就能想到设置一个$$性价比=\\frac{V_i}{W_i}$$，这样一来只需要不停的装性价比最高的商品就能获得最优解。</p>\n<p>然而，事实上这样的作法很多时候并不能得到最高的答案，当背包即将装满但还有一定空余时（没办法再装下一个的时候），装性价比最高的商品不见得比装性价比不那么高但是能将背包装满的商品。</p>\n<p>事实上，上面的想法是完全可以进行下去的，只是稍稍麻烦一点。我们依旧围绕0-1背包的角度思考，只需要稍加修改即可。依旧是上一组数据，只不过每个物品可以无限拿取。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">N=5</th>\n<th style=\"text-align:left\">1</th>\n<th style=\"text-align:left\">2</th>\n<th style=\"text-align:left\">3</th>\n<th style=\"text-align:left\">4</th>\n<th style=\"text-align:left\">5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Weight</td>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">4</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Value</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">18</td>\n<td style=\"text-align:left\">20</td>\n<td style=\"text-align:left\">7</td>\n</tr>\n</tbody>\n</table>\n<p>对于完全背包问题，我们依旧是做一个选择，装与不装第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>件物品：</p>\n<ul>\n<li>不把物品<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>装入背包：<code>dp[i][j]=dp[i-1][j]</code></li>\n<li>把物品<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>装入背包：<code>dp[i][j]=dp[i][j-w[i]] + v[i]</code></li>\n</ul>\n<p>(相比于0-1背包，唯一的区别就是<code>dp[i][j]=dp[i-1][j-w[i]] + v[i]</code></p>\n<p>这里肯定有很多小伙伴一脸懵逼，不妨停下来多思考思考。我在写这个文章的时候在这里也停顿了很久，不知道如何言简意赅的来阐述这样的思路。</p>\n<p>0-1背包当取走第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>个物品时，需要找到第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>个物品的最优解中，当取走第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>个物品时，它也可以再次取走自己，所以只需要找到第<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>个物品的最优解即可。</p>\n<p>因此，完全背包的状态转移方程为：$$<br>\ndp[i][j]=max(dp[i-1][j],\\ dp[i][j-w[i]] + v[i])</p>\n<h3 id=\"23-算法优化\"><a class=\"markdownIt-Anchor\" href=\"#23-算法优化\"></a> 2.3 算法优化</h3>\n<p>对于完全背包依旧可以优化空间复杂度，如同0-1背包一样将其压缩到一维数组。唯一的不同点在于完全背包的滚动数组在循环j的时候需要<strong>正向计算</strong>。从第一个物品往后推，这样就可以避免上一组数据被覆盖掉。（仔细想一想为什么）</p>\n<p>优化后的部分代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\">dp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>dtype <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> j <span class=\"token operator\">-</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>dp<span class=\"token punctuation\">[</span>j<span class=\"token operator\">-</span>w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> v<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p>一件很有趣的事情是，我们回过头来看<em>1.4节</em>的0-1背包优化算法，有没有发现他们长得十分相似呢？</p>\n<p>此外，对于物品是无限的情况来说，如果有一个物品重量超过另一个物品然而价值又低于另一个物品，那么这样的物品就可以扔掉了。</p>\n<p>我们只需要花费<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(N^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>的时间复杂度进行一次搜索，或许可以排除掉大量没有价值的商品，这样可以极大的节约动态规划的时间开销和空间开销。</p>\n<h3 id=\"24-另一种思路\"><a class=\"markdownIt-Anchor\" href=\"#24-另一种思路\"></a> 2.4 另一种思路</h3>\n<p>我们回过头来看2.1节提到的思路，不妨在此基础上想一下，我们完全可以将完全背包转换成0-1背包。</p>\n<p>虽然每件商品的数量是无限的，但是总量<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">W_{max}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>是有限的。因此我们可以计算出每件商品最多可以装入$$\\frac{W_{max}}{W_i}$$个，这样一来，我们就拥有了有限多个商品。</p>\n<p>当然，这种思路根本谈不上优化，因为其完全没有降低时间复杂度和空间复杂度，只是提供了另一种思路罢了。</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\">dp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>n <span class=\"token punctuation\">,</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>dtype <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> w_max<span class=\"token operator\">//</span>w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> j <span class=\"token operator\">-</span> k <span class=\"token operator\">*</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n                dp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> dp<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> k <span class=\"token operator\">*</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> k <span class=\"token operator\">*</span> v<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p>更高效的做法是使用二进制，即将每种物品的<strong>取的个数</strong>都用$$V_i=\\sum2^i\\quad 0\\leq i\\leq\\log_2V_i$$来表示（这是一个常识，任何数字都可以分解成以<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>为指数的数组），如<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>13</mn></mrow><annotation encoding=\"application/x-tex\">13</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">3</span></span></span></span>，我们可以表示为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>13</mn><mo>=</mo><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><msup><mn>2</mn><mn>3</mn></msup></mrow><annotation encoding=\"application/x-tex\">13= 2^0 + 2^2 +2^3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span>.</p>\n<p>我们的目的就是要找出第i件物品要取几个好，那么与其用传统的方法每次取一个，然后询问取好呢还是不取好呢，不如用二进制的方法来代替。</p>\n<p>举例说明，第一件物品最多可以取<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>13</mn></mrow><annotation encoding=\"application/x-tex\">13</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">3</span></span></span></span>个，假设取<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>7</mn></mrow><annotation encoding=\"application/x-tex\">7</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">7</span></span></span></span>个是最优解，那么我们第一次询问取<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span></span></span>个该物品好不好，然后询问<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>1</mn></msup><mo separator=\"true\">,</mo><msup><mn>2</mn><mn>2</mn></msup><mo separator=\"true\">,</mo><msup><mn>2</mn><mn>3</mn></msup><mo>…</mo><mo>…</mo></mrow><annotation encoding=\"application/x-tex\">2^1,2^2,2^3… …</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span></span></span></span>，最终得到了 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><msup><mn>2</mn><mn>1</mn></msup><mo>=</mo><mn>7</mn></mrow><annotation encoding=\"application/x-tex\">2^0 +2^2+2^1=7</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">7</span></span></span></span>这样的一个结果，我们只需要询问<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>次而非<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>13</mn></mrow><annotation encoding=\"application/x-tex\">13</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">3</span></span></span></span>次，这是一个从<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>降到<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\log n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>级别的优化。</p>\n<p>现在，小伙伴们可能已经彻底蒙圈了，或许能稍稍理解这样的思想，但是却怎么也写不出来，没关系，只要稍微理解以上的思路就好，我们先来看下一节。</p>\n<h2 id=\"多重背包bounded-knapsack-problem\"><a class=\"markdownIt-Anchor\" href=\"#多重背包bounded-knapsack-problem\"></a> 多重背包(bounded knapsack problem)</h2>\n<h3 id=\"31-问题描述\"><a class=\"markdownIt-Anchor\" href=\"#31-问题描述\"></a> 3.1 问题描述</h3>\n<p>多重背包与前面的完全背包的不同点在于每种物品是有限多个。</p>\n<h3 id=\"32-问题分析\"><a class=\"markdownIt-Anchor\" href=\"#32-问题分析\"></a> 3.2 问题分析</h3>\n<p>我们在<em>2.4节</em>中提到，完全背包每种物品其实也是有上限的，即加和不应当超过背包的最大承载重量。那么，既然完全背包可以转化成0-1背包问题进行求解，多重背包自然也可以。</p>\n<p>我们依旧是分为两个部分，装与不装。</p>\n<ul>\n<li>不把物品<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>装入背包：<code>dp[i][j]=dp[i-1][j]</code></li>\n<li>把物品<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>装入背包：因为每种物品有数量限制，因此我们需要在限制数量中找到最大的价值，此时<code>dp[i][j]=dp[i-1][j-k*w[i]] + k*v[i-1]</code></li>\n</ul>\n<p>因此，状态转移方程为：$$dp[i][j]=max(dp[i-1][j],\\ dp[i][j-k<em>w[i]] + k</em>v[i])$$</p>\n<h3 id=\"33-python代码\"><a class=\"markdownIt-Anchor\" href=\"#33-python代码\"></a> 3.3 python代码</h3>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\nn <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\nw_max <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\nw <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span>    <span class=\"token comment\">#weight</span>\nv <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span> <span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">#value</span>\nmaxx <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">#maximum number</span>\ndp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>n <span class=\"token punctuation\">,</span>w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>dtype <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> w_max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span>w_max<span class=\"token operator\">//</span>w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> maxx<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> j <span class=\"token operator\">-</span> k <span class=\"token operator\">*</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n                dp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                dp<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> k <span class=\"token operator\">*</span> w<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> k <span class=\"token operator\">*</span> v<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>w_max<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#42</span></code></pre>\n<h3 id=\"34-算法优化\"><a class=\"markdownIt-Anchor\" href=\"#34-算法优化\"></a> 3.4 算法优化</h3>\n<p>无论是完全背包还是多重背包，都存在着一种优化方式，就是2进制优化。</p>\n"},{"title":"计算机网络1 - Network Architecture","date":"2022-04-08T15:30:13.000Z","author":"Tony","katex":true,"_content":"\n### Networking basics\n\nQ: What are the differences between data networks and voice networks?\n\nData network -> Digital transmission\n\nVoice network -> Analog transmission\n\nQ: How many types of computer networks when it is classified by their scale?\n\nPersonal Area Networks(PAN), Local Area Networks(LAN), Metropolitan Area Networks(MAN), and Wide Area Networks(WAN).\n\n### Network architecture\n\nQ: What are the definitions of layers, protocols, and services in network architecture?\n\nA layer is a level of abstraction which has a well defined function.\n\nProtocols are executives of the functions.\n\nServices are functions provided through protocols.\n\nQ: What are the famous reference models used in computer networks?\n\n==OSI reference model== and ==TCP/IP reference model==\n\nQ: What are the differences between OSI and TCP/IP reference model?\n\n<img src=\"../../../../../Users/28580/Desktop/Final Review/Final Review.assets/image-20211201142249636.png\" alt=\"image-20211201142249636\" style=\"zoom:50%;\" />\n\n### Functions and technologies in OSI and TCP/IP reference model\n\nQ: What are the names of seven layers in OSI and TCP/IP reference model?\n\nPhysical layer, Data Link layer, Network layer, Transport layer, Session layer, Presentation layer, Application layer.\n\nQ: What functions are defined in each layer?\n\n<img src=\"CN-1/image-20211201155433683.png\" alt=\"image-20211201155433683\" style=\"zoom:50%;\" />\n\nQ: What protocols are defined in each layer?\n\nSome common protocols specified by the TCP/IP reference model layers. \n\n1. The **application layer** protocols include: \n   - Domain Name System (DNS) \n   - Hypertext Transfer Protocol (HTTP) \n   - File Transfer Protocol (FTP) \n   - Simple Mail Transfer Protocol (SMTP)\n   - Trivial File Transfer Protocol (TFTP)  \n2. The **transport layer** protocols include:\n   - Transport Control Protocol (TCP)\n   - User Datagram Protocol (UDP)  \n3. The **Internet layer** protocols include: \n   - Internet Protocol (IP)  \n4. The **network access** layer refers to any particular technology used on a specific network (Ethernet).\n\nQ: What addresses are defined in each layer?\n\nMAC address — Layer 2\n\nIP address — Layer 3\n\nDomain name — Layer 7\n\nSubnet mask — Layer 3\n\nQ: What network devices are operating at each layer?\n\n<img src=\"CN-1/image-20211201155917959.png\" alt=\"image-20211201155917959\" style=\"zoom:50%;\" />\n\nQ: The technologies of LANs and WANs are usually designed in which layers?\n\nBoth layer1 and layer 2.\n\n### Data encapsulation\n\nQ: What is the process of data encapsulation?\n\nFrom Top layer to the bottom layer.\n\n<img src=\"CN-1/image-20211201165246959.png\" alt=\"image-20211201165246959\" style=\"zoom:67%;\" />\n\nQ: What PDUs are used in each layers?\n\n1. **Data** - Build the data at layer 7, 6 and 5.\n2. **Segments** - Package the data for end-to-end transport at layer 4.  \n3. **Packets** - Append the network address (e.g. IP Address) to the network header at layer 3.  \n4. **Frames** - Append the local address (e.g. MAC Address) to the data link header at layer 2.\n5. **Bits** - Convert to bits for transmission on a physical link at layer 1.\n\nQ: What are the header format of common used PDUs in each layer?\n\n It usually contains the **address information** and control  information likes sequence numbers, and so on.\n\n### Network topology and terminologies\n\nQ: What are the differences of physical and logical network topologies? List some common used physical and logical network topologies.\n\nPhysical topology, which is the actual layout of the wire (media).\n\nLogical topology, which defines how the media is accessed by the hosts.\n\nThe physical topologies that are commonly used are the ==P2P Topology, Bus Topology, Ring Topology, Star Topology, Extended Star Topology, Hierarchical Topology, Tree Topology, Hybrid Topology and Mesh Topology==.\n\nThe ethernet protocol is the most common protocol used for logical topology. The physical topologies that are commonly used are the ==Ring Topology and Bus Topology==.\n\nSee more for: \n\n- [Physical Topology | Learn Top 7 Useful Types Of Physical Topology (educba.com)](https://www.educba.com/physical-topology/)\n- [Logical Topology | Know Why Do We Use Logical Topology in Networking? (educba.com)](https://www.educba.com/logical-topology/)\n\nQ: What is the unit of digital bandwidth and analog bandwidth?\n\nIn analog systems, the basic unit of analog bandwidth is ==hertz (Hz)==, or cycles per second.\n\nIn digital systems, the basic unit of bandwidth is ==bits per second (bps)==.\n\nQ: What is the definition of bandwidth and throughput, and baud? What is the relationship among bandwidth, throughput, and baud?\n\nThroughput ≤ Bandwidth\n\nThroughput is the real life bandwidth.\n\n$Bandwidth= log_2L\\times buad$ where L is the base info.\n\nSee more for: [Bits, Bauds and Bandwidth (technologyuk.net)](https://www.technologyuk.net/telecommunications/telecom-principles/bits-bauds-and-bandwidth.shtml) \n\nQ:  What is the difference between the transmission delay and propagation delay?\n\n**Propagation delay** is a simple measurement of how long it takes for a signal to travel along the cable being tested.(**single**)\n\n**Transmission delay** is the time needed to push all the packet bits on the transmission link.(**total**)\n$$\nPropagation\\ delay = \\frac{length\\ of \\ cable}{speed\\ of \\ signal(3\\times 10^8)}\\\\\nTransmission\\ delay= \\frac{size\\ of \\ signal}{speed\\ of\\ transmission}\\\\\n$$\n\nSee more for: [Propagation Delay vs Transmission Delay | Baeldung on Computer Science](https://www.baeldung.com/cs/propagation-vs-transmission-delay)\n\n","source":"_posts/CN-1.md","raw":"---\ntitle: 计算机网络1 - Network Architecture\ndate: 2022-04-08 23:30:13\ntags:\n\t- computer network\ncategories:\n\t- 计算机网络\nauthor: Tony\nkatex: true\n---\n\n### Networking basics\n\nQ: What are the differences between data networks and voice networks?\n\nData network -> Digital transmission\n\nVoice network -> Analog transmission\n\nQ: How many types of computer networks when it is classified by their scale?\n\nPersonal Area Networks(PAN), Local Area Networks(LAN), Metropolitan Area Networks(MAN), and Wide Area Networks(WAN).\n\n### Network architecture\n\nQ: What are the definitions of layers, protocols, and services in network architecture?\n\nA layer is a level of abstraction which has a well defined function.\n\nProtocols are executives of the functions.\n\nServices are functions provided through protocols.\n\nQ: What are the famous reference models used in computer networks?\n\n==OSI reference model== and ==TCP/IP reference model==\n\nQ: What are the differences between OSI and TCP/IP reference model?\n\n<img src=\"../../../../../Users/28580/Desktop/Final Review/Final Review.assets/image-20211201142249636.png\" alt=\"image-20211201142249636\" style=\"zoom:50%;\" />\n\n### Functions and technologies in OSI and TCP/IP reference model\n\nQ: What are the names of seven layers in OSI and TCP/IP reference model?\n\nPhysical layer, Data Link layer, Network layer, Transport layer, Session layer, Presentation layer, Application layer.\n\nQ: What functions are defined in each layer?\n\n<img src=\"CN-1/image-20211201155433683.png\" alt=\"image-20211201155433683\" style=\"zoom:50%;\" />\n\nQ: What protocols are defined in each layer?\n\nSome common protocols specified by the TCP/IP reference model layers. \n\n1. The **application layer** protocols include: \n   - Domain Name System (DNS) \n   - Hypertext Transfer Protocol (HTTP) \n   - File Transfer Protocol (FTP) \n   - Simple Mail Transfer Protocol (SMTP)\n   - Trivial File Transfer Protocol (TFTP)  \n2. The **transport layer** protocols include:\n   - Transport Control Protocol (TCP)\n   - User Datagram Protocol (UDP)  \n3. The **Internet layer** protocols include: \n   - Internet Protocol (IP)  \n4. The **network access** layer refers to any particular technology used on a specific network (Ethernet).\n\nQ: What addresses are defined in each layer?\n\nMAC address — Layer 2\n\nIP address — Layer 3\n\nDomain name — Layer 7\n\nSubnet mask — Layer 3\n\nQ: What network devices are operating at each layer?\n\n<img src=\"CN-1/image-20211201155917959.png\" alt=\"image-20211201155917959\" style=\"zoom:50%;\" />\n\nQ: The technologies of LANs and WANs are usually designed in which layers?\n\nBoth layer1 and layer 2.\n\n### Data encapsulation\n\nQ: What is the process of data encapsulation?\n\nFrom Top layer to the bottom layer.\n\n<img src=\"CN-1/image-20211201165246959.png\" alt=\"image-20211201165246959\" style=\"zoom:67%;\" />\n\nQ: What PDUs are used in each layers?\n\n1. **Data** - Build the data at layer 7, 6 and 5.\n2. **Segments** - Package the data for end-to-end transport at layer 4.  \n3. **Packets** - Append the network address (e.g. IP Address) to the network header at layer 3.  \n4. **Frames** - Append the local address (e.g. MAC Address) to the data link header at layer 2.\n5. **Bits** - Convert to bits for transmission on a physical link at layer 1.\n\nQ: What are the header format of common used PDUs in each layer?\n\n It usually contains the **address information** and control  information likes sequence numbers, and so on.\n\n### Network topology and terminologies\n\nQ: What are the differences of physical and logical network topologies? List some common used physical and logical network topologies.\n\nPhysical topology, which is the actual layout of the wire (media).\n\nLogical topology, which defines how the media is accessed by the hosts.\n\nThe physical topologies that are commonly used are the ==P2P Topology, Bus Topology, Ring Topology, Star Topology, Extended Star Topology, Hierarchical Topology, Tree Topology, Hybrid Topology and Mesh Topology==.\n\nThe ethernet protocol is the most common protocol used for logical topology. The physical topologies that are commonly used are the ==Ring Topology and Bus Topology==.\n\nSee more for: \n\n- [Physical Topology | Learn Top 7 Useful Types Of Physical Topology (educba.com)](https://www.educba.com/physical-topology/)\n- [Logical Topology | Know Why Do We Use Logical Topology in Networking? (educba.com)](https://www.educba.com/logical-topology/)\n\nQ: What is the unit of digital bandwidth and analog bandwidth?\n\nIn analog systems, the basic unit of analog bandwidth is ==hertz (Hz)==, or cycles per second.\n\nIn digital systems, the basic unit of bandwidth is ==bits per second (bps)==.\n\nQ: What is the definition of bandwidth and throughput, and baud? What is the relationship among bandwidth, throughput, and baud?\n\nThroughput ≤ Bandwidth\n\nThroughput is the real life bandwidth.\n\n$Bandwidth= log_2L\\times buad$ where L is the base info.\n\nSee more for: [Bits, Bauds and Bandwidth (technologyuk.net)](https://www.technologyuk.net/telecommunications/telecom-principles/bits-bauds-and-bandwidth.shtml) \n\nQ:  What is the difference between the transmission delay and propagation delay?\n\n**Propagation delay** is a simple measurement of how long it takes for a signal to travel along the cable being tested.(**single**)\n\n**Transmission delay** is the time needed to push all the packet bits on the transmission link.(**total**)\n$$\nPropagation\\ delay = \\frac{length\\ of \\ cable}{speed\\ of \\ signal(3\\times 10^8)}\\\\\nTransmission\\ delay= \\frac{size\\ of \\ signal}{speed\\ of\\ transmission}\\\\\n$$\n\nSee more for: [Propagation Delay vs Transmission Delay | Baeldung on Computer Science](https://www.baeldung.com/cs/propagation-vs-transmission-delay)\n\n","slug":"CN-1","published":1,"updated":"2022-11-01T05:53:00.518Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcr000z1gzuaek6fhi3","content":"<h3 id=\"networking-basics\"><a class=\"markdownIt-Anchor\" href=\"#networking-basics\"></a> Networking basics</h3>\n<p>Q: What are the differences between data networks and voice networks?</p>\n<p>Data network -&gt; Digital transmission</p>\n<p>Voice network -&gt; Analog transmission</p>\n<p>Q: How many types of computer networks when it is classified by their scale?</p>\n<p>Personal Area Networks(PAN), Local Area Networks(LAN), Metropolitan Area Networks(MAN), and Wide Area Networks(WAN).</p>\n<h3 id=\"network-architecture\"><a class=\"markdownIt-Anchor\" href=\"#network-architecture\"></a> Network architecture</h3>\n<p>Q: What are the definitions of layers, protocols, and services in network architecture?</p>\n<p>A layer is a level of abstraction which has a well defined function.</p>\n<p>Protocols are executives of the functions.</p>\n<p>Services are functions provided through protocols.</p>\n<p>Q: What are the famous reference models used in computer networks?</p>\n<p><mark>OSI reference model</mark> and <mark>TCP/IP reference model</mark></p>\n<p>Q: What are the differences between OSI and TCP/IP reference model?</p>\n<img src=\"/2022/04/08/CN-1/../../../../Users/28580/Desktop/Final Review/Final Review.assets/image-20211201142249636.png\" alt=\"image-20211201142249636\" style=\"zoom:50%;\" loading=\"lazy\">\n<h3 id=\"functions-and-technologies-in-osi-and-tcpip-reference-model\"><a class=\"markdownIt-Anchor\" href=\"#functions-and-technologies-in-osi-and-tcpip-reference-model\"></a> Functions and technologies in OSI and TCP/IP reference model</h3>\n<p>Q: What are the names of seven layers in OSI and TCP/IP reference model?</p>\n<p>Physical layer, Data Link layer, Network layer, Transport layer, Session layer, Presentation layer, Application layer.</p>\n<p>Q: What functions are defined in each layer?</p>\n<img src=\"/2022/04/08/CN-1/image-20211201155433683.png\" alt=\"image-20211201155433683\" style=\"zoom:50%;\" loading=\"lazy\">\n<p>Q: What protocols are defined in each layer?</p>\n<p>Some common protocols specified by the TCP/IP reference model layers.</p>\n<ol>\n<li>The <strong>application layer</strong> protocols include:\n<ul>\n<li>Domain Name System (DNS)</li>\n<li>Hypertext Transfer Protocol (HTTP)</li>\n<li>File Transfer Protocol (FTP)</li>\n<li>Simple Mail Transfer Protocol (SMTP)</li>\n<li>Trivial File Transfer Protocol (TFTP)</li>\n</ul>\n</li>\n<li>The <strong>transport layer</strong> protocols include:\n<ul>\n<li>Transport Control Protocol (TCP)</li>\n<li>User Datagram Protocol (UDP)</li>\n</ul>\n</li>\n<li>The <strong>Internet layer</strong> protocols include:\n<ul>\n<li>Internet Protocol (IP)</li>\n</ul>\n</li>\n<li>The <strong>network access</strong> layer refers to any particular technology used on a specific network (Ethernet).</li>\n</ol>\n<p>Q: What addresses are defined in each layer?</p>\n<p>MAC address — Layer 2</p>\n<p>IP address — Layer 3</p>\n<p>Domain name — Layer 7</p>\n<p>Subnet mask — Layer 3</p>\n<p>Q: What network devices are operating at each layer?</p>\n<img src=\"/2022/04/08/CN-1/image-20211201155917959.png\" alt=\"image-20211201155917959\" style=\"zoom:50%;\" loading=\"lazy\">\n<p>Q: The technologies of LANs and WANs are usually designed in which layers?</p>\n<p>Both layer1 and layer 2.</p>\n<h3 id=\"data-encapsulation\"><a class=\"markdownIt-Anchor\" href=\"#data-encapsulation\"></a> Data encapsulation</h3>\n<p>Q: What is the process of data encapsulation?</p>\n<p>From Top layer to the bottom layer.</p>\n<img src=\"/2022/04/08/CN-1/image-20211201165246959.png\" alt=\"image-20211201165246959\" style=\"zoom:67%;\" loading=\"lazy\">\n<p>Q: What PDUs are used in each layers?</p>\n<ol>\n<li><strong>Data</strong> - Build the data at layer 7, 6 and 5.</li>\n<li><strong>Segments</strong> - Package the data for end-to-end transport at layer 4.</li>\n<li><strong>Packets</strong> - Append the network address (e.g. IP Address) to the network header at layer 3.</li>\n<li><strong>Frames</strong> - Append the local address (e.g. MAC Address) to the data link header at layer 2.</li>\n<li><strong>Bits</strong> - Convert to bits for transmission on a physical link at layer 1.</li>\n</ol>\n<p>Q: What are the header format of common used PDUs in each layer?</p>\n<p>It usually contains the <strong>address information</strong> and control  information likes sequence numbers, and so on.</p>\n<h3 id=\"network-topology-and-terminologies\"><a class=\"markdownIt-Anchor\" href=\"#network-topology-and-terminologies\"></a> Network topology and terminologies</h3>\n<p>Q: What are the differences of physical and logical network topologies? List some common used physical and logical network topologies.</p>\n<p>Physical topology, which is the actual layout of the wire (media).</p>\n<p>Logical topology, which defines how the media is accessed by the hosts.</p>\n<p>The physical topologies that are commonly used are the <mark>P2P Topology, Bus Topology, Ring Topology, Star Topology, Extended Star Topology, Hierarchical Topology, Tree Topology, Hybrid Topology and Mesh Topology</mark>.</p>\n<p>The ethernet protocol is the most common protocol used for logical topology. The physical topologies that are commonly used are the <mark>Ring Topology and Bus Topology</mark>.</p>\n<p>See more for:</p>\n<ul>\n<li><a href=\"https://www.educba.com/physical-topology/\">Physical Topology | Learn Top 7 Useful Types Of Physical Topology (educba.com)</a></li>\n<li><a href=\"https://www.educba.com/logical-topology/\">Logical Topology | Know Why Do We Use Logical Topology in Networking? (educba.com)</a></li>\n</ul>\n<p>Q: What is the unit of digital bandwidth and analog bandwidth?</p>\n<p>In analog systems, the basic unit of analog bandwidth is <mark>hertz (Hz)</mark>, or cycles per second.</p>\n<p>In digital systems, the basic unit of bandwidth is <mark>bits per second (bps)</mark>.</p>\n<p>Q: What is the definition of bandwidth and throughput, and baud? What is the relationship among bandwidth, throughput, and baud?</p>\n<p>Throughput ≤ Bandwidth</p>\n<p>Throughput is the real life bandwidth.</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>B</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>w</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi><mo>=</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>L</mi><mo>×</mo><mi>b</mi><mi>u</mi><mi>a</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">Bandwidth= log_2L\\times buad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\">L</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span></span></span></span> where L is the base info.</p>\n<p>See more for: <a href=\"https://www.technologyuk.net/telecommunications/telecom-principles/bits-bauds-and-bandwidth.shtml\">Bits, Bauds and Bandwidth (technologyuk.net)</a></p>\n<p>Q:  What is the difference between the transmission delay and propagation delay?</p>\n<p><strong>Propagation delay</strong> is a simple measurement of how long it takes for a signal to travel along the cable being tested.(<strong>single</strong>)</p>\n<p><strong>Transmission delay</strong> is the time needed to push all the packet bits on the transmission link.(<strong>total</strong>)</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>a</mi><mi>g</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mtext> </mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo>=</mo><mfrac><mrow><mi>l</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mtext> </mtext><mi>o</mi><mi>f</mi><mtext> </mtext><mi>c</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mtext> </mtext><mi>o</mi><mi>f</mi><mtext> </mtext><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi>a</mi><mi>l</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup><mo stretchy=\"false\">)</mo></mrow></mfrac><mspace linebreak=\"newline\"></mspace><mi>T</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>m</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mtext> </mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo>=</mo><mfrac><mrow><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi><mtext> </mtext><mi>o</mi><mi>f</mi><mtext> </mtext><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi>a</mi><mi>l</mi></mrow><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mtext> </mtext><mi>o</mi><mi>f</mi><mtext> </mtext><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>m</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac><mspace linebreak=\"newline\"></mspace></mrow><annotation encoding=\"application/x-tex\">Propagation\\ delay = \\frac{length\\ of \\ cable}{speed\\ of \\ signal(3\\times 10^8)}\\\\\nTransmission\\ delay= \\frac{size\\ of \\ signal}{speed\\ of\\ transmission}\\\\\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.3074399999999997em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714399999999998em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.25188em;vertical-align:-0.8804400000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714399999999998em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804400000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mspace newline\"></span></span></span></span></p>\n<p>See more for: <a href=\"https://www.baeldung.com/cs/propagation-vs-transmission-delay\">Propagation Delay vs Transmission Delay | Baeldung on Computer Science</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"networking-basics\"><a class=\"markdownIt-Anchor\" href=\"#networking-basics\"></a> Networking basics</h3>\n<p>Q: What are the differences between data networks and voice networks?</p>\n<p>Data network -&gt; Digital transmission</p>\n<p>Voice network -&gt; Analog transmission</p>\n<p>Q: How many types of computer networks when it is classified by their scale?</p>\n<p>Personal Area Networks(PAN), Local Area Networks(LAN), Metropolitan Area Networks(MAN), and Wide Area Networks(WAN).</p>\n<h3 id=\"network-architecture\"><a class=\"markdownIt-Anchor\" href=\"#network-architecture\"></a> Network architecture</h3>\n<p>Q: What are the definitions of layers, protocols, and services in network architecture?</p>\n<p>A layer is a level of abstraction which has a well defined function.</p>\n<p>Protocols are executives of the functions.</p>\n<p>Services are functions provided through protocols.</p>\n<p>Q: What are the famous reference models used in computer networks?</p>\n<p><mark>OSI reference model</mark> and <mark>TCP/IP reference model</mark></p>\n<p>Q: What are the differences between OSI and TCP/IP reference model?</p>\n<img src=\"/2022/04/08/CN-1/../../../../Users/28580/Desktop/Final Review/Final Review.assets/image-20211201142249636.png\" alt=\"image-20211201142249636\" style=\"zoom:50%;\">\n<h3 id=\"functions-and-technologies-in-osi-and-tcpip-reference-model\"><a class=\"markdownIt-Anchor\" href=\"#functions-and-technologies-in-osi-and-tcpip-reference-model\"></a> Functions and technologies in OSI and TCP/IP reference model</h3>\n<p>Q: What are the names of seven layers in OSI and TCP/IP reference model?</p>\n<p>Physical layer, Data Link layer, Network layer, Transport layer, Session layer, Presentation layer, Application layer.</p>\n<p>Q: What functions are defined in each layer?</p>\n<img src=\"/2022/04/08/CN-1/image-20211201155433683.png\" alt=\"image-20211201155433683\" style=\"zoom:50%;\">\n<p>Q: What protocols are defined in each layer?</p>\n<p>Some common protocols specified by the TCP/IP reference model layers.</p>\n<ol>\n<li>The <strong>application layer</strong> protocols include:\n<ul>\n<li>Domain Name System (DNS)</li>\n<li>Hypertext Transfer Protocol (HTTP)</li>\n<li>File Transfer Protocol (FTP)</li>\n<li>Simple Mail Transfer Protocol (SMTP)</li>\n<li>Trivial File Transfer Protocol (TFTP)</li>\n</ul>\n</li>\n<li>The <strong>transport layer</strong> protocols include:\n<ul>\n<li>Transport Control Protocol (TCP)</li>\n<li>User Datagram Protocol (UDP)</li>\n</ul>\n</li>\n<li>The <strong>Internet layer</strong> protocols include:\n<ul>\n<li>Internet Protocol (IP)</li>\n</ul>\n</li>\n<li>The <strong>network access</strong> layer refers to any particular technology used on a specific network (Ethernet).</li>\n</ol>\n<p>Q: What addresses are defined in each layer?</p>\n<p>MAC address — Layer 2</p>\n<p>IP address — Layer 3</p>\n<p>Domain name — Layer 7</p>\n<p>Subnet mask — Layer 3</p>\n<p>Q: What network devices are operating at each layer?</p>\n<img src=\"/2022/04/08/CN-1/image-20211201155917959.png\" alt=\"image-20211201155917959\" style=\"zoom:50%;\">\n<p>Q: The technologies of LANs and WANs are usually designed in which layers?</p>\n<p>Both layer1 and layer 2.</p>\n<h3 id=\"data-encapsulation\"><a class=\"markdownIt-Anchor\" href=\"#data-encapsulation\"></a> Data encapsulation</h3>\n<p>Q: What is the process of data encapsulation?</p>\n<p>From Top layer to the bottom layer.</p>\n<img src=\"/2022/04/08/CN-1/image-20211201165246959.png\" alt=\"image-20211201165246959\" style=\"zoom:67%;\">\n<p>Q: What PDUs are used in each layers?</p>\n<ol>\n<li><strong>Data</strong> - Build the data at layer 7, 6 and 5.</li>\n<li><strong>Segments</strong> - Package the data for end-to-end transport at layer 4.</li>\n<li><strong>Packets</strong> - Append the network address (e.g. IP Address) to the network header at layer 3.</li>\n<li><strong>Frames</strong> - Append the local address (e.g. MAC Address) to the data link header at layer 2.</li>\n<li><strong>Bits</strong> - Convert to bits for transmission on a physical link at layer 1.</li>\n</ol>\n<p>Q: What are the header format of common used PDUs in each layer?</p>\n<p>It usually contains the <strong>address information</strong> and control  information likes sequence numbers, and so on.</p>\n<h3 id=\"network-topology-and-terminologies\"><a class=\"markdownIt-Anchor\" href=\"#network-topology-and-terminologies\"></a> Network topology and terminologies</h3>\n<p>Q: What are the differences of physical and logical network topologies? List some common used physical and logical network topologies.</p>\n<p>Physical topology, which is the actual layout of the wire (media).</p>\n<p>Logical topology, which defines how the media is accessed by the hosts.</p>\n<p>The physical topologies that are commonly used are the <mark>P2P Topology, Bus Topology, Ring Topology, Star Topology, Extended Star Topology, Hierarchical Topology, Tree Topology, Hybrid Topology and Mesh Topology</mark>.</p>\n<p>The ethernet protocol is the most common protocol used for logical topology. The physical topologies that are commonly used are the <mark>Ring Topology and Bus Topology</mark>.</p>\n<p>See more for:</p>\n<ul>\n<li><a href=\"https://www.educba.com/physical-topology/\">Physical Topology | Learn Top 7 Useful Types Of Physical Topology (educba.com)</a></li>\n<li><a href=\"https://www.educba.com/logical-topology/\">Logical Topology | Know Why Do We Use Logical Topology in Networking? (educba.com)</a></li>\n</ul>\n<p>Q: What is the unit of digital bandwidth and analog bandwidth?</p>\n<p>In analog systems, the basic unit of analog bandwidth is <mark>hertz (Hz)</mark>, or cycles per second.</p>\n<p>In digital systems, the basic unit of bandwidth is <mark>bits per second (bps)</mark>.</p>\n<p>Q: What is the definition of bandwidth and throughput, and baud? What is the relationship among bandwidth, throughput, and baud?</p>\n<p>Throughput ≤ Bandwidth</p>\n<p>Throughput is the real life bandwidth.</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>B</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>w</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi><mo>=</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>L</mi><mo>×</mo><mi>b</mi><mi>u</mi><mi>a</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">Bandwidth= log_2L\\times buad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathdefault\">L</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span></span></span></span> where L is the base info.</p>\n<p>See more for: <a href=\"https://www.technologyuk.net/telecommunications/telecom-principles/bits-bauds-and-bandwidth.shtml\">Bits, Bauds and Bandwidth (technologyuk.net)</a></p>\n<p>Q:  What is the difference between the transmission delay and propagation delay?</p>\n<p><strong>Propagation delay</strong> is a simple measurement of how long it takes for a signal to travel along the cable being tested.(<strong>single</strong>)</p>\n<p><strong>Transmission delay</strong> is the time needed to push all the packet bits on the transmission link.(<strong>total</strong>)</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>a</mi><mi>g</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mtext> </mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo>=</mo><mfrac><mrow><mi>l</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mtext> </mtext><mi>o</mi><mi>f</mi><mtext> </mtext><mi>c</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mtext> </mtext><mi>o</mi><mi>f</mi><mtext> </mtext><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi>a</mi><mi>l</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup><mo stretchy=\"false\">)</mo></mrow></mfrac><mspace linebreak=\"newline\"></mspace><mi>T</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>m</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mtext> </mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo>=</mo><mfrac><mrow><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi><mtext> </mtext><mi>o</mi><mi>f</mi><mtext> </mtext><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi>a</mi><mi>l</mi></mrow><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mtext> </mtext><mi>o</mi><mi>f</mi><mtext> </mtext><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>m</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac><mspace linebreak=\"newline\"></mspace></mrow><annotation encoding=\"application/x-tex\">Propagation\\ delay = \\frac{length\\ of \\ cable}{speed\\ of \\ signal(3\\times 10^8)}\\\\\nTransmission\\ delay= \\frac{size\\ of \\ signal}{speed\\ of\\ transmission}\\\\\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.3074399999999997em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714399999999998em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.25188em;vertical-align:-0.8804400000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714399999999998em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804400000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mspace newline\"></span></span></span></span></p>\n<p>See more for: <a href=\"https://www.baeldung.com/cs/propagation-vs-transmission-delay\">Propagation Delay vs Transmission Delay | Baeldung on Computer Science</a></p>\n"},{"title":"计算机网络2 - Layer 1,2 Technology, Ethernet","date":"2022-04-08T15:30:13.000Z","author":"Tony","katex":true,"_content":"\n## Layer 1 Technologies\n\n### Network media\n\nQ:  What carrier signals are used in the network media of copper, optical fiber and wireless?\n\n​\t\tElectrical signals are transferring in copper;\n\n​\t\tLight signals are transferring in optical fiber;\n\n​\t\tElectromagnetic waves are transferring in the air to communicate wireless network media(WIFI).\n\nQ: What is the purpose of encoding and modulation?\n\n​\t\t**Encoding** is the process by which the data is converted into digital format for efficient transmission or storage. \n\n​\t\t**Modulation** is the process of converting information (signals or data) to an electronic or optical carrier, so that it can be transmitted to comparatively large distance without getting affected by noise or unwanted signals.\n\n​\t\tEncoding is about converting digital or analog data to digital signal(**D2A**), whereas modulation is about converting digital or analog data to an analog signal(**A2D**).\t\n\n### Network cabling\n\nQ: What are the differences between LAN cabling and WAN cabling?\n\n​\t\tNothing different?\n\nQ:  List some common used types of cables in LAN and WAN cabling.\n\n​\t\tLAN cabling: coaxial cable, UTP cable, single-mode and multimode fiber, etc.\n\n​\t\tWAN cabling: RS-232 cable, V.35 cable, etc.\n\nQ: In LAN cabling, how to use the UTP cables of straight-through, crossover, rollover to connect devices?\n\n​\t\tSee [Straight-through, Crossover & Rollover Cable Pinouts Explained | Computer Cable Store](https://www.computercablestore.com/straight-through-crossover-and-rollover-wiring).\n\nQ: Which wires of a UTP cable are used to transmit and receive data in Ethernet?\n\n​\t\tCategory 6 cable(LAN Cable).\n\nQ: In WAN cabling, what is the difference between DTE and DCE cabling?\n\n​\t\tDTE: Data Terminal Equipment, e.g. your own PC\n\n​\t\tDCE: Data Circuit Terminating Equipment, e.g. modem.\n\n---\n\n## Layer 2 Technologies\n\n### Layer 2 functions\n\nQ:  What is the media access method of CSMA/CD?\n\n​\t\tCSMA is a simple system that allows only one host to transmit at a time. Hosts on the network can access the  media at any time. Before sending data, CSMA hosts isten to the network to determine if it is already in use.\n​\t\t➢ If in use, then the hosts wait.\n​\t\t➢ If not in use, they transmit.\n\nQ: How does a host use backoff algorithm for transmission attempt when collision occurred in  Ethernet network?\n\n> Exponential backoff is an algorithm that uses feedback to multiplicatively decrease the rate of some process, in order to gradually find an acceptable rate.(Wikipedia)\n\n​\t\tAfter a conflict occurred in a computer network, nodes on the network wait for a certain period of time before sending. The waiting time increases exponentially to avoid frequent triggering conflicts. \n\n​\t\tAfter $n$ conflicts occur, the waiting time is randomly selected between $0$ ~ $2^n-1$ slot times. Note that $n$ cannot be unlimited growing since the waiting time will not increasing without pause. Usually, we set $n\\leq 10$ so that the longest waiting time will not exceed over 1023 slot times.\n$$\nRandom\\ waiting\\ period = [ 0, (2^n – 1) \\times slot\\ time ]\\\\\n$$\n\n### Ethernet switching\n\nQ: What is bridging?\n\n​\t\tBridging refers to a technology in which a device known as a bridge connects two or more LAN segments.\n\nQ: What addresses in the received frame does a switch use to build the switching table and make  forwarding decision?\n\n​\t\tThe switching table is built by using  source address, e.g. **source MAC**. \n\n​\t\tThe forward decision is made by using destination address, e.g.  **destination MAC**.\n\nQ: What are the differences between the switching modes of store-and-forward, fast-forward, and  fragment-free?\n\n​\t\tThe entire frame is received before any forwarding takes place for **Store-and-forward**.\n\n​\t\tThe switch reads the destination address before receiving the entire frame which then forwarded before the entire frame arrives for fast-forward, and fragment-free. (Both belongs to **Cut-through**)\n\nQ: What is the definition of broadcast domain and collision domain?\n\n​\t\tA **broadcast domain** includes all of the collision domains that process the same broadcast frame. This includes all the hosts that are part of the network segment bounded by a layer 3 device.\n\n​\t\tA **collision domain** is a connected physical network segment where collisions can occur. Using the layer 1 device likes repeater or hub extends the collision domain.\n\nQ: How can the layer 1, 2 and 3 network devices be used to segment a network into different domains?\n\n​\t\tRepeater and Hub (layer 1 devices)cannot segment a network into different domain. \n\n​\t\tBridge and Switch (layer 2 devices) can segment a network into different collision domain.\n\n​\t\tRouter (layer 3 devices) can segment a network into different broadcast domain. \n\n<img src=\"CN-2/image-20211204114107336.png\" alt=\"image-20211204114107336\" style=\"zoom: 50%;\" />\n\nQ1: All the red cables are WAN cables, and all the black cables are LAN cables.\n\nQ2: Category 6 Cable\n\nQ3: \n\n![image-20211210170210391](CN-2/image-20211210170210391.png)\n\n<img src=\"CN-2/image-20211204114128703.png\" alt=\"image-20211204114128703\" style=\"zoom:50%;\" />\n\nQ1: Not success, because PC1 and PC3 are in the same collision domain.\n\nQ2: PC1 and PC3, since the back-off algorithm.\n\nQ3: PC2 and PC3, since they are in the same collision domain.\n\nQ4: They will not produce collision, because the four PCs are in the different collision domain.\n\n \n\nWe have to simulate the process step by step:\n\nFirstly, the messages are sent by PC1, and received by Switch1. Switch1 needs to 2 steps, first check the routing table to see whether there is a record about PC3. If there is no record, then Switch1 will broadcast the message through P2 and P3. Therefore, that is the reason why PC2 can receive the message. But PC2 will drop the message since the destination of the message is PC3. \n\nThen, Switch2 received that message. What Switch2 need to do is also that 2 steps, first check the routing table. Switch2 found the PC3 in the routing table, so it just need to send the message to PC3 directly and PC4 will never receive the message. The second step is to write the PC1 into the routing table of Switch 2, as shown below.\n\n\n\n<img src=\"CN-2/image-20211210171011761.png\" alt=\"image-20211210171011761\" style=\"zoom:50%;\" />","source":"_posts/CN-2.md","raw":"---\ntitle: 计算机网络2 - Layer 1,2 Technology, Ethernet\ndate: 2022-04-08 23:30:13\ntags:\n\t- computer network\ncategories:\n\t- 计算机网络\nauthor: Tony\nkatex: true\n---\n\n## Layer 1 Technologies\n\n### Network media\n\nQ:  What carrier signals are used in the network media of copper, optical fiber and wireless?\n\n​\t\tElectrical signals are transferring in copper;\n\n​\t\tLight signals are transferring in optical fiber;\n\n​\t\tElectromagnetic waves are transferring in the air to communicate wireless network media(WIFI).\n\nQ: What is the purpose of encoding and modulation?\n\n​\t\t**Encoding** is the process by which the data is converted into digital format for efficient transmission or storage. \n\n​\t\t**Modulation** is the process of converting information (signals or data) to an electronic or optical carrier, so that it can be transmitted to comparatively large distance without getting affected by noise or unwanted signals.\n\n​\t\tEncoding is about converting digital or analog data to digital signal(**D2A**), whereas modulation is about converting digital or analog data to an analog signal(**A2D**).\t\n\n### Network cabling\n\nQ: What are the differences between LAN cabling and WAN cabling?\n\n​\t\tNothing different?\n\nQ:  List some common used types of cables in LAN and WAN cabling.\n\n​\t\tLAN cabling: coaxial cable, UTP cable, single-mode and multimode fiber, etc.\n\n​\t\tWAN cabling: RS-232 cable, V.35 cable, etc.\n\nQ: In LAN cabling, how to use the UTP cables of straight-through, crossover, rollover to connect devices?\n\n​\t\tSee [Straight-through, Crossover & Rollover Cable Pinouts Explained | Computer Cable Store](https://www.computercablestore.com/straight-through-crossover-and-rollover-wiring).\n\nQ: Which wires of a UTP cable are used to transmit and receive data in Ethernet?\n\n​\t\tCategory 6 cable(LAN Cable).\n\nQ: In WAN cabling, what is the difference between DTE and DCE cabling?\n\n​\t\tDTE: Data Terminal Equipment, e.g. your own PC\n\n​\t\tDCE: Data Circuit Terminating Equipment, e.g. modem.\n\n---\n\n## Layer 2 Technologies\n\n### Layer 2 functions\n\nQ:  What is the media access method of CSMA/CD?\n\n​\t\tCSMA is a simple system that allows only one host to transmit at a time. Hosts on the network can access the  media at any time. Before sending data, CSMA hosts isten to the network to determine if it is already in use.\n​\t\t➢ If in use, then the hosts wait.\n​\t\t➢ If not in use, they transmit.\n\nQ: How does a host use backoff algorithm for transmission attempt when collision occurred in  Ethernet network?\n\n> Exponential backoff is an algorithm that uses feedback to multiplicatively decrease the rate of some process, in order to gradually find an acceptable rate.(Wikipedia)\n\n​\t\tAfter a conflict occurred in a computer network, nodes on the network wait for a certain period of time before sending. The waiting time increases exponentially to avoid frequent triggering conflicts. \n\n​\t\tAfter $n$ conflicts occur, the waiting time is randomly selected between $0$ ~ $2^n-1$ slot times. Note that $n$ cannot be unlimited growing since the waiting time will not increasing without pause. Usually, we set $n\\leq 10$ so that the longest waiting time will not exceed over 1023 slot times.\n$$\nRandom\\ waiting\\ period = [ 0, (2^n – 1) \\times slot\\ time ]\\\\\n$$\n\n### Ethernet switching\n\nQ: What is bridging?\n\n​\t\tBridging refers to a technology in which a device known as a bridge connects two or more LAN segments.\n\nQ: What addresses in the received frame does a switch use to build the switching table and make  forwarding decision?\n\n​\t\tThe switching table is built by using  source address, e.g. **source MAC**. \n\n​\t\tThe forward decision is made by using destination address, e.g.  **destination MAC**.\n\nQ: What are the differences between the switching modes of store-and-forward, fast-forward, and  fragment-free?\n\n​\t\tThe entire frame is received before any forwarding takes place for **Store-and-forward**.\n\n​\t\tThe switch reads the destination address before receiving the entire frame which then forwarded before the entire frame arrives for fast-forward, and fragment-free. (Both belongs to **Cut-through**)\n\nQ: What is the definition of broadcast domain and collision domain?\n\n​\t\tA **broadcast domain** includes all of the collision domains that process the same broadcast frame. This includes all the hosts that are part of the network segment bounded by a layer 3 device.\n\n​\t\tA **collision domain** is a connected physical network segment where collisions can occur. Using the layer 1 device likes repeater or hub extends the collision domain.\n\nQ: How can the layer 1, 2 and 3 network devices be used to segment a network into different domains?\n\n​\t\tRepeater and Hub (layer 1 devices)cannot segment a network into different domain. \n\n​\t\tBridge and Switch (layer 2 devices) can segment a network into different collision domain.\n\n​\t\tRouter (layer 3 devices) can segment a network into different broadcast domain. \n\n<img src=\"CN-2/image-20211204114107336.png\" alt=\"image-20211204114107336\" style=\"zoom: 50%;\" />\n\nQ1: All the red cables are WAN cables, and all the black cables are LAN cables.\n\nQ2: Category 6 Cable\n\nQ3: \n\n![image-20211210170210391](CN-2/image-20211210170210391.png)\n\n<img src=\"CN-2/image-20211204114128703.png\" alt=\"image-20211204114128703\" style=\"zoom:50%;\" />\n\nQ1: Not success, because PC1 and PC3 are in the same collision domain.\n\nQ2: PC1 and PC3, since the back-off algorithm.\n\nQ3: PC2 and PC3, since they are in the same collision domain.\n\nQ4: They will not produce collision, because the four PCs are in the different collision domain.\n\n \n\nWe have to simulate the process step by step:\n\nFirstly, the messages are sent by PC1, and received by Switch1. Switch1 needs to 2 steps, first check the routing table to see whether there is a record about PC3. If there is no record, then Switch1 will broadcast the message through P2 and P3. Therefore, that is the reason why PC2 can receive the message. But PC2 will drop the message since the destination of the message is PC3. \n\nThen, Switch2 received that message. What Switch2 need to do is also that 2 steps, first check the routing table. Switch2 found the PC3 in the routing table, so it just need to send the message to PC3 directly and PC4 will never receive the message. The second step is to write the PC1 into the routing table of Switch 2, as shown below.\n\n\n\n<img src=\"CN-2/image-20211210171011761.png\" alt=\"image-20211210171011761\" style=\"zoom:50%;\" />","slug":"CN-2","published":1,"updated":"2022-11-01T05:53:00.534Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcs00131gzuh5iyabrr","content":"<h2 id=\"layer-1-technologies\"><a class=\"markdownIt-Anchor\" href=\"#layer-1-technologies\"></a> Layer 1 Technologies</h2>\n<h3 id=\"network-media\"><a class=\"markdownIt-Anchor\" href=\"#network-media\"></a> Network media</h3>\n<p>Q:  What carrier signals are used in the network media of copper, optical fiber and wireless?</p>\n<p>​\t\tElectrical signals are transferring in copper;</p>\n<p>​\t\tLight signals are transferring in optical fiber;</p>\n<p>​\t\tElectromagnetic waves are transferring in the air to communicate wireless network media(WIFI).</p>\n<p>Q: What is the purpose of encoding and modulation?</p>\n<p>​\t\t<strong>Encoding</strong> is the process by which the data is converted into digital format for efficient transmission or storage.</p>\n<p>​\t\t<strong>Modulation</strong> is the process of converting information (signals or data) to an electronic or optical carrier, so that it can be transmitted to comparatively large distance without getting affected by noise or unwanted signals.</p>\n<p>​\t\tEncoding is about converting digital or analog data to digital signal(<strong>D2A</strong>), whereas modulation is about converting digital or analog data to an analog signal(<strong>A2D</strong>).</p>\n<h3 id=\"network-cabling\"><a class=\"markdownIt-Anchor\" href=\"#network-cabling\"></a> Network cabling</h3>\n<p>Q: What are the differences between LAN cabling and WAN cabling?</p>\n<p>​\t\tNothing different?</p>\n<p>Q:  List some common used types of cables in LAN and WAN cabling.</p>\n<p>​\t\tLAN cabling: coaxial cable, UTP cable, single-mode and multimode fiber, etc.</p>\n<p>​\t\tWAN cabling: RS-232 cable, V.35 cable, etc.</p>\n<p>Q: In LAN cabling, how to use the UTP cables of straight-through, crossover, rollover to connect devices?</p>\n<p>​\t\tSee <a href=\"https://www.computercablestore.com/straight-through-crossover-and-rollover-wiring\">Straight-through, Crossover &amp; Rollover Cable Pinouts Explained | Computer Cable Store</a>.</p>\n<p>Q: Which wires of a UTP cable are used to transmit and receive data in Ethernet?</p>\n<p>​\t\tCategory 6 cable(LAN Cable).</p>\n<p>Q: In WAN cabling, what is the difference between DTE and DCE cabling?</p>\n<p>​\t\tDTE: Data Terminal Equipment, e.g. your own PC</p>\n<p>​\t\tDCE: Data Circuit Terminating Equipment, e.g. modem.</p>\n<hr>\n<h2 id=\"layer-2-technologies\"><a class=\"markdownIt-Anchor\" href=\"#layer-2-technologies\"></a> Layer 2 Technologies</h2>\n<h3 id=\"layer-2-functions\"><a class=\"markdownIt-Anchor\" href=\"#layer-2-functions\"></a> Layer 2 functions</h3>\n<p>Q:  What is the media access method of CSMA/CD?</p>\n<p>​\t\tCSMA is a simple system that allows only one host to transmit at a time. Hosts on the network can access the  media at any time. Before sending data, CSMA hosts isten to the network to determine if it is already in use.<br>\n​\t\t➢ If in use, then the hosts wait.<br>\n​\t\t➢ If not in use, they transmit.</p>\n<p>Q: How does a host use backoff algorithm for transmission attempt when collision occurred in  Ethernet network?</p>\n<blockquote>\n<p>Exponential backoff is an algorithm that uses feedback to multiplicatively decrease the rate of some process, in order to gradually find an acceptable rate.(Wikipedia)</p>\n</blockquote>\n<p>​\t\tAfter a conflict occurred in a computer network, nodes on the network wait for a certain period of time before sending. The waiting time increases exponentially to avoid frequent triggering conflicts.</p>\n<p>​\t\tAfter <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> conflicts occur, the waiting time is randomly selected between <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ~ <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^n-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.747722em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> slot times. Note that <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> cannot be unlimited growing since the waiting time will not increasing without pause. Usually, we set <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>≤</mo><mn>10</mn></mrow><annotation encoding=\"application/x-tex\">n\\leq 10</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span></span> so that the longest waiting time will not exceed over 1023 slot times.</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>o</mi><mi>m</mi><mtext> </mtext><mi>w</mi><mi>a</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>g</mi><mtext> </mtext><mi>p</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi><mo>=</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><msup><mn>2</mn><mi>n</mi></msup><mi mathvariant=\"normal\">–</mi><mn>1</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mi>s</mi><mi>l</mi><mi>o</mi><mi>t</mi><mtext> </mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">]</mo><mspace linebreak=\"newline\"></mspace></mrow><annotation encoding=\"application/x-tex\">Random\\ waiting\\ period = [ 0, (2^n – 1) \\times slot\\ time ]\\\\\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7143919999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mord\" style=\"margin-right:0.02778em;\">–</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mclose\">]</span></span><span class=\"mspace newline\"></span></span></span></span></p>\n<h3 id=\"ethernet-switching\"><a class=\"markdownIt-Anchor\" href=\"#ethernet-switching\"></a> Ethernet switching</h3>\n<p>Q: What is bridging?</p>\n<p>​\t\tBridging refers to a technology in which a device known as a bridge connects two or more LAN segments.</p>\n<p>Q: What addresses in the received frame does a switch use to build the switching table and make  forwarding decision?</p>\n<p>​\t\tThe switching table is built by using  source address, e.g. <strong>source MAC</strong>.</p>\n<p>​\t\tThe forward decision is made by using destination address, e.g.  <strong>destination MAC</strong>.</p>\n<p>Q: What are the differences between the switching modes of store-and-forward, fast-forward, and  fragment-free?</p>\n<p>​\t\tThe entire frame is received before any forwarding takes place for <strong>Store-and-forward</strong>.</p>\n<p>​\t\tThe switch reads the destination address before receiving the entire frame which then forwarded before the entire frame arrives for fast-forward, and fragment-free. (Both belongs to <strong>Cut-through</strong>)</p>\n<p>Q: What is the definition of broadcast domain and collision domain?</p>\n<p>​\t\tA <strong>broadcast domain</strong> includes all of the collision domains that process the same broadcast frame. This includes all the hosts that are part of the network segment bounded by a layer 3 device.</p>\n<p>​\t\tA <strong>collision domain</strong> is a connected physical network segment where collisions can occur. Using the layer 1 device likes repeater or hub extends the collision domain.</p>\n<p>Q: How can the layer 1, 2 and 3 network devices be used to segment a network into different domains?</p>\n<p>​\t\tRepeater and Hub (layer 1 devices)cannot segment a network into different domain.</p>\n<p>​\t\tBridge and Switch (layer 2 devices) can segment a network into different collision domain.</p>\n<p>​\t\tRouter (layer 3 devices) can segment a network into different broadcast domain.</p>\n<img src=\"/2022/04/08/CN-2/image-20211204114107336.png\" alt=\"image-20211204114107336\" style=\"zoom: 50%;\" loading=\"lazy\">\n<p>Q1: All the red cables are WAN cables, and all the black cables are LAN cables.</p>\n<p>Q2: Category 6 Cable</p>\n<p>Q3:</p>\n<p><img src=\"/2022/04/08/CN-2/image-20211210170210391.png\" alt=\"image-20211210170210391\" loading=\"lazy\"></p>\n<img src=\"/2022/04/08/CN-2/image-20211204114128703.png\" alt=\"image-20211204114128703\" style=\"zoom:50%;\" loading=\"lazy\">\n<p>Q1: Not success, because PC1 and PC3 are in the same collision domain.</p>\n<p>Q2: PC1 and PC3, since the back-off algorithm.</p>\n<p>Q3: PC2 and PC3, since they are in the same collision domain.</p>\n<p>Q4: They will not produce collision, because the four PCs are in the different collision domain.</p>\n<p>We have to simulate the process step by step:</p>\n<p>Firstly, the messages are sent by PC1, and received by Switch1. Switch1 needs to 2 steps, first check the routing table to see whether there is a record about PC3. If there is no record, then Switch1 will broadcast the message through P2 and P3. Therefore, that is the reason why PC2 can receive the message. But PC2 will drop the message since the destination of the message is PC3.</p>\n<p>Then, Switch2 received that message. What Switch2 need to do is also that 2 steps, first check the routing table. Switch2 found the PC3 in the routing table, so it just need to send the message to PC3 directly and PC4 will never receive the message. The second step is to write the PC1 into the routing table of Switch 2, as shown below.</p>\n<img src=\"/2022/04/08/CN-2/image-20211210171011761.png\" alt=\"image-20211210171011761\" style=\"zoom:50%;\" loading=\"lazy\">","site":{"data":{}},"excerpt":"","more":"<h2 id=\"layer-1-technologies\"><a class=\"markdownIt-Anchor\" href=\"#layer-1-technologies\"></a> Layer 1 Technologies</h2>\n<h3 id=\"network-media\"><a class=\"markdownIt-Anchor\" href=\"#network-media\"></a> Network media</h3>\n<p>Q:  What carrier signals are used in the network media of copper, optical fiber and wireless?</p>\n<p>​\t\tElectrical signals are transferring in copper;</p>\n<p>​\t\tLight signals are transferring in optical fiber;</p>\n<p>​\t\tElectromagnetic waves are transferring in the air to communicate wireless network media(WIFI).</p>\n<p>Q: What is the purpose of encoding and modulation?</p>\n<p>​\t\t<strong>Encoding</strong> is the process by which the data is converted into digital format for efficient transmission or storage.</p>\n<p>​\t\t<strong>Modulation</strong> is the process of converting information (signals or data) to an electronic or optical carrier, so that it can be transmitted to comparatively large distance without getting affected by noise or unwanted signals.</p>\n<p>​\t\tEncoding is about converting digital or analog data to digital signal(<strong>D2A</strong>), whereas modulation is about converting digital or analog data to an analog signal(<strong>A2D</strong>).</p>\n<h3 id=\"network-cabling\"><a class=\"markdownIt-Anchor\" href=\"#network-cabling\"></a> Network cabling</h3>\n<p>Q: What are the differences between LAN cabling and WAN cabling?</p>\n<p>​\t\tNothing different?</p>\n<p>Q:  List some common used types of cables in LAN and WAN cabling.</p>\n<p>​\t\tLAN cabling: coaxial cable, UTP cable, single-mode and multimode fiber, etc.</p>\n<p>​\t\tWAN cabling: RS-232 cable, V.35 cable, etc.</p>\n<p>Q: In LAN cabling, how to use the UTP cables of straight-through, crossover, rollover to connect devices?</p>\n<p>​\t\tSee <a href=\"https://www.computercablestore.com/straight-through-crossover-and-rollover-wiring\">Straight-through, Crossover &amp; Rollover Cable Pinouts Explained | Computer Cable Store</a>.</p>\n<p>Q: Which wires of a UTP cable are used to transmit and receive data in Ethernet?</p>\n<p>​\t\tCategory 6 cable(LAN Cable).</p>\n<p>Q: In WAN cabling, what is the difference between DTE and DCE cabling?</p>\n<p>​\t\tDTE: Data Terminal Equipment, e.g. your own PC</p>\n<p>​\t\tDCE: Data Circuit Terminating Equipment, e.g. modem.</p>\n<hr>\n<h2 id=\"layer-2-technologies\"><a class=\"markdownIt-Anchor\" href=\"#layer-2-technologies\"></a> Layer 2 Technologies</h2>\n<h3 id=\"layer-2-functions\"><a class=\"markdownIt-Anchor\" href=\"#layer-2-functions\"></a> Layer 2 functions</h3>\n<p>Q:  What is the media access method of CSMA/CD?</p>\n<p>​\t\tCSMA is a simple system that allows only one host to transmit at a time. Hosts on the network can access the  media at any time. Before sending data, CSMA hosts isten to the network to determine if it is already in use.<br>\n​\t\t➢ If in use, then the hosts wait.<br>\n​\t\t➢ If not in use, they transmit.</p>\n<p>Q: How does a host use backoff algorithm for transmission attempt when collision occurred in  Ethernet network?</p>\n<blockquote>\n<p>Exponential backoff is an algorithm that uses feedback to multiplicatively decrease the rate of some process, in order to gradually find an acceptable rate.(Wikipedia)</p>\n</blockquote>\n<p>​\t\tAfter a conflict occurred in a computer network, nodes on the network wait for a certain period of time before sending. The waiting time increases exponentially to avoid frequent triggering conflicts.</p>\n<p>​\t\tAfter <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> conflicts occur, the waiting time is randomly selected between <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ~ <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^n-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.747722em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> slot times. Note that <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> cannot be unlimited growing since the waiting time will not increasing without pause. Usually, we set <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>≤</mo><mn>10</mn></mrow><annotation encoding=\"application/x-tex\">n\\leq 10</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span></span> so that the longest waiting time will not exceed over 1023 slot times.</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>o</mi><mi>m</mi><mtext> </mtext><mi>w</mi><mi>a</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>g</mi><mtext> </mtext><mi>p</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi><mo>=</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><msup><mn>2</mn><mi>n</mi></msup><mi mathvariant=\"normal\">–</mi><mn>1</mn><mo stretchy=\"false\">)</mo><mo>×</mo><mi>s</mi><mi>l</mi><mi>o</mi><mi>t</mi><mtext> </mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=\"false\">]</mo><mspace linebreak=\"newline\"></mspace></mrow><annotation encoding=\"application/x-tex\">Random\\ waiting\\ period = [ 0, (2^n – 1) \\times slot\\ time ]\\\\\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">m</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7143919999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span><span class=\"mord\" style=\"margin-right:0.02778em;\">–</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">e</span><span class=\"mclose\">]</span></span><span class=\"mspace newline\"></span></span></span></span></p>\n<h3 id=\"ethernet-switching\"><a class=\"markdownIt-Anchor\" href=\"#ethernet-switching\"></a> Ethernet switching</h3>\n<p>Q: What is bridging?</p>\n<p>​\t\tBridging refers to a technology in which a device known as a bridge connects two or more LAN segments.</p>\n<p>Q: What addresses in the received frame does a switch use to build the switching table and make  forwarding decision?</p>\n<p>​\t\tThe switching table is built by using  source address, e.g. <strong>source MAC</strong>.</p>\n<p>​\t\tThe forward decision is made by using destination address, e.g.  <strong>destination MAC</strong>.</p>\n<p>Q: What are the differences between the switching modes of store-and-forward, fast-forward, and  fragment-free?</p>\n<p>​\t\tThe entire frame is received before any forwarding takes place for <strong>Store-and-forward</strong>.</p>\n<p>​\t\tThe switch reads the destination address before receiving the entire frame which then forwarded before the entire frame arrives for fast-forward, and fragment-free. (Both belongs to <strong>Cut-through</strong>)</p>\n<p>Q: What is the definition of broadcast domain and collision domain?</p>\n<p>​\t\tA <strong>broadcast domain</strong> includes all of the collision domains that process the same broadcast frame. This includes all the hosts that are part of the network segment bounded by a layer 3 device.</p>\n<p>​\t\tA <strong>collision domain</strong> is a connected physical network segment where collisions can occur. Using the layer 1 device likes repeater or hub extends the collision domain.</p>\n<p>Q: How can the layer 1, 2 and 3 network devices be used to segment a network into different domains?</p>\n<p>​\t\tRepeater and Hub (layer 1 devices)cannot segment a network into different domain.</p>\n<p>​\t\tBridge and Switch (layer 2 devices) can segment a network into different collision domain.</p>\n<p>​\t\tRouter (layer 3 devices) can segment a network into different broadcast domain.</p>\n<img src=\"/2022/04/08/CN-2/image-20211204114107336.png\" alt=\"image-20211204114107336\" style=\"zoom: 50%;\">\n<p>Q1: All the red cables are WAN cables, and all the black cables are LAN cables.</p>\n<p>Q2: Category 6 Cable</p>\n<p>Q3:</p>\n<p><img src=\"/2022/04/08/CN-2/image-20211210170210391.png\" alt=\"image-20211210170210391\"></p>\n<img src=\"/2022/04/08/CN-2/image-20211204114128703.png\" alt=\"image-20211204114128703\" style=\"zoom:50%;\">\n<p>Q1: Not success, because PC1 and PC3 are in the same collision domain.</p>\n<p>Q2: PC1 and PC3, since the back-off algorithm.</p>\n<p>Q3: PC2 and PC3, since they are in the same collision domain.</p>\n<p>Q4: They will not produce collision, because the four PCs are in the different collision domain.</p>\n<p>We have to simulate the process step by step:</p>\n<p>Firstly, the messages are sent by PC1, and received by Switch1. Switch1 needs to 2 steps, first check the routing table to see whether there is a record about PC3. If there is no record, then Switch1 will broadcast the message through P2 and P3. Therefore, that is the reason why PC2 can receive the message. But PC2 will drop the message since the destination of the message is PC3.</p>\n<p>Then, Switch2 received that message. What Switch2 need to do is also that 2 steps, first check the routing table. Switch2 found the PC3 in the routing table, so it just need to send the message to PC3 directly and PC4 will never receive the message. The second step is to write the PC1 into the routing table of Switch 2, as shown below.</p>\n<img src=\"/2022/04/08/CN-2/image-20211210171011761.png\" alt=\"image-20211210171011761\" style=\"zoom:50%;\">"},{"title":"computer network 3 - Technology, IP Addressing and IP Routing","date":"2022-04-08T15:35:12.000Z","author":"Tony","katex":true,"_content":"\n## Chapter 3 Technology, IP Addressing and IP Routing\n\n### Layer 3 technologies\n\n#### IPv4 addressing\n\n###### What are the differences between flat addressing and hierarchical addressing?\n\n==Flat addressing== assigns a device the next available address. For example, the ==MAC addressing==.\n\n==Hierarchical addressing== contains different levels. For example, the ==IP addressing==.\n\n###### What are the ranges of the Class A, B, C addresses and their default subnet masks?\n\nClass A: `1.0.0.0/8 ~ 126.255.255.255/8` \n\nClass B: `128.0.0.0/16 ~ 191.255.255.255/16`\n\nClass C: `192.0.0.0/24 ~ 223.255.255.255/24`\n\n###### What are the three ranges of private IP addresses?\n\nThere are certain addresses in each class of IPv4 address that are not assigned. These addresses are  called ==private addresses==. `RFC 1918` sets aside 3 blocks of IPv4 addresses for private, internal use.  These 3 blocks consist of one Class A, a range of Class B addresses, and a range of Class C  addresses.\n\n![image-20211205162300456](CN-3/image-20211205162300456.png)\n\n###### What is the difference of network address, broadcast address and host address? What are these  types of addresses used for?\n\n(**IP addresses**: Addresses in computer networks which contains network address and host address.)\n\n**Network address**: Used to identify the network itself where the host portion were all zeros. For instance:\n\n<img src=\"../../../../../OneDrive - Macau University of Science and Technology/Junior/First Semester/Computer Network/Mid-term/Mid-term Assignment.assets/image-20211110131414754.png\" alt=\"image-20211110131414754\" style=\"zoom: 67%;\" />\n\n**Host address** is the address in which the host portion cannot be all zeros (0s) or all ones (1s), can be assigned to a device on the network. For instance:\n\n<img src=\"../../../../../OneDrive - Macau University of Science and Technology/Junior/First Semester/Computer Network/Mid-term/Mid-term Assignment.assets/image-20211110131554883.png\" alt=\"image-20211110131554883\" style=\"zoom:67%;\" />\n\n**Broadcast address**: Used for broadcasting packets to all the devices on a network. If the host portion were all ones (1s), it would be a broadcast address. For example:\n\n<img src=\"file://C:\\Users\\28580\\OneDrive - Macau University of Science and Technology\\Junior\\First Semester\\Computer Network\\Mid-term\\Mid-term Assignment.assets\\image-20211110131623041.png?lastModify=1638693050\" alt=\"image-20211110131623041\" style=\"zoom:67%;\" />\n\n#### IPv4 subnetting\n\n###### What is IPv4 classful subnetting?\n\nClassful addressing is an IPv4 addressing architecture that divides addresses into five groups.\n\n![image-20211205174403372](CN-3/image-20211205174403372.png)\n\n###### What is IPv4 classless subnetting? \n\nClassless addressing is an IPv4 addressing architecture that uses ==VLSM== (variable-length subnet masking).\n\n![image-20211205174543073](CN-3/image-20211205174543073.png)\n\n#### IPv6 addressing\n\n###### How to represent IPv6 address in full form and simplified form?\n\nFull form example: `FE80:0:0:0:0:2AA:FE9A:4CA2`\n\nSimplified form example: `FE80::2AA:FE9A:4CA2`\n\n###### What are the three types of IPv6 addresses? What specific addresses are defined for these types  IPv6 addresses?\n\nThe three types of IPv6 addresses are **unicast, multicast and anycast** respectively.\n\n- **Unicast (one to one)**: A packet addressed to a unicast address is delivered to a single interface.\n\n- **Multicast (one to many)**: A multicast address identifies multiple interfaces. A packet addressed to a multicast address is delivered to all interfaces that are identified by the address.\n\n- **Anycast (one to nearest-one / one to one-of-many)**: An anycast address identifies multiple interfaces. A packet addressed to an anycast address is delivered to a single interface, the nearest interface that is identified by the address. The “nearest” interface is defined as being closest in terms of routing distance.\n\nSpecific addresses of these three types of IPv6 addresses are:\n\n- Prefix of **Multicast** is `FF00::/8`.\n\n- Prefix of **Link-local unicast** is `FE80::/10`.\n\n- Prefix of **global unicast** is `2000::/3`.\n\n###### How to form a link-local address? How to form a global unicast address using stateless auto-configuration?\n\nlink-local scope all-nodes (`FF02::1`) and all-routers (`FF02::2`) multicast address.\n\nStateless autoconfiguration uses the information in RA(Router Advertisement) messages to configure the IPv6 hosts automatically. Thus, every IPv6 hosts (other than routers) is able to build its own global unicast address.\n\n#### IPv6 neighbor discovery protocol (NDP)\n\n###### What 4 ICMPv6 messages are used in NDP?\n\nRA(Router Advertisement)\n\nRS(Router Solicitation)\n\nNS(Neighbor Solicitation)\n\nNA(Neighbor Advertisement)\n\nSee more for: [NDP - Neighbor Discovery Protocol (howdoesinternetwork.com)](https://howdoesinternetwork.com/2012/ndp-ipv6-neighbor-discovery-protocol)\n\n###### What ICMPv6 messages are used for the functions provided by NDP? (For example, Address  resolution, Duplicate address detection, Prefix and Router discovery.)\n\nDAD (Duplicate address detection) mechanism is realized through **NS and NA** messages. \n\nWhat is DAD: when a new unicast address is configured, it will perform DAD testing— sending a NS message which contain the destination address of itself through the network. (for example, if the new address that want to allocate is `2000::1`, it will send the NS message with source address `::` and destination address `2000::1`). Note that the node will ignore the NS message sent by itself. If nobody respond a NA message, we can consider that this unicast address is unique on this link. This method is call DAD.\n\nSee more for: [paper-03.pdf (thomasclausen.org)](http://interop.thomasclausen.org/Interop05/Papers/Papers/paper-03.pdf)\n\n[What is duplicate address detection? (ibm.com)](https://www.ibm.com/support/pages/what-duplicate-address-detection)\n\nPrefix and Router discovery mechanism is realized through **RS and RA** messages.\n\nRouter will send RA messages periodically in order to let the host computers and other equipment know of its existence, and the RA messages contain the prefix network information and more. Sometimes host computer will also actively send RS messages for communication with other nodes, and the router will respond with a RA message.\n\nSee more for: [IPv6 part 10: Neighbor Discovery – Router Discovery - Intense School](http://resources.intenseschool.com/ipv6-neighbor-discovery-router-discovery/)\n\n#### IP Routing\n\n###### What are the differences between layer 2 switching and layer 3 routing?\n\n**Layer 2 switching** is based on data-link layer information, e.g. MAC addresses. Switches (typically  stands for layer 2 switches) use layer 2 switching to forward frames.\n\n**Layer 3 routing** is based on network layer addresses information, e.g. IP addresses. Routers or  layer 3 switches use layer 3 switching to route a packet. It has 2 processes which is Path determination and Packet switching.\n\n###### What is the difference between the next-hop and the default gateway?\n\n**Default gateway** is used for a host to communicate with hosts on other networks. The default gateway's IP address must be in the same network subnet as the source host.\n\n**Next hop** is a routing term that refers to the next closest router a packet can go through.\n\nThere are practically incomparable between default gateway and next hop.\n\n###### What are the differences between the intra-subnet and inter-subnet communications?\n\nIf a host communicates with each other ==within== a subnet, called ==intra-subnet communication.==\n\nIf the IP communication is between hosts in ==different== IP subnets, called ==inter-subnet  communication==.\n\n###### How to use Address Resolution Protocol (ARP) in the intra-subnet and inter-subnet communications?\n\nARP is working in the networking layer, which is responsible for ==resolving IP address into MAC address==.\n\nIn the intra-subnet communication, the source device will broadcast an ARP request and wait for an ARP reply from the destination devices. The source devices then record the destination IP and MAC address to an ARP table.\n\nIn the inter-subnet communication, however, the source device will obtain the MAC address of the default gateway router through ARP request.\n\n###### For inter-subnet communication, how do IP addresses and MAC addresses change in the packet  during the data transmission?\n\nIP addresses are ==changeless== during the data transmission.\n\nMAC address are ==changing== based on different routers during the data transmission.=\n\n---\n\n![image-20211205153141538](CN-3/image-20211205153141538.png)\n\nQ1:\n\nSince subnet mast is 29, which means:`11111111.11111111.11111111.111111000`. Only 3bits are dynamic, which is $2^3=8$.\n\nSince the IP address of router is `172.16.11.11/29`, the sub-network segment is `172.16.11.8--172.16.11.15`.\n\n**Note that** the host address with all 0s or with all 1s cannot be used for networking, which means `172.16.11.8` and `172.16.11.15` cannot be a client IP.\n\nTherefore, the IP address of PC1 and PC2 are both wrong. What is more, the subnet mask of PC2 is not corresponding with this network domain(it should be 29).\n\nQ2:\n\nIn the same way of Q1, we know the subnet mask of this network domain is 18 (`11111111.11111111.11000000.00000000`). $6bits$ are dynamic,which is $2^6=64$. The sub-network segment is `172.16.0.0--172.16.63.255`.\n\nTherefor, PC3 is in this segment while PC4 is not in this subnet domain.\n\nQ3:\n\nWe have already know that `172.16.0.0` is for network address and `172.16.63.255` is for broadcast address. Thus, the range of valid host address is `172.16.0.1--172.16.63.254`.\n\n---\n\n![image-20211205153202429](CN-3/image-20211205153202429.png)\n\nVLSM steps:\n\n**Step 1: Divide the subnet**\n\n![image-20211205165352723](CN-3/image-20211205165352723.png)\n\n**Note that** routers divide broadcast domain, therefore a point-to-point WAN connection is also a subnet.\n\n**Step 2: Allocate the subnet(usually from largest to smallest)**\n\nSubnet mask=24, `1111111.1111111.1111111.0000000`, which means all subnets are in the form of `192.168.1.H` and $H$ contains 8 bits. Now lets allocate the $H$:\n\n`192.168.1.0XXXXXXX` $\\to$ 120 hosts\n\n`192.168.1.10XXXXXX` $\\to$ 60 hosts\n\n`192.168.1.110XXXXX` $\\to$ 30 hosts\n\n`192.168.1.1110XXXX` $\\to$ 10 hosts\n\n`192.168.1.111100XX` $\\to$ 2 hosts\n\n`192.168.1.111101XX` $\\to$ WAN link 1\n\n`192.168.1.111110XX` $\\to$ WAN link 2\n\n`192.168.1.111111XX` $\\to$ WAN link 3\n\n**Note that** ==at most== a 30-bit mask can be used for point-to-point WAN connections since the first address and the last address are used for network address and broadcast address separately, which occupy 2 addresses, and the source address and destination address also occupy 2 addresses. Therefore, at least 4 addresses ($2^2$) are used and $32-2=30$.\n\n![image-20211205153214433](CN-3/image-20211205153214433.png)\n\nIP routing contains several steps, each step is in the same broadcast domain, but the source IP and destination IP are always changeless. In this example, they are always `192.168.1.11` and `192.168.2.88`.\n\n\n\n![image-20211205153227168](CN-3/image-20211205153227168.png)\n\nQ1: `FE80::/10`\n\nQ2: ???\n\nQ3: RS-RA\n\nQ4: DAD\n\n","source":"_posts/CN-3.md","raw":"---\ntitle: computer network 3 - Technology, IP Addressing and IP Routing\ndate: 2022-04-08 23:35:12\ntags:\n\t- computer network\ncategories:\n\t- 计算机网络\nauthor: Tony\nkatex: true\n---\n\n## Chapter 3 Technology, IP Addressing and IP Routing\n\n### Layer 3 technologies\n\n#### IPv4 addressing\n\n###### What are the differences between flat addressing and hierarchical addressing?\n\n==Flat addressing== assigns a device the next available address. For example, the ==MAC addressing==.\n\n==Hierarchical addressing== contains different levels. For example, the ==IP addressing==.\n\n###### What are the ranges of the Class A, B, C addresses and their default subnet masks?\n\nClass A: `1.0.0.0/8 ~ 126.255.255.255/8` \n\nClass B: `128.0.0.0/16 ~ 191.255.255.255/16`\n\nClass C: `192.0.0.0/24 ~ 223.255.255.255/24`\n\n###### What are the three ranges of private IP addresses?\n\nThere are certain addresses in each class of IPv4 address that are not assigned. These addresses are  called ==private addresses==. `RFC 1918` sets aside 3 blocks of IPv4 addresses for private, internal use.  These 3 blocks consist of one Class A, a range of Class B addresses, and a range of Class C  addresses.\n\n![image-20211205162300456](CN-3/image-20211205162300456.png)\n\n###### What is the difference of network address, broadcast address and host address? What are these  types of addresses used for?\n\n(**IP addresses**: Addresses in computer networks which contains network address and host address.)\n\n**Network address**: Used to identify the network itself where the host portion were all zeros. For instance:\n\n<img src=\"../../../../../OneDrive - Macau University of Science and Technology/Junior/First Semester/Computer Network/Mid-term/Mid-term Assignment.assets/image-20211110131414754.png\" alt=\"image-20211110131414754\" style=\"zoom: 67%;\" />\n\n**Host address** is the address in which the host portion cannot be all zeros (0s) or all ones (1s), can be assigned to a device on the network. For instance:\n\n<img src=\"../../../../../OneDrive - Macau University of Science and Technology/Junior/First Semester/Computer Network/Mid-term/Mid-term Assignment.assets/image-20211110131554883.png\" alt=\"image-20211110131554883\" style=\"zoom:67%;\" />\n\n**Broadcast address**: Used for broadcasting packets to all the devices on a network. If the host portion were all ones (1s), it would be a broadcast address. For example:\n\n<img src=\"file://C:\\Users\\28580\\OneDrive - Macau University of Science and Technology\\Junior\\First Semester\\Computer Network\\Mid-term\\Mid-term Assignment.assets\\image-20211110131623041.png?lastModify=1638693050\" alt=\"image-20211110131623041\" style=\"zoom:67%;\" />\n\n#### IPv4 subnetting\n\n###### What is IPv4 classful subnetting?\n\nClassful addressing is an IPv4 addressing architecture that divides addresses into five groups.\n\n![image-20211205174403372](CN-3/image-20211205174403372.png)\n\n###### What is IPv4 classless subnetting? \n\nClassless addressing is an IPv4 addressing architecture that uses ==VLSM== (variable-length subnet masking).\n\n![image-20211205174543073](CN-3/image-20211205174543073.png)\n\n#### IPv6 addressing\n\n###### How to represent IPv6 address in full form and simplified form?\n\nFull form example: `FE80:0:0:0:0:2AA:FE9A:4CA2`\n\nSimplified form example: `FE80::2AA:FE9A:4CA2`\n\n###### What are the three types of IPv6 addresses? What specific addresses are defined for these types  IPv6 addresses?\n\nThe three types of IPv6 addresses are **unicast, multicast and anycast** respectively.\n\n- **Unicast (one to one)**: A packet addressed to a unicast address is delivered to a single interface.\n\n- **Multicast (one to many)**: A multicast address identifies multiple interfaces. A packet addressed to a multicast address is delivered to all interfaces that are identified by the address.\n\n- **Anycast (one to nearest-one / one to one-of-many)**: An anycast address identifies multiple interfaces. A packet addressed to an anycast address is delivered to a single interface, the nearest interface that is identified by the address. The “nearest” interface is defined as being closest in terms of routing distance.\n\nSpecific addresses of these three types of IPv6 addresses are:\n\n- Prefix of **Multicast** is `FF00::/8`.\n\n- Prefix of **Link-local unicast** is `FE80::/10`.\n\n- Prefix of **global unicast** is `2000::/3`.\n\n###### How to form a link-local address? How to form a global unicast address using stateless auto-configuration?\n\nlink-local scope all-nodes (`FF02::1`) and all-routers (`FF02::2`) multicast address.\n\nStateless autoconfiguration uses the information in RA(Router Advertisement) messages to configure the IPv6 hosts automatically. Thus, every IPv6 hosts (other than routers) is able to build its own global unicast address.\n\n#### IPv6 neighbor discovery protocol (NDP)\n\n###### What 4 ICMPv6 messages are used in NDP?\n\nRA(Router Advertisement)\n\nRS(Router Solicitation)\n\nNS(Neighbor Solicitation)\n\nNA(Neighbor Advertisement)\n\nSee more for: [NDP - Neighbor Discovery Protocol (howdoesinternetwork.com)](https://howdoesinternetwork.com/2012/ndp-ipv6-neighbor-discovery-protocol)\n\n###### What ICMPv6 messages are used for the functions provided by NDP? (For example, Address  resolution, Duplicate address detection, Prefix and Router discovery.)\n\nDAD (Duplicate address detection) mechanism is realized through **NS and NA** messages. \n\nWhat is DAD: when a new unicast address is configured, it will perform DAD testing— sending a NS message which contain the destination address of itself through the network. (for example, if the new address that want to allocate is `2000::1`, it will send the NS message with source address `::` and destination address `2000::1`). Note that the node will ignore the NS message sent by itself. If nobody respond a NA message, we can consider that this unicast address is unique on this link. This method is call DAD.\n\nSee more for: [paper-03.pdf (thomasclausen.org)](http://interop.thomasclausen.org/Interop05/Papers/Papers/paper-03.pdf)\n\n[What is duplicate address detection? (ibm.com)](https://www.ibm.com/support/pages/what-duplicate-address-detection)\n\nPrefix and Router discovery mechanism is realized through **RS and RA** messages.\n\nRouter will send RA messages periodically in order to let the host computers and other equipment know of its existence, and the RA messages contain the prefix network information and more. Sometimes host computer will also actively send RS messages for communication with other nodes, and the router will respond with a RA message.\n\nSee more for: [IPv6 part 10: Neighbor Discovery – Router Discovery - Intense School](http://resources.intenseschool.com/ipv6-neighbor-discovery-router-discovery/)\n\n#### IP Routing\n\n###### What are the differences between layer 2 switching and layer 3 routing?\n\n**Layer 2 switching** is based on data-link layer information, e.g. MAC addresses. Switches (typically  stands for layer 2 switches) use layer 2 switching to forward frames.\n\n**Layer 3 routing** is based on network layer addresses information, e.g. IP addresses. Routers or  layer 3 switches use layer 3 switching to route a packet. It has 2 processes which is Path determination and Packet switching.\n\n###### What is the difference between the next-hop and the default gateway?\n\n**Default gateway** is used for a host to communicate with hosts on other networks. The default gateway's IP address must be in the same network subnet as the source host.\n\n**Next hop** is a routing term that refers to the next closest router a packet can go through.\n\nThere are practically incomparable between default gateway and next hop.\n\n###### What are the differences between the intra-subnet and inter-subnet communications?\n\nIf a host communicates with each other ==within== a subnet, called ==intra-subnet communication.==\n\nIf the IP communication is between hosts in ==different== IP subnets, called ==inter-subnet  communication==.\n\n###### How to use Address Resolution Protocol (ARP) in the intra-subnet and inter-subnet communications?\n\nARP is working in the networking layer, which is responsible for ==resolving IP address into MAC address==.\n\nIn the intra-subnet communication, the source device will broadcast an ARP request and wait for an ARP reply from the destination devices. The source devices then record the destination IP and MAC address to an ARP table.\n\nIn the inter-subnet communication, however, the source device will obtain the MAC address of the default gateway router through ARP request.\n\n###### For inter-subnet communication, how do IP addresses and MAC addresses change in the packet  during the data transmission?\n\nIP addresses are ==changeless== during the data transmission.\n\nMAC address are ==changing== based on different routers during the data transmission.=\n\n---\n\n![image-20211205153141538](CN-3/image-20211205153141538.png)\n\nQ1:\n\nSince subnet mast is 29, which means:`11111111.11111111.11111111.111111000`. Only 3bits are dynamic, which is $2^3=8$.\n\nSince the IP address of router is `172.16.11.11/29`, the sub-network segment is `172.16.11.8--172.16.11.15`.\n\n**Note that** the host address with all 0s or with all 1s cannot be used for networking, which means `172.16.11.8` and `172.16.11.15` cannot be a client IP.\n\nTherefore, the IP address of PC1 and PC2 are both wrong. What is more, the subnet mask of PC2 is not corresponding with this network domain(it should be 29).\n\nQ2:\n\nIn the same way of Q1, we know the subnet mask of this network domain is 18 (`11111111.11111111.11000000.00000000`). $6bits$ are dynamic,which is $2^6=64$. The sub-network segment is `172.16.0.0--172.16.63.255`.\n\nTherefor, PC3 is in this segment while PC4 is not in this subnet domain.\n\nQ3:\n\nWe have already know that `172.16.0.0` is for network address and `172.16.63.255` is for broadcast address. Thus, the range of valid host address is `172.16.0.1--172.16.63.254`.\n\n---\n\n![image-20211205153202429](CN-3/image-20211205153202429.png)\n\nVLSM steps:\n\n**Step 1: Divide the subnet**\n\n![image-20211205165352723](CN-3/image-20211205165352723.png)\n\n**Note that** routers divide broadcast domain, therefore a point-to-point WAN connection is also a subnet.\n\n**Step 2: Allocate the subnet(usually from largest to smallest)**\n\nSubnet mask=24, `1111111.1111111.1111111.0000000`, which means all subnets are in the form of `192.168.1.H` and $H$ contains 8 bits. Now lets allocate the $H$:\n\n`192.168.1.0XXXXXXX` $\\to$ 120 hosts\n\n`192.168.1.10XXXXXX` $\\to$ 60 hosts\n\n`192.168.1.110XXXXX` $\\to$ 30 hosts\n\n`192.168.1.1110XXXX` $\\to$ 10 hosts\n\n`192.168.1.111100XX` $\\to$ 2 hosts\n\n`192.168.1.111101XX` $\\to$ WAN link 1\n\n`192.168.1.111110XX` $\\to$ WAN link 2\n\n`192.168.1.111111XX` $\\to$ WAN link 3\n\n**Note that** ==at most== a 30-bit mask can be used for point-to-point WAN connections since the first address and the last address are used for network address and broadcast address separately, which occupy 2 addresses, and the source address and destination address also occupy 2 addresses. Therefore, at least 4 addresses ($2^2$) are used and $32-2=30$.\n\n![image-20211205153214433](CN-3/image-20211205153214433.png)\n\nIP routing contains several steps, each step is in the same broadcast domain, but the source IP and destination IP are always changeless. In this example, they are always `192.168.1.11` and `192.168.2.88`.\n\n\n\n![image-20211205153227168](CN-3/image-20211205153227168.png)\n\nQ1: `FE80::/10`\n\nQ2: ???\n\nQ3: RS-RA\n\nQ4: DAD\n\n","slug":"CN-3","published":1,"updated":"2022-11-01T05:53:00.550Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcu00171gzuaj9jbsgt","content":"<h2 id=\"chapter-3-technology-ip-addressing-and-ip-routing\"><a class=\"markdownIt-Anchor\" href=\"#chapter-3-technology-ip-addressing-and-ip-routing\"></a> Chapter 3 Technology, IP Addressing and IP Routing</h2>\n<h3 id=\"layer-3-technologies\"><a class=\"markdownIt-Anchor\" href=\"#layer-3-technologies\"></a> Layer 3 technologies</h3>\n<h4 id=\"ipv4-addressing\"><a class=\"markdownIt-Anchor\" href=\"#ipv4-addressing\"></a> IPv4 addressing</h4>\n<h6 id=\"what-are-the-differences-between-flat-addressing-and-hierarchical-addressing\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-differences-between-flat-addressing-and-hierarchical-addressing\"></a> What are the differences between flat addressing and hierarchical addressing?</h6>\n<p><mark>Flat addressing</mark> assigns a device the next available address. For example, the <mark>MAC addressing</mark>.</p>\n<p><mark>Hierarchical addressing</mark> contains different levels. For example, the <mark>IP addressing</mark>.</p>\n<h6 id=\"what-are-the-ranges-of-the-class-a-b-c-addresses-and-their-default-subnet-masks\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-ranges-of-the-class-a-b-c-addresses-and-their-default-subnet-masks\"></a> What are the ranges of the Class A, B, C addresses and their default subnet masks?</h6>\n<p>Class A: <code>1.0.0.0/8 ~ 126.255.255.255/8</code></p>\n<p>Class B: <code>128.0.0.0/16 ~ 191.255.255.255/16</code></p>\n<p>Class C: <code>192.0.0.0/24 ~ 223.255.255.255/24</code></p>\n<h6 id=\"what-are-the-three-ranges-of-private-ip-addresses\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-three-ranges-of-private-ip-addresses\"></a> What are the three ranges of private IP addresses?</h6>\n<p>There are certain addresses in each class of IPv4 address that are not assigned. These addresses are  called <mark>private addresses</mark>. <code>RFC 1918</code> sets aside 3 blocks of IPv4 addresses for private, internal use.  These 3 blocks consist of one Class A, a range of Class B addresses, and a range of Class C  addresses.</p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205162300456.png\" alt=\"image-20211205162300456\" loading=\"lazy\"></p>\n<h6 id=\"what-is-the-difference-of-network-address-broadcast-address-and-host-address-what-are-these-types-of-addresses-used-for\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-difference-of-network-address-broadcast-address-and-host-address-what-are-these-types-of-addresses-used-for\"></a> What is the difference of network address, broadcast address and host address? What are these  types of addresses used for?</h6>\n<p>(<strong>IP addresses</strong>: Addresses in computer networks which contains network address and host address.)</p>\n<p><strong>Network address</strong>: Used to identify the network itself where the host portion were all zeros. For instance:</p>\n<img src=\"/2022/04/08/CN-3/../../../../OneDrive - Macau University of Science and Technology/Junior/First Semester/Computer Network/Mid-term/Mid-term Assignment.assets/image-20211110131414754.png\" alt=\"image-20211110131414754\" style=\"zoom: 67%;\" loading=\"lazy\">\n<p><strong>Host address</strong> is the address in which the host portion cannot be all zeros (0s) or all ones (1s), can be assigned to a device on the network. For instance:</p>\n<img src=\"/2022/04/08/CN-3/../../../../OneDrive - Macau University of Science and Technology/Junior/First Semester/Computer Network/Mid-term/Mid-term Assignment.assets/image-20211110131554883.png\" alt=\"image-20211110131554883\" style=\"zoom:67%;\" loading=\"lazy\">\n<p><strong>Broadcast address</strong>: Used for broadcasting packets to all the devices on a network. If the host portion were all ones (1s), it would be a broadcast address. For example:</p>\n<img src=\"file://C:\\Users\\28580\\OneDrive - Macau University of Science and Technology\\Junior\\First Semester\\Computer Network\\Mid-term\\Mid-term Assignment.assets\\image-20211110131623041.png?lastModify=1638693050\" alt=\"image-20211110131623041\" style=\"zoom:67%;\" loading=\"lazy\">\n<h4 id=\"ipv4-subnetting\"><a class=\"markdownIt-Anchor\" href=\"#ipv4-subnetting\"></a> IPv4 subnetting</h4>\n<h6 id=\"what-is-ipv4-classful-subnetting\"><a class=\"markdownIt-Anchor\" href=\"#what-is-ipv4-classful-subnetting\"></a> What is IPv4 classful subnetting?</h6>\n<p>Classful addressing is an IPv4 addressing architecture that divides addresses into five groups.</p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205174403372.png\" alt=\"image-20211205174403372\" loading=\"lazy\"></p>\n<h6 id=\"what-is-ipv4-classless-subnetting\"><a class=\"markdownIt-Anchor\" href=\"#what-is-ipv4-classless-subnetting\"></a> What is IPv4 classless subnetting?</h6>\n<p>Classless addressing is an IPv4 addressing architecture that uses <mark>VLSM</mark> (variable-length subnet masking).</p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205174543073.png\" alt=\"image-20211205174543073\" loading=\"lazy\"></p>\n<h4 id=\"ipv6-addressing\"><a class=\"markdownIt-Anchor\" href=\"#ipv6-addressing\"></a> IPv6 addressing</h4>\n<h6 id=\"how-to-represent-ipv6-address-in-full-form-and-simplified-form\"><a class=\"markdownIt-Anchor\" href=\"#how-to-represent-ipv6-address-in-full-form-and-simplified-form\"></a> How to represent IPv6 address in full form and simplified form?</h6>\n<p>Full form example: <code>FE80:0:0:0:0:2AA:FE9A:4CA2</code></p>\n<p>Simplified form example: <code>FE80::2AA:FE9A:4CA2</code></p>\n<h6 id=\"what-are-the-three-types-of-ipv6-addresses-what-specific-addresses-are-defined-for-these-types-ipv6-addresses\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-three-types-of-ipv6-addresses-what-specific-addresses-are-defined-for-these-types-ipv6-addresses\"></a> What are the three types of IPv6 addresses? What specific addresses are defined for these types  IPv6 addresses?</h6>\n<p>The three types of IPv6 addresses are <strong>unicast, multicast and anycast</strong> respectively.</p>\n<ul>\n<li>\n<p><strong>Unicast (one to one)</strong>: A packet addressed to a unicast address is delivered to a single interface.</p>\n</li>\n<li>\n<p><strong>Multicast (one to many)</strong>: A multicast address identifies multiple interfaces. A packet addressed to a multicast address is delivered to all interfaces that are identified by the address.</p>\n</li>\n<li>\n<p><strong>Anycast (one to nearest-one / one to one-of-many)</strong>: An anycast address identifies multiple interfaces. A packet addressed to an anycast address is delivered to a single interface, the nearest interface that is identified by the address. The “nearest” interface is defined as being closest in terms of routing distance.</p>\n</li>\n</ul>\n<p>Specific addresses of these three types of IPv6 addresses are:</p>\n<ul>\n<li>\n<p>Prefix of <strong>Multicast</strong> is <code>FF00::/8</code>.</p>\n</li>\n<li>\n<p>Prefix of <strong>Link-local unicast</strong> is <code>FE80::/10</code>.</p>\n</li>\n<li>\n<p>Prefix of <strong>global unicast</strong> is <code>2000::/3</code>.</p>\n</li>\n</ul>\n<h6 id=\"how-to-form-a-link-local-address-how-to-form-a-global-unicast-address-using-stateless-auto-configuration\"><a class=\"markdownIt-Anchor\" href=\"#how-to-form-a-link-local-address-how-to-form-a-global-unicast-address-using-stateless-auto-configuration\"></a> How to form a link-local address? How to form a global unicast address using stateless auto-configuration?</h6>\n<p>link-local scope all-nodes (<code>FF02::1</code>) and all-routers (<code>FF02::2</code>) multicast address.</p>\n<p>Stateless autoconfiguration uses the information in RA(Router Advertisement) messages to configure the IPv6 hosts automatically. Thus, every IPv6 hosts (other than routers) is able to build its own global unicast address.</p>\n<h4 id=\"ipv6-neighbor-discovery-protocol-ndp\"><a class=\"markdownIt-Anchor\" href=\"#ipv6-neighbor-discovery-protocol-ndp\"></a> IPv6 neighbor discovery protocol (NDP)</h4>\n<h6 id=\"what-4-icmpv6-messages-are-used-in-ndp\"><a class=\"markdownIt-Anchor\" href=\"#what-4-icmpv6-messages-are-used-in-ndp\"></a> What 4 ICMPv6 messages are used in NDP?</h6>\n<p>RA(Router Advertisement)</p>\n<p>RS(Router Solicitation)</p>\n<p>NS(Neighbor Solicitation)</p>\n<p>NA(Neighbor Advertisement)</p>\n<p>See more for: <a href=\"https://howdoesinternetwork.com/2012/ndp-ipv6-neighbor-discovery-protocol\">NDP - Neighbor Discovery Protocol (howdoesinternetwork.com)</a></p>\n<h6 id=\"what-icmpv6-messages-are-used-for-the-functions-provided-by-ndp-for-example-address-resolution-duplicate-address-detection-prefix-and-router-discovery\"><a class=\"markdownIt-Anchor\" href=\"#what-icmpv6-messages-are-used-for-the-functions-provided-by-ndp-for-example-address-resolution-duplicate-address-detection-prefix-and-router-discovery\"></a> What ICMPv6 messages are used for the functions provided by NDP? (For example, Address  resolution, Duplicate address detection, Prefix and Router discovery.)</h6>\n<p>DAD (Duplicate address detection) mechanism is realized through <strong>NS and NA</strong> messages.</p>\n<p>What is DAD: when a new unicast address is configured, it will perform DAD testing— sending a NS message which contain the destination address of itself through the network. (for example, if the new address that want to allocate is <code>2000::1</code>, it will send the NS message with source address <code>::</code> and destination address <code>2000::1</code>). Note that the node will ignore the NS message sent by itself. If nobody respond a NA message, we can consider that this unicast address is unique on this link. This method is call DAD.</p>\n<p>See more for: <a href=\"http://interop.thomasclausen.org/Interop05/Papers/Papers/paper-03.pdf\">paper-03.pdf (thomasclausen.org)</a></p>\n<p><a href=\"https://www.ibm.com/support/pages/what-duplicate-address-detection\">What is duplicate address detection? (ibm.com)</a></p>\n<p>Prefix and Router discovery mechanism is realized through <strong>RS and RA</strong> messages.</p>\n<p>Router will send RA messages periodically in order to let the host computers and other equipment know of its existence, and the RA messages contain the prefix network information and more. Sometimes host computer will also actively send RS messages for communication with other nodes, and the router will respond with a RA message.</p>\n<p>See more for: <a href=\"http://resources.intenseschool.com/ipv6-neighbor-discovery-router-discovery/\">IPv6 part 10: Neighbor Discovery – Router Discovery - Intense School</a></p>\n<h4 id=\"ip-routing\"><a class=\"markdownIt-Anchor\" href=\"#ip-routing\"></a> IP Routing</h4>\n<h6 id=\"what-are-the-differences-between-layer-2-switching-and-layer-3-routing\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-differences-between-layer-2-switching-and-layer-3-routing\"></a> What are the differences between layer 2 switching and layer 3 routing?</h6>\n<p><strong>Layer 2 switching</strong> is based on data-link layer information, e.g. MAC addresses. Switches (typically  stands for layer 2 switches) use layer 2 switching to forward frames.</p>\n<p><strong>Layer 3 routing</strong> is based on network layer addresses information, e.g. IP addresses. Routers or  layer 3 switches use layer 3 switching to route a packet. It has 2 processes which is Path determination and Packet switching.</p>\n<h6 id=\"what-is-the-difference-between-the-next-hop-and-the-default-gateway\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-difference-between-the-next-hop-and-the-default-gateway\"></a> What is the difference between the next-hop and the default gateway?</h6>\n<p><strong>Default gateway</strong> is used for a host to communicate with hosts on other networks. The default gateway’s IP address must be in the same network subnet as the source host.</p>\n<p><strong>Next hop</strong> is a routing term that refers to the next closest router a packet can go through.</p>\n<p>There are practically incomparable between default gateway and next hop.</p>\n<h6 id=\"what-are-the-differences-between-the-intra-subnet-and-inter-subnet-communications\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-differences-between-the-intra-subnet-and-inter-subnet-communications\"></a> What are the differences between the intra-subnet and inter-subnet communications?</h6>\n<p>If a host communicates with each other <mark>within</mark> a subnet, called <mark>intra-subnet communication.</mark></p>\n<p>If the IP communication is between hosts in <mark>different</mark> IP subnets, called <mark>inter-subnet  communication</mark>.</p>\n<h6 id=\"how-to-use-address-resolution-protocol-arp-in-the-intra-subnet-and-inter-subnet-communications\"><a class=\"markdownIt-Anchor\" href=\"#how-to-use-address-resolution-protocol-arp-in-the-intra-subnet-and-inter-subnet-communications\"></a> How to use Address Resolution Protocol (ARP) in the intra-subnet and inter-subnet communications?</h6>\n<p>ARP is working in the networking layer, which is responsible for <mark>resolving IP address into MAC address</mark>.</p>\n<p>In the intra-subnet communication, the source device will broadcast an ARP request and wait for an ARP reply from the destination devices. The source devices then record the destination IP and MAC address to an ARP table.</p>\n<p>In the inter-subnet communication, however, the source device will obtain the MAC address of the default gateway router through ARP request.</p>\n<h6 id=\"for-inter-subnet-communication-how-do-ip-addresses-and-mac-addresses-change-in-the-packet-during-the-data-transmission\"><a class=\"markdownIt-Anchor\" href=\"#for-inter-subnet-communication-how-do-ip-addresses-and-mac-addresses-change-in-the-packet-during-the-data-transmission\"></a> For inter-subnet communication, how do IP addresses and MAC addresses change in the packet  during the data transmission?</h6>\n<p>IP addresses are <mark>changeless</mark> during the data transmission.</p>\n<p>MAC address are <mark>changing</mark> based on different routers during the data transmission.=</p>\n<hr>\n<p><img src=\"/2022/04/08/CN-3/image-20211205153141538.png\" alt=\"image-20211205153141538\" loading=\"lazy\"></p>\n<p>Q1:</p>\n<p>Since subnet mast is 29, which means:<code>11111111.11111111.11111111.111111000</code>. Only 3bits are dynamic, which is <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup><mo>=</mo><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">2^3=8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">8</span></span></span></span>.</p>\n<p>Since the IP address of router is <code>172.16.11.11/29</code>, the sub-network segment is <code>172.16.11.8--172.16.11.15</code>.</p>\n<p><strong>Note that</strong> the host address with all 0s or with all 1s cannot be used for networking, which means <code>172.16.11.8</code> and <code>172.16.11.15</code> cannot be a client IP.</p>\n<p>Therefore, the IP address of PC1 and PC2 are both wrong. What is more, the subnet mask of PC2 is not corresponding with this network domain(it should be 29).</p>\n<p>Q2:</p>\n<p>In the same way of Q1, we know the subnet mask of this network domain is 18 (<code>11111111.11111111.11000000.00000000</code>). <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>6</mn><mi>b</mi><mi>i</mi><mi>t</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">6bits</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span></span></span></span> are dynamic,which is <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>6</mn></msup><mo>=</mo><mn>64</mn></mrow><annotation encoding=\"application/x-tex\">2^6=64</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">4</span></span></span></span>. The sub-network segment is <code>172.16.0.0--172.16.63.255</code>.</p>\n<p>Therefor, PC3 is in this segment while PC4 is not in this subnet domain.</p>\n<p>Q3:</p>\n<p>We have already know that <code>172.16.0.0</code> is for network address and <code>172.16.63.255</code> is for broadcast address. Thus, the range of valid host address is <code>172.16.0.1--172.16.63.254</code>.</p>\n<hr>\n<p><img src=\"/2022/04/08/CN-3/image-20211205153202429.png\" alt=\"image-20211205153202429\" loading=\"lazy\"></p>\n<p>VLSM steps:</p>\n<p><strong>Step 1: Divide the subnet</strong></p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205165352723.png\" alt=\"image-20211205165352723\" loading=\"lazy\"></p>\n<p><strong>Note that</strong> routers divide broadcast domain, therefore a point-to-point WAN connection is also a subnet.</p>\n<p><strong>Step 2: Allocate the subnet(usually from largest to smallest)</strong></p>\n<p>Subnet mask=24, <code>1111111.1111111.1111111.0000000</code>, which means all subnets are in the form of <code>192.168.1.H</code> and <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span> contains 8 bits. Now lets allocate the <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span>:</p>\n<p><code>192.168.1.0XXXXXXX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 120 hosts</p>\n<p><code>192.168.1.10XXXXXX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 60 hosts</p>\n<p><code>192.168.1.110XXXXX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 30 hosts</p>\n<p><code>192.168.1.1110XXXX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 10 hosts</p>\n<p><code>192.168.1.111100XX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 2 hosts</p>\n<p><code>192.168.1.111101XX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> WAN link 1</p>\n<p><code>192.168.1.111110XX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> WAN link 2</p>\n<p><code>192.168.1.111111XX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> WAN link 3</p>\n<p><strong>Note that</strong> <mark>at most</mark> a 30-bit mask can be used for point-to-point WAN connections since the first address and the last address are used for network address and broadcast address separately, which occupy 2 addresses, and the source address and destination address also occupy 2 addresses. Therefore, at least 4 addresses (<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span>) are used and <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>32</mn><mo>−</mo><mn>2</mn><mo>=</mo><mn>30</mn></mrow><annotation encoding=\"application/x-tex\">32-2=30</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span></span></span></span>.</p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205153214433.png\" alt=\"image-20211205153214433\" loading=\"lazy\"></p>\n<p>IP routing contains several steps, each step is in the same broadcast domain, but the source IP and destination IP are always changeless. In this example, they are always <code>192.168.1.11</code> and <code>192.168.2.88</code>.</p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205153227168.png\" alt=\"image-20211205153227168\" loading=\"lazy\"></p>\n<p>Q1: <code>FE80::/10</code></p>\n<p>Q2: ???</p>\n<p>Q3: RS-RA</p>\n<p>Q4: DAD</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"chapter-3-technology-ip-addressing-and-ip-routing\"><a class=\"markdownIt-Anchor\" href=\"#chapter-3-technology-ip-addressing-and-ip-routing\"></a> Chapter 3 Technology, IP Addressing and IP Routing</h2>\n<h3 id=\"layer-3-technologies\"><a class=\"markdownIt-Anchor\" href=\"#layer-3-technologies\"></a> Layer 3 technologies</h3>\n<h4 id=\"ipv4-addressing\"><a class=\"markdownIt-Anchor\" href=\"#ipv4-addressing\"></a> IPv4 addressing</h4>\n<h6 id=\"what-are-the-differences-between-flat-addressing-and-hierarchical-addressing\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-differences-between-flat-addressing-and-hierarchical-addressing\"></a> What are the differences between flat addressing and hierarchical addressing?</h6>\n<p><mark>Flat addressing</mark> assigns a device the next available address. For example, the <mark>MAC addressing</mark>.</p>\n<p><mark>Hierarchical addressing</mark> contains different levels. For example, the <mark>IP addressing</mark>.</p>\n<h6 id=\"what-are-the-ranges-of-the-class-a-b-c-addresses-and-their-default-subnet-masks\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-ranges-of-the-class-a-b-c-addresses-and-their-default-subnet-masks\"></a> What are the ranges of the Class A, B, C addresses and their default subnet masks?</h6>\n<p>Class A: <code>1.0.0.0/8 ~ 126.255.255.255/8</code></p>\n<p>Class B: <code>128.0.0.0/16 ~ 191.255.255.255/16</code></p>\n<p>Class C: <code>192.0.0.0/24 ~ 223.255.255.255/24</code></p>\n<h6 id=\"what-are-the-three-ranges-of-private-ip-addresses\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-three-ranges-of-private-ip-addresses\"></a> What are the three ranges of private IP addresses?</h6>\n<p>There are certain addresses in each class of IPv4 address that are not assigned. These addresses are  called <mark>private addresses</mark>. <code>RFC 1918</code> sets aside 3 blocks of IPv4 addresses for private, internal use.  These 3 blocks consist of one Class A, a range of Class B addresses, and a range of Class C  addresses.</p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205162300456.png\" alt=\"image-20211205162300456\"></p>\n<h6 id=\"what-is-the-difference-of-network-address-broadcast-address-and-host-address-what-are-these-types-of-addresses-used-for\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-difference-of-network-address-broadcast-address-and-host-address-what-are-these-types-of-addresses-used-for\"></a> What is the difference of network address, broadcast address and host address? What are these  types of addresses used for?</h6>\n<p>(<strong>IP addresses</strong>: Addresses in computer networks which contains network address and host address.)</p>\n<p><strong>Network address</strong>: Used to identify the network itself where the host portion were all zeros. For instance:</p>\n<img src=\"/2022/04/08/CN-3/../../../../OneDrive - Macau University of Science and Technology/Junior/First Semester/Computer Network/Mid-term/Mid-term Assignment.assets/image-20211110131414754.png\" alt=\"image-20211110131414754\" style=\"zoom: 67%;\">\n<p><strong>Host address</strong> is the address in which the host portion cannot be all zeros (0s) or all ones (1s), can be assigned to a device on the network. For instance:</p>\n<img src=\"/2022/04/08/CN-3/../../../../OneDrive - Macau University of Science and Technology/Junior/First Semester/Computer Network/Mid-term/Mid-term Assignment.assets/image-20211110131554883.png\" alt=\"image-20211110131554883\" style=\"zoom:67%;\">\n<p><strong>Broadcast address</strong>: Used for broadcasting packets to all the devices on a network. If the host portion were all ones (1s), it would be a broadcast address. For example:</p>\n<img src=\"file://C:\\Users\\28580\\OneDrive - Macau University of Science and Technology\\Junior\\First Semester\\Computer Network\\Mid-term\\Mid-term Assignment.assets\\image-20211110131623041.png?lastModify=1638693050\" alt=\"image-20211110131623041\" style=\"zoom:67%;\">\n<h4 id=\"ipv4-subnetting\"><a class=\"markdownIt-Anchor\" href=\"#ipv4-subnetting\"></a> IPv4 subnetting</h4>\n<h6 id=\"what-is-ipv4-classful-subnetting\"><a class=\"markdownIt-Anchor\" href=\"#what-is-ipv4-classful-subnetting\"></a> What is IPv4 classful subnetting?</h6>\n<p>Classful addressing is an IPv4 addressing architecture that divides addresses into five groups.</p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205174403372.png\" alt=\"image-20211205174403372\"></p>\n<h6 id=\"what-is-ipv4-classless-subnetting\"><a class=\"markdownIt-Anchor\" href=\"#what-is-ipv4-classless-subnetting\"></a> What is IPv4 classless subnetting?</h6>\n<p>Classless addressing is an IPv4 addressing architecture that uses <mark>VLSM</mark> (variable-length subnet masking).</p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205174543073.png\" alt=\"image-20211205174543073\"></p>\n<h4 id=\"ipv6-addressing\"><a class=\"markdownIt-Anchor\" href=\"#ipv6-addressing\"></a> IPv6 addressing</h4>\n<h6 id=\"how-to-represent-ipv6-address-in-full-form-and-simplified-form\"><a class=\"markdownIt-Anchor\" href=\"#how-to-represent-ipv6-address-in-full-form-and-simplified-form\"></a> How to represent IPv6 address in full form and simplified form?</h6>\n<p>Full form example: <code>FE80:0:0:0:0:2AA:FE9A:4CA2</code></p>\n<p>Simplified form example: <code>FE80::2AA:FE9A:4CA2</code></p>\n<h6 id=\"what-are-the-three-types-of-ipv6-addresses-what-specific-addresses-are-defined-for-these-types-ipv6-addresses\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-three-types-of-ipv6-addresses-what-specific-addresses-are-defined-for-these-types-ipv6-addresses\"></a> What are the three types of IPv6 addresses? What specific addresses are defined for these types  IPv6 addresses?</h6>\n<p>The three types of IPv6 addresses are <strong>unicast, multicast and anycast</strong> respectively.</p>\n<ul>\n<li>\n<p><strong>Unicast (one to one)</strong>: A packet addressed to a unicast address is delivered to a single interface.</p>\n</li>\n<li>\n<p><strong>Multicast (one to many)</strong>: A multicast address identifies multiple interfaces. A packet addressed to a multicast address is delivered to all interfaces that are identified by the address.</p>\n</li>\n<li>\n<p><strong>Anycast (one to nearest-one / one to one-of-many)</strong>: An anycast address identifies multiple interfaces. A packet addressed to an anycast address is delivered to a single interface, the nearest interface that is identified by the address. The “nearest” interface is defined as being closest in terms of routing distance.</p>\n</li>\n</ul>\n<p>Specific addresses of these three types of IPv6 addresses are:</p>\n<ul>\n<li>\n<p>Prefix of <strong>Multicast</strong> is <code>FF00::/8</code>.</p>\n</li>\n<li>\n<p>Prefix of <strong>Link-local unicast</strong> is <code>FE80::/10</code>.</p>\n</li>\n<li>\n<p>Prefix of <strong>global unicast</strong> is <code>2000::/3</code>.</p>\n</li>\n</ul>\n<h6 id=\"how-to-form-a-link-local-address-how-to-form-a-global-unicast-address-using-stateless-auto-configuration\"><a class=\"markdownIt-Anchor\" href=\"#how-to-form-a-link-local-address-how-to-form-a-global-unicast-address-using-stateless-auto-configuration\"></a> How to form a link-local address? How to form a global unicast address using stateless auto-configuration?</h6>\n<p>link-local scope all-nodes (<code>FF02::1</code>) and all-routers (<code>FF02::2</code>) multicast address.</p>\n<p>Stateless autoconfiguration uses the information in RA(Router Advertisement) messages to configure the IPv6 hosts automatically. Thus, every IPv6 hosts (other than routers) is able to build its own global unicast address.</p>\n<h4 id=\"ipv6-neighbor-discovery-protocol-ndp\"><a class=\"markdownIt-Anchor\" href=\"#ipv6-neighbor-discovery-protocol-ndp\"></a> IPv6 neighbor discovery protocol (NDP)</h4>\n<h6 id=\"what-4-icmpv6-messages-are-used-in-ndp\"><a class=\"markdownIt-Anchor\" href=\"#what-4-icmpv6-messages-are-used-in-ndp\"></a> What 4 ICMPv6 messages are used in NDP?</h6>\n<p>RA(Router Advertisement)</p>\n<p>RS(Router Solicitation)</p>\n<p>NS(Neighbor Solicitation)</p>\n<p>NA(Neighbor Advertisement)</p>\n<p>See more for: <a href=\"https://howdoesinternetwork.com/2012/ndp-ipv6-neighbor-discovery-protocol\">NDP - Neighbor Discovery Protocol (howdoesinternetwork.com)</a></p>\n<h6 id=\"what-icmpv6-messages-are-used-for-the-functions-provided-by-ndp-for-example-address-resolution-duplicate-address-detection-prefix-and-router-discovery\"><a class=\"markdownIt-Anchor\" href=\"#what-icmpv6-messages-are-used-for-the-functions-provided-by-ndp-for-example-address-resolution-duplicate-address-detection-prefix-and-router-discovery\"></a> What ICMPv6 messages are used for the functions provided by NDP? (For example, Address  resolution, Duplicate address detection, Prefix and Router discovery.)</h6>\n<p>DAD (Duplicate address detection) mechanism is realized through <strong>NS and NA</strong> messages.</p>\n<p>What is DAD: when a new unicast address is configured, it will perform DAD testing— sending a NS message which contain the destination address of itself through the network. (for example, if the new address that want to allocate is <code>2000::1</code>, it will send the NS message with source address <code>::</code> and destination address <code>2000::1</code>). Note that the node will ignore the NS message sent by itself. If nobody respond a NA message, we can consider that this unicast address is unique on this link. This method is call DAD.</p>\n<p>See more for: <a href=\"http://interop.thomasclausen.org/Interop05/Papers/Papers/paper-03.pdf\">paper-03.pdf (thomasclausen.org)</a></p>\n<p><a href=\"https://www.ibm.com/support/pages/what-duplicate-address-detection\">What is duplicate address detection? (ibm.com)</a></p>\n<p>Prefix and Router discovery mechanism is realized through <strong>RS and RA</strong> messages.</p>\n<p>Router will send RA messages periodically in order to let the host computers and other equipment know of its existence, and the RA messages contain the prefix network information and more. Sometimes host computer will also actively send RS messages for communication with other nodes, and the router will respond with a RA message.</p>\n<p>See more for: <a href=\"http://resources.intenseschool.com/ipv6-neighbor-discovery-router-discovery/\">IPv6 part 10: Neighbor Discovery – Router Discovery - Intense School</a></p>\n<h4 id=\"ip-routing\"><a class=\"markdownIt-Anchor\" href=\"#ip-routing\"></a> IP Routing</h4>\n<h6 id=\"what-are-the-differences-between-layer-2-switching-and-layer-3-routing\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-differences-between-layer-2-switching-and-layer-3-routing\"></a> What are the differences between layer 2 switching and layer 3 routing?</h6>\n<p><strong>Layer 2 switching</strong> is based on data-link layer information, e.g. MAC addresses. Switches (typically  stands for layer 2 switches) use layer 2 switching to forward frames.</p>\n<p><strong>Layer 3 routing</strong> is based on network layer addresses information, e.g. IP addresses. Routers or  layer 3 switches use layer 3 switching to route a packet. It has 2 processes which is Path determination and Packet switching.</p>\n<h6 id=\"what-is-the-difference-between-the-next-hop-and-the-default-gateway\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-difference-between-the-next-hop-and-the-default-gateway\"></a> What is the difference between the next-hop and the default gateway?</h6>\n<p><strong>Default gateway</strong> is used for a host to communicate with hosts on other networks. The default gateway’s IP address must be in the same network subnet as the source host.</p>\n<p><strong>Next hop</strong> is a routing term that refers to the next closest router a packet can go through.</p>\n<p>There are practically incomparable between default gateway and next hop.</p>\n<h6 id=\"what-are-the-differences-between-the-intra-subnet-and-inter-subnet-communications\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-differences-between-the-intra-subnet-and-inter-subnet-communications\"></a> What are the differences between the intra-subnet and inter-subnet communications?</h6>\n<p>If a host communicates with each other <mark>within</mark> a subnet, called <mark>intra-subnet communication.</mark></p>\n<p>If the IP communication is between hosts in <mark>different</mark> IP subnets, called <mark>inter-subnet  communication</mark>.</p>\n<h6 id=\"how-to-use-address-resolution-protocol-arp-in-the-intra-subnet-and-inter-subnet-communications\"><a class=\"markdownIt-Anchor\" href=\"#how-to-use-address-resolution-protocol-arp-in-the-intra-subnet-and-inter-subnet-communications\"></a> How to use Address Resolution Protocol (ARP) in the intra-subnet and inter-subnet communications?</h6>\n<p>ARP is working in the networking layer, which is responsible for <mark>resolving IP address into MAC address</mark>.</p>\n<p>In the intra-subnet communication, the source device will broadcast an ARP request and wait for an ARP reply from the destination devices. The source devices then record the destination IP and MAC address to an ARP table.</p>\n<p>In the inter-subnet communication, however, the source device will obtain the MAC address of the default gateway router through ARP request.</p>\n<h6 id=\"for-inter-subnet-communication-how-do-ip-addresses-and-mac-addresses-change-in-the-packet-during-the-data-transmission\"><a class=\"markdownIt-Anchor\" href=\"#for-inter-subnet-communication-how-do-ip-addresses-and-mac-addresses-change-in-the-packet-during-the-data-transmission\"></a> For inter-subnet communication, how do IP addresses and MAC addresses change in the packet  during the data transmission?</h6>\n<p>IP addresses are <mark>changeless</mark> during the data transmission.</p>\n<p>MAC address are <mark>changing</mark> based on different routers during the data transmission.=</p>\n<hr>\n<p><img src=\"/2022/04/08/CN-3/image-20211205153141538.png\" alt=\"image-20211205153141538\"></p>\n<p>Q1:</p>\n<p>Since subnet mast is 29, which means:<code>11111111.11111111.11111111.111111000</code>. Only 3bits are dynamic, which is <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup><mo>=</mo><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">2^3=8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">8</span></span></span></span>.</p>\n<p>Since the IP address of router is <code>172.16.11.11/29</code>, the sub-network segment is <code>172.16.11.8--172.16.11.15</code>.</p>\n<p><strong>Note that</strong> the host address with all 0s or with all 1s cannot be used for networking, which means <code>172.16.11.8</code> and <code>172.16.11.15</code> cannot be a client IP.</p>\n<p>Therefore, the IP address of PC1 and PC2 are both wrong. What is more, the subnet mask of PC2 is not corresponding with this network domain(it should be 29).</p>\n<p>Q2:</p>\n<p>In the same way of Q1, we know the subnet mask of this network domain is 18 (<code>11111111.11111111.11000000.00000000</code>). <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>6</mn><mi>b</mi><mi>i</mi><mi>t</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">6bits</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span></span></span></span> are dynamic,which is <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>6</mn></msup><mo>=</mo><mn>64</mn></mrow><annotation encoding=\"application/x-tex\">2^6=64</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">4</span></span></span></span>. The sub-network segment is <code>172.16.0.0--172.16.63.255</code>.</p>\n<p>Therefor, PC3 is in this segment while PC4 is not in this subnet domain.</p>\n<p>Q3:</p>\n<p>We have already know that <code>172.16.0.0</code> is for network address and <code>172.16.63.255</code> is for broadcast address. Thus, the range of valid host address is <code>172.16.0.1--172.16.63.254</code>.</p>\n<hr>\n<p><img src=\"/2022/04/08/CN-3/image-20211205153202429.png\" alt=\"image-20211205153202429\"></p>\n<p>VLSM steps:</p>\n<p><strong>Step 1: Divide the subnet</strong></p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205165352723.png\" alt=\"image-20211205165352723\"></p>\n<p><strong>Note that</strong> routers divide broadcast domain, therefore a point-to-point WAN connection is also a subnet.</p>\n<p><strong>Step 2: Allocate the subnet(usually from largest to smallest)</strong></p>\n<p>Subnet mask=24, <code>1111111.1111111.1111111.0000000</code>, which means all subnets are in the form of <code>192.168.1.H</code> and <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span> contains 8 bits. Now lets allocate the <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span></span></span></span>:</p>\n<p><code>192.168.1.0XXXXXXX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 120 hosts</p>\n<p><code>192.168.1.10XXXXXX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 60 hosts</p>\n<p><code>192.168.1.110XXXXX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 30 hosts</p>\n<p><code>192.168.1.1110XXXX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 10 hosts</p>\n<p><code>192.168.1.111100XX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> 2 hosts</p>\n<p><code>192.168.1.111101XX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> WAN link 1</p>\n<p><code>192.168.1.111110XX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> WAN link 2</p>\n<p><code>192.168.1.111111XX</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> WAN link 3</p>\n<p><strong>Note that</strong> <mark>at most</mark> a 30-bit mask can be used for point-to-point WAN connections since the first address and the last address are used for network address and broadcast address separately, which occupy 2 addresses, and the source address and destination address also occupy 2 addresses. Therefore, at least 4 addresses (<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span>) are used and <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>32</mn><mo>−</mo><mn>2</mn><mo>=</mo><mn>30</mn></mrow><annotation encoding=\"application/x-tex\">32-2=30</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span></span></span></span>.</p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205153214433.png\" alt=\"image-20211205153214433\"></p>\n<p>IP routing contains several steps, each step is in the same broadcast domain, but the source IP and destination IP are always changeless. In this example, they are always <code>192.168.1.11</code> and <code>192.168.2.88</code>.</p>\n<p><img src=\"/2022/04/08/CN-3/image-20211205153227168.png\" alt=\"image-20211205153227168\"></p>\n<p>Q1: <code>FE80::/10</code></p>\n<p>Q2: ???</p>\n<p>Q3: RS-RA</p>\n<p>Q4: DAD</p>\n"},{"title":"Computer Network 4 - Layer 3, Routing Protocols","date":"2022-04-08T15:37:00.000Z","author":"Tony","katex":true,"_content":"\n## Layer 3, Routing Protocols\n\n#### Routing protocols\n\n###### What are the differences between Interior Gateway Protocol (IGP) and Exterior Gateway Protocol  (EGP)? List some example of them.\n\n​\t\tInterior Gateway Protocols (IGP) route data ==in== an autonomous system. Like EIGRP, OSPF.\n\n​\t\tExterior Gateway Protocols (EGP) route data ==between== autonomous system. Like BGP.\n\n###### What algorithm is used by distance vector routing protocols?\n\n​\t\tDistance vector routing protocol algorithm: ==Bellman-Ford algorithm==\n\n​\t\tLink-state routing protocol algorithm: ==Dijkstra algorithm==\n\n###### What are the features of distance vector routing protocols?\n\n​\t\t==Features:== Periodic updates, send entire routing table to directly connected routers, do not know the  exact network topology.\n\nWhen the topology changes, routing table updates must occur. It passes periodic copies of a routing  table from router to router. Distance-vector algorithms call for each router to send its entire routing  table to each of its directly connected neighboring routers.\n\n​\t\tThe algorithm eventually accumulates network distances so that it can maintain a database of  network topology information.\n\n​\t\tDistance-vector algorithms do not know the exact topology of an internetwork.\n\n###### What algorithm is used by link-state routing protocols?\n\n​\t\tDistance vector routing protocol algorithm: ==Bellman-Ford algorithm==\n\n​\t\tLink-state routing protocol algorithm: ==Dijkstra algorithm==\n\n###### What are the features of link-state routing protocols?\n\n​\t\t==Features:== Trigger updates, send partial routing to all routers on the network, know the exact  network topology.\n\n​\t\tIt exchanges LSAs (Link-state advertisements) to collect the routing information between routers  starting with directly connected networks.\n\n​\t\tEach router in parallel with the others constructs this logical topology as a tree, with itself as the root,  consisting of all possible paths to each network in the link-state protocol internetwork.\n\n​\t\tSPF algorithm calculation is performed on the database resulting in the SPF tree. A list of the known  paths and interfaces is stored in the routing tables. \n\n​\t\tA link-state routing algorithm maintains full knowledge of distant routers and how they interconnect.\n\n#### EIGRP\n\n###### What three tables are maintained by EIGRP for each routed protocol? What information are stored  in these tables? Which tables does EIGRP store the primary route (successor) to the destination?  Which tables does EIGRP store the backup route (feasible successor) to the destination?\n\nThree tables: ==neighbor table,  topology table and routing table==\n\nBoth topology table and routing table stored the successor route (primary route).\n\nTopology table stored the feasible successor route (backup route).\n\nSee more for: [EIGRP路由协议 - 简书 (jianshu.com)](https://www.jianshu.com/p/5ec0e020d97a)\n\n###### What are the operations of DUAL? How can EIGRP determine the feasible distance, reported  distance, successor and feasible successor for a destination network?\n\nDUAL (Diffusing Update Algorithm) is the method to guarantee the successor distance and feasible successor distance of a non-circle topology network.\n\nFD (Feasible Distance): the local route’s metric of the ==best route== to reach a specific network.\n\nRD (Reported Distance): the metric advertised by the neighbor router for a specific route.\n\nSuccessor for a destination network: the next hop on the primary route with the shortest feasible distance to the destination.\n\nFeasible successor for a destination network: When a destination network is removed from the EIGRP topology, a router initiates a route querying process in an attempt to locate a different route to that destination. As it is preferable to avoid this querying process, EIGRP routers will opportunistically store backup routes, known as *feasible successors*, when certain requirements are met.\n\n###### What are used as metric for EIGRP? How to calculate the metric for a destination network?\n\n$$\nMetric = Bandwidth + Delay\n$$\n\nNote that the unit of bandwidth is ==$Kbps$== and the unit of delay is ==$\\mu s$==\n$$\nFD=\\Big( \\frac{10^7}{BandWidth}+\\frac{Delay(\\mu s)}{10}  \\Big)\\times 256\n$$\n\n###### Which multicast addresses are used by EIGRP to exchange the routing information?\n\nIPv4: `224.0.0.10`\n\nIPv6: `FF02::A`\n\n#### OSPF\n\n###### What three databases are maintained by OSPF? What information are stored in these databases?\n\nThree databases: ==neighbor database,  topology database and routing database==\n\nSee more for: [OSPF详解（一）_智慧云工具箱的博客-CSDN博客_ospf详解](https://blog.csdn.net/qq_44967475/article/details/90901793)\n\n###### What types of networks need a DR (Designated Router) and BDR (Backup Designated Router)  election? Why?How to determine the DR and BDR in OSPF network?\n\n==Multi-access networks== need a DR and BDR election.\n\n==Point-to-point networks== do **NOT** need a DR or BDR election.\n\nDR is the ==largest== number of the router ID set of a sub-network.\n\nBDR is the ==second largest== number of the router ID set of a sub-network.\n\n###### What is used as metric for OSPF? How to calculate the metric for a destination network?\n\n$$\nOSPF\\ Cost=\\sum \\frac{10^8}{BandWidth}\n$$\n\nNote that the unit of bandwidth is ==$bps$==\n\n###### Which multicast addresses are used by OSPF to exchange the routing information?\n\nIPv4: `224.0.0.5` or `224.0.0.6`\n\nIPv6: `FF02::5` or `FF02::6`\n\n![image-20211206080928415](CN-4/image-20211206080928415-1649432396057.png)\n\nTo `192.168.1.11`: Find out `192.168.1.0/24` in routing table and next-hop is `172.16.1.2`\n\nTo `172,16.1.1`: Find out `172.16.1.0/24` in routing table and next-hop is Serial0\n\nTo `172.16.2.22`: Find out `0.0.0.0/0` in routing table and next-hop is `172.16.1.2`\n\nTo `255.255.255.255` drop since it is a broadcast IP therefore there is no next-hop.\n\n![image-20211206080908048](CN-4/image-20211206080908048-1649432396057.png)\n\nNote that ==Successor route== means the best route and ==Feasible successor route== means backup route.\n\nAnd the **feasible distance** calculation formula is: \n$$\nFD=\\Big( \\frac{10^7}{BandWidth(Kbps)}+\\frac{Delay(\\mu s)}{10}  \\Big)\\times 256\n$$\nRoute I: $Router1\\to Router2\\to Router3\\to192.168.33.0/24$\n$$\nFD_2=\\Big( \\frac{10^7}{10\\times 10^3}+\\frac{1000+1000+100}{10}  \\Big)\\times 256=309760\n$$\nRoute II: $Router1\\to Router3\\to192.168.33.0/24$\n$$\nFD_3=\\Big( \\frac{10^7}{56}+\\frac{20000+100}{10}  \\Big)\\times 256=46228845\n$$\nRoute III: $Router1\\to Router4\\to Router3\\to192.168.33.0/24$\n$$\nFD_4=\\Big( \\frac{10^7}{100\\times 10^3}+\\frac{100+100+100}{10}  \\Big)\\times 256=33280\n$$\nSince $FD_4$ is the shortest path (easy to compare), route III is called successor route.\n\nNow let’s calculate feasible successor route, or say, backup route.\n\nBecause *Router 4* is the successor router, we only need to calculate the RD of *Router 2* and *Router 3*. If $RD<FD$, we can say the route is a feasible successor route.\n\nRoute I: $Router2\\to Router3\\to192.168.33.0/24$\n$$\nRD_2=\\Big( \\frac{10^7}{10\\times 10^3}+\\frac{1000+100}{10}  \\Big)\\times 256\n$$\nRoute II: $Router3\\to192.168.33.0/24$\n$$\nRD_3=\\Big( \\frac{10^7}{100\\times 10^3}+\\frac{100}{10}  \\Big)\\times 256\\\\\n$$\nSince $RD_3$ is faster than $RD_2$, Route II is called feasible successor route.\n\n![image-20211206080942577](CN-4/image-20211206080942577-1649432396057.png)\n\nQ1:\n\n`192.168.11.0/24` sub-network and `192.168.44.0/24` sub-network require DR/BDR election.\n\nQ2:\n\nUse ==Router ID== only to choose DR and BDR.\n\nThe IP of Router1 is `192.168.11.1` \n\nThe IP of Router2 is `192.168.11.2`\n\nThe IP of Router3 is `192.168.11.3`\n\nSince the IP of Router 3 is the largest, DR is Router 3.\n\nSince the IP of Router 2 is the second largest, BDR is Router 2.\n\nQ3:\n$$\nMetrics=\\frac{10^8}{100\\times10^6}+\\frac{10^8}{64\\times 10^3}+\\frac{10^8}{100\\times10^6}\n$$\nNote that the unit of bandwidth is ==$bps$==, NOT *Kbps*!!!\n\n---\n\n$$\nEND\n$$\n\n","source":"_posts/CN-4.md","raw":"---\ntitle: Computer Network 4 - Layer 3, Routing Protocols\ndate: 2022-04-08 23:37:00\ntags:\n\t- computer network\ncategories:\n\t- 计算机网络\nauthor: Tony\nkatex: true\n---\n\n## Layer 3, Routing Protocols\n\n#### Routing protocols\n\n###### What are the differences between Interior Gateway Protocol (IGP) and Exterior Gateway Protocol  (EGP)? List some example of them.\n\n​\t\tInterior Gateway Protocols (IGP) route data ==in== an autonomous system. Like EIGRP, OSPF.\n\n​\t\tExterior Gateway Protocols (EGP) route data ==between== autonomous system. Like BGP.\n\n###### What algorithm is used by distance vector routing protocols?\n\n​\t\tDistance vector routing protocol algorithm: ==Bellman-Ford algorithm==\n\n​\t\tLink-state routing protocol algorithm: ==Dijkstra algorithm==\n\n###### What are the features of distance vector routing protocols?\n\n​\t\t==Features:== Periodic updates, send entire routing table to directly connected routers, do not know the  exact network topology.\n\nWhen the topology changes, routing table updates must occur. It passes periodic copies of a routing  table from router to router. Distance-vector algorithms call for each router to send its entire routing  table to each of its directly connected neighboring routers.\n\n​\t\tThe algorithm eventually accumulates network distances so that it can maintain a database of  network topology information.\n\n​\t\tDistance-vector algorithms do not know the exact topology of an internetwork.\n\n###### What algorithm is used by link-state routing protocols?\n\n​\t\tDistance vector routing protocol algorithm: ==Bellman-Ford algorithm==\n\n​\t\tLink-state routing protocol algorithm: ==Dijkstra algorithm==\n\n###### What are the features of link-state routing protocols?\n\n​\t\t==Features:== Trigger updates, send partial routing to all routers on the network, know the exact  network topology.\n\n​\t\tIt exchanges LSAs (Link-state advertisements) to collect the routing information between routers  starting with directly connected networks.\n\n​\t\tEach router in parallel with the others constructs this logical topology as a tree, with itself as the root,  consisting of all possible paths to each network in the link-state protocol internetwork.\n\n​\t\tSPF algorithm calculation is performed on the database resulting in the SPF tree. A list of the known  paths and interfaces is stored in the routing tables. \n\n​\t\tA link-state routing algorithm maintains full knowledge of distant routers and how they interconnect.\n\n#### EIGRP\n\n###### What three tables are maintained by EIGRP for each routed protocol? What information are stored  in these tables? Which tables does EIGRP store the primary route (successor) to the destination?  Which tables does EIGRP store the backup route (feasible successor) to the destination?\n\nThree tables: ==neighbor table,  topology table and routing table==\n\nBoth topology table and routing table stored the successor route (primary route).\n\nTopology table stored the feasible successor route (backup route).\n\nSee more for: [EIGRP路由协议 - 简书 (jianshu.com)](https://www.jianshu.com/p/5ec0e020d97a)\n\n###### What are the operations of DUAL? How can EIGRP determine the feasible distance, reported  distance, successor and feasible successor for a destination network?\n\nDUAL (Diffusing Update Algorithm) is the method to guarantee the successor distance and feasible successor distance of a non-circle topology network.\n\nFD (Feasible Distance): the local route’s metric of the ==best route== to reach a specific network.\n\nRD (Reported Distance): the metric advertised by the neighbor router for a specific route.\n\nSuccessor for a destination network: the next hop on the primary route with the shortest feasible distance to the destination.\n\nFeasible successor for a destination network: When a destination network is removed from the EIGRP topology, a router initiates a route querying process in an attempt to locate a different route to that destination. As it is preferable to avoid this querying process, EIGRP routers will opportunistically store backup routes, known as *feasible successors*, when certain requirements are met.\n\n###### What are used as metric for EIGRP? How to calculate the metric for a destination network?\n\n$$\nMetric = Bandwidth + Delay\n$$\n\nNote that the unit of bandwidth is ==$Kbps$== and the unit of delay is ==$\\mu s$==\n$$\nFD=\\Big( \\frac{10^7}{BandWidth}+\\frac{Delay(\\mu s)}{10}  \\Big)\\times 256\n$$\n\n###### Which multicast addresses are used by EIGRP to exchange the routing information?\n\nIPv4: `224.0.0.10`\n\nIPv6: `FF02::A`\n\n#### OSPF\n\n###### What three databases are maintained by OSPF? What information are stored in these databases?\n\nThree databases: ==neighbor database,  topology database and routing database==\n\nSee more for: [OSPF详解（一）_智慧云工具箱的博客-CSDN博客_ospf详解](https://blog.csdn.net/qq_44967475/article/details/90901793)\n\n###### What types of networks need a DR (Designated Router) and BDR (Backup Designated Router)  election? Why?How to determine the DR and BDR in OSPF network?\n\n==Multi-access networks== need a DR and BDR election.\n\n==Point-to-point networks== do **NOT** need a DR or BDR election.\n\nDR is the ==largest== number of the router ID set of a sub-network.\n\nBDR is the ==second largest== number of the router ID set of a sub-network.\n\n###### What is used as metric for OSPF? How to calculate the metric for a destination network?\n\n$$\nOSPF\\ Cost=\\sum \\frac{10^8}{BandWidth}\n$$\n\nNote that the unit of bandwidth is ==$bps$==\n\n###### Which multicast addresses are used by OSPF to exchange the routing information?\n\nIPv4: `224.0.0.5` or `224.0.0.6`\n\nIPv6: `FF02::5` or `FF02::6`\n\n![image-20211206080928415](CN-4/image-20211206080928415-1649432396057.png)\n\nTo `192.168.1.11`: Find out `192.168.1.0/24` in routing table and next-hop is `172.16.1.2`\n\nTo `172,16.1.1`: Find out `172.16.1.0/24` in routing table and next-hop is Serial0\n\nTo `172.16.2.22`: Find out `0.0.0.0/0` in routing table and next-hop is `172.16.1.2`\n\nTo `255.255.255.255` drop since it is a broadcast IP therefore there is no next-hop.\n\n![image-20211206080908048](CN-4/image-20211206080908048-1649432396057.png)\n\nNote that ==Successor route== means the best route and ==Feasible successor route== means backup route.\n\nAnd the **feasible distance** calculation formula is: \n$$\nFD=\\Big( \\frac{10^7}{BandWidth(Kbps)}+\\frac{Delay(\\mu s)}{10}  \\Big)\\times 256\n$$\nRoute I: $Router1\\to Router2\\to Router3\\to192.168.33.0/24$\n$$\nFD_2=\\Big( \\frac{10^7}{10\\times 10^3}+\\frac{1000+1000+100}{10}  \\Big)\\times 256=309760\n$$\nRoute II: $Router1\\to Router3\\to192.168.33.0/24$\n$$\nFD_3=\\Big( \\frac{10^7}{56}+\\frac{20000+100}{10}  \\Big)\\times 256=46228845\n$$\nRoute III: $Router1\\to Router4\\to Router3\\to192.168.33.0/24$\n$$\nFD_4=\\Big( \\frac{10^7}{100\\times 10^3}+\\frac{100+100+100}{10}  \\Big)\\times 256=33280\n$$\nSince $FD_4$ is the shortest path (easy to compare), route III is called successor route.\n\nNow let’s calculate feasible successor route, or say, backup route.\n\nBecause *Router 4* is the successor router, we only need to calculate the RD of *Router 2* and *Router 3*. If $RD<FD$, we can say the route is a feasible successor route.\n\nRoute I: $Router2\\to Router3\\to192.168.33.0/24$\n$$\nRD_2=\\Big( \\frac{10^7}{10\\times 10^3}+\\frac{1000+100}{10}  \\Big)\\times 256\n$$\nRoute II: $Router3\\to192.168.33.0/24$\n$$\nRD_3=\\Big( \\frac{10^7}{100\\times 10^3}+\\frac{100}{10}  \\Big)\\times 256\\\\\n$$\nSince $RD_3$ is faster than $RD_2$, Route II is called feasible successor route.\n\n![image-20211206080942577](CN-4/image-20211206080942577-1649432396057.png)\n\nQ1:\n\n`192.168.11.0/24` sub-network and `192.168.44.0/24` sub-network require DR/BDR election.\n\nQ2:\n\nUse ==Router ID== only to choose DR and BDR.\n\nThe IP of Router1 is `192.168.11.1` \n\nThe IP of Router2 is `192.168.11.2`\n\nThe IP of Router3 is `192.168.11.3`\n\nSince the IP of Router 3 is the largest, DR is Router 3.\n\nSince the IP of Router 2 is the second largest, BDR is Router 2.\n\nQ3:\n$$\nMetrics=\\frac{10^8}{100\\times10^6}+\\frac{10^8}{64\\times 10^3}+\\frac{10^8}{100\\times10^6}\n$$\nNote that the unit of bandwidth is ==$bps$==, NOT *Kbps*!!!\n\n---\n\n$$\nEND\n$$\n\n","slug":"CN-4","published":1,"updated":"2022-11-01T05:53:00.550Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcw001a1gzu8qcrhnpn","content":"<h2 id=\"layer-3-routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#layer-3-routing-protocols\"></a> Layer 3, Routing Protocols</h2>\n<h4 id=\"routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#routing-protocols\"></a> Routing protocols</h4>\n<h6 id=\"what-are-the-differences-between-interior-gateway-protocol-igp-and-exterior-gateway-protocol-egp-list-some-example-of-them\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-differences-between-interior-gateway-protocol-igp-and-exterior-gateway-protocol-egp-list-some-example-of-them\"></a> What are the differences between Interior Gateway Protocol (IGP) and Exterior Gateway Protocol  (EGP)? List some example of them.</h6>\n<p>​\t\tInterior Gateway Protocols (IGP) route data <mark>in</mark> an autonomous system. Like EIGRP, OSPF.</p>\n<p>​\t\tExterior Gateway Protocols (EGP) route data <mark>between</mark> autonomous system. Like BGP.</p>\n<h6 id=\"what-algorithm-is-used-by-distance-vector-routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#what-algorithm-is-used-by-distance-vector-routing-protocols\"></a> What algorithm is used by distance vector routing protocols?</h6>\n<p>​\t\tDistance vector routing protocol algorithm: <mark>Bellman-Ford algorithm</mark></p>\n<p>​\t\tLink-state routing protocol algorithm: <mark>Dijkstra algorithm</mark></p>\n<h6 id=\"what-are-the-features-of-distance-vector-routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-features-of-distance-vector-routing-protocols\"></a> What are the features of distance vector routing protocols?</h6>\n<p>​\t\t<mark>Features:</mark> Periodic updates, send entire routing table to directly connected routers, do not know the  exact network topology.</p>\n<p>When the topology changes, routing table updates must occur. It passes periodic copies of a routing  table from router to router. Distance-vector algorithms call for each router to send its entire routing  table to each of its directly connected neighboring routers.</p>\n<p>​\t\tThe algorithm eventually accumulates network distances so that it can maintain a database of  network topology information.</p>\n<p>​\t\tDistance-vector algorithms do not know the exact topology of an internetwork.</p>\n<h6 id=\"what-algorithm-is-used-by-link-state-routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#what-algorithm-is-used-by-link-state-routing-protocols\"></a> What algorithm is used by link-state routing protocols?</h6>\n<p>​\t\tDistance vector routing protocol algorithm: <mark>Bellman-Ford algorithm</mark></p>\n<p>​\t\tLink-state routing protocol algorithm: <mark>Dijkstra algorithm</mark></p>\n<h6 id=\"what-are-the-features-of-link-state-routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-features-of-link-state-routing-protocols\"></a> What are the features of link-state routing protocols?</h6>\n<p>​\t\t<mark>Features:</mark> Trigger updates, send partial routing to all routers on the network, know the exact  network topology.</p>\n<p>​\t\tIt exchanges LSAs (Link-state advertisements) to collect the routing information between routers  starting with directly connected networks.</p>\n<p>​\t\tEach router in parallel with the others constructs this logical topology as a tree, with itself as the root,  consisting of all possible paths to each network in the link-state protocol internetwork.</p>\n<p>​\t\tSPF algorithm calculation is performed on the database resulting in the SPF tree. A list of the known  paths and interfaces is stored in the routing tables.</p>\n<p>​\t\tA link-state routing algorithm maintains full knowledge of distant routers and how they interconnect.</p>\n<h4 id=\"eigrp\"><a class=\"markdownIt-Anchor\" href=\"#eigrp\"></a> EIGRP</h4>\n<h6 id=\"what-three-tables-are-maintained-by-eigrp-for-each-routed-protocol-what-information-are-stored-in-these-tables-which-tables-does-eigrp-store-the-primary-route-successor-to-the-destination-which-tables-does-eigrp-store-the-backup-route-feasible-successor-to-the-destination\"><a class=\"markdownIt-Anchor\" href=\"#what-three-tables-are-maintained-by-eigrp-for-each-routed-protocol-what-information-are-stored-in-these-tables-which-tables-does-eigrp-store-the-primary-route-successor-to-the-destination-which-tables-does-eigrp-store-the-backup-route-feasible-successor-to-the-destination\"></a> What three tables are maintained by EIGRP for each routed protocol? What information are stored  in these tables? Which tables does EIGRP store the primary route (successor) to the destination?  Which tables does EIGRP store the backup route (feasible successor) to the destination?</h6>\n<p>Three tables: <mark>neighbor table,  topology table and routing table</mark></p>\n<p>Both topology table and routing table stored the successor route (primary route).</p>\n<p>Topology table stored the feasible successor route (backup route).</p>\n<p>See more for: <a href=\"https://www.jianshu.com/p/5ec0e020d97a\">EIGRP路由协议 - 简书 (jianshu.com)</a></p>\n<h6 id=\"what-are-the-operations-of-dual-how-can-eigrp-determine-the-feasible-distance-reported-distance-successor-and-feasible-successor-for-a-destination-network\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-operations-of-dual-how-can-eigrp-determine-the-feasible-distance-reported-distance-successor-and-feasible-successor-for-a-destination-network\"></a> What are the operations of DUAL? How can EIGRP determine the feasible distance, reported  distance, successor and feasible successor for a destination network?</h6>\n<p>DUAL (Diffusing Update Algorithm) is the method to guarantee the successor distance and feasible successor distance of a non-circle topology network.</p>\n<p>FD (Feasible Distance): the local route’s metric of the <mark>best route</mark> to reach a specific network.</p>\n<p>RD (Reported Distance): the metric advertised by the neighbor router for a specific route.</p>\n<p>Successor for a destination network: the next hop on the primary route with the shortest feasible distance to the destination.</p>\n<p>Feasible successor for a destination network: When a destination network is removed from the EIGRP topology, a router initiates a route querying process in an attempt to locate a different route to that destination. As it is preferable to avoid this querying process, EIGRP routers will opportunistically store backup routes, known as <em>feasible successors</em>, when certain requirements are met.</p>\n<h6 id=\"what-are-used-as-metric-for-eigrp-how-to-calculate-the-metric-for-a-destination-network\"><a class=\"markdownIt-Anchor\" href=\"#what-are-used-as-metric-for-eigrp-how-to-calculate-the-metric-for-a-destination-network\"></a> What are used as metric for EIGRP? How to calculate the metric for a destination network?</h6>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>M</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>c</mi><mo>=</mo><mi>B</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>w</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi><mo>+</mo><mi>D</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">Metric = Bandwidth + Delay\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span></p>\n<p>Note that the unit of bandwidth is <mark><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>K</mi><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">Kbps</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span></span></span></span></mark> and the unit of delay is <mark><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>μ</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">\\mu s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">μ</span><span class=\"mord mathdefault\">s</span></span></span></span></mark></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><mi>D</mi><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mi>B</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>W</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mi>D</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo stretchy=\"false\">(</mo><mi>μ</mi><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn></mrow><annotation encoding=\"application/x-tex\">FD=\\Big( \\frac{10^7}{BandWidth}+\\frac{Delay(\\mu s)}{10}  \\Big)\\times 256\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.177108em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.113em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">μ</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span></span></span></span></span></p>\n<h6 id=\"which-multicast-addresses-are-used-by-eigrp-to-exchange-the-routing-information\"><a class=\"markdownIt-Anchor\" href=\"#which-multicast-addresses-are-used-by-eigrp-to-exchange-the-routing-information\"></a> Which multicast addresses are used by EIGRP to exchange the routing information?</h6>\n<p>IPv4: <code>224.0.0.10</code></p>\n<p>IPv6: <code>FF02::A</code></p>\n<h4 id=\"ospf\"><a class=\"markdownIt-Anchor\" href=\"#ospf\"></a> OSPF</h4>\n<h6 id=\"what-three-databases-are-maintained-by-ospf-what-information-are-stored-in-these-databases\"><a class=\"markdownIt-Anchor\" href=\"#what-three-databases-are-maintained-by-ospf-what-information-are-stored-in-these-databases\"></a> What three databases are maintained by OSPF? What information are stored in these databases?</h6>\n<p>Three databases: <mark>neighbor database,  topology database and routing database</mark></p>\n<p>See more for: <a href=\"https://blog.csdn.net/qq_44967475/article/details/90901793\">OSPF详解（一）_智慧云工具箱的博客-CSDN博客_ospf详解</a></p>\n<h6 id=\"what-types-of-networks-need-a-dr-designated-router-and-bdr-backup-designated-router-election-whyhow-to-determine-the-dr-and-bdr-in-ospf-network\"><a class=\"markdownIt-Anchor\" href=\"#what-types-of-networks-need-a-dr-designated-router-and-bdr-backup-designated-router-election-whyhow-to-determine-the-dr-and-bdr-in-ospf-network\"></a> What types of networks need a DR (Designated Router) and BDR (Backup Designated Router)  election? Why?How to determine the DR and BDR in OSPF network?</h6>\n<p><mark>Multi-access networks</mark> need a DR and BDR election.</p>\n<p><mark>Point-to-point networks</mark> do <strong>NOT</strong> need a DR or BDR election.</p>\n<p>DR is the <mark>largest</mark> number of the router ID set of a sub-network.</p>\n<p>BDR is the <mark>second largest</mark> number of the router ID set of a sub-network.</p>\n<h6 id=\"what-is-used-as-metric-for-ospf-how-to-calculate-the-metric-for-a-destination-network\"><a class=\"markdownIt-Anchor\" href=\"#what-is-used-as-metric-for-ospf-how-to-calculate-the-metric-for-a-destination-network\"></a> What is used as metric for OSPF? How to calculate the metric for a destination network?</h6>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mi>S</mi><mi>P</mi><mi>F</mi><mtext> </mtext><mi>C</mi><mi>o</mi><mi>s</mi><mi>t</mi><mo>=</mo><mo>∑</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><mrow><mi>B</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>W</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">OSPF\\ Cost=\\sum \\frac{10^8}{BandWidth}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.177108em;vertical-align:-0.686em;\"></span><span class=\"mop op-symbol large-op\" style=\"position:relative;top:-0.000004999999999977245em;\">∑</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>Note that the unit of bandwidth is <mark><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">bps</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span></span></span></span></mark></p>\n<h6 id=\"which-multicast-addresses-are-used-by-ospf-to-exchange-the-routing-information\"><a class=\"markdownIt-Anchor\" href=\"#which-multicast-addresses-are-used-by-ospf-to-exchange-the-routing-information\"></a> Which multicast addresses are used by OSPF to exchange the routing information?</h6>\n<p>IPv4: <code>224.0.0.5</code> or <code>224.0.0.6</code></p>\n<p>IPv6: <code>FF02::5</code> or <code>FF02::6</code></p>\n<p><img src=\"/2022/04/08/CN-4/image-20211206080928415-1649432396057.png\" alt=\"image-20211206080928415\" loading=\"lazy\"></p>\n<p>To <code>192.168.1.11</code>: Find out <code>192.168.1.0/24</code> in routing table and next-hop is <code>172.16.1.2</code></p>\n<p>To <code>172,16.1.1</code>: Find out <code>172.16.1.0/24</code> in routing table and next-hop is Serial0</p>\n<p>To <code>172.16.2.22</code>: Find out <code>0.0.0.0/0</code> in routing table and next-hop is <code>172.16.1.2</code></p>\n<p>To <code>255.255.255.255</code> drop since it is a broadcast IP therefore there is no next-hop.</p>\n<p><img src=\"/2022/04/08/CN-4/image-20211206080908048-1649432396057.png\" alt=\"image-20211206080908048\" loading=\"lazy\"></p>\n<p>Note that <mark>Successor route</mark> means the best route and <mark>Feasible successor route</mark> means backup route.</p>\n<p>And the <strong>feasible distance</strong> calculation formula is:</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><mi>D</mi><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mi>B</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>W</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi><mo stretchy=\"false\">(</mo><mi>K</mi><mi>b</mi><mi>p</mi><mi>s</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mo>+</mo><mfrac><mrow><mi>D</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo stretchy=\"false\">(</mo><mi>μ</mi><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn></mrow><annotation encoding=\"application/x-tex\">FD=\\Big( \\frac{10^7}{BandWidth(Kbps)}+\\frac{Delay(\\mu s)}{10}  \\Big)\\times 256\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.427108em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.113em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">μ</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span></span></span></span></span></p>\n<p>Route I: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>1</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>2</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>3</mn><mo>→</mo><mn>192.168.33.0</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">Router1\\to Router2\\to Router3\\to192.168.33.0/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">8</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><msub><mi>D</mi><mn>2</mn></msub><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mn>10</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1000</mn><mo>+</mo><mn>1000</mn><mo>+</mo><mn>100</mn></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn><mo>=</mo><mn>309760</mn></mrow><annotation encoding=\"application/x-tex\">FD_2=\\Big( \\frac{10^7}{10\\times 10^3}+\\frac{1000+1000+100}{10}  \\Big)\\times 256=309760\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mord\">9</span><span class=\"mord\">7</span><span class=\"mord\">6</span><span class=\"mord\">0</span></span></span></span></span></p>\n<p>Route II: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>1</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>3</mn><mo>→</mo><mn>192.168.33.0</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">Router1\\to Router3\\to192.168.33.0/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">8</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><msub><mi>D</mi><mn>3</mn></msub><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mn>56</mn></mfrac><mo>+</mo><mfrac><mrow><mn>20000</mn><mo>+</mo><mn>100</mn></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn><mo>=</mo><mn>46228845</mn></mrow><annotation encoding=\"application/x-tex\">FD_3=\\Big( \\frac{10^7}{56}+\\frac{20000+100}{10}  \\Big)\\times 256=46228845\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.177108em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span><span class=\"mord\">6</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord\">6</span><span class=\"mord\">2</span><span class=\"mord\">2</span><span class=\"mord\">8</span><span class=\"mord\">8</span><span class=\"mord\">4</span><span class=\"mord\">5</span></span></span></span></span></p>\n<p>Route III: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>1</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>4</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>3</mn><mo>→</mo><mn>192.168.33.0</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">Router1\\to Router4\\to Router3\\to192.168.33.0/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">8</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><msub><mi>D</mi><mn>4</mn></msub><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mn>100</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>100</mn><mo>+</mo><mn>100</mn><mo>+</mo><mn>100</mn></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn><mo>=</mo><mn>33280</mn></mrow><annotation encoding=\"application/x-tex\">FD_4=\\Big( \\frac{10^7}{100\\times 10^3}+\\frac{100+100+100}{10}  \\Big)\\times 256=33280\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mord\">8</span><span class=\"mord\">0</span></span></span></span></span></p>\n<p>Since <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">FD_4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is the shortest path (easy to compare), route III is called successor route.</p>\n<p>Now let’s calculate feasible successor route, or say, backup route.</p>\n<p>Because <em>Router 4</em> is the successor router, we only need to calculate the RD of <em>Router 2</em> and <em>Router 3</em>. If <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>D</mi><mo>&lt;</mo><mi>F</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">RD&lt;FD</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72243em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span>, we can say the route is a feasible successor route.</p>\n<p>Route I: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>2</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>3</mn><mo>→</mo><mn>192.168.33.0</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">Router2\\to Router3\\to192.168.33.0/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">8</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><msub><mi>D</mi><mn>2</mn></msub><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mn>10</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1000</mn><mo>+</mo><mn>100</mn></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn></mrow><annotation encoding=\"application/x-tex\">RD_2=\\Big( \\frac{10^7}{10\\times 10^3}+\\frac{1000+100}{10}  \\Big)\\times 256\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span></span></span></span></span></p>\n<p>Route II: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>3</mn><mo>→</mo><mn>192.168.33.0</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">Router3\\to192.168.33.0/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">8</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><msub><mi>D</mi><mn>3</mn></msub><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mn>100</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mn>100</mn><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn><mspace linebreak=\"newline\"></mspace></mrow><annotation encoding=\"application/x-tex\">RD_3=\\Big( \\frac{10^7}{100\\times 10^3}+\\frac{100}{10}  \\Big)\\times 256\\\\\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span></span><span class=\"mspace newline\"></span></span></span></span></p>\n<p>Since <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><msub><mi>D</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">RD_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is faster than <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><msub><mi>D</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">RD_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, Route II is called feasible successor route.</p>\n<p><img src=\"/2022/04/08/CN-4/image-20211206080942577-1649432396057.png\" alt=\"image-20211206080942577\" loading=\"lazy\"></p>\n<p>Q1:</p>\n<p><code>192.168.11.0/24</code> sub-network and <code>192.168.44.0/24</code> sub-network require DR/BDR election.</p>\n<p>Q2:</p>\n<p>Use <mark>Router ID</mark> only to choose DR and BDR.</p>\n<p>The IP of Router1 is <code>192.168.11.1</code></p>\n<p>The IP of Router2 is <code>192.168.11.2</code></p>\n<p>The IP of Router3 is <code>192.168.11.3</code></p>\n<p>Since the IP of Router 3 is the largest, DR is Router 3.</p>\n<p>Since the IP of Router 2 is the second largest, BDR is Router 2.</p>\n<p>Q3:</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>M</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>s</mi><mo>=</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><mrow><mn>100</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><mrow><mn>64</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><mrow><mn>100</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">Metrics=\\frac{10^8}{100\\times10^6}+\\frac{10^8}{64\\times 10^3}+\\frac{10^8}{100\\times10^6}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">s</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">6</span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>Note that the unit of bandwidth is <mark><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">bps</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span></span></span></span></mark>, NOT <em>Kbps</em>!!!</p>\n<hr>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>E</mi><mi>N</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">END\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"layer-3-routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#layer-3-routing-protocols\"></a> Layer 3, Routing Protocols</h2>\n<h4 id=\"routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#routing-protocols\"></a> Routing protocols</h4>\n<h6 id=\"what-are-the-differences-between-interior-gateway-protocol-igp-and-exterior-gateway-protocol-egp-list-some-example-of-them\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-differences-between-interior-gateway-protocol-igp-and-exterior-gateway-protocol-egp-list-some-example-of-them\"></a> What are the differences between Interior Gateway Protocol (IGP) and Exterior Gateway Protocol  (EGP)? List some example of them.</h6>\n<p>​\t\tInterior Gateway Protocols (IGP) route data <mark>in</mark> an autonomous system. Like EIGRP, OSPF.</p>\n<p>​\t\tExterior Gateway Protocols (EGP) route data <mark>between</mark> autonomous system. Like BGP.</p>\n<h6 id=\"what-algorithm-is-used-by-distance-vector-routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#what-algorithm-is-used-by-distance-vector-routing-protocols\"></a> What algorithm is used by distance vector routing protocols?</h6>\n<p>​\t\tDistance vector routing protocol algorithm: <mark>Bellman-Ford algorithm</mark></p>\n<p>​\t\tLink-state routing protocol algorithm: <mark>Dijkstra algorithm</mark></p>\n<h6 id=\"what-are-the-features-of-distance-vector-routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-features-of-distance-vector-routing-protocols\"></a> What are the features of distance vector routing protocols?</h6>\n<p>​\t\t<mark>Features:</mark> Periodic updates, send entire routing table to directly connected routers, do not know the  exact network topology.</p>\n<p>When the topology changes, routing table updates must occur. It passes periodic copies of a routing  table from router to router. Distance-vector algorithms call for each router to send its entire routing  table to each of its directly connected neighboring routers.</p>\n<p>​\t\tThe algorithm eventually accumulates network distances so that it can maintain a database of  network topology information.</p>\n<p>​\t\tDistance-vector algorithms do not know the exact topology of an internetwork.</p>\n<h6 id=\"what-algorithm-is-used-by-link-state-routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#what-algorithm-is-used-by-link-state-routing-protocols\"></a> What algorithm is used by link-state routing protocols?</h6>\n<p>​\t\tDistance vector routing protocol algorithm: <mark>Bellman-Ford algorithm</mark></p>\n<p>​\t\tLink-state routing protocol algorithm: <mark>Dijkstra algorithm</mark></p>\n<h6 id=\"what-are-the-features-of-link-state-routing-protocols\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-features-of-link-state-routing-protocols\"></a> What are the features of link-state routing protocols?</h6>\n<p>​\t\t<mark>Features:</mark> Trigger updates, send partial routing to all routers on the network, know the exact  network topology.</p>\n<p>​\t\tIt exchanges LSAs (Link-state advertisements) to collect the routing information between routers  starting with directly connected networks.</p>\n<p>​\t\tEach router in parallel with the others constructs this logical topology as a tree, with itself as the root,  consisting of all possible paths to each network in the link-state protocol internetwork.</p>\n<p>​\t\tSPF algorithm calculation is performed on the database resulting in the SPF tree. A list of the known  paths and interfaces is stored in the routing tables.</p>\n<p>​\t\tA link-state routing algorithm maintains full knowledge of distant routers and how they interconnect.</p>\n<h4 id=\"eigrp\"><a class=\"markdownIt-Anchor\" href=\"#eigrp\"></a> EIGRP</h4>\n<h6 id=\"what-three-tables-are-maintained-by-eigrp-for-each-routed-protocol-what-information-are-stored-in-these-tables-which-tables-does-eigrp-store-the-primary-route-successor-to-the-destination-which-tables-does-eigrp-store-the-backup-route-feasible-successor-to-the-destination\"><a class=\"markdownIt-Anchor\" href=\"#what-three-tables-are-maintained-by-eigrp-for-each-routed-protocol-what-information-are-stored-in-these-tables-which-tables-does-eigrp-store-the-primary-route-successor-to-the-destination-which-tables-does-eigrp-store-the-backup-route-feasible-successor-to-the-destination\"></a> What three tables are maintained by EIGRP for each routed protocol? What information are stored  in these tables? Which tables does EIGRP store the primary route (successor) to the destination?  Which tables does EIGRP store the backup route (feasible successor) to the destination?</h6>\n<p>Three tables: <mark>neighbor table,  topology table and routing table</mark></p>\n<p>Both topology table and routing table stored the successor route (primary route).</p>\n<p>Topology table stored the feasible successor route (backup route).</p>\n<p>See more for: <a href=\"https://www.jianshu.com/p/5ec0e020d97a\">EIGRP路由协议 - 简书 (jianshu.com)</a></p>\n<h6 id=\"what-are-the-operations-of-dual-how-can-eigrp-determine-the-feasible-distance-reported-distance-successor-and-feasible-successor-for-a-destination-network\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-operations-of-dual-how-can-eigrp-determine-the-feasible-distance-reported-distance-successor-and-feasible-successor-for-a-destination-network\"></a> What are the operations of DUAL? How can EIGRP determine the feasible distance, reported  distance, successor and feasible successor for a destination network?</h6>\n<p>DUAL (Diffusing Update Algorithm) is the method to guarantee the successor distance and feasible successor distance of a non-circle topology network.</p>\n<p>FD (Feasible Distance): the local route’s metric of the <mark>best route</mark> to reach a specific network.</p>\n<p>RD (Reported Distance): the metric advertised by the neighbor router for a specific route.</p>\n<p>Successor for a destination network: the next hop on the primary route with the shortest feasible distance to the destination.</p>\n<p>Feasible successor for a destination network: When a destination network is removed from the EIGRP topology, a router initiates a route querying process in an attempt to locate a different route to that destination. As it is preferable to avoid this querying process, EIGRP routers will opportunistically store backup routes, known as <em>feasible successors</em>, when certain requirements are met.</p>\n<h6 id=\"what-are-used-as-metric-for-eigrp-how-to-calculate-the-metric-for-a-destination-network\"><a class=\"markdownIt-Anchor\" href=\"#what-are-used-as-metric-for-eigrp-how-to-calculate-the-metric-for-a-destination-network\"></a> What are used as metric for EIGRP? How to calculate the metric for a destination network?</h6>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>M</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>c</mi><mo>=</mo><mi>B</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>w</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi><mo>+</mo><mi>D</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">Metric = Bandwidth + Delay\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span></p>\n<p>Note that the unit of bandwidth is <mark><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>K</mi><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">Kbps</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span></span></span></span></mark> and the unit of delay is <mark><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>μ</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">\\mu s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">μ</span><span class=\"mord mathdefault\">s</span></span></span></span></mark></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><mi>D</mi><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mi>B</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>W</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mi>D</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo stretchy=\"false\">(</mo><mi>μ</mi><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn></mrow><annotation encoding=\"application/x-tex\">FD=\\Big( \\frac{10^7}{BandWidth}+\\frac{Delay(\\mu s)}{10}  \\Big)\\times 256\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.177108em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.113em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">μ</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span></span></span></span></span></p>\n<h6 id=\"which-multicast-addresses-are-used-by-eigrp-to-exchange-the-routing-information\"><a class=\"markdownIt-Anchor\" href=\"#which-multicast-addresses-are-used-by-eigrp-to-exchange-the-routing-information\"></a> Which multicast addresses are used by EIGRP to exchange the routing information?</h6>\n<p>IPv4: <code>224.0.0.10</code></p>\n<p>IPv6: <code>FF02::A</code></p>\n<h4 id=\"ospf\"><a class=\"markdownIt-Anchor\" href=\"#ospf\"></a> OSPF</h4>\n<h6 id=\"what-three-databases-are-maintained-by-ospf-what-information-are-stored-in-these-databases\"><a class=\"markdownIt-Anchor\" href=\"#what-three-databases-are-maintained-by-ospf-what-information-are-stored-in-these-databases\"></a> What three databases are maintained by OSPF? What information are stored in these databases?</h6>\n<p>Three databases: <mark>neighbor database,  topology database and routing database</mark></p>\n<p>See more for: <a href=\"https://blog.csdn.net/qq_44967475/article/details/90901793\">OSPF详解（一）_智慧云工具箱的博客-CSDN博客_ospf详解</a></p>\n<h6 id=\"what-types-of-networks-need-a-dr-designated-router-and-bdr-backup-designated-router-election-whyhow-to-determine-the-dr-and-bdr-in-ospf-network\"><a class=\"markdownIt-Anchor\" href=\"#what-types-of-networks-need-a-dr-designated-router-and-bdr-backup-designated-router-election-whyhow-to-determine-the-dr-and-bdr-in-ospf-network\"></a> What types of networks need a DR (Designated Router) and BDR (Backup Designated Router)  election? Why?How to determine the DR and BDR in OSPF network?</h6>\n<p><mark>Multi-access networks</mark> need a DR and BDR election.</p>\n<p><mark>Point-to-point networks</mark> do <strong>NOT</strong> need a DR or BDR election.</p>\n<p>DR is the <mark>largest</mark> number of the router ID set of a sub-network.</p>\n<p>BDR is the <mark>second largest</mark> number of the router ID set of a sub-network.</p>\n<h6 id=\"what-is-used-as-metric-for-ospf-how-to-calculate-the-metric-for-a-destination-network\"><a class=\"markdownIt-Anchor\" href=\"#what-is-used-as-metric-for-ospf-how-to-calculate-the-metric-for-a-destination-network\"></a> What is used as metric for OSPF? How to calculate the metric for a destination network?</h6>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mi>S</mi><mi>P</mi><mi>F</mi><mtext> </mtext><mi>C</mi><mi>o</mi><mi>s</mi><mi>t</mi><mo>=</mo><mo>∑</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><mrow><mi>B</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>W</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">OSPF\\ Cost=\\sum \\frac{10^8}{BandWidth}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.177108em;vertical-align:-0.686em;\"></span><span class=\"mop op-symbol large-op\" style=\"position:relative;top:-0.000004999999999977245em;\">∑</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>Note that the unit of bandwidth is <mark><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">bps</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span></span></span></span></mark></p>\n<h6 id=\"which-multicast-addresses-are-used-by-ospf-to-exchange-the-routing-information\"><a class=\"markdownIt-Anchor\" href=\"#which-multicast-addresses-are-used-by-ospf-to-exchange-the-routing-information\"></a> Which multicast addresses are used by OSPF to exchange the routing information?</h6>\n<p>IPv4: <code>224.0.0.5</code> or <code>224.0.0.6</code></p>\n<p>IPv6: <code>FF02::5</code> or <code>FF02::6</code></p>\n<p><img src=\"/2022/04/08/CN-4/image-20211206080928415-1649432396057.png\" alt=\"image-20211206080928415\"></p>\n<p>To <code>192.168.1.11</code>: Find out <code>192.168.1.0/24</code> in routing table and next-hop is <code>172.16.1.2</code></p>\n<p>To <code>172,16.1.1</code>: Find out <code>172.16.1.0/24</code> in routing table and next-hop is Serial0</p>\n<p>To <code>172.16.2.22</code>: Find out <code>0.0.0.0/0</code> in routing table and next-hop is <code>172.16.1.2</code></p>\n<p>To <code>255.255.255.255</code> drop since it is a broadcast IP therefore there is no next-hop.</p>\n<p><img src=\"/2022/04/08/CN-4/image-20211206080908048-1649432396057.png\" alt=\"image-20211206080908048\"></p>\n<p>Note that <mark>Successor route</mark> means the best route and <mark>Feasible successor route</mark> means backup route.</p>\n<p>And the <strong>feasible distance</strong> calculation formula is:</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><mi>D</mi><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mi>B</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>W</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi><mo stretchy=\"false\">(</mo><mi>K</mi><mi>b</mi><mi>p</mi><mi>s</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mo>+</mo><mfrac><mrow><mi>D</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo stretchy=\"false\">(</mo><mi>μ</mi><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn></mrow><annotation encoding=\"application/x-tex\">FD=\\Big( \\frac{10^7}{BandWidth(Kbps)}+\\frac{Delay(\\mu s)}{10}  \\Big)\\times 256\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.427108em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.113em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">μ</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span></span></span></span></span></p>\n<p>Route I: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>1</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>2</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>3</mn><mo>→</mo><mn>192.168.33.0</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">Router1\\to Router2\\to Router3\\to192.168.33.0/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">8</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><msub><mi>D</mi><mn>2</mn></msub><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mn>10</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1000</mn><mo>+</mo><mn>1000</mn><mo>+</mo><mn>100</mn></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn><mo>=</mo><mn>309760</mn></mrow><annotation encoding=\"application/x-tex\">FD_2=\\Big( \\frac{10^7}{10\\times 10^3}+\\frac{1000+1000+100}{10}  \\Big)\\times 256=309760\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mord\">9</span><span class=\"mord\">7</span><span class=\"mord\">6</span><span class=\"mord\">0</span></span></span></span></span></p>\n<p>Route II: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>1</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>3</mn><mo>→</mo><mn>192.168.33.0</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">Router1\\to Router3\\to192.168.33.0/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">8</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><msub><mi>D</mi><mn>3</mn></msub><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mn>56</mn></mfrac><mo>+</mo><mfrac><mrow><mn>20000</mn><mo>+</mo><mn>100</mn></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn><mo>=</mo><mn>46228845</mn></mrow><annotation encoding=\"application/x-tex\">FD_3=\\Big( \\frac{10^7}{56}+\\frac{20000+100}{10}  \\Big)\\times 256=46228845\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.177108em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span><span class=\"mord\">6</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord\">6</span><span class=\"mord\">2</span><span class=\"mord\">2</span><span class=\"mord\">8</span><span class=\"mord\">8</span><span class=\"mord\">4</span><span class=\"mord\">5</span></span></span></span></span></p>\n<p>Route III: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>1</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>4</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>3</mn><mo>→</mo><mn>192.168.33.0</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">Router1\\to Router4\\to Router3\\to192.168.33.0/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">8</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><msub><mi>D</mi><mn>4</mn></msub><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mn>100</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>100</mn><mo>+</mo><mn>100</mn><mo>+</mo><mn>100</mn></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn><mo>=</mo><mn>33280</mn></mrow><annotation encoding=\"application/x-tex\">FD_4=\\Big( \\frac{10^7}{100\\times 10^3}+\\frac{100+100+100}{10}  \\Big)\\times 256=33280\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mord\">8</span><span class=\"mord\">0</span></span></span></span></span></p>\n<p>Since <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>F</mi><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">FD_4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is the shortest path (easy to compare), route III is called successor route.</p>\n<p>Now let’s calculate feasible successor route, or say, backup route.</p>\n<p>Because <em>Router 4</em> is the successor router, we only need to calculate the RD of <em>Router 2</em> and <em>Router 3</em>. If <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>D</mi><mo>&lt;</mo><mi>F</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">RD&lt;FD</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72243em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span>, we can say the route is a feasible successor route.</p>\n<p>Route I: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>2</mn><mo>→</mo><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>3</mn><mo>→</mo><mn>192.168.33.0</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">Router2\\to Router3\\to192.168.33.0/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">8</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><msub><mi>D</mi><mn>2</mn></msub><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mn>10</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1000</mn><mo>+</mo><mn>100</mn></mrow><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn></mrow><annotation encoding=\"application/x-tex\">RD_2=\\Big( \\frac{10^7}{10\\times 10^3}+\\frac{1000+100}{10}  \\Big)\\times 256\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span></span></span></span></span></p>\n<p>Route II: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>3</mn><mo>→</mo><mn>192.168.33.0</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">Router3\\to192.168.33.0/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">9</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">8</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">/</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span></p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><msub><mi>D</mi><mn>3</mn></msub><mo>=</mo><mo fence=\"false\">(</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><mrow><mn>100</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mn>100</mn><mn>10</mn></mfrac><mo fence=\"false\">)</mo><mo>×</mo><mn>256</mn><mspace linebreak=\"newline\"></mspace></mrow><annotation encoding=\"application/x-tex\">RD_3=\\Big( \\frac{10^7}{100\\times 10^3}+\\frac{100}{10}  \\Big)\\times 256\\\\\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"delimsizing size2\">)</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span></span><span class=\"mspace newline\"></span></span></span></span></p>\n<p>Since <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><msub><mi>D</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">RD_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is faster than <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><msub><mi>D</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">RD_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, Route II is called feasible successor route.</p>\n<p><img src=\"/2022/04/08/CN-4/image-20211206080942577-1649432396057.png\" alt=\"image-20211206080942577\"></p>\n<p>Q1:</p>\n<p><code>192.168.11.0/24</code> sub-network and <code>192.168.44.0/24</code> sub-network require DR/BDR election.</p>\n<p>Q2:</p>\n<p>Use <mark>Router ID</mark> only to choose DR and BDR.</p>\n<p>The IP of Router1 is <code>192.168.11.1</code></p>\n<p>The IP of Router2 is <code>192.168.11.2</code></p>\n<p>The IP of Router3 is <code>192.168.11.3</code></p>\n<p>Since the IP of Router 3 is the largest, DR is Router 3.</p>\n<p>Since the IP of Router 2 is the second largest, BDR is Router 2.</p>\n<p>Q3:</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>M</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>s</mi><mo>=</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><mrow><mn>100</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><mrow><mn>64</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><mrow><mn>100</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">Metrics=\\frac{10^8}{100\\times10^6}+\\frac{10^8}{64\\times 10^3}+\\frac{10^8}{100\\times10^6}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">s</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">6</span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.260438em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>Note that the unit of bandwidth is <mark><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">bps</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span></span></span></span></mark>, NOT <em>Kbps</em>!!!</p>\n<hr>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>E</mi><mi>N</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">END\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span></p>\n"},{"title":"Computer Network 5 -  Layer 4 Technology, Transport Protocols","date":"2022-04-08T15:40:15.000Z","author":"Tony","katex":true,"_content":"\n### Layer 4 Technology, Transport Protocols\n\n#### Transport protocols (TCP and UDP)\n\n###### What are the differences between connect-oriented and connectionless services? Which transport  protocol is providing these services? \n\nConnection-oriented service is like telephone service, the first message sent from source device will first received by destination device, which means the messages are ==in order==. TCP belongs to connection-oriented transport protocol.\n\nConnectionless service is like postal service, the first message sent from source device may not first received by destination device, which means the messages are ==not in order==. UDP belongs to connectionless transport protocol.\n\n###### What functions are provided by the transport protocols of TCP and UDP? \n\nTCP:\n\n- Connection-oriented. \n\n- Divides outgoing messages into segments, and reassembles messages at the destination host. \n\n- Reliable delivery that re-sends anything not received. \n\n- Provides flow control.\n\nUDP:\n\n- Connectionless \n- Unreliable delivery that uses no acknowledgments, and provides no software checking for message  delivery\n- Provides no flow control\n\n###### Which application layer protocols use TCP or UDP as transport protocol? \n\nTCP protocols include: FTP, HTTP, SMTP and Telnet.\n\nUDP protocols include: DNS, SNMP, TFTP and DHCP.\n\n###### What is the purpose of port number? How to assign the port number for the application on the server site and client site? List some common used port numbers for famous application protocols.\n\nTransport layer assigns port numbers to each of these ==applications or services==  to keep track of ==different conversations== that cross the network ==at the same time==.\n\nPort numbers have the following assigned ranges:\n\n- $0$ ~ $1023$: Well-known ports numbers. These numbers are reserved for well-known services and applications.\n\n- $1024$ ~ $49151$: Registered for vendor-specific applications. \n\n  ​\tThese port numbers are assigned to individual applications that a user has chosen to install rather  than common applications that would receive a Well Known Port. When not used for a server  resource, these ports may also be used dynamically selected by a client as its source port.\n\n- $49152$ ~ $65535$: Private and/or dynamically assigned ports numbers. \n\n  ​\tAlso known as Ephemeral Ports, these are usually assigned dynamically to client applications when  initiating a connection.\n\n  ![image-20211211154556832](CN-5/image-20211211154556832.png)\n\n#### TCP services\n\n###### How does TCP use three-way handshake to establish a connection? \n\n![image-20211211154616223](CN-5/image-20211211154616223.png)\n\n###### How does TCP use sequence number and acknowledgment to provide reliable transmission?\n\n![image-20211211154625242](CN-5/image-20211211154625242.png)\n\n![image-20211211152352560](CN-5/image-20211211152352560.png)\n\nSee more for three-way handshake. Client and Server has exchanged the sequence number and acknowledgment number.\n\nPay attention to the direction that messaged are sent. In this example, message is from client to server, therefore the $ACK=Seq\\ number + Packet\\ Size$. However, if the message is sent by server, the ACK would changed into $ACK=Seq\\ number - Packet\\ Size$.\n\n![image-20211211154842458](CN-5/image-20211211154842458.png)","source":"_posts/CN-5.md","raw":"---\ntitle: Computer Network 5 -  Layer 4 Technology, Transport Protocols\ndate: 2022-04-08 23:40:15\ntags:\n\t- computer network\ncategories:\n\t- 计算机网络\nauthor: Tony\nkatex: true\n---\n\n### Layer 4 Technology, Transport Protocols\n\n#### Transport protocols (TCP and UDP)\n\n###### What are the differences between connect-oriented and connectionless services? Which transport  protocol is providing these services? \n\nConnection-oriented service is like telephone service, the first message sent from source device will first received by destination device, which means the messages are ==in order==. TCP belongs to connection-oriented transport protocol.\n\nConnectionless service is like postal service, the first message sent from source device may not first received by destination device, which means the messages are ==not in order==. UDP belongs to connectionless transport protocol.\n\n###### What functions are provided by the transport protocols of TCP and UDP? \n\nTCP:\n\n- Connection-oriented. \n\n- Divides outgoing messages into segments, and reassembles messages at the destination host. \n\n- Reliable delivery that re-sends anything not received. \n\n- Provides flow control.\n\nUDP:\n\n- Connectionless \n- Unreliable delivery that uses no acknowledgments, and provides no software checking for message  delivery\n- Provides no flow control\n\n###### Which application layer protocols use TCP or UDP as transport protocol? \n\nTCP protocols include: FTP, HTTP, SMTP and Telnet.\n\nUDP protocols include: DNS, SNMP, TFTP and DHCP.\n\n###### What is the purpose of port number? How to assign the port number for the application on the server site and client site? List some common used port numbers for famous application protocols.\n\nTransport layer assigns port numbers to each of these ==applications or services==  to keep track of ==different conversations== that cross the network ==at the same time==.\n\nPort numbers have the following assigned ranges:\n\n- $0$ ~ $1023$: Well-known ports numbers. These numbers are reserved for well-known services and applications.\n\n- $1024$ ~ $49151$: Registered for vendor-specific applications. \n\n  ​\tThese port numbers are assigned to individual applications that a user has chosen to install rather  than common applications that would receive a Well Known Port. When not used for a server  resource, these ports may also be used dynamically selected by a client as its source port.\n\n- $49152$ ~ $65535$: Private and/or dynamically assigned ports numbers. \n\n  ​\tAlso known as Ephemeral Ports, these are usually assigned dynamically to client applications when  initiating a connection.\n\n  ![image-20211211154556832](CN-5/image-20211211154556832.png)\n\n#### TCP services\n\n###### How does TCP use three-way handshake to establish a connection? \n\n![image-20211211154616223](CN-5/image-20211211154616223.png)\n\n###### How does TCP use sequence number and acknowledgment to provide reliable transmission?\n\n![image-20211211154625242](CN-5/image-20211211154625242.png)\n\n![image-20211211152352560](CN-5/image-20211211152352560.png)\n\nSee more for three-way handshake. Client and Server has exchanged the sequence number and acknowledgment number.\n\nPay attention to the direction that messaged are sent. In this example, message is from client to server, therefore the $ACK=Seq\\ number + Packet\\ Size$. However, if the message is sent by server, the ACK would changed into $ACK=Seq\\ number - Packet\\ Size$.\n\n![image-20211211154842458](CN-5/image-20211211154842458.png)","slug":"CN-5","published":1,"updated":"2022-11-01T05:53:00.566Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcx001d1gzucalp3yvh","content":"<h3 id=\"layer-4-technology-transport-protocols\"><a class=\"markdownIt-Anchor\" href=\"#layer-4-technology-transport-protocols\"></a> Layer 4 Technology, Transport Protocols</h3>\n<h4 id=\"transport-protocols-tcp-and-udp\"><a class=\"markdownIt-Anchor\" href=\"#transport-protocols-tcp-and-udp\"></a> Transport protocols (TCP and UDP)</h4>\n<h6 id=\"what-are-the-differences-between-connect-oriented-and-connectionless-services-which-transport-protocol-is-providing-these-services\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-differences-between-connect-oriented-and-connectionless-services-which-transport-protocol-is-providing-these-services\"></a> What are the differences between connect-oriented and connectionless services? Which transport  protocol is providing these services?</h6>\n<p>Connection-oriented service is like telephone service, the first message sent from source device will first received by destination device, which means the messages are <mark>in order</mark>. TCP belongs to connection-oriented transport protocol.</p>\n<p>Connectionless service is like postal service, the first message sent from source device may not first received by destination device, which means the messages are <mark>not in order</mark>. UDP belongs to connectionless transport protocol.</p>\n<h6 id=\"what-functions-are-provided-by-the-transport-protocols-of-tcp-and-udp\"><a class=\"markdownIt-Anchor\" href=\"#what-functions-are-provided-by-the-transport-protocols-of-tcp-and-udp\"></a> What functions are provided by the transport protocols of TCP and UDP?</h6>\n<p>TCP:</p>\n<ul>\n<li>\n<p>Connection-oriented.</p>\n</li>\n<li>\n<p>Divides outgoing messages into segments, and reassembles messages at the destination host.</p>\n</li>\n<li>\n<p>Reliable delivery that re-sends anything not received.</p>\n</li>\n<li>\n<p>Provides flow control.</p>\n</li>\n</ul>\n<p>UDP:</p>\n<ul>\n<li>Connectionless</li>\n<li>Unreliable delivery that uses no acknowledgments, and provides no software checking for message  delivery</li>\n<li>Provides no flow control</li>\n</ul>\n<h6 id=\"which-application-layer-protocols-use-tcp-or-udp-as-transport-protocol\"><a class=\"markdownIt-Anchor\" href=\"#which-application-layer-protocols-use-tcp-or-udp-as-transport-protocol\"></a> Which application layer protocols use TCP or UDP as transport protocol?</h6>\n<p>TCP protocols include: FTP, HTTP, SMTP and Telnet.</p>\n<p>UDP protocols include: DNS, SNMP, TFTP and DHCP.</p>\n<h6 id=\"what-is-the-purpose-of-port-number-how-to-assign-the-port-number-for-the-application-on-the-server-site-and-client-site-list-some-common-used-port-numbers-for-famous-application-protocols\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-purpose-of-port-number-how-to-assign-the-port-number-for-the-application-on-the-server-site-and-client-site-list-some-common-used-port-numbers-for-famous-application-protocols\"></a> What is the purpose of port number? How to assign the port number for the application on the server site and client site? List some common used port numbers for famous application protocols.</h6>\n<p>Transport layer assigns port numbers to each of these <mark>applications or services</mark>  to keep track of <mark>different conversations</mark> that cross the network <mark>at the same time</mark>.</p>\n<p>Port numbers have the following assigned ranges:</p>\n<ul>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ~ <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1023</mn></mrow><annotation encoding=\"application/x-tex\">1023</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">3</span></span></span></span>: Well-known ports numbers. These numbers are reserved for well-known services and applications.</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1024</mn></mrow><annotation encoding=\"application/x-tex\">1024</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span> ~ <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>49151</mn></mrow><annotation encoding=\"application/x-tex\">49151</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord\">9</span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mord\">1</span></span></span></span>: Registered for vendor-specific applications.</p>\n<p>​\tThese port numbers are assigned to individual applications that a user has chosen to install rather  than common applications that would receive a Well Known Port. When not used for a server  resource, these ports may also be used dynamically selected by a client as its source port.</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>49152</mn></mrow><annotation encoding=\"application/x-tex\">49152</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord\">9</span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mord\">2</span></span></span></span> ~ <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>65535</mn></mrow><annotation encoding=\"application/x-tex\">65535</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">5</span><span class=\"mord\">5</span><span class=\"mord\">3</span><span class=\"mord\">5</span></span></span></span>: Private and/or dynamically assigned ports numbers.</p>\n<p>​\tAlso known as Ephemeral Ports, these are usually assigned dynamically to client applications when  initiating a connection.</p>\n<p><img src=\"/2022/04/08/CN-5/image-20211211154556832.png\" alt=\"image-20211211154556832\" loading=\"lazy\"></p>\n</li>\n</ul>\n<h4 id=\"tcp-services\"><a class=\"markdownIt-Anchor\" href=\"#tcp-services\"></a> TCP services</h4>\n<h6 id=\"how-does-tcp-use-three-way-handshake-to-establish-a-connection\"><a class=\"markdownIt-Anchor\" href=\"#how-does-tcp-use-three-way-handshake-to-establish-a-connection\"></a> How does TCP use three-way handshake to establish a connection?</h6>\n<p><img src=\"/2022/04/08/CN-5/image-20211211154616223.png\" alt=\"image-20211211154616223\" loading=\"lazy\"></p>\n<h6 id=\"how-does-tcp-use-sequence-number-and-acknowledgment-to-provide-reliable-transmission\"><a class=\"markdownIt-Anchor\" href=\"#how-does-tcp-use-sequence-number-and-acknowledgment-to-provide-reliable-transmission\"></a> How does TCP use sequence number and acknowledgment to provide reliable transmission?</h6>\n<p><img src=\"/2022/04/08/CN-5/image-20211211154625242.png\" alt=\"image-20211211154625242\" loading=\"lazy\"></p>\n<p><img src=\"/2022/04/08/CN-5/image-20211211152352560.png\" alt=\"image-20211211152352560\" loading=\"lazy\"></p>\n<p>See more for three-way handshake. Client and Server has exchanged the sequence number and acknowledgment number.</p>\n<p>Pay attention to the direction that messaged are sent. In this example, message is from client to server, therefore the <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mi>C</mi><mi>K</mi><mo>=</mo><mi>S</mi><mi>e</mi><mi>q</mi><mtext> </mtext><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mo>+</mo><mi>P</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mtext> </mtext><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">ACK=Seq\\ number + Packet\\ Size</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathdefault\">e</span></span></span></span>. However, if the message is sent by server, the ACK would changed into <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mi>C</mi><mi>K</mi><mo>=</mo><mi>S</mi><mi>e</mi><mi>q</mi><mtext> </mtext><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mo>−</mo><mi>P</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mtext> </mtext><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">ACK=Seq\\ number - Packet\\ Size</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathdefault\">e</span></span></span></span>.</p>\n<p><img src=\"/2022/04/08/CN-5/image-20211211154842458.png\" alt=\"image-20211211154842458\" loading=\"lazy\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"layer-4-technology-transport-protocols\"><a class=\"markdownIt-Anchor\" href=\"#layer-4-technology-transport-protocols\"></a> Layer 4 Technology, Transport Protocols</h3>\n<h4 id=\"transport-protocols-tcp-and-udp\"><a class=\"markdownIt-Anchor\" href=\"#transport-protocols-tcp-and-udp\"></a> Transport protocols (TCP and UDP)</h4>\n<h6 id=\"what-are-the-differences-between-connect-oriented-and-connectionless-services-which-transport-protocol-is-providing-these-services\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-differences-between-connect-oriented-and-connectionless-services-which-transport-protocol-is-providing-these-services\"></a> What are the differences between connect-oriented and connectionless services? Which transport  protocol is providing these services?</h6>\n<p>Connection-oriented service is like telephone service, the first message sent from source device will first received by destination device, which means the messages are <mark>in order</mark>. TCP belongs to connection-oriented transport protocol.</p>\n<p>Connectionless service is like postal service, the first message sent from source device may not first received by destination device, which means the messages are <mark>not in order</mark>. UDP belongs to connectionless transport protocol.</p>\n<h6 id=\"what-functions-are-provided-by-the-transport-protocols-of-tcp-and-udp\"><a class=\"markdownIt-Anchor\" href=\"#what-functions-are-provided-by-the-transport-protocols-of-tcp-and-udp\"></a> What functions are provided by the transport protocols of TCP and UDP?</h6>\n<p>TCP:</p>\n<ul>\n<li>\n<p>Connection-oriented.</p>\n</li>\n<li>\n<p>Divides outgoing messages into segments, and reassembles messages at the destination host.</p>\n</li>\n<li>\n<p>Reliable delivery that re-sends anything not received.</p>\n</li>\n<li>\n<p>Provides flow control.</p>\n</li>\n</ul>\n<p>UDP:</p>\n<ul>\n<li>Connectionless</li>\n<li>Unreliable delivery that uses no acknowledgments, and provides no software checking for message  delivery</li>\n<li>Provides no flow control</li>\n</ul>\n<h6 id=\"which-application-layer-protocols-use-tcp-or-udp-as-transport-protocol\"><a class=\"markdownIt-Anchor\" href=\"#which-application-layer-protocols-use-tcp-or-udp-as-transport-protocol\"></a> Which application layer protocols use TCP or UDP as transport protocol?</h6>\n<p>TCP protocols include: FTP, HTTP, SMTP and Telnet.</p>\n<p>UDP protocols include: DNS, SNMP, TFTP and DHCP.</p>\n<h6 id=\"what-is-the-purpose-of-port-number-how-to-assign-the-port-number-for-the-application-on-the-server-site-and-client-site-list-some-common-used-port-numbers-for-famous-application-protocols\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-purpose-of-port-number-how-to-assign-the-port-number-for-the-application-on-the-server-site-and-client-site-list-some-common-used-port-numbers-for-famous-application-protocols\"></a> What is the purpose of port number? How to assign the port number for the application on the server site and client site? List some common used port numbers for famous application protocols.</h6>\n<p>Transport layer assigns port numbers to each of these <mark>applications or services</mark>  to keep track of <mark>different conversations</mark> that cross the network <mark>at the same time</mark>.</p>\n<p>Port numbers have the following assigned ranges:</p>\n<ul>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ~ <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1023</mn></mrow><annotation encoding=\"application/x-tex\">1023</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">3</span></span></span></span>: Well-known ports numbers. These numbers are reserved for well-known services and applications.</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1024</mn></mrow><annotation encoding=\"application/x-tex\">1024</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">4</span></span></span></span> ~ <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>49151</mn></mrow><annotation encoding=\"application/x-tex\">49151</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord\">9</span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mord\">1</span></span></span></span>: Registered for vendor-specific applications.</p>\n<p>​\tThese port numbers are assigned to individual applications that a user has chosen to install rather  than common applications that would receive a Well Known Port. When not used for a server  resource, these ports may also be used dynamically selected by a client as its source port.</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>49152</mn></mrow><annotation encoding=\"application/x-tex\">49152</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord\">9</span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mord\">2</span></span></span></span> ~ <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>65535</mn></mrow><annotation encoding=\"application/x-tex\">65535</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">5</span><span class=\"mord\">5</span><span class=\"mord\">3</span><span class=\"mord\">5</span></span></span></span>: Private and/or dynamically assigned ports numbers.</p>\n<p>​\tAlso known as Ephemeral Ports, these are usually assigned dynamically to client applications when  initiating a connection.</p>\n<p><img src=\"/2022/04/08/CN-5/image-20211211154556832.png\" alt=\"image-20211211154556832\"></p>\n</li>\n</ul>\n<h4 id=\"tcp-services\"><a class=\"markdownIt-Anchor\" href=\"#tcp-services\"></a> TCP services</h4>\n<h6 id=\"how-does-tcp-use-three-way-handshake-to-establish-a-connection\"><a class=\"markdownIt-Anchor\" href=\"#how-does-tcp-use-three-way-handshake-to-establish-a-connection\"></a> How does TCP use three-way handshake to establish a connection?</h6>\n<p><img src=\"/2022/04/08/CN-5/image-20211211154616223.png\" alt=\"image-20211211154616223\"></p>\n<h6 id=\"how-does-tcp-use-sequence-number-and-acknowledgment-to-provide-reliable-transmission\"><a class=\"markdownIt-Anchor\" href=\"#how-does-tcp-use-sequence-number-and-acknowledgment-to-provide-reliable-transmission\"></a> How does TCP use sequence number and acknowledgment to provide reliable transmission?</h6>\n<p><img src=\"/2022/04/08/CN-5/image-20211211154625242.png\" alt=\"image-20211211154625242\"></p>\n<p><img src=\"/2022/04/08/CN-5/image-20211211152352560.png\" alt=\"image-20211211152352560\"></p>\n<p>See more for three-way handshake. Client and Server has exchanged the sequence number and acknowledgment number.</p>\n<p>Pay attention to the direction that messaged are sent. In this example, message is from client to server, therefore the <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mi>C</mi><mi>K</mi><mo>=</mo><mi>S</mi><mi>e</mi><mi>q</mi><mtext> </mtext><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mo>+</mo><mi>P</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mtext> </mtext><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">ACK=Seq\\ number + Packet\\ Size</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathdefault\">e</span></span></span></span>. However, if the message is sent by server, the ACK would changed into <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mi>C</mi><mi>K</mi><mo>=</mo><mi>S</mi><mi>e</mi><mi>q</mi><mtext> </mtext><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mo>−</mo><mi>P</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mtext> </mtext><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">ACK=Seq\\ number - Packet\\ Size</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">q</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathdefault\">e</span></span></span></span>.</p>\n<p><img src=\"/2022/04/08/CN-5/image-20211211154842458.png\" alt=\"image-20211211154842458\"></p>\n"},{"title":"Computer Network 6 - Layer 5-7 Technology, Application Protocols","date":"2022-04-08T15:42:16.000Z","author":"Tony","katex":true,"_content":"\n#### Layer 5-7 Technology, Application Protocols\n\n#### Layer 5-7 technologies\n\n###### What are the two types of application communications?\n\nPeer-to-peer Communications\n\nClient-Server Communications\n\n###### List some Application layer protocols that is familiar\n\n▪ Domain Name System (DNS) \n\n▪ Hypertext Transfer Protocol (HTTP) \n\n▪ File Transfer Protocol (FTP) \n\n▪ Trivial File Transfer Protocol (TFTP) \n\n▪ Telnet \n\n▪ Simple Mail Transfer Protocol (SMTP) \n\n▪ Post Office Protocol, version 3 (POP3) \n\n▪ Simple Network Management Protocol (SNMP)\n\n###### What is the operations of DNS? What is the difference between the authoritative or non-authoritative DNS records?\n\nThese article is worth to read: \n\n[DNS 是什么？如何运作的？ - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/350054986)\n\n[DNS运作方式 - 简书 (jianshu.com)](https://www.jianshu.com/p/441de4542245)\n\n###### What is the operations of HTTP? \n\nClient use HTTP Protocol to request information from Server\n\nServer then send the information(like HTML, CSS) to Client\n\nNote that the HTTP Protocol is a stateless protocol\n\n###### What is the format of URL?\n\nURL: `https://Tony:tonytony@must.icu/menu/folder1/answer.html`\n\nProtocol: `https://`\n\nUsername&password:`Tony:tonytony`\n\nDomain name:`www.must.icu`\n\nFolder&file:`menu/folder1/answer.html`\n\n###### What is the operations of email system using SMTP and POP3?\n\nClient use SMTP Protocol to send packages to Server\n\nServer use POP3 Protocol to receive packages to Client \n\nNote that as long as the packages sent to the Server, Client will receive “send the E-mail successfully”, but actually we cannot guarantee that another has received the E-mail or not.\n\n\n\n---\n\n![image-20211207025902517](CN-6/image-20211207025902517.png)\n\nDomain name: www.must.edu.mo\n\nApplication protocol: HTTP (Note that the application protocol is only depend on `http://`)\n\nTransport protocol: TCP (just recite it)","source":"_posts/CN-6.md","raw":"---\ntitle: Computer Network 6 - Layer 5-7 Technology, Application Protocols\ndate: 2022-04-08 23:42:16\ntags:\n\t- computer network\ncategories:\n\t- 计算机网络\nauthor: Tony\nkatex: true\n---\n\n#### Layer 5-7 Technology, Application Protocols\n\n#### Layer 5-7 technologies\n\n###### What are the two types of application communications?\n\nPeer-to-peer Communications\n\nClient-Server Communications\n\n###### List some Application layer protocols that is familiar\n\n▪ Domain Name System (DNS) \n\n▪ Hypertext Transfer Protocol (HTTP) \n\n▪ File Transfer Protocol (FTP) \n\n▪ Trivial File Transfer Protocol (TFTP) \n\n▪ Telnet \n\n▪ Simple Mail Transfer Protocol (SMTP) \n\n▪ Post Office Protocol, version 3 (POP3) \n\n▪ Simple Network Management Protocol (SNMP)\n\n###### What is the operations of DNS? What is the difference between the authoritative or non-authoritative DNS records?\n\nThese article is worth to read: \n\n[DNS 是什么？如何运作的？ - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/350054986)\n\n[DNS运作方式 - 简书 (jianshu.com)](https://www.jianshu.com/p/441de4542245)\n\n###### What is the operations of HTTP? \n\nClient use HTTP Protocol to request information from Server\n\nServer then send the information(like HTML, CSS) to Client\n\nNote that the HTTP Protocol is a stateless protocol\n\n###### What is the format of URL?\n\nURL: `https://Tony:tonytony@must.icu/menu/folder1/answer.html`\n\nProtocol: `https://`\n\nUsername&password:`Tony:tonytony`\n\nDomain name:`www.must.icu`\n\nFolder&file:`menu/folder1/answer.html`\n\n###### What is the operations of email system using SMTP and POP3?\n\nClient use SMTP Protocol to send packages to Server\n\nServer use POP3 Protocol to receive packages to Client \n\nNote that as long as the packages sent to the Server, Client will receive “send the E-mail successfully”, but actually we cannot guarantee that another has received the E-mail or not.\n\n\n\n---\n\n![image-20211207025902517](CN-6/image-20211207025902517.png)\n\nDomain name: www.must.edu.mo\n\nApplication protocol: HTTP (Note that the application protocol is only depend on `http://`)\n\nTransport protocol: TCP (just recite it)","slug":"CN-6","published":1,"updated":"2022-11-01T05:53:00.566Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrcz001f1gzu77e2gh38","content":"<h4 id=\"layer-5-7-technology-application-protocols\"><a class=\"markdownIt-Anchor\" href=\"#layer-5-7-technology-application-protocols\"></a> Layer 5-7 Technology, Application Protocols</h4>\n<h4 id=\"layer-5-7-technologies\"><a class=\"markdownIt-Anchor\" href=\"#layer-5-7-technologies\"></a> Layer 5-7 technologies</h4>\n<h6 id=\"what-are-the-two-types-of-application-communications\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-two-types-of-application-communications\"></a> What are the two types of application communications?</h6>\n<p>Peer-to-peer Communications</p>\n<p>Client-Server Communications</p>\n<h6 id=\"list-some-application-layer-protocols-that-is-familiar\"><a class=\"markdownIt-Anchor\" href=\"#list-some-application-layer-protocols-that-is-familiar\"></a> List some Application layer protocols that is familiar</h6>\n<p>▪ Domain Name System (DNS)</p>\n<p>▪ Hypertext Transfer Protocol (HTTP)</p>\n<p>▪ File Transfer Protocol (FTP)</p>\n<p>▪ Trivial File Transfer Protocol (TFTP)</p>\n<p>▪ Telnet</p>\n<p>▪ Simple Mail Transfer Protocol (SMTP)</p>\n<p>▪ Post Office Protocol, version 3 (POP3)</p>\n<p>▪ Simple Network Management Protocol (SNMP)</p>\n<h6 id=\"what-is-the-operations-of-dns-what-is-the-difference-between-the-authoritative-or-non-authoritative-dns-records\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-operations-of-dns-what-is-the-difference-between-the-authoritative-or-non-authoritative-dns-records\"></a> What is the operations of DNS? What is the difference between the authoritative or non-authoritative DNS records?</h6>\n<p>These article is worth to read:</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/350054986\">DNS 是什么？如何运作的？ - 知乎 (zhihu.com)</a></p>\n<p><a href=\"https://www.jianshu.com/p/441de4542245\">DNS运作方式 - 简书 (jianshu.com)</a></p>\n<h6 id=\"what-is-the-operations-of-http\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-operations-of-http\"></a> What is the operations of HTTP?</h6>\n<p>Client use HTTP Protocol to request information from Server</p>\n<p>Server then send the information(like HTML, CSS) to Client</p>\n<p>Note that the HTTP Protocol is a stateless protocol</p>\n<h6 id=\"what-is-the-format-of-url\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-format-of-url\"></a> What is the format of URL?</h6>\n<p>URL: <code>https://Tony:tonytony@must.icu/menu/folder1/answer.html</code></p>\n<p>Protocol: <code>https://</code></p>\n<p>Username&amp;password:<code>Tony:tonytony</code></p>\n<p>Domain name:<code>www.must.icu</code></p>\n<p>Folder&amp;file:<code>menu/folder1/answer.html</code></p>\n<h6 id=\"what-is-the-operations-of-email-system-using-smtp-and-pop3\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-operations-of-email-system-using-smtp-and-pop3\"></a> What is the operations of email system using SMTP and POP3?</h6>\n<p>Client use SMTP Protocol to send packages to Server</p>\n<p>Server use POP3 Protocol to receive packages to Client</p>\n<p>Note that as long as the packages sent to the Server, Client will receive “send the E-mail successfully”, but actually we cannot guarantee that another has received the E-mail or not.</p>\n<hr>\n<p><img src=\"/2022/04/08/CN-6/image-20211207025902517.png\" alt=\"image-20211207025902517\" loading=\"lazy\"></p>\n<p>Domain name: <a href=\"http://www.must.edu.mo\">www.must.edu.mo</a></p>\n<p>Application protocol: HTTP (Note that the application protocol is only depend on <code>http://</code>)</p>\n<p>Transport protocol: TCP (just recite it)</p>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"layer-5-7-technology-application-protocols\"><a class=\"markdownIt-Anchor\" href=\"#layer-5-7-technology-application-protocols\"></a> Layer 5-7 Technology, Application Protocols</h4>\n<h4 id=\"layer-5-7-technologies\"><a class=\"markdownIt-Anchor\" href=\"#layer-5-7-technologies\"></a> Layer 5-7 technologies</h4>\n<h6 id=\"what-are-the-two-types-of-application-communications\"><a class=\"markdownIt-Anchor\" href=\"#what-are-the-two-types-of-application-communications\"></a> What are the two types of application communications?</h6>\n<p>Peer-to-peer Communications</p>\n<p>Client-Server Communications</p>\n<h6 id=\"list-some-application-layer-protocols-that-is-familiar\"><a class=\"markdownIt-Anchor\" href=\"#list-some-application-layer-protocols-that-is-familiar\"></a> List some Application layer protocols that is familiar</h6>\n<p>▪ Domain Name System (DNS)</p>\n<p>▪ Hypertext Transfer Protocol (HTTP)</p>\n<p>▪ File Transfer Protocol (FTP)</p>\n<p>▪ Trivial File Transfer Protocol (TFTP)</p>\n<p>▪ Telnet</p>\n<p>▪ Simple Mail Transfer Protocol (SMTP)</p>\n<p>▪ Post Office Protocol, version 3 (POP3)</p>\n<p>▪ Simple Network Management Protocol (SNMP)</p>\n<h6 id=\"what-is-the-operations-of-dns-what-is-the-difference-between-the-authoritative-or-non-authoritative-dns-records\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-operations-of-dns-what-is-the-difference-between-the-authoritative-or-non-authoritative-dns-records\"></a> What is the operations of DNS? What is the difference between the authoritative or non-authoritative DNS records?</h6>\n<p>These article is worth to read:</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/350054986\">DNS 是什么？如何运作的？ - 知乎 (zhihu.com)</a></p>\n<p><a href=\"https://www.jianshu.com/p/441de4542245\">DNS运作方式 - 简书 (jianshu.com)</a></p>\n<h6 id=\"what-is-the-operations-of-http\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-operations-of-http\"></a> What is the operations of HTTP?</h6>\n<p>Client use HTTP Protocol to request information from Server</p>\n<p>Server then send the information(like HTML, CSS) to Client</p>\n<p>Note that the HTTP Protocol is a stateless protocol</p>\n<h6 id=\"what-is-the-format-of-url\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-format-of-url\"></a> What is the format of URL?</h6>\n<p>URL: <code>https://Tony:tonytony@must.icu/menu/folder1/answer.html</code></p>\n<p>Protocol: <code>https://</code></p>\n<p>Username&amp;password:<code>Tony:tonytony</code></p>\n<p>Domain name:<code>www.must.icu</code></p>\n<p>Folder&amp;file:<code>menu/folder1/answer.html</code></p>\n<h6 id=\"what-is-the-operations-of-email-system-using-smtp-and-pop3\"><a class=\"markdownIt-Anchor\" href=\"#what-is-the-operations-of-email-system-using-smtp-and-pop3\"></a> What is the operations of email system using SMTP and POP3?</h6>\n<p>Client use SMTP Protocol to send packages to Server</p>\n<p>Server use POP3 Protocol to receive packages to Client</p>\n<p>Note that as long as the packages sent to the Server, Client will receive “send the E-mail successfully”, but actually we cannot guarantee that another has received the E-mail or not.</p>\n<hr>\n<p><img src=\"/2022/04/08/CN-6/image-20211207025902517.png\" alt=\"image-20211207025902517\"></p>\n<p>Domain name: <a href=\"http://www.must.edu.mo\">www.must.edu.mo</a></p>\n<p>Application protocol: HTTP (Note that the application protocol is only depend on <code>http://</code>)</p>\n<p>Transport protocol: TCP (just recite it)</p>\n"},{"layout":"post","title":"Python网络爬虫——多线程","date":"2022-11-29T20:26:00.000Z","author":"Tony","katex":true,"_content":"\n## 如何爬取网站\n\n首先获取网址，通过模拟真实真实网页请求来获取网站的html文档。代码如下：\n\n```python\nimport urllib.request\nurl = \"https://www.google.com\"\nheaders = {'User-Agent': \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.56\"}\nreq = urllib.request.Request(url=weather_url, headers=headers)\nhtml_encode = urllib.request.urlopen(req)\nhtml_txt = html_encode.read()\nhtml_txt = html_txt.decode('utf-8')\n# print(html_txt)\nhtml_encode.close()\n```\n\n## 数据清洗\n\n通过正则表达式筛选我们所需要的信息和剔除冗余信息。代码如下：\n\n```python\ndate = re.findall(r'<div class=\"th200\">.* </div>', html_txt)\nDate = []\n for i in date:\n        temp = i.replace('<div class=\"th200\">', '')\n        temp = temp.replace('</div>', '')\n        Date.append(temp)\n```\n\n## 数据储存\n\n将清洗好的数据通过Pandas存放在`.csv`文件中。代码如下：\n\n```python\nimport pandas as pd\ndata = pd.DataFrame([Date, Highest, Lowest, Weather, Wind])\ndata = data.T\ndata.to_csv('data.csv', index=False, header=False, encoding='utf_8_sig')\n```\n\n## 多线程加速\n\n代码如下：\n\n```python\nfrom threading import Thread\nthread_list = []\n\nfor yr in range(2012, 2022):\n    thread = Thread(target=get_year, args=(yr,))\n    thread.start()\n    thread_list.append(thread)\n    \nfor i in range(10):\n    thread.join()\n\n# time usage: 25.76s\n```\n\n## 多进程加速\n\n```python\nfrom multiprocessing import Process\nprocess_list = []\n\nfor yr in range(2012, 2022):\n    process = Process(target=get_year, args=(yr,))\n    process.start()\n    process_list.append(process)\n\nfor i in range(10):\n    process.join()\n    \n# time usage: 25.30s\n```\n\n## 多线程和多进程的利弊\n\n多线程编程更加适合于I/O密集型任务的程序；\n\n多进程编程更加适合于CPU密集型任务的程序。\n\n因为网络爬虫的时候大部分时间都会用在网页的请求和相应上，因此多线程综合体验更优。对于Python来说，可能有人会说Python有GIL锁阻止多个线程在同一时刻运行，但是对于I/O密集型任务来说，等待网络请求阶段占据绝大多数时间，此时线程是会释放GIL锁的，因此线程间的锁冲突情况其实并不多。而多进程没有这个问题，理论上运行时间应该更快，但是多个进程占用的资源会很多，对于大型程序来说，线程的开销远远小于进程的开销，在性能差距不大的情况下，为什么不用多进程来节约资源呢？\n\n## 全部代码\n\n```\nimport threading\nfrom urllib.error import HTTPError\nimport random\nimport urllib.request\nimport time\nimport re\n\n\ndef get_month(year, month):\n    weather_url = \"https://lishi.tianqi.com/zhuhai/\" + year + month + \".html\"\n    headers = {'User-Agent': \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.56\"}\n    req = urllib.request.Request(url=weather_url, headers=headers)\n    try:\n        html_encode = urllib.request.urlopen(req)\n    except HTTPError as err:\n        print(err)\n    else:\n        html_txt = html_encode.read()\n        html_txt = html_txt.decode('utf-8')\n        # print(html_txt)\n        html_encode.close()\n\n    date = re.findall(r'<div class=\"th200\">.* </div>', html_txt)\n    for i in date:\n        temp = i.replace('<div class=\"th200\">', '')\n        temp = temp.replace('</div>', '')\n        Date.append(temp)\n\n    climate_sum = []\n    climate = re.findall(r'<div class=\"th140\">.*</div>', html_txt)\n    for i in climate:\n        temp = i.replace('<div class=\"th140\">', '')\n        temp = temp.replace('</div>', '')\n        climate_sum.append(temp)\n\n    num = 0\n    for i in climate_sum[4:]:\n        if num == 0:\n            Highest.append(i)\n        elif num == 1:\n            Lowest.append(i)\n        elif num == 2:\n            Weather.append(i)\n        elif num == 3:\n            Wind.append(i)\n        num += 1\n        if num == 4:\n            num = 0\n\n\ndef list_to_csv():\n    import pandas as pd\n    data = pd.DataFrame([Date, Highest, Lowest, Weather, Wind])\n    data = data.T\n    data.to_csv('data.csv', index=False, header=False, encoding='utf_8_sig')\n\n\ndef get_year(y):\n    y = str(y)\n    for m in range(1, 13):\n        time.sleep(1)\n        m = str(m).zfill(2)\n        print(\"Downloading \" + y + \"-\" + m + \" weather data...\")\n        get_month(y, m)\n\n\ndef single_thread():\n    start = time.time()\n\n    for yr in range(2012, 2022):\n        get_year(yr)\n\n    end = time.time()\n    print(\"time:\", end - start)\n    print(len(Date), len(Highest), len(Lowest), len(Weather), len(Wind))\n\n\ndef multi_thread():\n    thread_list = []\n    start = time.time()\n\n    for yr in range(2012, 2022):\n        thread = threading.Thread(target=get_year, args=(yr,))\n        thread_list.append(thread)\n        thread.start()\n    for i in range(10):\n        thread.join()\n\n    end = time.time()\n    print(\"time:\", end - start)\n    print(len(Date), len(Highest), len(Lowest), len(Weather), len(Wind))\n\n\nif __name__ == \"__main__\":\n    # Single-thread program\n    Date = Highest = Lowest = Weather = Wind = []\n    single_thread()\n\n    # Multi-thread program\n    Date = Highest = Lowest = Weather = Wind = []\n    multi_thread()\n\n    list_to_csv()\n\n```\n\n","source":"_posts/Crawl-multi.md","raw":"---\nlayout: post\ntitle: Python网络爬虫——多线程\ndate: 2022-11-30 04:26:00\nauthor: Tony\ncategories:\n\t- Python\ntags: \n\t- Python\n    - Socket\n    - Multi-thread\nkatex: true\n---\n\n## 如何爬取网站\n\n首先获取网址，通过模拟真实真实网页请求来获取网站的html文档。代码如下：\n\n```python\nimport urllib.request\nurl = \"https://www.google.com\"\nheaders = {'User-Agent': \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.56\"}\nreq = urllib.request.Request(url=weather_url, headers=headers)\nhtml_encode = urllib.request.urlopen(req)\nhtml_txt = html_encode.read()\nhtml_txt = html_txt.decode('utf-8')\n# print(html_txt)\nhtml_encode.close()\n```\n\n## 数据清洗\n\n通过正则表达式筛选我们所需要的信息和剔除冗余信息。代码如下：\n\n```python\ndate = re.findall(r'<div class=\"th200\">.* </div>', html_txt)\nDate = []\n for i in date:\n        temp = i.replace('<div class=\"th200\">', '')\n        temp = temp.replace('</div>', '')\n        Date.append(temp)\n```\n\n## 数据储存\n\n将清洗好的数据通过Pandas存放在`.csv`文件中。代码如下：\n\n```python\nimport pandas as pd\ndata = pd.DataFrame([Date, Highest, Lowest, Weather, Wind])\ndata = data.T\ndata.to_csv('data.csv', index=False, header=False, encoding='utf_8_sig')\n```\n\n## 多线程加速\n\n代码如下：\n\n```python\nfrom threading import Thread\nthread_list = []\n\nfor yr in range(2012, 2022):\n    thread = Thread(target=get_year, args=(yr,))\n    thread.start()\n    thread_list.append(thread)\n    \nfor i in range(10):\n    thread.join()\n\n# time usage: 25.76s\n```\n\n## 多进程加速\n\n```python\nfrom multiprocessing import Process\nprocess_list = []\n\nfor yr in range(2012, 2022):\n    process = Process(target=get_year, args=(yr,))\n    process.start()\n    process_list.append(process)\n\nfor i in range(10):\n    process.join()\n    \n# time usage: 25.30s\n```\n\n## 多线程和多进程的利弊\n\n多线程编程更加适合于I/O密集型任务的程序；\n\n多进程编程更加适合于CPU密集型任务的程序。\n\n因为网络爬虫的时候大部分时间都会用在网页的请求和相应上，因此多线程综合体验更优。对于Python来说，可能有人会说Python有GIL锁阻止多个线程在同一时刻运行，但是对于I/O密集型任务来说，等待网络请求阶段占据绝大多数时间，此时线程是会释放GIL锁的，因此线程间的锁冲突情况其实并不多。而多进程没有这个问题，理论上运行时间应该更快，但是多个进程占用的资源会很多，对于大型程序来说，线程的开销远远小于进程的开销，在性能差距不大的情况下，为什么不用多进程来节约资源呢？\n\n## 全部代码\n\n```\nimport threading\nfrom urllib.error import HTTPError\nimport random\nimport urllib.request\nimport time\nimport re\n\n\ndef get_month(year, month):\n    weather_url = \"https://lishi.tianqi.com/zhuhai/\" + year + month + \".html\"\n    headers = {'User-Agent': \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.56\"}\n    req = urllib.request.Request(url=weather_url, headers=headers)\n    try:\n        html_encode = urllib.request.urlopen(req)\n    except HTTPError as err:\n        print(err)\n    else:\n        html_txt = html_encode.read()\n        html_txt = html_txt.decode('utf-8')\n        # print(html_txt)\n        html_encode.close()\n\n    date = re.findall(r'<div class=\"th200\">.* </div>', html_txt)\n    for i in date:\n        temp = i.replace('<div class=\"th200\">', '')\n        temp = temp.replace('</div>', '')\n        Date.append(temp)\n\n    climate_sum = []\n    climate = re.findall(r'<div class=\"th140\">.*</div>', html_txt)\n    for i in climate:\n        temp = i.replace('<div class=\"th140\">', '')\n        temp = temp.replace('</div>', '')\n        climate_sum.append(temp)\n\n    num = 0\n    for i in climate_sum[4:]:\n        if num == 0:\n            Highest.append(i)\n        elif num == 1:\n            Lowest.append(i)\n        elif num == 2:\n            Weather.append(i)\n        elif num == 3:\n            Wind.append(i)\n        num += 1\n        if num == 4:\n            num = 0\n\n\ndef list_to_csv():\n    import pandas as pd\n    data = pd.DataFrame([Date, Highest, Lowest, Weather, Wind])\n    data = data.T\n    data.to_csv('data.csv', index=False, header=False, encoding='utf_8_sig')\n\n\ndef get_year(y):\n    y = str(y)\n    for m in range(1, 13):\n        time.sleep(1)\n        m = str(m).zfill(2)\n        print(\"Downloading \" + y + \"-\" + m + \" weather data...\")\n        get_month(y, m)\n\n\ndef single_thread():\n    start = time.time()\n\n    for yr in range(2012, 2022):\n        get_year(yr)\n\n    end = time.time()\n    print(\"time:\", end - start)\n    print(len(Date), len(Highest), len(Lowest), len(Weather), len(Wind))\n\n\ndef multi_thread():\n    thread_list = []\n    start = time.time()\n\n    for yr in range(2012, 2022):\n        thread = threading.Thread(target=get_year, args=(yr,))\n        thread_list.append(thread)\n        thread.start()\n    for i in range(10):\n        thread.join()\n\n    end = time.time()\n    print(\"time:\", end - start)\n    print(len(Date), len(Highest), len(Lowest), len(Weather), len(Wind))\n\n\nif __name__ == \"__main__\":\n    # Single-thread program\n    Date = Highest = Lowest = Weather = Wind = []\n    single_thread()\n\n    # Multi-thread program\n    Date = Highest = Lowest = Weather = Wind = []\n    multi_thread()\n\n    list_to_csv()\n\n```\n\n","slug":"Crawl-multi","published":1,"updated":"2022-12-01T01:38:46.032Z","comments":1,"photos":[],"link":"","_id":"clb4gsrd0001i1gzubidcgxs8","content":"<h2 id=\"如何爬取网站\"><a class=\"markdownIt-Anchor\" href=\"#如何爬取网站\"></a> 如何爬取网站</h2>\n<p>首先获取网址，通过模拟真实真实网页请求来获取网站的html文档。代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> urllib<span class=\"token punctuation\">.</span>request\nurl <span class=\"token operator\">=</span> <span class=\"token string\">\"https://www.google.com\"</span>\nheaders <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.56\"</span><span class=\"token punctuation\">&#125;</span>\nreq <span class=\"token operator\">=</span> urllib<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">(</span>url<span class=\"token operator\">=</span>weather_url<span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span>headers<span class=\"token punctuation\">)</span>\nhtml_encode <span class=\"token operator\">=</span> urllib<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>urlopen<span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span>\nhtml_txt <span class=\"token operator\">=</span> html_encode<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nhtml_txt <span class=\"token operator\">=</span> html_txt<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># print(html_txt)</span>\nhtml_encode<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"数据清洗\"><a class=\"markdownIt-Anchor\" href=\"#数据清洗\"></a> 数据清洗</h2>\n<p>通过正则表达式筛选我们所需要的信息和剔除冗余信息。代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\">date <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>findall<span class=\"token punctuation\">(</span><span class=\"token string\">r'&lt;div class=\"th200\">.* &lt;/div>'</span><span class=\"token punctuation\">,</span> html_txt<span class=\"token punctuation\">)</span>\nDate <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> date<span class=\"token punctuation\">:</span>\n        temp <span class=\"token operator\">=</span> i<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;div class=\"th200\">'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n        temp <span class=\"token operator\">=</span> temp<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;/div>'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n        Date<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"数据储存\"><a class=\"markdownIt-Anchor\" href=\"#数据储存\"></a> 数据储存</h2>\n<p>将清洗好的数据通过Pandas存放在<code>.csv</code>文件中。代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\ndata <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>Date<span class=\"token punctuation\">,</span> Highest<span class=\"token punctuation\">,</span> Lowest<span class=\"token punctuation\">,</span> Weather<span class=\"token punctuation\">,</span> Wind<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndata <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>T\ndata<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'data.csv'</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf_8_sig'</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"多线程加速\"><a class=\"markdownIt-Anchor\" href=\"#多线程加速\"></a> 多线程加速</h2>\n<p>代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> threading <span class=\"token keyword\">import</span> Thread\nthread_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> yr <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">2012</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2022</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    thread <span class=\"token operator\">=</span> Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>get_year<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>yr<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    thread<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    thread_list<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>thread<span class=\"token punctuation\">)</span>\n    \n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    thread<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># time usage: 25.76s</span></code></pre>\n<h2 id=\"多进程加速\"><a class=\"markdownIt-Anchor\" href=\"#多进程加速\"></a> 多进程加速</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> multiprocessing <span class=\"token keyword\">import</span> Process\nprocess_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> yr <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">2012</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2022</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    process <span class=\"token operator\">=</span> Process<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>get_year<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>yr<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    process<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    process_list<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    process<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    \n<span class=\"token comment\"># time usage: 25.30s</span></code></pre>\n<h2 id=\"多线程和多进程的利弊\"><a class=\"markdownIt-Anchor\" href=\"#多线程和多进程的利弊\"></a> 多线程和多进程的利弊</h2>\n<p>多线程编程更加适合于I/O密集型任务的程序；</p>\n<p>多进程编程更加适合于CPU密集型任务的程序。</p>\n<p>因为网络爬虫的时候大部分时间都会用在网页的请求和相应上，因此多线程综合体验更优。对于Python来说，可能有人会说Python有GIL锁阻止多个线程在同一时刻运行，但是对于I/O密集型任务来说，等待网络请求阶段占据绝大多数时间，此时线程是会释放GIL锁的，因此线程间的锁冲突情况其实并不多。而多进程没有这个问题，理论上运行时间应该更快，但是多个进程占用的资源会很多，对于大型程序来说，线程的开销远远小于进程的开销，在性能差距不大的情况下，为什么不用多进程来节约资源呢？</p>\n<h2 id=\"全部代码\"><a class=\"markdownIt-Anchor\" href=\"#全部代码\"></a> 全部代码</h2>\n<pre class=\"language-none\"><code class=\"language-none\">import threading\nfrom urllib.error import HTTPError\nimport random\nimport urllib.request\nimport time\nimport re\n\n\ndef get_month(year, month):\n    weather_url &#x3D; &quot;https:&#x2F;&#x2F;lishi.tianqi.com&#x2F;zhuhai&#x2F;&quot; + year + month + &quot;.html&quot;\n    headers &#x3D; &#123;&#39;User-Agent&#39;: &quot;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;107.0.0.0 Safari&#x2F;537.36 Edg&#x2F;107.0.1418.56&quot;&#125;\n    req &#x3D; urllib.request.Request(url&#x3D;weather_url, headers&#x3D;headers)\n    try:\n        html_encode &#x3D; urllib.request.urlopen(req)\n    except HTTPError as err:\n        print(err)\n    else:\n        html_txt &#x3D; html_encode.read()\n        html_txt &#x3D; html_txt.decode(&#39;utf-8&#39;)\n        # print(html_txt)\n        html_encode.close()\n\n    date &#x3D; re.findall(r&#39;&lt;div class&#x3D;&quot;th200&quot;&gt;.* &lt;&#x2F;div&gt;&#39;, html_txt)\n    for i in date:\n        temp &#x3D; i.replace(&#39;&lt;div class&#x3D;&quot;th200&quot;&gt;&#39;, &#39;&#39;)\n        temp &#x3D; temp.replace(&#39;&lt;&#x2F;div&gt;&#39;, &#39;&#39;)\n        Date.append(temp)\n\n    climate_sum &#x3D; []\n    climate &#x3D; re.findall(r&#39;&lt;div class&#x3D;&quot;th140&quot;&gt;.*&lt;&#x2F;div&gt;&#39;, html_txt)\n    for i in climate:\n        temp &#x3D; i.replace(&#39;&lt;div class&#x3D;&quot;th140&quot;&gt;&#39;, &#39;&#39;)\n        temp &#x3D; temp.replace(&#39;&lt;&#x2F;div&gt;&#39;, &#39;&#39;)\n        climate_sum.append(temp)\n\n    num &#x3D; 0\n    for i in climate_sum[4:]:\n        if num &#x3D;&#x3D; 0:\n            Highest.append(i)\n        elif num &#x3D;&#x3D; 1:\n            Lowest.append(i)\n        elif num &#x3D;&#x3D; 2:\n            Weather.append(i)\n        elif num &#x3D;&#x3D; 3:\n            Wind.append(i)\n        num +&#x3D; 1\n        if num &#x3D;&#x3D; 4:\n            num &#x3D; 0\n\n\ndef list_to_csv():\n    import pandas as pd\n    data &#x3D; pd.DataFrame([Date, Highest, Lowest, Weather, Wind])\n    data &#x3D; data.T\n    data.to_csv(&#39;data.csv&#39;, index&#x3D;False, header&#x3D;False, encoding&#x3D;&#39;utf_8_sig&#39;)\n\n\ndef get_year(y):\n    y &#x3D; str(y)\n    for m in range(1, 13):\n        time.sleep(1)\n        m &#x3D; str(m).zfill(2)\n        print(&quot;Downloading &quot; + y + &quot;-&quot; + m + &quot; weather data...&quot;)\n        get_month(y, m)\n\n\ndef single_thread():\n    start &#x3D; time.time()\n\n    for yr in range(2012, 2022):\n        get_year(yr)\n\n    end &#x3D; time.time()\n    print(&quot;time:&quot;, end - start)\n    print(len(Date), len(Highest), len(Lowest), len(Weather), len(Wind))\n\n\ndef multi_thread():\n    thread_list &#x3D; []\n    start &#x3D; time.time()\n\n    for yr in range(2012, 2022):\n        thread &#x3D; threading.Thread(target&#x3D;get_year, args&#x3D;(yr,))\n        thread_list.append(thread)\n        thread.start()\n    for i in range(10):\n        thread.join()\n\n    end &#x3D; time.time()\n    print(&quot;time:&quot;, end - start)\n    print(len(Date), len(Highest), len(Lowest), len(Weather), len(Wind))\n\n\nif __name__ &#x3D;&#x3D; &quot;__main__&quot;:\n    # Single-thread program\n    Date &#x3D; Highest &#x3D; Lowest &#x3D; Weather &#x3D; Wind &#x3D; []\n    single_thread()\n\n    # Multi-thread program\n    Date &#x3D; Highest &#x3D; Lowest &#x3D; Weather &#x3D; Wind &#x3D; []\n    multi_thread()\n\n    list_to_csv()\n</code></pre>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"如何爬取网站\"><a class=\"markdownIt-Anchor\" href=\"#如何爬取网站\"></a> 如何爬取网站</h2>\n<p>首先获取网址，通过模拟真实真实网页请求来获取网站的html文档。代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> urllib<span class=\"token punctuation\">.</span>request\nurl <span class=\"token operator\">=</span> <span class=\"token string\">\"https://www.google.com\"</span>\nheaders <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.56\"</span><span class=\"token punctuation\">&#125;</span>\nreq <span class=\"token operator\">=</span> urllib<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">(</span>url<span class=\"token operator\">=</span>weather_url<span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span>headers<span class=\"token punctuation\">)</span>\nhtml_encode <span class=\"token operator\">=</span> urllib<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>urlopen<span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span>\nhtml_txt <span class=\"token operator\">=</span> html_encode<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nhtml_txt <span class=\"token operator\">=</span> html_txt<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># print(html_txt)</span>\nhtml_encode<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"数据清洗\"><a class=\"markdownIt-Anchor\" href=\"#数据清洗\"></a> 数据清洗</h2>\n<p>通过正则表达式筛选我们所需要的信息和剔除冗余信息。代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\">date <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>findall<span class=\"token punctuation\">(</span><span class=\"token string\">r'&lt;div class=\"th200\">.* &lt;/div>'</span><span class=\"token punctuation\">,</span> html_txt<span class=\"token punctuation\">)</span>\nDate <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> date<span class=\"token punctuation\">:</span>\n        temp <span class=\"token operator\">=</span> i<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;div class=\"th200\">'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n        temp <span class=\"token operator\">=</span> temp<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;/div>'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n        Date<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"数据储存\"><a class=\"markdownIt-Anchor\" href=\"#数据储存\"></a> 数据储存</h2>\n<p>将清洗好的数据通过Pandas存放在<code>.csv</code>文件中。代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\ndata <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>Date<span class=\"token punctuation\">,</span> Highest<span class=\"token punctuation\">,</span> Lowest<span class=\"token punctuation\">,</span> Weather<span class=\"token punctuation\">,</span> Wind<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndata <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>T\ndata<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'data.csv'</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf_8_sig'</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"多线程加速\"><a class=\"markdownIt-Anchor\" href=\"#多线程加速\"></a> 多线程加速</h2>\n<p>代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> threading <span class=\"token keyword\">import</span> Thread\nthread_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> yr <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">2012</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2022</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    thread <span class=\"token operator\">=</span> Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>get_year<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>yr<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    thread<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    thread_list<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>thread<span class=\"token punctuation\">)</span>\n    \n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    thread<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># time usage: 25.76s</span></code></pre>\n<h2 id=\"多进程加速\"><a class=\"markdownIt-Anchor\" href=\"#多进程加速\"></a> 多进程加速</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> multiprocessing <span class=\"token keyword\">import</span> Process\nprocess_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> yr <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">2012</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2022</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    process <span class=\"token operator\">=</span> Process<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>get_year<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>yr<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    process<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    process_list<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    process<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    \n<span class=\"token comment\"># time usage: 25.30s</span></code></pre>\n<h2 id=\"多线程和多进程的利弊\"><a class=\"markdownIt-Anchor\" href=\"#多线程和多进程的利弊\"></a> 多线程和多进程的利弊</h2>\n<p>多线程编程更加适合于I/O密集型任务的程序；</p>\n<p>多进程编程更加适合于CPU密集型任务的程序。</p>\n<p>因为网络爬虫的时候大部分时间都会用在网页的请求和相应上，因此多线程综合体验更优。对于Python来说，可能有人会说Python有GIL锁阻止多个线程在同一时刻运行，但是对于I/O密集型任务来说，等待网络请求阶段占据绝大多数时间，此时线程是会释放GIL锁的，因此线程间的锁冲突情况其实并不多。而多进程没有这个问题，理论上运行时间应该更快，但是多个进程占用的资源会很多，对于大型程序来说，线程的开销远远小于进程的开销，在性能差距不大的情况下，为什么不用多进程来节约资源呢？</p>\n<h2 id=\"全部代码\"><a class=\"markdownIt-Anchor\" href=\"#全部代码\"></a> 全部代码</h2>\n<pre class=\"language-none\"><code class=\"language-none\">import threading\nfrom urllib.error import HTTPError\nimport random\nimport urllib.request\nimport time\nimport re\n\n\ndef get_month(year, month):\n    weather_url &#x3D; &quot;https:&#x2F;&#x2F;lishi.tianqi.com&#x2F;zhuhai&#x2F;&quot; + year + month + &quot;.html&quot;\n    headers &#x3D; &#123;&#39;User-Agent&#39;: &quot;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;107.0.0.0 Safari&#x2F;537.36 Edg&#x2F;107.0.1418.56&quot;&#125;\n    req &#x3D; urllib.request.Request(url&#x3D;weather_url, headers&#x3D;headers)\n    try:\n        html_encode &#x3D; urllib.request.urlopen(req)\n    except HTTPError as err:\n        print(err)\n    else:\n        html_txt &#x3D; html_encode.read()\n        html_txt &#x3D; html_txt.decode(&#39;utf-8&#39;)\n        # print(html_txt)\n        html_encode.close()\n\n    date &#x3D; re.findall(r&#39;&lt;div class&#x3D;&quot;th200&quot;&gt;.* &lt;&#x2F;div&gt;&#39;, html_txt)\n    for i in date:\n        temp &#x3D; i.replace(&#39;&lt;div class&#x3D;&quot;th200&quot;&gt;&#39;, &#39;&#39;)\n        temp &#x3D; temp.replace(&#39;&lt;&#x2F;div&gt;&#39;, &#39;&#39;)\n        Date.append(temp)\n\n    climate_sum &#x3D; []\n    climate &#x3D; re.findall(r&#39;&lt;div class&#x3D;&quot;th140&quot;&gt;.*&lt;&#x2F;div&gt;&#39;, html_txt)\n    for i in climate:\n        temp &#x3D; i.replace(&#39;&lt;div class&#x3D;&quot;th140&quot;&gt;&#39;, &#39;&#39;)\n        temp &#x3D; temp.replace(&#39;&lt;&#x2F;div&gt;&#39;, &#39;&#39;)\n        climate_sum.append(temp)\n\n    num &#x3D; 0\n    for i in climate_sum[4:]:\n        if num &#x3D;&#x3D; 0:\n            Highest.append(i)\n        elif num &#x3D;&#x3D; 1:\n            Lowest.append(i)\n        elif num &#x3D;&#x3D; 2:\n            Weather.append(i)\n        elif num &#x3D;&#x3D; 3:\n            Wind.append(i)\n        num +&#x3D; 1\n        if num &#x3D;&#x3D; 4:\n            num &#x3D; 0\n\n\ndef list_to_csv():\n    import pandas as pd\n    data &#x3D; pd.DataFrame([Date, Highest, Lowest, Weather, Wind])\n    data &#x3D; data.T\n    data.to_csv(&#39;data.csv&#39;, index&#x3D;False, header&#x3D;False, encoding&#x3D;&#39;utf_8_sig&#39;)\n\n\ndef get_year(y):\n    y &#x3D; str(y)\n    for m in range(1, 13):\n        time.sleep(1)\n        m &#x3D; str(m).zfill(2)\n        print(&quot;Downloading &quot; + y + &quot;-&quot; + m + &quot; weather data...&quot;)\n        get_month(y, m)\n\n\ndef single_thread():\n    start &#x3D; time.time()\n\n    for yr in range(2012, 2022):\n        get_year(yr)\n\n    end &#x3D; time.time()\n    print(&quot;time:&quot;, end - start)\n    print(len(Date), len(Highest), len(Lowest), len(Weather), len(Wind))\n\n\ndef multi_thread():\n    thread_list &#x3D; []\n    start &#x3D; time.time()\n\n    for yr in range(2012, 2022):\n        thread &#x3D; threading.Thread(target&#x3D;get_year, args&#x3D;(yr,))\n        thread_list.append(thread)\n        thread.start()\n    for i in range(10):\n        thread.join()\n\n    end &#x3D; time.time()\n    print(&quot;time:&quot;, end - start)\n    print(len(Date), len(Highest), len(Lowest), len(Weather), len(Wind))\n\n\nif __name__ &#x3D;&#x3D; &quot;__main__&quot;:\n    # Single-thread program\n    Date &#x3D; Highest &#x3D; Lowest &#x3D; Weather &#x3D; Wind &#x3D; []\n    single_thread()\n\n    # Multi-thread program\n    Date &#x3D; Highest &#x3D; Lowest &#x3D; Weather &#x3D; Wind &#x3D; []\n    multi_thread()\n\n    list_to_csv()\n</code></pre>\n"},{"title":"CUDA安装教程","date":"2022-09-17T10:33:48.000Z","author":"Tony","katex":true,"_content":"\n# CUDA安装教程\n\nCUDA仅针对NVIDIA显卡进行加速，对于AMD显卡及Inter集成显卡没有加速效果，此教程仅适用于拥有NVIDIA显卡电脑的朋友。\n\n## CUDA下载\n\nCUDA下载网址：https://developer.nvidia.com/cuda-toolkit-archive\n\n选择电脑系统和版本型号，较旧的电脑需要根据电脑显卡版本选择较旧的CUDA Toolkit，一般电脑选择最新版即可。\n\n![image-20220718135746089](CUDA-install/image-20220718135746089-1663410928185-1.png)\n\n傻瓜式下一步：\n\n<img src=\"CUDA-install/image-20220718135714318-1663410937840-3.png\" alt=\"image-20220718135714318\" style=\"zoom:67%;\" />\n\n<img src=\"CUDA-install/image-20220718135833425-1663410950886-5.png\" alt=\"image-20220718135833425\" style=\"zoom:67%;\" />\n\n使用命令`nvcc -V`验证是否安装成功：\n\n<img src=\"CUDA-install/image-20220718135956517-1663410961962-7.png\" alt=\"image-20220718135956517\" style=\"zoom:67%;\" />\n\n\n\n## cuDNN下载\n\ncuDNN下载网址：https://developer.nvidia.com/cudnn\n\n选择电脑系统和版本型号，较旧的电脑需要根据电脑显卡版本选择较旧的CUDNN，一般电脑选择最新版即可。\n\n<img src=\"CUDA-install/image-20220718160333419-1663410975368-9.png\" alt=\"image-20220718160333419\" style=\"zoom:80%;\" />\n\n下载后打开压缩包：\n\n\n\n<img src=\"CUDA-install/image-20220718160419835-1663410988631-11.png\" alt=\"image-20220718160419835\" style=\"zoom:67%;\" />\n\n将下载好的cudnn文件复制到cuda的安装目录下面，默认路径为C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\vXX.X.\n\n\n\n\n\n","source":"_posts/CUDA-install.md","raw":"---\ntitle: CUDA安装教程\ndate: 2022-09-17 18:33:48\nauthor: Tony\ncategories:\n  - Python\ntags:\n  - CUDA\n  - Python\nkatex: true\n---\n\n# CUDA安装教程\n\nCUDA仅针对NVIDIA显卡进行加速，对于AMD显卡及Inter集成显卡没有加速效果，此教程仅适用于拥有NVIDIA显卡电脑的朋友。\n\n## CUDA下载\n\nCUDA下载网址：https://developer.nvidia.com/cuda-toolkit-archive\n\n选择电脑系统和版本型号，较旧的电脑需要根据电脑显卡版本选择较旧的CUDA Toolkit，一般电脑选择最新版即可。\n\n![image-20220718135746089](CUDA-install/image-20220718135746089-1663410928185-1.png)\n\n傻瓜式下一步：\n\n<img src=\"CUDA-install/image-20220718135714318-1663410937840-3.png\" alt=\"image-20220718135714318\" style=\"zoom:67%;\" />\n\n<img src=\"CUDA-install/image-20220718135833425-1663410950886-5.png\" alt=\"image-20220718135833425\" style=\"zoom:67%;\" />\n\n使用命令`nvcc -V`验证是否安装成功：\n\n<img src=\"CUDA-install/image-20220718135956517-1663410961962-7.png\" alt=\"image-20220718135956517\" style=\"zoom:67%;\" />\n\n\n\n## cuDNN下载\n\ncuDNN下载网址：https://developer.nvidia.com/cudnn\n\n选择电脑系统和版本型号，较旧的电脑需要根据电脑显卡版本选择较旧的CUDNN，一般电脑选择最新版即可。\n\n<img src=\"CUDA-install/image-20220718160333419-1663410975368-9.png\" alt=\"image-20220718160333419\" style=\"zoom:80%;\" />\n\n下载后打开压缩包：\n\n\n\n<img src=\"CUDA-install/image-20220718160419835-1663410988631-11.png\" alt=\"image-20220718160419835\" style=\"zoom:67%;\" />\n\n将下载好的cudnn文件复制到cuda的安装目录下面，默认路径为C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\vXX.X.\n\n\n\n\n\n","slug":"CUDA-install","published":1,"updated":"2022-11-01T05:53:00.566Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrd2001k1gzuhf9zfl09","content":"<h1 id=\"cuda安装教程\"><a class=\"markdownIt-Anchor\" href=\"#cuda安装教程\"></a> CUDA安装教程</h1>\n<p>CUDA仅针对NVIDIA显卡进行加速，对于AMD显卡及Inter集成显卡没有加速效果，此教程仅适用于拥有NVIDIA显卡电脑的朋友。</p>\n<h2 id=\"cuda下载\"><a class=\"markdownIt-Anchor\" href=\"#cuda下载\"></a> CUDA下载</h2>\n<p>CUDA下载网址：<a href=\"https://developer.nvidia.com/cuda-toolkit-archive\">https://developer.nvidia.com/cuda-toolkit-archive</a></p>\n<p>选择电脑系统和版本型号，较旧的电脑需要根据电脑显卡版本选择较旧的CUDA Toolkit，一般电脑选择最新版即可。</p>\n<p><img src=\"/2022/09/17/CUDA-install/image-20220718135746089-1663410928185-1.png\" alt=\"image-20220718135746089\" loading=\"lazy\"></p>\n<p>傻瓜式下一步：</p>\n<img src=\"/2022/09/17/CUDA-install/image-20220718135714318-1663410937840-3.png\" alt=\"image-20220718135714318\" style=\"zoom:67%;\" loading=\"lazy\">\n<img src=\"/2022/09/17/CUDA-install/image-20220718135833425-1663410950886-5.png\" alt=\"image-20220718135833425\" style=\"zoom:67%;\" loading=\"lazy\">\n<p>使用命令<code>nvcc -V</code>验证是否安装成功：</p>\n<img src=\"/2022/09/17/CUDA-install/image-20220718135956517-1663410961962-7.png\" alt=\"image-20220718135956517\" style=\"zoom:67%;\" loading=\"lazy\">\n<h2 id=\"cudnn下载\"><a class=\"markdownIt-Anchor\" href=\"#cudnn下载\"></a> cuDNN下载</h2>\n<p>cuDNN下载网址：<a href=\"https://developer.nvidia.com/cudnn\">https://developer.nvidia.com/cudnn</a></p>\n<p>选择电脑系统和版本型号，较旧的电脑需要根据电脑显卡版本选择较旧的CUDNN，一般电脑选择最新版即可。</p>\n<img src=\"/2022/09/17/CUDA-install/image-20220718160333419-1663410975368-9.png\" alt=\"image-20220718160333419\" style=\"zoom:80%;\" loading=\"lazy\">\n<p>下载后打开压缩包：</p>\n<img src=\"/2022/09/17/CUDA-install/image-20220718160419835-1663410988631-11.png\" alt=\"image-20220718160419835\" style=\"zoom:67%;\" loading=\"lazy\">\n<p>将下载好的cudnn文件复制到cuda的安装目录下面，默认路径为C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\vXX.X.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"cuda安装教程\"><a class=\"markdownIt-Anchor\" href=\"#cuda安装教程\"></a> CUDA安装教程</h1>\n<p>CUDA仅针对NVIDIA显卡进行加速，对于AMD显卡及Inter集成显卡没有加速效果，此教程仅适用于拥有NVIDIA显卡电脑的朋友。</p>\n<h2 id=\"cuda下载\"><a class=\"markdownIt-Anchor\" href=\"#cuda下载\"></a> CUDA下载</h2>\n<p>CUDA下载网址：<a href=\"https://developer.nvidia.com/cuda-toolkit-archive\">https://developer.nvidia.com/cuda-toolkit-archive</a></p>\n<p>选择电脑系统和版本型号，较旧的电脑需要根据电脑显卡版本选择较旧的CUDA Toolkit，一般电脑选择最新版即可。</p>\n<p><img src=\"/2022/09/17/CUDA-install/image-20220718135746089-1663410928185-1.png\" alt=\"image-20220718135746089\"></p>\n<p>傻瓜式下一步：</p>\n<img src=\"/2022/09/17/CUDA-install/image-20220718135714318-1663410937840-3.png\" alt=\"image-20220718135714318\" style=\"zoom:67%;\">\n<img src=\"/2022/09/17/CUDA-install/image-20220718135833425-1663410950886-5.png\" alt=\"image-20220718135833425\" style=\"zoom:67%;\">\n<p>使用命令<code>nvcc -V</code>验证是否安装成功：</p>\n<img src=\"/2022/09/17/CUDA-install/image-20220718135956517-1663410961962-7.png\" alt=\"image-20220718135956517\" style=\"zoom:67%;\">\n<h2 id=\"cudnn下载\"><a class=\"markdownIt-Anchor\" href=\"#cudnn下载\"></a> cuDNN下载</h2>\n<p>cuDNN下载网址：<a href=\"https://developer.nvidia.com/cudnn\">https://developer.nvidia.com/cudnn</a></p>\n<p>选择电脑系统和版本型号，较旧的电脑需要根据电脑显卡版本选择较旧的CUDNN，一般电脑选择最新版即可。</p>\n<img src=\"/2022/09/17/CUDA-install/image-20220718160333419-1663410975368-9.png\" alt=\"image-20220718160333419\" style=\"zoom:80%;\">\n<p>下载后打开压缩包：</p>\n<img src=\"/2022/09/17/CUDA-install/image-20220718160419835-1663410988631-11.png\" alt=\"image-20220718160419835\" style=\"zoom:67%;\">\n<p>将下载好的cudnn文件复制到cuda的安装目录下面，默认路径为C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\vXX.X.</p>\n"},{"title":"DFS简介","date":"2022-03-10T07:08:58.000Z","katex":true,"_content":"\n## DFS基本概念\n\n**深度优先搜索算法**（Depth First Search）：一种用于遍历或搜索树或图的算法。 沿着树的深度遍历树的节点，尽可能深的搜索树的分支。 属于盲目搜索,最糟糕的情况算法时间复杂度为$O(n^2)$。\n\n---\n\n## 经典例题\n\n### P1706全排列问题\n\n注：题目来源自[洛谷](https://www.luogu.com.cn/problem/P1706)。\n\n#### 题目描述\n\n输出自然数 1 到 n 所有不重复的排列，即 *n* 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。\n\n#### 输入格式\n\n一个整数 n。\n\n#### 输出格式\n\n由1∼*n* 组成的所有不重复的数字序列，每行一个序列。\n\n每个数字保留 5 个场宽。\n\n#### 输入输出样例\n\n**输入 #1**\n\n```bash\n3\n```\n\n**输出 #1**\n\n```bash\n    1    2    3\n    1    3    2\n    2    1    3\n    2    3    1\n    3    1    2\n    3    2    1\n```\n\n#### 说明/提示\n\n$1≤n≤9$\n\n#### 答案解析\n\n```c\n#include <iostream>\nusing namespace std;\nbool vis[100];//标记数字是否出现\nint a[100];//全排列数组\nint n;\nvoid dfs(int x)\n{\n    if (x == n+1)\n    {\n        for (int i = 1;i <= n;i++)\n                printf (\"%5d\",a[i]);\n        cout<<endl;\n        return;\n    }\n    for (int i = 1;i <= n;i++)\n    {\n        if (vis[i]==0)\n        {\n            vis[i] = 1;\n            a[x] = i;\n            dfs(x+1);//递归\n            vis[i] = 0;//回溯\n        }\n    }\n}\nint main()\n{\n    cin>>n; \n    dfs(1);\n    return 0;\n}\n```\n\n------\n\n### P1238 走迷宫\n\n注：题目来源[洛谷](https://www.luogu.com.cn/problem/P1238)。\n\n#### 题目描述\n\n有一个 $m\\times n$ 格的迷宫(表示有 $m$ 行、$n$列)，其中有可走的也有不可走的，如果用 $1$ 表示可以走，$0$ 表示不可以走，文件读入这 $m\\times n$ 个数据和起始点、结束点（起始点和结束点都是用两个数据来描述的，分别表示这个点的行号和列号）。现在要你编程找出所有可行的道路，要求所走的路中没有重复的点，走时只能是上下左右四个方向。如果一条路都不可行，则输出相应信息（用 $-1$ 表示无路）。\n\n优先顺序：左上右下。**数据保证随机生成。**\n\n#### 输入格式\n\n第一行是两个数 $m,n(1<m,n<15)$，接下来是 $m$行 $n$ 列由$1$ 和$ 0$ 组成的数据，最后两行是起始点和结束点。\n\n#### 输出格式\n\n所有可行的路径，描述一个点时用 $(x,y)$ 的形式，除开始点外，其他的都要用 `->` 表示方向。\n\n如果没有一条可行的路则输出 $-1$。\n\n#### 输入输出样例\n\n**输入 #1**\n\n```bash\n5 6\n1 0 0 1 0 1\n1 1 1 1 1 1\n0 0 1 1 1 0\n1 1 1 1 1 0\n1 1 1 0 1 1\n1 1\n5 6\n```\n\n**输出 #1**\n\n```bash\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(2,5)->(3,5)->(3,4)->(3,3)->(4,3)->(4,4)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(2,5)->(3,5)->(3,4)->(4,4)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(2,5)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(3,4)->(3,3)->(4,3)->(4,4)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(3,4)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(3,4)->(4,4)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(3,4)->(2,4)->(2,5)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(3,4)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(3,4)->(4,4)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(4,3)->(4,4)->(3,4)->(2,4)->(2,5)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(4,3)->(4,4)->(3,4)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(4,3)->(4,4)->(4,5)->(5,5)->(5,6)\n```\n\n#### 说明/提示\n\n数据保证随机生成。事实上，如果 $n=m=14$ 且每个位置都是 $1$的话，有 $69450664761521361664274701548907358996488$ 种路径。\n\n#### 答案解析\n\n```c\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nconst int N = 1001;\nbool map[N][N];\nbool visited[N][N];\nint output[N * N];//stack\nint pointer;\nbool solution;\n//for example, m=5,n=6\n//(2,3)==>(2-1)*n+3=9\n//(5,6)==>(5-1)*n+6=30\n//therefore, (x,y)==>(x-1)*n+y\nvoid dfs(int x, int y);\nint m, n, start_x, start_y, end_x, end_y;\nint main()\n{\n\tcin >> m >> n;\n\tfor (int i = 1; i <= m; i++)\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tcin >> map[i][j];\n\tcin >> start_x >> start_y;\n\tcin >> end_x >> end_y;\n\tif (map[start_x][start_y] == 0)\n\t{\n\t\tcout << \"-1\";\n\t\treturn 0;\n\t}\t\n\telse if (map[end_x][end_y] == 0)\n\t{\n\t\tcout << \"-1\";\n\t\treturn 0;\n\t}\n\telse \n\t\tdfs(start_x,start_y);\n\tif (!solution)\n\t\tcout << \"-1\";\n\treturn 0;\n}\nvoid dfs(int x,int y)\n{\n\tif (x<1 || y<1 || x>m || y> n)\n\t\treturn;\n\tif (visited[x][y] || !map[x][y])\n\t\treturn;\n\tif (x == end_x && y == end_y)\n\t{\n\t\tsolution = 1;\n\t\tfor (int i = 0; i < pointer; i++)\n\t\t\tif (output[i] % n)\n\t\t\t\tcout << \"(\" << output[i] / n + 1 << \",\" << output[i] % n << \")\" << \"->\";\n\t\t\telse\n\t\t\t\tcout << \"(\" << output[i] / n  << \",\" << n << \")\" << \"->\";\n\t\tcout << \"(\" << end_x << \",\" << end_y << \")\" << endl;\n\t\treturn;\n\t}\n\n\t//++++++++++\n\tvisited[x][y] = true;\n\toutput[pointer] = (x - 1) * n + y;\n\tpointer++;\t\n\t//++++++++++\n\n\tif (map[x][y - 1] && !visited[x][y-1])\n\t\tdfs(x, y - 1);\n\tif (map[x - 1][y] && !visited[x-1][y])\n\t\tdfs(x - 1, y);\n\tif (map[x][y + 1] && !visited[x][y+1])\n\t\tdfs(x, y + 1);\n\tif (map[x + 1][y] && !visited[x+1][y])\n\t\tdfs(x + 1, y);\n\n\t//----------\n\toutput[pointer] = 0;\n\tpointer--;\n\tvisited[x][y] = false;\n\t//----------\n\n\n}\n```\n\n---\n\n### 连通块问题（floodfill）\n\n注：我忘了在哪找的题了。。。\n\n#### 题目描述\n\n一个$n \\times m$的方格图，一些格子被涂成了黑色，在方格图中被标为$1$，白色格子标为$0$。问有多少个四连通的黑色格子连通块。四连通的黑色格子连通块指的是一片由黑色格子组成的区域，其中的每个黑色格子能通过四连通的走法（上下左右），只走黑色格子，到达该联通块中的其它黑色格子。\n\n#### 输入输出样例\n\n**输入 #1**\n\n```bash\n1 1\n*\n3 5\n*@*@*\n**@**\n*@*@*\n1 8\n@@****@*\n5 5\n****@\n*@@*@\n*@**@\n@@@*@\n@@**@\n0 0\n```\n\n**输出 #1**\n\n```bash\n0\n1\n2\n2\n```\n\n#### 答案解析\n\n```c\n#include<bits/stdc++.h>\nusing namespace std;\n#define maxn 100+5\nchar pic[maxn][maxn];//存图\nint m,n,idx[maxn][maxn];\nvoid dfs(int r,int c,int id)\n{\n    if(r<0||r>=m||c<0||c>=n)\n        return ;//出界的格子\n    if(idx[r][c]>0||pic[r][c]!='@')\n        return ;//不是'@'或已经被访问过\n    idx[r][c]=id;//将点记录下来\n    for(int dr=-1;dr<=1;dr++)\n        for(int dc=-1;dc<=1;dc++)\n            if(dr!=0||dc!=0)\n                dfs(r+dr,c+dc,id);//向四个方向搜索·\n}\nint main()\n{\n    while(scanf(\"%d%d\",&m,&n)==2 && m && n)\n    {\n        for(int i=0;i<m;i++)\n            scanf(\"%s\",pic[i]);\n        memset(idx,0,sizeof(idx));\n        int cnt=0;\n        for(int i=0;i<m;i++)\n            for(int j=0;j<n;j++)//每一次扫描所有为id的方格\n                if(idx[i][j]==0&&pic[i][j]=='@')\n                    dfs(i,j,++cnt);\n        printf(\"%d\\n\",cnt);\n    }\n    return 0;\n}\n```\n\n---\n\n$$\nEND\n$$\n\n","source":"_posts/DFS.md","raw":"---\ntitle: DFS简介\ndate: 2022-03-10 15:08:58\ntags:\n\t- algorithm\n\t- DFS\ncategories:\n\t- algorithm\nkatex: true\n\n---\n\n## DFS基本概念\n\n**深度优先搜索算法**（Depth First Search）：一种用于遍历或搜索树或图的算法。 沿着树的深度遍历树的节点，尽可能深的搜索树的分支。 属于盲目搜索,最糟糕的情况算法时间复杂度为$O(n^2)$。\n\n---\n\n## 经典例题\n\n### P1706全排列问题\n\n注：题目来源自[洛谷](https://www.luogu.com.cn/problem/P1706)。\n\n#### 题目描述\n\n输出自然数 1 到 n 所有不重复的排列，即 *n* 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。\n\n#### 输入格式\n\n一个整数 n。\n\n#### 输出格式\n\n由1∼*n* 组成的所有不重复的数字序列，每行一个序列。\n\n每个数字保留 5 个场宽。\n\n#### 输入输出样例\n\n**输入 #1**\n\n```bash\n3\n```\n\n**输出 #1**\n\n```bash\n    1    2    3\n    1    3    2\n    2    1    3\n    2    3    1\n    3    1    2\n    3    2    1\n```\n\n#### 说明/提示\n\n$1≤n≤9$\n\n#### 答案解析\n\n```c\n#include <iostream>\nusing namespace std;\nbool vis[100];//标记数字是否出现\nint a[100];//全排列数组\nint n;\nvoid dfs(int x)\n{\n    if (x == n+1)\n    {\n        for (int i = 1;i <= n;i++)\n                printf (\"%5d\",a[i]);\n        cout<<endl;\n        return;\n    }\n    for (int i = 1;i <= n;i++)\n    {\n        if (vis[i]==0)\n        {\n            vis[i] = 1;\n            a[x] = i;\n            dfs(x+1);//递归\n            vis[i] = 0;//回溯\n        }\n    }\n}\nint main()\n{\n    cin>>n; \n    dfs(1);\n    return 0;\n}\n```\n\n------\n\n### P1238 走迷宫\n\n注：题目来源[洛谷](https://www.luogu.com.cn/problem/P1238)。\n\n#### 题目描述\n\n有一个 $m\\times n$ 格的迷宫(表示有 $m$ 行、$n$列)，其中有可走的也有不可走的，如果用 $1$ 表示可以走，$0$ 表示不可以走，文件读入这 $m\\times n$ 个数据和起始点、结束点（起始点和结束点都是用两个数据来描述的，分别表示这个点的行号和列号）。现在要你编程找出所有可行的道路，要求所走的路中没有重复的点，走时只能是上下左右四个方向。如果一条路都不可行，则输出相应信息（用 $-1$ 表示无路）。\n\n优先顺序：左上右下。**数据保证随机生成。**\n\n#### 输入格式\n\n第一行是两个数 $m,n(1<m,n<15)$，接下来是 $m$行 $n$ 列由$1$ 和$ 0$ 组成的数据，最后两行是起始点和结束点。\n\n#### 输出格式\n\n所有可行的路径，描述一个点时用 $(x,y)$ 的形式，除开始点外，其他的都要用 `->` 表示方向。\n\n如果没有一条可行的路则输出 $-1$。\n\n#### 输入输出样例\n\n**输入 #1**\n\n```bash\n5 6\n1 0 0 1 0 1\n1 1 1 1 1 1\n0 0 1 1 1 0\n1 1 1 1 1 0\n1 1 1 0 1 1\n1 1\n5 6\n```\n\n**输出 #1**\n\n```bash\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(2,5)->(3,5)->(3,4)->(3,3)->(4,3)->(4,4)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(2,5)->(3,5)->(3,4)->(4,4)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(2,5)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(3,4)->(3,3)->(4,3)->(4,4)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(3,4)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(2,4)->(3,4)->(4,4)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(3,4)->(2,4)->(2,5)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(3,4)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(3,4)->(4,4)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(4,3)->(4,4)->(3,4)->(2,4)->(2,5)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(4,3)->(4,4)->(3,4)->(3,5)->(4,5)->(5,5)->(5,6)\n(1,1)->(2,1)->(2,2)->(2,3)->(3,3)->(4,3)->(4,4)->(4,5)->(5,5)->(5,6)\n```\n\n#### 说明/提示\n\n数据保证随机生成。事实上，如果 $n=m=14$ 且每个位置都是 $1$的话，有 $69450664761521361664274701548907358996488$ 种路径。\n\n#### 答案解析\n\n```c\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nconst int N = 1001;\nbool map[N][N];\nbool visited[N][N];\nint output[N * N];//stack\nint pointer;\nbool solution;\n//for example, m=5,n=6\n//(2,3)==>(2-1)*n+3=9\n//(5,6)==>(5-1)*n+6=30\n//therefore, (x,y)==>(x-1)*n+y\nvoid dfs(int x, int y);\nint m, n, start_x, start_y, end_x, end_y;\nint main()\n{\n\tcin >> m >> n;\n\tfor (int i = 1; i <= m; i++)\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tcin >> map[i][j];\n\tcin >> start_x >> start_y;\n\tcin >> end_x >> end_y;\n\tif (map[start_x][start_y] == 0)\n\t{\n\t\tcout << \"-1\";\n\t\treturn 0;\n\t}\t\n\telse if (map[end_x][end_y] == 0)\n\t{\n\t\tcout << \"-1\";\n\t\treturn 0;\n\t}\n\telse \n\t\tdfs(start_x,start_y);\n\tif (!solution)\n\t\tcout << \"-1\";\n\treturn 0;\n}\nvoid dfs(int x,int y)\n{\n\tif (x<1 || y<1 || x>m || y> n)\n\t\treturn;\n\tif (visited[x][y] || !map[x][y])\n\t\treturn;\n\tif (x == end_x && y == end_y)\n\t{\n\t\tsolution = 1;\n\t\tfor (int i = 0; i < pointer; i++)\n\t\t\tif (output[i] % n)\n\t\t\t\tcout << \"(\" << output[i] / n + 1 << \",\" << output[i] % n << \")\" << \"->\";\n\t\t\telse\n\t\t\t\tcout << \"(\" << output[i] / n  << \",\" << n << \")\" << \"->\";\n\t\tcout << \"(\" << end_x << \",\" << end_y << \")\" << endl;\n\t\treturn;\n\t}\n\n\t//++++++++++\n\tvisited[x][y] = true;\n\toutput[pointer] = (x - 1) * n + y;\n\tpointer++;\t\n\t//++++++++++\n\n\tif (map[x][y - 1] && !visited[x][y-1])\n\t\tdfs(x, y - 1);\n\tif (map[x - 1][y] && !visited[x-1][y])\n\t\tdfs(x - 1, y);\n\tif (map[x][y + 1] && !visited[x][y+1])\n\t\tdfs(x, y + 1);\n\tif (map[x + 1][y] && !visited[x+1][y])\n\t\tdfs(x + 1, y);\n\n\t//----------\n\toutput[pointer] = 0;\n\tpointer--;\n\tvisited[x][y] = false;\n\t//----------\n\n\n}\n```\n\n---\n\n### 连通块问题（floodfill）\n\n注：我忘了在哪找的题了。。。\n\n#### 题目描述\n\n一个$n \\times m$的方格图，一些格子被涂成了黑色，在方格图中被标为$1$，白色格子标为$0$。问有多少个四连通的黑色格子连通块。四连通的黑色格子连通块指的是一片由黑色格子组成的区域，其中的每个黑色格子能通过四连通的走法（上下左右），只走黑色格子，到达该联通块中的其它黑色格子。\n\n#### 输入输出样例\n\n**输入 #1**\n\n```bash\n1 1\n*\n3 5\n*@*@*\n**@**\n*@*@*\n1 8\n@@****@*\n5 5\n****@\n*@@*@\n*@**@\n@@@*@\n@@**@\n0 0\n```\n\n**输出 #1**\n\n```bash\n0\n1\n2\n2\n```\n\n#### 答案解析\n\n```c\n#include<bits/stdc++.h>\nusing namespace std;\n#define maxn 100+5\nchar pic[maxn][maxn];//存图\nint m,n,idx[maxn][maxn];\nvoid dfs(int r,int c,int id)\n{\n    if(r<0||r>=m||c<0||c>=n)\n        return ;//出界的格子\n    if(idx[r][c]>0||pic[r][c]!='@')\n        return ;//不是'@'或已经被访问过\n    idx[r][c]=id;//将点记录下来\n    for(int dr=-1;dr<=1;dr++)\n        for(int dc=-1;dc<=1;dc++)\n            if(dr!=0||dc!=0)\n                dfs(r+dr,c+dc,id);//向四个方向搜索·\n}\nint main()\n{\n    while(scanf(\"%d%d\",&m,&n)==2 && m && n)\n    {\n        for(int i=0;i<m;i++)\n            scanf(\"%s\",pic[i]);\n        memset(idx,0,sizeof(idx));\n        int cnt=0;\n        for(int i=0;i<m;i++)\n            for(int j=0;j<n;j++)//每一次扫描所有为id的方格\n                if(idx[i][j]==0&&pic[i][j]=='@')\n                    dfs(i,j,++cnt);\n        printf(\"%d\\n\",cnt);\n    }\n    return 0;\n}\n```\n\n---\n\n$$\nEND\n$$\n\n","slug":"DFS","published":1,"updated":"2022-03-11T02:29:00.447Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrd4001o1gzu6rr0ehb1","content":"<h2 id=\"dfs基本概念\"><a class=\"markdownIt-Anchor\" href=\"#dfs基本概念\"></a> DFS基本概念</h2>\n<p><strong>深度优先搜索算法</strong>（Depth First Search）：一种用于遍历或搜索树或图的算法。 沿着树的深度遍历树的节点，尽可能深的搜索树的分支。 属于盲目搜索,最糟糕的情况算法时间复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>。</p>\n<hr>\n<h2 id=\"经典例题\"><a class=\"markdownIt-Anchor\" href=\"#经典例题\"></a> 经典例题</h2>\n<h3 id=\"p1706全排列问题\"><a class=\"markdownIt-Anchor\" href=\"#p1706全排列问题\"></a> P1706全排列问题</h3>\n<p>注：题目来源自<a href=\"https://www.luogu.com.cn/problem/P1706\">洛谷</a>。</p>\n<h4 id=\"题目描述\"><a class=\"markdownIt-Anchor\" href=\"#题目描述\"></a> 题目描述</h4>\n<p>输出自然数 1 到 n 所有不重复的排列，即 <em>n</em> 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。</p>\n<h4 id=\"输入格式\"><a class=\"markdownIt-Anchor\" href=\"#输入格式\"></a> 输入格式</h4>\n<p>一个整数 n。</p>\n<h4 id=\"输出格式\"><a class=\"markdownIt-Anchor\" href=\"#输出格式\"></a> 输出格式</h4>\n<p>由1∼<em>n</em> 组成的所有不重复的数字序列，每行一个序列。</p>\n<p>每个数字保留 5 个场宽。</p>\n<h4 id=\"输入输出样例\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例\"></a> 输入输出样例</h4>\n<p><strong>输入 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">3</span></code></pre>\n<p><strong>输出 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">1</span>    <span class=\"token number\">2</span>    <span class=\"token number\">3</span>\n<span class=\"token number\">1</span>    <span class=\"token number\">3</span>    <span class=\"token number\">2</span>\n<span class=\"token number\">2</span>    <span class=\"token number\">1</span>    <span class=\"token number\">3</span>\n<span class=\"token number\">2</span>    <span class=\"token number\">3</span>    <span class=\"token number\">1</span>\n<span class=\"token number\">3</span>    <span class=\"token number\">1</span>    <span class=\"token number\">2</span>\n<span class=\"token number\">3</span>    <span class=\"token number\">2</span>    <span class=\"token number\">1</span></code></pre>\n<h4 id=\"说明提示\"><a class=\"markdownIt-Anchor\" href=\"#说明提示\"></a> 说明/提示</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>9</mn></mrow><annotation encoding=\"application/x-tex\">1≤n≤9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">9</span></span></span></span></p>\n<h4 id=\"答案解析\"><a class=\"markdownIt-Anchor\" href=\"#答案解析\"></a> 答案解析</h4>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\nbool vis<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//标记数字是否出现</span>\n<span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//全排列数组</span>\n<span class=\"token keyword\">int</span> n<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">==</span> n<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n                <span class=\"token function\">printf</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"%5d\"</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>vis<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            vis<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n            a<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//递归</span>\n            vis<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//回溯</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    cin<span class=\"token operator\">>></span>n<span class=\"token punctuation\">;</span> \n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<h3 id=\"p1238-走迷宫\"><a class=\"markdownIt-Anchor\" href=\"#p1238-走迷宫\"></a> P1238 走迷宫</h3>\n<p>注：题目来源<a href=\"https://www.luogu.com.cn/problem/P1238\">洛谷</a>。</p>\n<h4 id=\"题目描述-2\"><a class=\"markdownIt-Anchor\" href=\"#题目描述-2\"></a> 题目描述</h4>\n<p>有一个 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">m\\times n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 格的迷宫(表示有 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 行、<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>列)，其中有可走的也有不可走的，如果用 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 表示可以走，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 表示不可以走，文件读入这 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">m\\times n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个数据和起始点、结束点（起始点和结束点都是用两个数据来描述的，分别表示这个点的行号和列号）。现在要你编程找出所有可行的道路，要求所走的路中没有重复的点，走时只能是上下左右四个方向。如果一条路都不可行，则输出相应信息（用 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span> 表示无路）。</p>\n<p>优先顺序：左上右下。<strong>数据保证随机生成。</strong></p>\n<h4 id=\"输入格式-2\"><a class=\"markdownIt-Anchor\" href=\"#输入格式-2\"></a> 输入格式</h4>\n<p>第一行是两个数 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mo separator=\"true\">,</mo><mi>n</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>&lt;</mo><mi>m</mi><mo separator=\"true\">,</mo><mi>n</mi><mo>&lt;</mo><mn>15</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">m,n(1&lt;m,n&lt;15)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mclose\">)</span></span></span></span>，接下来是 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>行 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 列由<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 和$ 0$ 组成的数据，最后两行是起始点和结束点。</p>\n<h4 id=\"输出格式-2\"><a class=\"markdownIt-Anchor\" href=\"#输出格式-2\"></a> 输出格式</h4>\n<p>所有可行的路径，描述一个点时用 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x,y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span> 的形式，除开始点外，其他的都要用 <code>-&gt;</code> 表示方向。</p>\n<p>如果没有一条可行的路则输出 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>。</p>\n<h4 id=\"输入输出样例-2\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例-2\"></a> 输入输出样例</h4>\n<p><strong>输入 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">5</span> <span class=\"token number\">6</span>\n<span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">5</span> <span class=\"token number\">6</span></code></pre>\n<p><strong>输出 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span></code></pre>\n<h4 id=\"说明提示-2\"><a class=\"markdownIt-Anchor\" href=\"#说明提示-2\"></a> 说明/提示</h4>\n<p>数据保证随机生成。事实上，如果 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>=</mo><mi>m</mi><mo>=</mo><mn>14</mn></mrow><annotation encoding=\"application/x-tex\">n=m=14</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span></span> 且每个位置都是 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>的话，有 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>69450664761521361664274701548907358996488</mn></mrow><annotation encoding=\"application/x-tex\">69450664761521361664274701548907358996488</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">9</span><span class=\"mord\">4</span><span class=\"mord\">5</span><span class=\"mord\">0</span><span class=\"mord\">6</span><span class=\"mord\">6</span><span class=\"mord\">4</span><span class=\"mord\">7</span><span class=\"mord\">6</span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mord\">2</span><span class=\"mord\">1</span><span class=\"mord\">3</span><span class=\"mord\">6</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">6</span><span class=\"mord\">4</span><span class=\"mord\">2</span><span class=\"mord\">7</span><span class=\"mord\">4</span><span class=\"mord\">7</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mord\">4</span><span class=\"mord\">8</span><span class=\"mord\">9</span><span class=\"mord\">0</span><span class=\"mord\">7</span><span class=\"mord\">3</span><span class=\"mord\">5</span><span class=\"mord\">8</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mord\">6</span><span class=\"mord\">4</span><span class=\"mord\">8</span><span class=\"mord\">8</span></span></span></span> 种路径。</p>\n<h4 id=\"答案解析-2\"><a class=\"markdownIt-Anchor\" href=\"#答案解析-2\"></a> 答案解析</h4>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;cstdio></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> N <span class=\"token operator\">=</span> <span class=\"token number\">1001</span><span class=\"token punctuation\">;</span>\nbool map<span class=\"token punctuation\">[</span>N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nbool visited<span class=\"token punctuation\">[</span>N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> output<span class=\"token punctuation\">[</span>N <span class=\"token operator\">*</span> N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//stack</span>\n<span class=\"token keyword\">int</span> pointer<span class=\"token punctuation\">;</span>\nbool solution<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//for example, m=5,n=6</span>\n<span class=\"token comment\">//(2,3)==>(2-1)*n+3=9</span>\n<span class=\"token comment\">//(5,6)==>(5-1)*n+6=30</span>\n<span class=\"token comment\">//therefore, (x,y)==>(x-1)*n+y</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> m<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">,</span> start_x<span class=\"token punctuation\">,</span> start_y<span class=\"token punctuation\">,</span> end_x<span class=\"token punctuation\">,</span> end_y<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\tcin <span class=\"token operator\">>></span> m <span class=\"token operator\">>></span> n<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> m<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\tcin <span class=\"token operator\">>></span> map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\tcin <span class=\"token operator\">>></span> start_x <span class=\"token operator\">>></span> start_y<span class=\"token punctuation\">;</span>\n\tcin <span class=\"token operator\">>></span> end_x <span class=\"token operator\">>></span> end_y<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>start_x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>start_y<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"-1\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\t\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>end_x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>end_y<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"-1\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">else</span> \n\t\t<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>start_x<span class=\"token punctuation\">,</span>start_y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>solution<span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"-1\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">&lt;</span><span class=\"token number\">1</span> <span class=\"token operator\">||</span> y<span class=\"token operator\">&lt;</span><span class=\"token number\">1</span> <span class=\"token operator\">||</span> x<span class=\"token operator\">></span>m <span class=\"token operator\">||</span> y<span class=\"token operator\">></span> n<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>visited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>map<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">==</span> end_x <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">==</span> end_y<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tsolution <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> pointer<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>output<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">%</span> n<span class=\"token punctuation\">)</span>\n\t\t\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"(\"</span> <span class=\"token operator\">&lt;&lt;</span> output<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">&lt;&lt;</span> output<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">%</span> n <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\")\"</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"->\"</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">else</span>\n\t\t\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"(\"</span> <span class=\"token operator\">&lt;&lt;</span> output<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> n  <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">&lt;&lt;</span> n <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\")\"</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"->\"</span><span class=\"token punctuation\">;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"(\"</span> <span class=\"token operator\">&lt;&lt;</span> end_x <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">&lt;&lt;</span> end_y <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\")\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token comment\">//++++++++++</span>\n\tvisited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n\toutput<span class=\"token punctuation\">[</span>pointer<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> n <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span>\n\tpointer<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\t\n\t<span class=\"token comment\">//++++++++++</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>visited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>x <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>visited<span class=\"token punctuation\">[</span>x<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>visited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>visited<span class=\"token punctuation\">[</span>x<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//----------</span>\n\toutput<span class=\"token punctuation\">[</span>pointer<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\tpointer<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n\tvisited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//----------</span>\n\n\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<h3 id=\"连通块问题floodfill\"><a class=\"markdownIt-Anchor\" href=\"#连通块问题floodfill\"></a> 连通块问题（floodfill）</h3>\n<p>注：我忘了在哪找的题了。。。</p>\n<h4 id=\"题目描述-3\"><a class=\"markdownIt-Anchor\" href=\"#题目描述-3\"></a> 题目描述</h4>\n<p>一个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>×</mo><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">n \\times m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>的方格图，一些格子被涂成了黑色，在方格图中被标为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>，白色格子标为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>。问有多少个四连通的黑色格子连通块。四连通的黑色格子连通块指的是一片由黑色格子组成的区域，其中的每个黑色格子能通过四连通的走法（上下左右），只走黑色格子，到达该联通块中的其它黑色格子。</p>\n<h4 id=\"输入输出样例-3\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例-3\"></a> 输入输出样例</h4>\n<p><strong>输入 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">1</span> <span class=\"token number\">1</span>\n*\n<span class=\"token number\">3</span> <span class=\"token number\">5</span>\n*@*@*\n**@**\n*@*@*\n<span class=\"token number\">1</span> <span class=\"token number\">8</span>\n@@****@*\n<span class=\"token number\">5</span> <span class=\"token number\">5</span>\n****@\n*@@*@\n*@**@\n@@@*@\n@@**@\n<span class=\"token number\">0</span> <span class=\"token number\">0</span></code></pre>\n<p><strong>输出 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">0</span>\n<span class=\"token number\">1</span>\n<span class=\"token number\">2</span>\n<span class=\"token number\">2</span></code></pre>\n<h4 id=\"答案解析-3\"><a class=\"markdownIt-Anchor\" href=\"#答案解析-3\"></a> 答案解析</h4>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;bits/stdc++.h></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">maxn</span> <span class=\"token expression\"><span class=\"token number\">100</span><span class=\"token operator\">+</span><span class=\"token number\">5</span></span></span>\n<span class=\"token keyword\">char</span> pic<span class=\"token punctuation\">[</span>maxn<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>maxn<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//存图</span>\n<span class=\"token keyword\">int</span> m<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">,</span>idx<span class=\"token punctuation\">[</span>maxn<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>maxn<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> r<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> c<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span><span class=\"token operator\">||</span>r<span class=\"token operator\">>=</span>m<span class=\"token operator\">||</span>c<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span><span class=\"token operator\">||</span>c<span class=\"token operator\">>=</span>n<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">;</span><span class=\"token comment\">//出界的格子</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>idx<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token number\">0</span><span class=\"token operator\">||</span>pic<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span><span class=\"token char\">'@'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">;</span><span class=\"token comment\">//不是'@'或已经被访问过</span>\n    idx<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>id<span class=\"token punctuation\">;</span><span class=\"token comment\">//将点记录下来</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> dr<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>dr<span class=\"token operator\">&lt;=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>dr<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> dc<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>dc<span class=\"token operator\">&lt;=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>dc<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>dr<span class=\"token operator\">!=</span><span class=\"token number\">0</span><span class=\"token operator\">||</span>dc<span class=\"token operator\">!=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">+</span>dr<span class=\"token punctuation\">,</span>c<span class=\"token operator\">+</span>dc<span class=\"token punctuation\">,</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//向四个方向搜索·</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d%d\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>m<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>n<span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> m <span class=\"token operator\">&amp;&amp;</span> n<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s\"</span><span class=\"token punctuation\">,</span>pic<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>idx<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>idx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> cnt<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//每一次扫描所有为id的方格</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>idx<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token operator\">&amp;&amp;</span>pic<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token char\">'@'</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span>j<span class=\"token punctuation\">,</span><span class=\"token operator\">++</span>cnt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d\\n\"</span><span class=\"token punctuation\">,</span>cnt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>E</mi><mi>N</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">END\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"dfs基本概念\"><a class=\"markdownIt-Anchor\" href=\"#dfs基本概念\"></a> DFS基本概念</h2>\n<p><strong>深度优先搜索算法</strong>（Depth First Search）：一种用于遍历或搜索树或图的算法。 沿着树的深度遍历树的节点，尽可能深的搜索树的分支。 属于盲目搜索,最糟糕的情况算法时间复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>。</p>\n<hr>\n<h2 id=\"经典例题\"><a class=\"markdownIt-Anchor\" href=\"#经典例题\"></a> 经典例题</h2>\n<h3 id=\"p1706全排列问题\"><a class=\"markdownIt-Anchor\" href=\"#p1706全排列问题\"></a> P1706全排列问题</h3>\n<p>注：题目来源自<a href=\"https://www.luogu.com.cn/problem/P1706\">洛谷</a>。</p>\n<h4 id=\"题目描述\"><a class=\"markdownIt-Anchor\" href=\"#题目描述\"></a> 题目描述</h4>\n<p>输出自然数 1 到 n 所有不重复的排列，即 <em>n</em> 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。</p>\n<h4 id=\"输入格式\"><a class=\"markdownIt-Anchor\" href=\"#输入格式\"></a> 输入格式</h4>\n<p>一个整数 n。</p>\n<h4 id=\"输出格式\"><a class=\"markdownIt-Anchor\" href=\"#输出格式\"></a> 输出格式</h4>\n<p>由1∼<em>n</em> 组成的所有不重复的数字序列，每行一个序列。</p>\n<p>每个数字保留 5 个场宽。</p>\n<h4 id=\"输入输出样例\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例\"></a> 输入输出样例</h4>\n<p><strong>输入 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">3</span></code></pre>\n<p><strong>输出 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">1</span>    <span class=\"token number\">2</span>    <span class=\"token number\">3</span>\n<span class=\"token number\">1</span>    <span class=\"token number\">3</span>    <span class=\"token number\">2</span>\n<span class=\"token number\">2</span>    <span class=\"token number\">1</span>    <span class=\"token number\">3</span>\n<span class=\"token number\">2</span>    <span class=\"token number\">3</span>    <span class=\"token number\">1</span>\n<span class=\"token number\">3</span>    <span class=\"token number\">1</span>    <span class=\"token number\">2</span>\n<span class=\"token number\">3</span>    <span class=\"token number\">2</span>    <span class=\"token number\">1</span></code></pre>\n<h4 id=\"说明提示\"><a class=\"markdownIt-Anchor\" href=\"#说明提示\"></a> 说明/提示</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>9</mn></mrow><annotation encoding=\"application/x-tex\">1≤n≤9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">9</span></span></span></span></p>\n<h4 id=\"答案解析\"><a class=\"markdownIt-Anchor\" href=\"#答案解析\"></a> 答案解析</h4>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\nbool vis<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//标记数字是否出现</span>\n<span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//全排列数组</span>\n<span class=\"token keyword\">int</span> n<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">==</span> n<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n                <span class=\"token function\">printf</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"%5d\"</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>vis<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            vis<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n            a<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n            <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//递归</span>\n            vis<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//回溯</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    cin<span class=\"token operator\">>></span>n<span class=\"token punctuation\">;</span> \n    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<h3 id=\"p1238-走迷宫\"><a class=\"markdownIt-Anchor\" href=\"#p1238-走迷宫\"></a> P1238 走迷宫</h3>\n<p>注：题目来源<a href=\"https://www.luogu.com.cn/problem/P1238\">洛谷</a>。</p>\n<h4 id=\"题目描述-2\"><a class=\"markdownIt-Anchor\" href=\"#题目描述-2\"></a> 题目描述</h4>\n<p>有一个 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">m\\times n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 格的迷宫(表示有 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span> 行、<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span>列)，其中有可走的也有不可走的，如果用 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 表示可以走，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> 表示不可以走，文件读入这 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">m\\times n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 个数据和起始点、结束点（起始点和结束点都是用两个数据来描述的，分别表示这个点的行号和列号）。现在要你编程找出所有可行的道路，要求所走的路中没有重复的点，走时只能是上下左右四个方向。如果一条路都不可行，则输出相应信息（用 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span> 表示无路）。</p>\n<p>优先顺序：左上右下。<strong>数据保证随机生成。</strong></p>\n<h4 id=\"输入格式-2\"><a class=\"markdownIt-Anchor\" href=\"#输入格式-2\"></a> 输入格式</h4>\n<p>第一行是两个数 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mo separator=\"true\">,</mo><mi>n</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>&lt;</mo><mi>m</mi><mo separator=\"true\">,</mo><mi>n</mi><mo>&lt;</mo><mn>15</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">m,n(1&lt;m,n&lt;15)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mclose\">)</span></span></span></span>，接下来是 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>行 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span></span></span></span> 列由<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> 和$ 0$ 组成的数据，最后两行是起始点和结束点。</p>\n<h4 id=\"输出格式-2\"><a class=\"markdownIt-Anchor\" href=\"#输出格式-2\"></a> 输出格式</h4>\n<p>所有可行的路径，描述一个点时用 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x,y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span> 的形式，除开始点外，其他的都要用 <code>-&gt;</code> 表示方向。</p>\n<p>如果没有一条可行的路则输出 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>。</p>\n<h4 id=\"输入输出样例-2\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例-2\"></a> 输入输出样例</h4>\n<p><strong>输入 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">5</span> <span class=\"token number\">6</span>\n<span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token number\">5</span> <span class=\"token number\">6</span></code></pre>\n<p><strong>输出 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,1</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,2</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">2,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">3,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,3</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,4</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">4,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,5</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">5,6</span><span class=\"token punctuation\">)</span></code></pre>\n<h4 id=\"说明提示-2\"><a class=\"markdownIt-Anchor\" href=\"#说明提示-2\"></a> 说明/提示</h4>\n<p>数据保证随机生成。事实上，如果 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>=</mo><mi>m</mi><mo>=</mo><mn>14</mn></mrow><annotation encoding=\"application/x-tex\">n=m=14</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span></span> 且每个位置都是 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>的话，有 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>69450664761521361664274701548907358996488</mn></mrow><annotation encoding=\"application/x-tex\">69450664761521361664274701548907358996488</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">9</span><span class=\"mord\">4</span><span class=\"mord\">5</span><span class=\"mord\">0</span><span class=\"mord\">6</span><span class=\"mord\">6</span><span class=\"mord\">4</span><span class=\"mord\">7</span><span class=\"mord\">6</span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mord\">2</span><span class=\"mord\">1</span><span class=\"mord\">3</span><span class=\"mord\">6</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">6</span><span class=\"mord\">4</span><span class=\"mord\">2</span><span class=\"mord\">7</span><span class=\"mord\">4</span><span class=\"mord\">7</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mord\">4</span><span class=\"mord\">8</span><span class=\"mord\">9</span><span class=\"mord\">0</span><span class=\"mord\">7</span><span class=\"mord\">3</span><span class=\"mord\">5</span><span class=\"mord\">8</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mord\">6</span><span class=\"mord\">4</span><span class=\"mord\">8</span><span class=\"mord\">8</span></span></span></span> 种路径。</p>\n<h4 id=\"答案解析-2\"><a class=\"markdownIt-Anchor\" href=\"#答案解析-2\"></a> 答案解析</h4>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;cstdio></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> N <span class=\"token operator\">=</span> <span class=\"token number\">1001</span><span class=\"token punctuation\">;</span>\nbool map<span class=\"token punctuation\">[</span>N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nbool visited<span class=\"token punctuation\">[</span>N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> output<span class=\"token punctuation\">[</span>N <span class=\"token operator\">*</span> N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//stack</span>\n<span class=\"token keyword\">int</span> pointer<span class=\"token punctuation\">;</span>\nbool solution<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//for example, m=5,n=6</span>\n<span class=\"token comment\">//(2,3)==>(2-1)*n+3=9</span>\n<span class=\"token comment\">//(5,6)==>(5-1)*n+6=30</span>\n<span class=\"token comment\">//therefore, (x,y)==>(x-1)*n+y</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> m<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">,</span> start_x<span class=\"token punctuation\">,</span> start_y<span class=\"token punctuation\">,</span> end_x<span class=\"token punctuation\">,</span> end_y<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\tcin <span class=\"token operator\">>></span> m <span class=\"token operator\">>></span> n<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> m<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\tcin <span class=\"token operator\">>></span> map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\tcin <span class=\"token operator\">>></span> start_x <span class=\"token operator\">>></span> start_y<span class=\"token punctuation\">;</span>\n\tcin <span class=\"token operator\">>></span> end_x <span class=\"token operator\">>></span> end_y<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>start_x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>start_y<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"-1\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\t\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>end_x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>end_y<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"-1\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">else</span> \n\t\t<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>start_x<span class=\"token punctuation\">,</span>start_y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>solution<span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"-1\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">&lt;</span><span class=\"token number\">1</span> <span class=\"token operator\">||</span> y<span class=\"token operator\">&lt;</span><span class=\"token number\">1</span> <span class=\"token operator\">||</span> x<span class=\"token operator\">></span>m <span class=\"token operator\">||</span> y<span class=\"token operator\">></span> n<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>visited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>map<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">==</span> end_x <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">==</span> end_y<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tsolution <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> pointer<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>output<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">%</span> n<span class=\"token punctuation\">)</span>\n\t\t\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"(\"</span> <span class=\"token operator\">&lt;&lt;</span> output<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">&lt;&lt;</span> output<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">%</span> n <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\")\"</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"->\"</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">else</span>\n\t\t\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"(\"</span> <span class=\"token operator\">&lt;&lt;</span> output<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> n  <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">&lt;&lt;</span> n <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\")\"</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"->\"</span><span class=\"token punctuation\">;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"(\"</span> <span class=\"token operator\">&lt;&lt;</span> end_x <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">&lt;&lt;</span> end_y <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\")\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token comment\">//++++++++++</span>\n\tvisited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n\toutput<span class=\"token punctuation\">[</span>pointer<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> n <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span>\n\tpointer<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\t\n\t<span class=\"token comment\">//++++++++++</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>visited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>x <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>visited<span class=\"token punctuation\">[</span>x<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>visited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>visited<span class=\"token punctuation\">[</span>x<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//----------</span>\n\toutput<span class=\"token punctuation\">[</span>pointer<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\tpointer<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n\tvisited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>y<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//----------</span>\n\n\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<h3 id=\"连通块问题floodfill\"><a class=\"markdownIt-Anchor\" href=\"#连通块问题floodfill\"></a> 连通块问题（floodfill）</h3>\n<p>注：我忘了在哪找的题了。。。</p>\n<h4 id=\"题目描述-3\"><a class=\"markdownIt-Anchor\" href=\"#题目描述-3\"></a> 题目描述</h4>\n<p>一个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi><mo>×</mo><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">n \\times m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span></span></span></span>的方格图，一些格子被涂成了黑色，在方格图中被标为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>，白色格子标为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>。问有多少个四连通的黑色格子连通块。四连通的黑色格子连通块指的是一片由黑色格子组成的区域，其中的每个黑色格子能通过四连通的走法（上下左右），只走黑色格子，到达该联通块中的其它黑色格子。</p>\n<h4 id=\"输入输出样例-3\"><a class=\"markdownIt-Anchor\" href=\"#输入输出样例-3\"></a> 输入输出样例</h4>\n<p><strong>输入 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">1</span> <span class=\"token number\">1</span>\n*\n<span class=\"token number\">3</span> <span class=\"token number\">5</span>\n*@*@*\n**@**\n*@*@*\n<span class=\"token number\">1</span> <span class=\"token number\">8</span>\n@@****@*\n<span class=\"token number\">5</span> <span class=\"token number\">5</span>\n****@\n*@@*@\n*@**@\n@@@*@\n@@**@\n<span class=\"token number\">0</span> <span class=\"token number\">0</span></code></pre>\n<p><strong>输出 #1</strong></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">0</span>\n<span class=\"token number\">1</span>\n<span class=\"token number\">2</span>\n<span class=\"token number\">2</span></code></pre>\n<h4 id=\"答案解析-3\"><a class=\"markdownIt-Anchor\" href=\"#答案解析-3\"></a> 答案解析</h4>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;bits/stdc++.h></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">maxn</span> <span class=\"token expression\"><span class=\"token number\">100</span><span class=\"token operator\">+</span><span class=\"token number\">5</span></span></span>\n<span class=\"token keyword\">char</span> pic<span class=\"token punctuation\">[</span>maxn<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>maxn<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//存图</span>\n<span class=\"token keyword\">int</span> m<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">,</span>idx<span class=\"token punctuation\">[</span>maxn<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>maxn<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> r<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> c<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span><span class=\"token operator\">||</span>r<span class=\"token operator\">>=</span>m<span class=\"token operator\">||</span>c<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span><span class=\"token operator\">||</span>c<span class=\"token operator\">>=</span>n<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">;</span><span class=\"token comment\">//出界的格子</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>idx<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token number\">0</span><span class=\"token operator\">||</span>pic<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span><span class=\"token char\">'@'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">;</span><span class=\"token comment\">//不是'@'或已经被访问过</span>\n    idx<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>id<span class=\"token punctuation\">;</span><span class=\"token comment\">//将点记录下来</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> dr<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>dr<span class=\"token operator\">&lt;=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>dr<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> dc<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>dc<span class=\"token operator\">&lt;=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>dc<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>dr<span class=\"token operator\">!=</span><span class=\"token number\">0</span><span class=\"token operator\">||</span>dc<span class=\"token operator\">!=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">+</span>dr<span class=\"token punctuation\">,</span>c<span class=\"token operator\">+</span>dc<span class=\"token punctuation\">,</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//向四个方向搜索·</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d%d\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>m<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>n<span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> m <span class=\"token operator\">&amp;&amp;</span> n<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">scanf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s\"</span><span class=\"token punctuation\">,</span>pic<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>idx<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>idx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> cnt<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>m<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//每一次扫描所有为id的方格</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>idx<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token operator\">&amp;&amp;</span>pic<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token char\">'@'</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span>j<span class=\"token punctuation\">,</span><span class=\"token operator\">++</span>cnt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d\\n\"</span><span class=\"token punctuation\">,</span>cnt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>E</mi><mi>N</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">END\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span></p>\n"},{"title":"图的基础知识","date":"2022-03-09T04:51:45.000Z","author":"Tony","katex":true,"_content":"\n## 基础知识\n\n### 图的定义和分类\n\n- **图的定义** 是一个顶点集合V和一个顶点间关系的集合E组成，记G=(V,E) V：顶点的有限非空集合。 E：顶点间关系的有限集合（边集）。\n\n- **无向图** (graph)在G=(V,E)中，如果对于任意的结点a,b∈V，当(a,b)∈E时，必有(b,a)∈E（即关系R对称），如图二。\n  $$\n  V={1,2,3,4,5}\\\\ \n  E={(1,2),(1,3),(1,4),(2,3),(2,5),(3,5),(4,5)}\n  $$\n  \n- **有向图** (digraph)在G=(V,E)中，如果对于任意的结点a,b∈V，当(a,b)∈E时，(b,a)∈E未必成立，如图三。 \n  $$\n  V={1,2,3,4,5}\\\\\n  E={<1,2>,<1,4>,<2,3>,<2,5>,<3,1>,<5,3>,<5,4>}\n  $$\n\n![img](Graph-search/image-1.png)\n\n- **带权图** 一般的图边上没有数字，边仅表示两个顶点间相连接关系 ，如图四。\n- **连通图**图中任意两个顶点都是连通的，称为连通图；否则为非连通图，如图五。\n\n![img](Graph-search/image-2.png)\n\n### 邻接矩阵和邻接表\n\n- **邻接矩阵**\n\n邻接矩阵的优势是方便定义，只需要一个二维矩阵就可以解决；缺点也显而易见，浪费空间。\n\n![img](Graph-search/v2-9e2643ca5d96f86a391c36de4d3bd48d_720w.jpg)\n\n- **邻接表**\n\n邻接表的优势自然就是尽可能的节省更多的空间，但是与之相对应的就是定义起来很麻烦，需要用链表或者vector来实现。\n\n![img](Graph-search/v2-4a4d37df348f283649e2aecc74d959b5_720w.jpg)\n\n*(图是网上抄的，看水印，如有侵权，请联系我)\n\n## 图的遍历(DFS&&BFS)\n\n------\n\n好了，上面我们学习了图的概念以及如何存图，接下来就是重头戏了。\n\n接下来便是如何实现图的搜索，首先我们来看这样一个有向图， 我们不妨设从1号顶点起始。\n\n![img](Graph-search/image-3.png)\n\n在搜索过程中，我们维护一个布尔数组bool visited[N+1]，这个数组用来表示每个顶点是不是已经遍历过了。\n\n接下来，从1号开始进行DFS，遍历过的节点就在`visited[]`中标注。visited[i] == true表示顶点i已经遍历过了，visited[i] == false表示i还没有遍历过。DFS的具体方法可以用递归实现，直到所有节点都被遍历过结束。如果采用邻接矩阵，伪代码如下：\n\n```python\nVisited[]={0}\nDFS(x):\n\tVisited[x]=true\n\tfor(i=1;i<=N;i++):\n\t\tif(!Visited[i] && map[x][i]):\n\t\t\tDFS(i)\n```\n\n## 代码实现\n\n------\n\n### DFS递归实现\n\n```c++\n#include <iostream>\n#define N 5\nusing namespace std;\nint maze[N][N] = {\n    { 0, 1, 1, 0, 0 },\n    { 0, 0, 1, 0, 1 },\n    { 0, 0, 1, 0, 0 },\n    { 1, 1, 0, 0, 1 },\n    { 0, 0, 1, 0, 0 }\n};\nbool visited[N + 1];\nvoid DFS(int start)\n{\n    visited[start] = true;\n    for (int i = 1; i <= N; i++)\n        if (!visited[i] && maze[start - 1][i - 1] == 1)\n            DFS(i);\n    cout << start << \" \";\n}\nint main()\n{\n    for (int i = 1; i <= N; i++)\n    {\n        if (visited[i])\n            continue;\n        DFS(i);\n    }\n    return 0;\n}\n```\n\n### DFS非递归实现\n\n```c++\n#include <iostream>\n#include <stack>\n#define N 5\nusing namespace std;\nint maze[N][N] = {\n    { 0, 1, 1, 0, 0 },\n    { 0, 0, 1, 0, 1 },\n    { 0, 0, 1, 0, 0 },\n    { 1, 1, 0, 0, 1 },\n    { 0, 0, 1, 0, 0 }\n};\nbool visited[N + 1];\nvoid DFS(int start)\n{\n    stack<int> s;\n    s.push(start);\n    visited[start] = true;\n    bool is_push = false;\n    while (!s.empty())\n    {\n        is_push = false;\n        int v = s.top();\n        for (int i = 1; i <= N; i++)\n        {\n            if (maze[v - 1][i - 1] == 1 && !visited[i])\n            {\n                visited[i] = true;\n                s.push(i);\n                is_push = true;\n                break;\n            }\n        }\n        if (!is_push)\n        {\n            cout << v << \" \";\n            s.pop();\n        }\n    }\n}\nint main()\n{\n    for (int i = 1; i <= N; i++)\n    {\n        if (visited[i])\n            continue;\n        DFS(i);\n    }\n    return 0;\n}\n```\n\n### BFS实现\n\n```c++\n#include <iostream>\n#include <queue>\n#define N 5\nusing namespace std;\nint maze[N][N] = {\n    { 0, 1, 1, 0, 0 },\n    { 0, 0, 1, 1, 0 },\n    { 0, 1, 1, 1, 0 },\n    { 1, 0, 0, 0, 0 },\n    { 0, 0, 1, 1, 0 }\n};\nbool visited[N + 1];\nvoid BFS(int start)\n{\n    queue<int> Q;\n    Q.push(start);\n    visited[start] = true;\n    while (!Q.empty())\n    {\n        int front = Q.front();\n        cout << front << \" \";\n        Q.pop();\n        for (int i = 1; i <= N; i++)\n            if (!visited[i] && maze[front - 1][i - 1] == 1)\n            {\n                visited[i] = true;\n                Q.push(i);\n            }\n    }\n}\nint main()\n{\n    for (int i = 1; i <= N; i++)\n    {\n        if (visited[i])\n            continue;\n        BFS(i);\n    }\n    return 0;\n}\n```\n","source":"_posts/Graph-search.md","raw":"---\ntitle: 图的基础知识\ndate: 2022-03-09 12:51:45\nauthor: Tony\nkatex: true\ncategories:\n  - algorithm\ntags:\n  - algorithm\n  - Graph\n  - DFS\n  - BFS\n\n---\n\n## 基础知识\n\n### 图的定义和分类\n\n- **图的定义** 是一个顶点集合V和一个顶点间关系的集合E组成，记G=(V,E) V：顶点的有限非空集合。 E：顶点间关系的有限集合（边集）。\n\n- **无向图** (graph)在G=(V,E)中，如果对于任意的结点a,b∈V，当(a,b)∈E时，必有(b,a)∈E（即关系R对称），如图二。\n  $$\n  V={1,2,3,4,5}\\\\ \n  E={(1,2),(1,3),(1,4),(2,3),(2,5),(3,5),(4,5)}\n  $$\n  \n- **有向图** (digraph)在G=(V,E)中，如果对于任意的结点a,b∈V，当(a,b)∈E时，(b,a)∈E未必成立，如图三。 \n  $$\n  V={1,2,3,4,5}\\\\\n  E={<1,2>,<1,4>,<2,3>,<2,5>,<3,1>,<5,3>,<5,4>}\n  $$\n\n![img](Graph-search/image-1.png)\n\n- **带权图** 一般的图边上没有数字，边仅表示两个顶点间相连接关系 ，如图四。\n- **连通图**图中任意两个顶点都是连通的，称为连通图；否则为非连通图，如图五。\n\n![img](Graph-search/image-2.png)\n\n### 邻接矩阵和邻接表\n\n- **邻接矩阵**\n\n邻接矩阵的优势是方便定义，只需要一个二维矩阵就可以解决；缺点也显而易见，浪费空间。\n\n![img](Graph-search/v2-9e2643ca5d96f86a391c36de4d3bd48d_720w.jpg)\n\n- **邻接表**\n\n邻接表的优势自然就是尽可能的节省更多的空间，但是与之相对应的就是定义起来很麻烦，需要用链表或者vector来实现。\n\n![img](Graph-search/v2-4a4d37df348f283649e2aecc74d959b5_720w.jpg)\n\n*(图是网上抄的，看水印，如有侵权，请联系我)\n\n## 图的遍历(DFS&&BFS)\n\n------\n\n好了，上面我们学习了图的概念以及如何存图，接下来就是重头戏了。\n\n接下来便是如何实现图的搜索，首先我们来看这样一个有向图， 我们不妨设从1号顶点起始。\n\n![img](Graph-search/image-3.png)\n\n在搜索过程中，我们维护一个布尔数组bool visited[N+1]，这个数组用来表示每个顶点是不是已经遍历过了。\n\n接下来，从1号开始进行DFS，遍历过的节点就在`visited[]`中标注。visited[i] == true表示顶点i已经遍历过了，visited[i] == false表示i还没有遍历过。DFS的具体方法可以用递归实现，直到所有节点都被遍历过结束。如果采用邻接矩阵，伪代码如下：\n\n```python\nVisited[]={0}\nDFS(x):\n\tVisited[x]=true\n\tfor(i=1;i<=N;i++):\n\t\tif(!Visited[i] && map[x][i]):\n\t\t\tDFS(i)\n```\n\n## 代码实现\n\n------\n\n### DFS递归实现\n\n```c++\n#include <iostream>\n#define N 5\nusing namespace std;\nint maze[N][N] = {\n    { 0, 1, 1, 0, 0 },\n    { 0, 0, 1, 0, 1 },\n    { 0, 0, 1, 0, 0 },\n    { 1, 1, 0, 0, 1 },\n    { 0, 0, 1, 0, 0 }\n};\nbool visited[N + 1];\nvoid DFS(int start)\n{\n    visited[start] = true;\n    for (int i = 1; i <= N; i++)\n        if (!visited[i] && maze[start - 1][i - 1] == 1)\n            DFS(i);\n    cout << start << \" \";\n}\nint main()\n{\n    for (int i = 1; i <= N; i++)\n    {\n        if (visited[i])\n            continue;\n        DFS(i);\n    }\n    return 0;\n}\n```\n\n### DFS非递归实现\n\n```c++\n#include <iostream>\n#include <stack>\n#define N 5\nusing namespace std;\nint maze[N][N] = {\n    { 0, 1, 1, 0, 0 },\n    { 0, 0, 1, 0, 1 },\n    { 0, 0, 1, 0, 0 },\n    { 1, 1, 0, 0, 1 },\n    { 0, 0, 1, 0, 0 }\n};\nbool visited[N + 1];\nvoid DFS(int start)\n{\n    stack<int> s;\n    s.push(start);\n    visited[start] = true;\n    bool is_push = false;\n    while (!s.empty())\n    {\n        is_push = false;\n        int v = s.top();\n        for (int i = 1; i <= N; i++)\n        {\n            if (maze[v - 1][i - 1] == 1 && !visited[i])\n            {\n                visited[i] = true;\n                s.push(i);\n                is_push = true;\n                break;\n            }\n        }\n        if (!is_push)\n        {\n            cout << v << \" \";\n            s.pop();\n        }\n    }\n}\nint main()\n{\n    for (int i = 1; i <= N; i++)\n    {\n        if (visited[i])\n            continue;\n        DFS(i);\n    }\n    return 0;\n}\n```\n\n### BFS实现\n\n```c++\n#include <iostream>\n#include <queue>\n#define N 5\nusing namespace std;\nint maze[N][N] = {\n    { 0, 1, 1, 0, 0 },\n    { 0, 0, 1, 1, 0 },\n    { 0, 1, 1, 1, 0 },\n    { 1, 0, 0, 0, 0 },\n    { 0, 0, 1, 1, 0 }\n};\nbool visited[N + 1];\nvoid BFS(int start)\n{\n    queue<int> Q;\n    Q.push(start);\n    visited[start] = true;\n    while (!Q.empty())\n    {\n        int front = Q.front();\n        cout << front << \" \";\n        Q.pop();\n        for (int i = 1; i <= N; i++)\n            if (!visited[i] && maze[front - 1][i - 1] == 1)\n            {\n                visited[i] = true;\n                Q.push(i);\n            }\n    }\n}\nint main()\n{\n    for (int i = 1; i <= N; i++)\n    {\n        if (visited[i])\n            continue;\n        BFS(i);\n    }\n    return 0;\n}\n```\n","slug":"Graph-search","published":1,"updated":"2022-03-09T05:05:47.670Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrd5001r1gzucc64d1fx","content":"<h2 id=\"基础知识\"><a class=\"markdownIt-Anchor\" href=\"#基础知识\"></a> 基础知识</h2>\n<h3 id=\"图的定义和分类\"><a class=\"markdownIt-Anchor\" href=\"#图的定义和分类\"></a> 图的定义和分类</h3>\n<ul>\n<li>\n<p><strong>图的定义</strong> 是一个顶点集合V和一个顶点间关系的集合E组成，记G=(V,E) V：顶点的有限非空集合。 E：顶点间关系的有限集合（边集）。</p>\n</li>\n<li>\n<p><strong>无向图</strong> (graph)在G=(V,E)中，如果对于任意的结点a,b∈V，当(a,b)∈E时，必有(b,a)∈E（即关系R对称），如图二。</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>V</mi><mo>=</mo><mrow><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>5</mn></mrow><mspace linebreak=\"newline\"></mspace><mi>E</mi><mo>=</mo><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>3</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>4</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>5</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>5</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>5</mn><mo stretchy=\"false\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">V={1,2,3,4,5}\\\\ \nE={(1,2),(1,3),(1,4),(2,3),(2,5),(3,5),(4,5)}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mclose\">)</span></span></span></span></span></span></p>\n</li>\n<li>\n<p><strong>有向图</strong> (digraph)在G=(V,E)中，如果对于任意的结点a,b∈V，当(a,b)∈E时，(b,a)∈E未必成立，如图三。</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>V</mi><mo>=</mo><mrow><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>5</mn></mrow><mspace linebreak=\"newline\"></mspace><mi>E</mi><mo>=</mo><mrow><mo>&lt;</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>4</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>5</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>1</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>5</mn><mo separator=\"true\">,</mo><mn>3</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>5</mn><mo separator=\"true\">,</mo><mn>4</mn><mo>&gt;</mo></mrow></mrow><annotation encoding=\"application/x-tex\">V={1,2,3,4,5}\\\\\nE={&lt;1,2&gt;,&lt;1,4&gt;,&lt;2,3&gt;,&lt;2,5&gt;,&lt;3,1&gt;,&lt;5,3&gt;,&lt;5,4&gt;}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">5</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">5</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span></span></span></span></span></span></p>\n</li>\n</ul>\n<p><img src=\"/2022/03/09/Graph-search/image-1.png\" alt=\"img\" loading=\"lazy\"></p>\n<ul>\n<li><strong>带权图</strong> 一般的图边上没有数字，边仅表示两个顶点间相连接关系 ，如图四。</li>\n<li><strong>连通图</strong>图中任意两个顶点都是连通的，称为连通图；否则为非连通图，如图五。</li>\n</ul>\n<p><img src=\"/2022/03/09/Graph-search/image-2.png\" alt=\"img\" loading=\"lazy\"></p>\n<h3 id=\"邻接矩阵和邻接表\"><a class=\"markdownIt-Anchor\" href=\"#邻接矩阵和邻接表\"></a> 邻接矩阵和邻接表</h3>\n<ul>\n<li><strong>邻接矩阵</strong></li>\n</ul>\n<p>邻接矩阵的优势是方便定义，只需要一个二维矩阵就可以解决；缺点也显而易见，浪费空间。</p>\n<p><img src=\"/2022/03/09/Graph-search/v2-9e2643ca5d96f86a391c36de4d3bd48d_720w.jpg\" alt=\"img\" loading=\"lazy\"></p>\n<ul>\n<li><strong>邻接表</strong></li>\n</ul>\n<p>邻接表的优势自然就是尽可能的节省更多的空间，但是与之相对应的就是定义起来很麻烦，需要用链表或者vector来实现。</p>\n<p><img src=\"/2022/03/09/Graph-search/v2-4a4d37df348f283649e2aecc74d959b5_720w.jpg\" alt=\"img\" loading=\"lazy\"></p>\n<p>*(图是网上抄的，看水印，如有侵权，请联系我)</p>\n<h2 id=\"图的遍历dfsbfs\"><a class=\"markdownIt-Anchor\" href=\"#图的遍历dfsbfs\"></a> 图的遍历(DFS&amp;&amp;BFS)</h2>\n<hr>\n<p>好了，上面我们学习了图的概念以及如何存图，接下来就是重头戏了。</p>\n<p>接下来便是如何实现图的搜索，首先我们来看这样一个有向图， 我们不妨设从1号顶点起始。</p>\n<p><img src=\"/2022/03/09/Graph-search/image-3.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>在搜索过程中，我们维护一个布尔数组bool visited[N+1]，这个数组用来表示每个顶点是不是已经遍历过了。</p>\n<p>接下来，从1号开始进行DFS，遍历过的节点就在<code>visited[]</code>中标注。visited[i] == true表示顶点i已经遍历过了，visited[i] == false表示i还没有遍历过。DFS的具体方法可以用递归实现，直到所有节点都被遍历过结束。如果采用邻接矩阵，伪代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\">Visited<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span>\nDFS<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\tVisited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>N<span class=\"token punctuation\">;</span>i<span class=\"token operator\">+</span><span class=\"token operator\">+</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>!Visited<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span><span class=\"token operator\">&amp;</span> <span class=\"token builtin\">map</span><span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t\tDFS<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"代码实现\"><a class=\"markdownIt-Anchor\" href=\"#代码实现\"></a> 代码实现</h2>\n<hr>\n<h3 id=\"dfs递归实现\"><a class=\"markdownIt-Anchor\" href=\"#dfs递归实现\"></a> DFS递归实现</h3>\n<pre class=\"language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include &lt;iostream&gt;\n#define N 5\nusing namespace std;\nint maze[N][N] &#x3D; &#123;\n    &#123; 0, 1, 1, 0, 0 &#125;,\n    &#123; 0, 0, 1, 0, 1 &#125;,\n    &#123; 0, 0, 1, 0, 0 &#125;,\n    &#123; 1, 1, 0, 0, 1 &#125;,\n    &#123; 0, 0, 1, 0, 0 &#125;\n&#125;;\nbool visited[N + 1];\nvoid DFS(int start)\n&#123;\n    visited[start] &#x3D; true;\n    for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n        if (!visited[i] &amp;&amp; maze[start - 1][i - 1] &#x3D;&#x3D; 1)\n            DFS(i);\n    cout &lt;&lt; start &lt;&lt; &quot; &quot;;\n&#125;\nint main()\n&#123;\n    for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n    &#123;\n        if (visited[i])\n            continue;\n        DFS(i);\n    &#125;\n    return 0;\n&#125;</code></pre>\n<h3 id=\"dfs非递归实现\"><a class=\"markdownIt-Anchor\" href=\"#dfs非递归实现\"></a> DFS非递归实现</h3>\n<pre class=\"language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include &lt;iostream&gt;\n#include &lt;stack&gt;\n#define N 5\nusing namespace std;\nint maze[N][N] &#x3D; &#123;\n    &#123; 0, 1, 1, 0, 0 &#125;,\n    &#123; 0, 0, 1, 0, 1 &#125;,\n    &#123; 0, 0, 1, 0, 0 &#125;,\n    &#123; 1, 1, 0, 0, 1 &#125;,\n    &#123; 0, 0, 1, 0, 0 &#125;\n&#125;;\nbool visited[N + 1];\nvoid DFS(int start)\n&#123;\n    stack&lt;int&gt; s;\n    s.push(start);\n    visited[start] &#x3D; true;\n    bool is_push &#x3D; false;\n    while (!s.empty())\n    &#123;\n        is_push &#x3D; false;\n        int v &#x3D; s.top();\n        for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n        &#123;\n            if (maze[v - 1][i - 1] &#x3D;&#x3D; 1 &amp;&amp; !visited[i])\n            &#123;\n                visited[i] &#x3D; true;\n                s.push(i);\n                is_push &#x3D; true;\n                break;\n            &#125;\n        &#125;\n        if (!is_push)\n        &#123;\n            cout &lt;&lt; v &lt;&lt; &quot; &quot;;\n            s.pop();\n        &#125;\n    &#125;\n&#125;\nint main()\n&#123;\n    for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n    &#123;\n        if (visited[i])\n            continue;\n        DFS(i);\n    &#125;\n    return 0;\n&#125;</code></pre>\n<h3 id=\"bfs实现\"><a class=\"markdownIt-Anchor\" href=\"#bfs实现\"></a> BFS实现</h3>\n<pre class=\"language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include &lt;iostream&gt;\n#include &lt;queue&gt;\n#define N 5\nusing namespace std;\nint maze[N][N] &#x3D; &#123;\n    &#123; 0, 1, 1, 0, 0 &#125;,\n    &#123; 0, 0, 1, 1, 0 &#125;,\n    &#123; 0, 1, 1, 1, 0 &#125;,\n    &#123; 1, 0, 0, 0, 0 &#125;,\n    &#123; 0, 0, 1, 1, 0 &#125;\n&#125;;\nbool visited[N + 1];\nvoid BFS(int start)\n&#123;\n    queue&lt;int&gt; Q;\n    Q.push(start);\n    visited[start] &#x3D; true;\n    while (!Q.empty())\n    &#123;\n        int front &#x3D; Q.front();\n        cout &lt;&lt; front &lt;&lt; &quot; &quot;;\n        Q.pop();\n        for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n            if (!visited[i] &amp;&amp; maze[front - 1][i - 1] &#x3D;&#x3D; 1)\n            &#123;\n                visited[i] &#x3D; true;\n                Q.push(i);\n            &#125;\n    &#125;\n&#125;\nint main()\n&#123;\n    for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n    &#123;\n        if (visited[i])\n            continue;\n        BFS(i);\n    &#125;\n    return 0;\n&#125;</code></pre>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"基础知识\"><a class=\"markdownIt-Anchor\" href=\"#基础知识\"></a> 基础知识</h2>\n<h3 id=\"图的定义和分类\"><a class=\"markdownIt-Anchor\" href=\"#图的定义和分类\"></a> 图的定义和分类</h3>\n<ul>\n<li>\n<p><strong>图的定义</strong> 是一个顶点集合V和一个顶点间关系的集合E组成，记G=(V,E) V：顶点的有限非空集合。 E：顶点间关系的有限集合（边集）。</p>\n</li>\n<li>\n<p><strong>无向图</strong> (graph)在G=(V,E)中，如果对于任意的结点a,b∈V，当(a,b)∈E时，必有(b,a)∈E（即关系R对称），如图二。</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>V</mi><mo>=</mo><mrow><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>5</mn></mrow><mspace linebreak=\"newline\"></mspace><mi>E</mi><mo>=</mo><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>3</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>4</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>5</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>5</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>5</mn><mo stretchy=\"false\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">V={1,2,3,4,5}\\\\ \nE={(1,2),(1,3),(1,4),(2,3),(2,5),(3,5),(4,5)}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mclose\">)</span></span></span></span></span></span></p>\n</li>\n<li>\n<p><strong>有向图</strong> (digraph)在G=(V,E)中，如果对于任意的结点a,b∈V，当(a,b)∈E时，(b,a)∈E未必成立，如图三。</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>V</mi><mo>=</mo><mrow><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>5</mn></mrow><mspace linebreak=\"newline\"></mspace><mi>E</mi><mo>=</mo><mrow><mo>&lt;</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>4</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>5</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>1</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>5</mn><mo separator=\"true\">,</mo><mn>3</mn><mo>&gt;</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mn>5</mn><mo separator=\"true\">,</mo><mn>4</mn><mo>&gt;</mo></mrow></mrow><annotation encoding=\"application/x-tex\">V={1,2,3,4,5}\\\\\nE={&lt;1,2&gt;,&lt;1,4&gt;,&lt;2,3&gt;,&lt;2,5&gt;,&lt;3,1&gt;,&lt;5,3&gt;,&lt;5,4&gt;}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">5</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">5</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span></span></span></span></span></span></p>\n</li>\n</ul>\n<p><img src=\"/2022/03/09/Graph-search/image-1.png\" alt=\"img\"></p>\n<ul>\n<li><strong>带权图</strong> 一般的图边上没有数字，边仅表示两个顶点间相连接关系 ，如图四。</li>\n<li><strong>连通图</strong>图中任意两个顶点都是连通的，称为连通图；否则为非连通图，如图五。</li>\n</ul>\n<p><img src=\"/2022/03/09/Graph-search/image-2.png\" alt=\"img\"></p>\n<h3 id=\"邻接矩阵和邻接表\"><a class=\"markdownIt-Anchor\" href=\"#邻接矩阵和邻接表\"></a> 邻接矩阵和邻接表</h3>\n<ul>\n<li><strong>邻接矩阵</strong></li>\n</ul>\n<p>邻接矩阵的优势是方便定义，只需要一个二维矩阵就可以解决；缺点也显而易见，浪费空间。</p>\n<p><img src=\"/2022/03/09/Graph-search/v2-9e2643ca5d96f86a391c36de4d3bd48d_720w.jpg\" alt=\"img\"></p>\n<ul>\n<li><strong>邻接表</strong></li>\n</ul>\n<p>邻接表的优势自然就是尽可能的节省更多的空间，但是与之相对应的就是定义起来很麻烦，需要用链表或者vector来实现。</p>\n<p><img src=\"/2022/03/09/Graph-search/v2-4a4d37df348f283649e2aecc74d959b5_720w.jpg\" alt=\"img\"></p>\n<p>*(图是网上抄的，看水印，如有侵权，请联系我)</p>\n<h2 id=\"图的遍历dfsbfs\"><a class=\"markdownIt-Anchor\" href=\"#图的遍历dfsbfs\"></a> 图的遍历(DFS&amp;&amp;BFS)</h2>\n<hr>\n<p>好了，上面我们学习了图的概念以及如何存图，接下来就是重头戏了。</p>\n<p>接下来便是如何实现图的搜索，首先我们来看这样一个有向图， 我们不妨设从1号顶点起始。</p>\n<p><img src=\"/2022/03/09/Graph-search/image-3.png\" alt=\"img\"></p>\n<p>在搜索过程中，我们维护一个布尔数组bool visited[N+1]，这个数组用来表示每个顶点是不是已经遍历过了。</p>\n<p>接下来，从1号开始进行DFS，遍历过的节点就在<code>visited[]</code>中标注。visited[i] == true表示顶点i已经遍历过了，visited[i] == false表示i还没有遍历过。DFS的具体方法可以用递归实现，直到所有节点都被遍历过结束。如果采用邻接矩阵，伪代码如下：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\">Visited<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span>\nDFS<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\tVisited<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>N<span class=\"token punctuation\">;</span>i<span class=\"token operator\">+</span><span class=\"token operator\">+</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>!Visited<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span><span class=\"token operator\">&amp;</span> <span class=\"token builtin\">map</span><span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t\tDFS<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"代码实现\"><a class=\"markdownIt-Anchor\" href=\"#代码实现\"></a> 代码实现</h2>\n<hr>\n<h3 id=\"dfs递归实现\"><a class=\"markdownIt-Anchor\" href=\"#dfs递归实现\"></a> DFS递归实现</h3>\n<pre class=\"language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include &lt;iostream&gt;\n#define N 5\nusing namespace std;\nint maze[N][N] &#x3D; &#123;\n    &#123; 0, 1, 1, 0, 0 &#125;,\n    &#123; 0, 0, 1, 0, 1 &#125;,\n    &#123; 0, 0, 1, 0, 0 &#125;,\n    &#123; 1, 1, 0, 0, 1 &#125;,\n    &#123; 0, 0, 1, 0, 0 &#125;\n&#125;;\nbool visited[N + 1];\nvoid DFS(int start)\n&#123;\n    visited[start] &#x3D; true;\n    for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n        if (!visited[i] &amp;&amp; maze[start - 1][i - 1] &#x3D;&#x3D; 1)\n            DFS(i);\n    cout &lt;&lt; start &lt;&lt; &quot; &quot;;\n&#125;\nint main()\n&#123;\n    for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n    &#123;\n        if (visited[i])\n            continue;\n        DFS(i);\n    &#125;\n    return 0;\n&#125;</code></pre>\n<h3 id=\"dfs非递归实现\"><a class=\"markdownIt-Anchor\" href=\"#dfs非递归实现\"></a> DFS非递归实现</h3>\n<pre class=\"language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include &lt;iostream&gt;\n#include &lt;stack&gt;\n#define N 5\nusing namespace std;\nint maze[N][N] &#x3D; &#123;\n    &#123; 0, 1, 1, 0, 0 &#125;,\n    &#123; 0, 0, 1, 0, 1 &#125;,\n    &#123; 0, 0, 1, 0, 0 &#125;,\n    &#123; 1, 1, 0, 0, 1 &#125;,\n    &#123; 0, 0, 1, 0, 0 &#125;\n&#125;;\nbool visited[N + 1];\nvoid DFS(int start)\n&#123;\n    stack&lt;int&gt; s;\n    s.push(start);\n    visited[start] &#x3D; true;\n    bool is_push &#x3D; false;\n    while (!s.empty())\n    &#123;\n        is_push &#x3D; false;\n        int v &#x3D; s.top();\n        for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n        &#123;\n            if (maze[v - 1][i - 1] &#x3D;&#x3D; 1 &amp;&amp; !visited[i])\n            &#123;\n                visited[i] &#x3D; true;\n                s.push(i);\n                is_push &#x3D; true;\n                break;\n            &#125;\n        &#125;\n        if (!is_push)\n        &#123;\n            cout &lt;&lt; v &lt;&lt; &quot; &quot;;\n            s.pop();\n        &#125;\n    &#125;\n&#125;\nint main()\n&#123;\n    for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n    &#123;\n        if (visited[i])\n            continue;\n        DFS(i);\n    &#125;\n    return 0;\n&#125;</code></pre>\n<h3 id=\"bfs实现\"><a class=\"markdownIt-Anchor\" href=\"#bfs实现\"></a> BFS实现</h3>\n<pre class=\"language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include &lt;iostream&gt;\n#include &lt;queue&gt;\n#define N 5\nusing namespace std;\nint maze[N][N] &#x3D; &#123;\n    &#123; 0, 1, 1, 0, 0 &#125;,\n    &#123; 0, 0, 1, 1, 0 &#125;,\n    &#123; 0, 1, 1, 1, 0 &#125;,\n    &#123; 1, 0, 0, 0, 0 &#125;,\n    &#123; 0, 0, 1, 1, 0 &#125;\n&#125;;\nbool visited[N + 1];\nvoid BFS(int start)\n&#123;\n    queue&lt;int&gt; Q;\n    Q.push(start);\n    visited[start] &#x3D; true;\n    while (!Q.empty())\n    &#123;\n        int front &#x3D; Q.front();\n        cout &lt;&lt; front &lt;&lt; &quot; &quot;;\n        Q.pop();\n        for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n            if (!visited[i] &amp;&amp; maze[front - 1][i - 1] &#x3D;&#x3D; 1)\n            &#123;\n                visited[i] &#x3D; true;\n                Q.push(i);\n            &#125;\n    &#125;\n&#125;\nint main()\n&#123;\n    for (int i &#x3D; 1; i &lt;&#x3D; N; i++)\n    &#123;\n        if (visited[i])\n            continue;\n        BFS(i);\n    &#125;\n    return 0;\n&#125;</code></pre>\n"},{"title":"Hexo多电脑同步指南","date":"2022-03-08T08:51:28.000Z","author":"Tony","_content":"\n## 如何实现同步\n\nHexo的同步本质上很简单，使用`git`命令push一下，然后在另一台电脑pull一下就OK。但是我在实际的同步过程中却遇到了各种的报错，这篇文章同样也记录一下我遇到的问题，也为了后期我再次换电脑，或者再次遇到奇奇怪怪的报错做参考。\n\n我现在在家里使用**台式电脑**，在外使用轻薄的商务本（以下简称**笔记本**），所以就以此为例，介绍如何实现两个设备间的同步问题。\n\n首先，我的本地blog储存在台式电脑上面，我们需要将这个blog上传到GitHub上，准确的说是你的GitHub的分支上。我们的目的就是在你的GitHub仓库建一个分支，然后把这个分支当作一个中介，存储我们的源文件，当在A电脑上修改过后直接上传（push）到分支上，然后在B电脑上下载（pull）该分支的所有文件，这样就实现了多设备同步。\n\n### 首次从台式电脑上传本地文件到GitHub\n\n*注意所有命令都要在Hexo项目的目录下执行。\n\n```bash\ngit init # 首先要在台式电脑上初始化git\ngit remote add origin https://github.com/username/username.github.io.git # 添加Github上的仓库地址\n# username是你的GitHub的用户名\ngit checkout -b branch_name # 新建分支并切换到新建的分支\n# branch_name随便起名字，不过最好简单一点，比如Hexo\ngit add . # 添加所有本地文件到本地的git\ngit commit -m \"This is the first time to syn!\" # 提交备注\n# “这里的内容随便写，不过这句代码一定不要省略，后面会出问题！”\ngit push origin branch_name # 本地文件上传到hexo分支\n```\n\n### 首次从笔记本下载工程文件\n\n*注意另一台电脑上要部署好所有的环境，如git，Nodejs，SSH等，详情参考：[Hexo 网站搭建指南](https://tonylsx611.github.io/2022/02/24/Hexo_creation/)\n\n*注意所有命令都要在Hexo项目的目录下执行，没有目录的话找个地方新建一个。\n\n```bash\ngit clone -b branch_name https://github.com/username/username.github.io\n# 克隆分支到本地的博客文件夹\nsudo npm install -g hexo-cli # install hexo\nsudo npm install # 安装依赖库\nsudo npm install hexo-deployer-git # git部署相关配置\n```\n\n### 首次用笔记本更新文件\n\n```bash\nhexo clean && hexo d && hexo g && hexo s #更新Github中的master文件\n# 如果上面这部成功部署，就可以更新分支文件了\ngit add .\ngit commit -m \"...\"\ngit push origin branch_name\n```\n\n### 返回台式电脑进行编辑\n\n```bash\ngit pull origin branch_name # 从Github同步数据到台式电脑\n# 或者直接git pull也可以\n\n\n# 修改或者更新文章。。。\n\n\nhexo clean && hexo d && hexo g && hexo s #更新Github中的master文件\n# 如果上面这部成功部署，就可以更新分支文件了\ngit add .\ngit commit -m \"...\"\ngit push origin branch_name\n#有没有发现，跟上面的代码一样了，没错，这样就形成了循环！\n```\n\n完成首次同步之后的任何设备都可以使用上面的代码进行同步和更新。\n\n## 同步过程中遇到的问题\n\n### git pull文件冲突报错\n\n![Screenshot 2022-03-08 161552](Hexo-synchronization/Screenshot%202022-03-08%20161552.png)\n\n报错信息：\n\n`error: Your local changes to the following files would be overwritten by merge`\n\n报错原因：\n\n在同步的时候出现两个相同文件名内容不同的文件，导致冲突；比如笔记本修改了之前的某个文章，在台式机`pull` 的时候就会产生这样的错误。\n\n解决方法：\n\n```bash\ngit stash # 备份工作区内容\ngit pull origin branch_name # 下载分支内容\ngit stash pop # 恢复工作区内容\n```\n\n### Clone后首次部署报错\n\n![image-20220310172557250](Hexo-synchronization/image-20220310172557250.png)\n\n报错信息：\n\n```bash\nfatal: in unpopulated submodule '.deploy.git'\nFATAL:{\n\terror: Error: Spawn failed\n\t\t...\n}\n```\n\n报错原因：\n\n克隆远程分支到本地电脑的时候，把`.deploy.git`也一并克隆了过来，这个文件夹是部署到master的临时缓存文件夹，是另一个电脑部署用的，因此会产生冲突。\n\n解决方法：\n\n删掉本地的`.deploy.git`文件夹，重新部署。如果还有问题，可能是你开了多个命令行，多个terminal会产生冲突，全部关掉，重开一个来部署。\n\n### 本地未关联远程分支报错\n\n报错信息：\n\n```bash\nThere is no tracking information for the current branch.\nPlease specify which branch you want to merge with.\nSee git-pull(1) for details.\n\ngit pull <remote> <branch>\n\nIf you wish to set tracking information for this branch you can do so with:\n\ngit branch --set-upstream-to=origin/<branch> release\n```\n\n报错原因：\n\n在建立新的本地分支后，未与GitHub分支关联，通常出现在首次添加新的电脑时报错。\n\n解决方法：\n\n他不是说的明明白白的嘛，你就按照他的提示加一行代码，关联上就完了！这里的`remote_branch`就是GitHub上的远程分支，`your branch`就是你的本地分支。\n\n```bash\ngit branch --set-upstream-to=origin/remote_branch your_branch\n```\n\n### fetch first 报错\n\n![image-20220315180411753](Hexo-synchronization/image-20220315180411753.png)\n\n报错原因：\n\n远程库版本与本地版本不一致导致的报错。\n\n解决方法：\n\n```bash\ngit pull --rebase origin your_branch\n```\n\n### Non-fast-forward 报错\n\n![image-20220516171510709](Hexo-synchronization/image-20220516171510709.png)\n\n报错原因：\n\n别人上传到远程仓库后，你没有及时的同步或拉取到本地，但是你同时又添加了一些内容。当你在提交时，它会检测到你之前从远程仓库拉取的时候的仓库状态和现在的不一样。于是，它为了安全起见拒绝了你的提交。\n\n解决方法（推荐）：先合并之前的历史，再进行提交\n\n```bash\ngit fetch origin your_branch # 先抓取远程仓库的更新到本地\ngit merge origin your_branch # 然后与你的本地仓库合并\ngit pull --rebase origin your_branch # 然后就可以提交修改了\n\n```\n\n解决方法（不推荐）：丢弃之前的历史，强行提交\n\n```bash\ngit push --force # 这种方法很不安全\n```\n\n---\n\n注：本文部分内容参考自[Hexo博客的安装部署及多电脑同步](https://cloud.tencent.com/developer/article/1046404)，如有侵权，请联系我。\n","source":"_posts/Hexo-synchronization.md","raw":"---\ntitle: Hexo多电脑同步指南\ndate: 2022-03-08 16:51:28\nauthor: Tony\ntags: \n\t- Hexo\ncategories:\n\t- Hexo搭建\n---\n\n## 如何实现同步\n\nHexo的同步本质上很简单，使用`git`命令push一下，然后在另一台电脑pull一下就OK。但是我在实际的同步过程中却遇到了各种的报错，这篇文章同样也记录一下我遇到的问题，也为了后期我再次换电脑，或者再次遇到奇奇怪怪的报错做参考。\n\n我现在在家里使用**台式电脑**，在外使用轻薄的商务本（以下简称**笔记本**），所以就以此为例，介绍如何实现两个设备间的同步问题。\n\n首先，我的本地blog储存在台式电脑上面，我们需要将这个blog上传到GitHub上，准确的说是你的GitHub的分支上。我们的目的就是在你的GitHub仓库建一个分支，然后把这个分支当作一个中介，存储我们的源文件，当在A电脑上修改过后直接上传（push）到分支上，然后在B电脑上下载（pull）该分支的所有文件，这样就实现了多设备同步。\n\n### 首次从台式电脑上传本地文件到GitHub\n\n*注意所有命令都要在Hexo项目的目录下执行。\n\n```bash\ngit init # 首先要在台式电脑上初始化git\ngit remote add origin https://github.com/username/username.github.io.git # 添加Github上的仓库地址\n# username是你的GitHub的用户名\ngit checkout -b branch_name # 新建分支并切换到新建的分支\n# branch_name随便起名字，不过最好简单一点，比如Hexo\ngit add . # 添加所有本地文件到本地的git\ngit commit -m \"This is the first time to syn!\" # 提交备注\n# “这里的内容随便写，不过这句代码一定不要省略，后面会出问题！”\ngit push origin branch_name # 本地文件上传到hexo分支\n```\n\n### 首次从笔记本下载工程文件\n\n*注意另一台电脑上要部署好所有的环境，如git，Nodejs，SSH等，详情参考：[Hexo 网站搭建指南](https://tonylsx611.github.io/2022/02/24/Hexo_creation/)\n\n*注意所有命令都要在Hexo项目的目录下执行，没有目录的话找个地方新建一个。\n\n```bash\ngit clone -b branch_name https://github.com/username/username.github.io\n# 克隆分支到本地的博客文件夹\nsudo npm install -g hexo-cli # install hexo\nsudo npm install # 安装依赖库\nsudo npm install hexo-deployer-git # git部署相关配置\n```\n\n### 首次用笔记本更新文件\n\n```bash\nhexo clean && hexo d && hexo g && hexo s #更新Github中的master文件\n# 如果上面这部成功部署，就可以更新分支文件了\ngit add .\ngit commit -m \"...\"\ngit push origin branch_name\n```\n\n### 返回台式电脑进行编辑\n\n```bash\ngit pull origin branch_name # 从Github同步数据到台式电脑\n# 或者直接git pull也可以\n\n\n# 修改或者更新文章。。。\n\n\nhexo clean && hexo d && hexo g && hexo s #更新Github中的master文件\n# 如果上面这部成功部署，就可以更新分支文件了\ngit add .\ngit commit -m \"...\"\ngit push origin branch_name\n#有没有发现，跟上面的代码一样了，没错，这样就形成了循环！\n```\n\n完成首次同步之后的任何设备都可以使用上面的代码进行同步和更新。\n\n## 同步过程中遇到的问题\n\n### git pull文件冲突报错\n\n![Screenshot 2022-03-08 161552](Hexo-synchronization/Screenshot%202022-03-08%20161552.png)\n\n报错信息：\n\n`error: Your local changes to the following files would be overwritten by merge`\n\n报错原因：\n\n在同步的时候出现两个相同文件名内容不同的文件，导致冲突；比如笔记本修改了之前的某个文章，在台式机`pull` 的时候就会产生这样的错误。\n\n解决方法：\n\n```bash\ngit stash # 备份工作区内容\ngit pull origin branch_name # 下载分支内容\ngit stash pop # 恢复工作区内容\n```\n\n### Clone后首次部署报错\n\n![image-20220310172557250](Hexo-synchronization/image-20220310172557250.png)\n\n报错信息：\n\n```bash\nfatal: in unpopulated submodule '.deploy.git'\nFATAL:{\n\terror: Error: Spawn failed\n\t\t...\n}\n```\n\n报错原因：\n\n克隆远程分支到本地电脑的时候，把`.deploy.git`也一并克隆了过来，这个文件夹是部署到master的临时缓存文件夹，是另一个电脑部署用的，因此会产生冲突。\n\n解决方法：\n\n删掉本地的`.deploy.git`文件夹，重新部署。如果还有问题，可能是你开了多个命令行，多个terminal会产生冲突，全部关掉，重开一个来部署。\n\n### 本地未关联远程分支报错\n\n报错信息：\n\n```bash\nThere is no tracking information for the current branch.\nPlease specify which branch you want to merge with.\nSee git-pull(1) for details.\n\ngit pull <remote> <branch>\n\nIf you wish to set tracking information for this branch you can do so with:\n\ngit branch --set-upstream-to=origin/<branch> release\n```\n\n报错原因：\n\n在建立新的本地分支后，未与GitHub分支关联，通常出现在首次添加新的电脑时报错。\n\n解决方法：\n\n他不是说的明明白白的嘛，你就按照他的提示加一行代码，关联上就完了！这里的`remote_branch`就是GitHub上的远程分支，`your branch`就是你的本地分支。\n\n```bash\ngit branch --set-upstream-to=origin/remote_branch your_branch\n```\n\n### fetch first 报错\n\n![image-20220315180411753](Hexo-synchronization/image-20220315180411753.png)\n\n报错原因：\n\n远程库版本与本地版本不一致导致的报错。\n\n解决方法：\n\n```bash\ngit pull --rebase origin your_branch\n```\n\n### Non-fast-forward 报错\n\n![image-20220516171510709](Hexo-synchronization/image-20220516171510709.png)\n\n报错原因：\n\n别人上传到远程仓库后，你没有及时的同步或拉取到本地，但是你同时又添加了一些内容。当你在提交时，它会检测到你之前从远程仓库拉取的时候的仓库状态和现在的不一样。于是，它为了安全起见拒绝了你的提交。\n\n解决方法（推荐）：先合并之前的历史，再进行提交\n\n```bash\ngit fetch origin your_branch # 先抓取远程仓库的更新到本地\ngit merge origin your_branch # 然后与你的本地仓库合并\ngit pull --rebase origin your_branch # 然后就可以提交修改了\n\n```\n\n解决方法（不推荐）：丢弃之前的历史，强行提交\n\n```bash\ngit push --force # 这种方法很不安全\n```\n\n---\n\n注：本文部分内容参考自[Hexo博客的安装部署及多电脑同步](https://cloud.tencent.com/developer/article/1046404)，如有侵权，请联系我。\n","slug":"Hexo-synchronization","published":1,"updated":"2022-05-16T09:16:06.140Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrd6001u1gzu5oaeg655","content":"<h2 id=\"如何实现同步\"><a class=\"markdownIt-Anchor\" href=\"#如何实现同步\"></a> 如何实现同步</h2>\n<p>Hexo的同步本质上很简单，使用<code>git</code>命令push一下，然后在另一台电脑pull一下就OK。但是我在实际的同步过程中却遇到了各种的报错，这篇文章同样也记录一下我遇到的问题，也为了后期我再次换电脑，或者再次遇到奇奇怪怪的报错做参考。</p>\n<p>我现在在家里使用<strong>台式电脑</strong>，在外使用轻薄的商务本（以下简称<strong>笔记本</strong>），所以就以此为例，介绍如何实现两个设备间的同步问题。</p>\n<p>首先，我的本地blog储存在台式电脑上面，我们需要将这个blog上传到GitHub上，准确的说是你的GitHub的分支上。我们的目的就是在你的GitHub仓库建一个分支，然后把这个分支当作一个中介，存储我们的源文件，当在A电脑上修改过后直接上传（push）到分支上，然后在B电脑上下载（pull）该分支的所有文件，这样就实现了多设备同步。</p>\n<h3 id=\"首次从台式电脑上传本地文件到github\"><a class=\"markdownIt-Anchor\" href=\"#首次从台式电脑上传本地文件到github\"></a> 首次从台式电脑上传本地文件到GitHub</h3>\n<p>*注意所有命令都要在Hexo项目的目录下执行。</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> init <span class=\"token comment\"># 首先要在台式电脑上初始化git</span>\n<span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin https://github.com/username/username.github.io.git <span class=\"token comment\"># 添加Github上的仓库地址</span>\n<span class=\"token comment\"># username是你的GitHub的用户名</span>\n<span class=\"token function\">git</span> checkout -b branch_name <span class=\"token comment\"># 新建分支并切换到新建的分支</span>\n<span class=\"token comment\"># branch_name随便起名字，不过最好简单一点，比如Hexo</span>\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token comment\"># 添加所有本地文件到本地的git</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"This is the first time to syn!\"</span> <span class=\"token comment\"># 提交备注</span>\n<span class=\"token comment\"># “这里的内容随便写，不过这句代码一定不要省略，后面会出问题！”</span>\n<span class=\"token function\">git</span> push origin branch_name <span class=\"token comment\"># 本地文件上传到hexo分支</span></code></pre>\n<h3 id=\"首次从笔记本下载工程文件\"><a class=\"markdownIt-Anchor\" href=\"#首次从笔记本下载工程文件\"></a> 首次从笔记本下载工程文件</h3>\n<p>*注意另一台电脑上要部署好所有的环境，如git，Nodejs，SSH等，详情参考：<a href=\"https://tonylsx611.github.io/2022/02/24/Hexo_creation/\">Hexo 网站搭建指南</a></p>\n<p>*注意所有命令都要在Hexo项目的目录下执行，没有目录的话找个地方新建一个。</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone -b branch_name https://github.com/username/username.github.io\n<span class=\"token comment\"># 克隆分支到本地的博客文件夹</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g hexo-cli <span class=\"token comment\"># install hexo</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token comment\"># 安装依赖库</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> hexo-deployer-git <span class=\"token comment\"># git部署相关配置</span></code></pre>\n<h3 id=\"首次用笔记本更新文件\"><a class=\"markdownIt-Anchor\" href=\"#首次用笔记本更新文件\"></a> 首次用笔记本更新文件</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo clean <span class=\"token operator\">&amp;&amp;</span> hexo d <span class=\"token operator\">&amp;&amp;</span> hexo g <span class=\"token operator\">&amp;&amp;</span> hexo s <span class=\"token comment\">#更新Github中的master文件</span>\n<span class=\"token comment\"># 如果上面这部成功部署，就可以更新分支文件了</span>\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"...\"</span>\n<span class=\"token function\">git</span> push origin branch_name</code></pre>\n<h3 id=\"返回台式电脑进行编辑\"><a class=\"markdownIt-Anchor\" href=\"#返回台式电脑进行编辑\"></a> 返回台式电脑进行编辑</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> pull origin branch_name <span class=\"token comment\"># 从Github同步数据到台式电脑</span>\n<span class=\"token comment\"># 或者直接git pull也可以</span>\n\n\n<span class=\"token comment\"># 修改或者更新文章。。。</span>\n\n\nhexo clean <span class=\"token operator\">&amp;&amp;</span> hexo d <span class=\"token operator\">&amp;&amp;</span> hexo g <span class=\"token operator\">&amp;&amp;</span> hexo s <span class=\"token comment\">#更新Github中的master文件</span>\n<span class=\"token comment\"># 如果上面这部成功部署，就可以更新分支文件了</span>\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"...\"</span>\n<span class=\"token function\">git</span> push origin branch_name\n<span class=\"token comment\">#有没有发现，跟上面的代码一样了，没错，这样就形成了循环！</span></code></pre>\n<p>完成首次同步之后的任何设备都可以使用上面的代码进行同步和更新。</p>\n<h2 id=\"同步过程中遇到的问题\"><a class=\"markdownIt-Anchor\" href=\"#同步过程中遇到的问题\"></a> 同步过程中遇到的问题</h2>\n<h3 id=\"git-pull文件冲突报错\"><a class=\"markdownIt-Anchor\" href=\"#git-pull文件冲突报错\"></a> git pull文件冲突报错</h3>\n<p><img src=\"/2022/03/08/Hexo-synchronization/Screenshot%202022-03-08%20161552.png\" alt=\"Screenshot 2022-03-08 161552\" loading=\"lazy\"></p>\n<p>报错信息：</p>\n<p><code>error: Your local changes to the following files would be overwritten by merge</code></p>\n<p>报错原因：</p>\n<p>在同步的时候出现两个相同文件名内容不同的文件，导致冲突；比如笔记本修改了之前的某个文章，在台式机<code>pull</code> 的时候就会产生这样的错误。</p>\n<p>解决方法：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> stash <span class=\"token comment\"># 备份工作区内容</span>\n<span class=\"token function\">git</span> pull origin branch_name <span class=\"token comment\"># 下载分支内容</span>\n<span class=\"token function\">git</span> stash pop <span class=\"token comment\"># 恢复工作区内容</span></code></pre>\n<h3 id=\"clone后首次部署报错\"><a class=\"markdownIt-Anchor\" href=\"#clone后首次部署报错\"></a> Clone后首次部署报错</h3>\n<p><img src=\"/2022/03/08/Hexo-synchronization/image-20220310172557250.png\" alt=\"image-20220310172557250\" loading=\"lazy\"></p>\n<p>报错信息：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">fatal: <span class=\"token keyword\">in</span> unpopulated submodule <span class=\"token string\">'.deploy.git'</span>\nFATAL:<span class=\"token punctuation\">&#123;</span>\n\terror: Error: Spawn failed\n\t\t<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>报错原因：</p>\n<p>克隆远程分支到本地电脑的时候，把<code>.deploy.git</code>也一并克隆了过来，这个文件夹是部署到master的临时缓存文件夹，是另一个电脑部署用的，因此会产生冲突。</p>\n<p>解决方法：</p>\n<p>删掉本地的<code>.deploy.git</code>文件夹，重新部署。如果还有问题，可能是你开了多个命令行，多个terminal会产生冲突，全部关掉，重开一个来部署。</p>\n<h3 id=\"本地未关联远程分支报错\"><a class=\"markdownIt-Anchor\" href=\"#本地未关联远程分支报错\"></a> 本地未关联远程分支报错</h3>\n<p>报错信息：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">There is no tracking information <span class=\"token keyword\">for</span> the current branch.\nPlease specify <span class=\"token function\">which</span> branch you want to merge with.\nSee git-pull<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> details.\n\n<span class=\"token function\">git</span> pull <span class=\"token operator\">&lt;</span>remote<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>branch<span class=\"token operator\">></span>\n\nIf you wish to <span class=\"token builtin class-name\">set</span> tracking information <span class=\"token keyword\">for</span> this branch you can <span class=\"token keyword\">do</span> so with:\n\n<span class=\"token function\">git</span> branch --set-upstream-to<span class=\"token operator\">=</span>origin/<span class=\"token operator\">&lt;</span>branch<span class=\"token operator\">></span> release</code></pre>\n<p>报错原因：</p>\n<p>在建立新的本地分支后，未与GitHub分支关联，通常出现在首次添加新的电脑时报错。</p>\n<p>解决方法：</p>\n<p>他不是说的明明白白的嘛，你就按照他的提示加一行代码，关联上就完了！这里的<code>remote_branch</code>就是GitHub上的远程分支，<code>your branch</code>就是你的本地分支。</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> branch --set-upstream-to<span class=\"token operator\">=</span>origin/remote_branch your_branch</code></pre>\n<h3 id=\"fetch-first-报错\"><a class=\"markdownIt-Anchor\" href=\"#fetch-first-报错\"></a> fetch first 报错</h3>\n<p><img src=\"/2022/03/08/Hexo-synchronization/image-20220315180411753.png\" alt=\"image-20220315180411753\" loading=\"lazy\"></p>\n<p>报错原因：</p>\n<p>远程库版本与本地版本不一致导致的报错。</p>\n<p>解决方法：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> pull --rebase origin your_branch</code></pre>\n<h3 id=\"non-fast-forward-报错\"><a class=\"markdownIt-Anchor\" href=\"#non-fast-forward-报错\"></a> Non-fast-forward 报错</h3>\n<p><img src=\"/2022/03/08/Hexo-synchronization/image-20220516171510709.png\" alt=\"image-20220516171510709\" loading=\"lazy\"></p>\n<p>报错原因：</p>\n<p>别人上传到远程仓库后，你没有及时的同步或拉取到本地，但是你同时又添加了一些内容。当你在提交时，它会检测到你之前从远程仓库拉取的时候的仓库状态和现在的不一样。于是，它为了安全起见拒绝了你的提交。</p>\n<p>解决方法（推荐）：先合并之前的历史，再进行提交</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> fetch origin your_branch <span class=\"token comment\"># 先抓取远程仓库的更新到本地</span>\n<span class=\"token function\">git</span> merge origin your_branch <span class=\"token comment\"># 然后与你的本地仓库合并</span>\n<span class=\"token function\">git</span> pull --rebase origin your_branch <span class=\"token comment\"># 然后就可以提交修改了</span>\n</code></pre>\n<p>解决方法（不推荐）：丢弃之前的历史，强行提交</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> push --force <span class=\"token comment\"># 这种方法很不安全</span></code></pre>\n<hr>\n<p>注：本文部分内容参考自<a href=\"https://cloud.tencent.com/developer/article/1046404\">Hexo博客的安装部署及多电脑同步</a>，如有侵权，请联系我。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"如何实现同步\"><a class=\"markdownIt-Anchor\" href=\"#如何实现同步\"></a> 如何实现同步</h2>\n<p>Hexo的同步本质上很简单，使用<code>git</code>命令push一下，然后在另一台电脑pull一下就OK。但是我在实际的同步过程中却遇到了各种的报错，这篇文章同样也记录一下我遇到的问题，也为了后期我再次换电脑，或者再次遇到奇奇怪怪的报错做参考。</p>\n<p>我现在在家里使用<strong>台式电脑</strong>，在外使用轻薄的商务本（以下简称<strong>笔记本</strong>），所以就以此为例，介绍如何实现两个设备间的同步问题。</p>\n<p>首先，我的本地blog储存在台式电脑上面，我们需要将这个blog上传到GitHub上，准确的说是你的GitHub的分支上。我们的目的就是在你的GitHub仓库建一个分支，然后把这个分支当作一个中介，存储我们的源文件，当在A电脑上修改过后直接上传（push）到分支上，然后在B电脑上下载（pull）该分支的所有文件，这样就实现了多设备同步。</p>\n<h3 id=\"首次从台式电脑上传本地文件到github\"><a class=\"markdownIt-Anchor\" href=\"#首次从台式电脑上传本地文件到github\"></a> 首次从台式电脑上传本地文件到GitHub</h3>\n<p>*注意所有命令都要在Hexo项目的目录下执行。</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> init <span class=\"token comment\"># 首先要在台式电脑上初始化git</span>\n<span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin https://github.com/username/username.github.io.git <span class=\"token comment\"># 添加Github上的仓库地址</span>\n<span class=\"token comment\"># username是你的GitHub的用户名</span>\n<span class=\"token function\">git</span> checkout -b branch_name <span class=\"token comment\"># 新建分支并切换到新建的分支</span>\n<span class=\"token comment\"># branch_name随便起名字，不过最好简单一点，比如Hexo</span>\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token comment\"># 添加所有本地文件到本地的git</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"This is the first time to syn!\"</span> <span class=\"token comment\"># 提交备注</span>\n<span class=\"token comment\"># “这里的内容随便写，不过这句代码一定不要省略，后面会出问题！”</span>\n<span class=\"token function\">git</span> push origin branch_name <span class=\"token comment\"># 本地文件上传到hexo分支</span></code></pre>\n<h3 id=\"首次从笔记本下载工程文件\"><a class=\"markdownIt-Anchor\" href=\"#首次从笔记本下载工程文件\"></a> 首次从笔记本下载工程文件</h3>\n<p>*注意另一台电脑上要部署好所有的环境，如git，Nodejs，SSH等，详情参考：<a href=\"https://tonylsx611.github.io/2022/02/24/Hexo_creation/\">Hexo 网站搭建指南</a></p>\n<p>*注意所有命令都要在Hexo项目的目录下执行，没有目录的话找个地方新建一个。</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone -b branch_name https://github.com/username/username.github.io\n<span class=\"token comment\"># 克隆分支到本地的博客文件夹</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g hexo-cli <span class=\"token comment\"># install hexo</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token comment\"># 安装依赖库</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> hexo-deployer-git <span class=\"token comment\"># git部署相关配置</span></code></pre>\n<h3 id=\"首次用笔记本更新文件\"><a class=\"markdownIt-Anchor\" href=\"#首次用笔记本更新文件\"></a> 首次用笔记本更新文件</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo clean <span class=\"token operator\">&amp;&amp;</span> hexo d <span class=\"token operator\">&amp;&amp;</span> hexo g <span class=\"token operator\">&amp;&amp;</span> hexo s <span class=\"token comment\">#更新Github中的master文件</span>\n<span class=\"token comment\"># 如果上面这部成功部署，就可以更新分支文件了</span>\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"...\"</span>\n<span class=\"token function\">git</span> push origin branch_name</code></pre>\n<h3 id=\"返回台式电脑进行编辑\"><a class=\"markdownIt-Anchor\" href=\"#返回台式电脑进行编辑\"></a> 返回台式电脑进行编辑</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> pull origin branch_name <span class=\"token comment\"># 从Github同步数据到台式电脑</span>\n<span class=\"token comment\"># 或者直接git pull也可以</span>\n\n\n<span class=\"token comment\"># 修改或者更新文章。。。</span>\n\n\nhexo clean <span class=\"token operator\">&amp;&amp;</span> hexo d <span class=\"token operator\">&amp;&amp;</span> hexo g <span class=\"token operator\">&amp;&amp;</span> hexo s <span class=\"token comment\">#更新Github中的master文件</span>\n<span class=\"token comment\"># 如果上面这部成功部署，就可以更新分支文件了</span>\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"...\"</span>\n<span class=\"token function\">git</span> push origin branch_name\n<span class=\"token comment\">#有没有发现，跟上面的代码一样了，没错，这样就形成了循环！</span></code></pre>\n<p>完成首次同步之后的任何设备都可以使用上面的代码进行同步和更新。</p>\n<h2 id=\"同步过程中遇到的问题\"><a class=\"markdownIt-Anchor\" href=\"#同步过程中遇到的问题\"></a> 同步过程中遇到的问题</h2>\n<h3 id=\"git-pull文件冲突报错\"><a class=\"markdownIt-Anchor\" href=\"#git-pull文件冲突报错\"></a> git pull文件冲突报错</h3>\n<p><img src=\"/2022/03/08/Hexo-synchronization/Screenshot%202022-03-08%20161552.png\" alt=\"Screenshot 2022-03-08 161552\"></p>\n<p>报错信息：</p>\n<p><code>error: Your local changes to the following files would be overwritten by merge</code></p>\n<p>报错原因：</p>\n<p>在同步的时候出现两个相同文件名内容不同的文件，导致冲突；比如笔记本修改了之前的某个文章，在台式机<code>pull</code> 的时候就会产生这样的错误。</p>\n<p>解决方法：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> stash <span class=\"token comment\"># 备份工作区内容</span>\n<span class=\"token function\">git</span> pull origin branch_name <span class=\"token comment\"># 下载分支内容</span>\n<span class=\"token function\">git</span> stash pop <span class=\"token comment\"># 恢复工作区内容</span></code></pre>\n<h3 id=\"clone后首次部署报错\"><a class=\"markdownIt-Anchor\" href=\"#clone后首次部署报错\"></a> Clone后首次部署报错</h3>\n<p><img src=\"/2022/03/08/Hexo-synchronization/image-20220310172557250.png\" alt=\"image-20220310172557250\"></p>\n<p>报错信息：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">fatal: <span class=\"token keyword\">in</span> unpopulated submodule <span class=\"token string\">'.deploy.git'</span>\nFATAL:<span class=\"token punctuation\">&#123;</span>\n\terror: Error: Spawn failed\n\t\t<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>报错原因：</p>\n<p>克隆远程分支到本地电脑的时候，把<code>.deploy.git</code>也一并克隆了过来，这个文件夹是部署到master的临时缓存文件夹，是另一个电脑部署用的，因此会产生冲突。</p>\n<p>解决方法：</p>\n<p>删掉本地的<code>.deploy.git</code>文件夹，重新部署。如果还有问题，可能是你开了多个命令行，多个terminal会产生冲突，全部关掉，重开一个来部署。</p>\n<h3 id=\"本地未关联远程分支报错\"><a class=\"markdownIt-Anchor\" href=\"#本地未关联远程分支报错\"></a> 本地未关联远程分支报错</h3>\n<p>报错信息：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">There is no tracking information <span class=\"token keyword\">for</span> the current branch.\nPlease specify <span class=\"token function\">which</span> branch you want to merge with.\nSee git-pull<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> details.\n\n<span class=\"token function\">git</span> pull <span class=\"token operator\">&lt;</span>remote<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>branch<span class=\"token operator\">></span>\n\nIf you wish to <span class=\"token builtin class-name\">set</span> tracking information <span class=\"token keyword\">for</span> this branch you can <span class=\"token keyword\">do</span> so with:\n\n<span class=\"token function\">git</span> branch --set-upstream-to<span class=\"token operator\">=</span>origin/<span class=\"token operator\">&lt;</span>branch<span class=\"token operator\">></span> release</code></pre>\n<p>报错原因：</p>\n<p>在建立新的本地分支后，未与GitHub分支关联，通常出现在首次添加新的电脑时报错。</p>\n<p>解决方法：</p>\n<p>他不是说的明明白白的嘛，你就按照他的提示加一行代码，关联上就完了！这里的<code>remote_branch</code>就是GitHub上的远程分支，<code>your branch</code>就是你的本地分支。</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> branch --set-upstream-to<span class=\"token operator\">=</span>origin/remote_branch your_branch</code></pre>\n<h3 id=\"fetch-first-报错\"><a class=\"markdownIt-Anchor\" href=\"#fetch-first-报错\"></a> fetch first 报错</h3>\n<p><img src=\"/2022/03/08/Hexo-synchronization/image-20220315180411753.png\" alt=\"image-20220315180411753\"></p>\n<p>报错原因：</p>\n<p>远程库版本与本地版本不一致导致的报错。</p>\n<p>解决方法：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> pull --rebase origin your_branch</code></pre>\n<h3 id=\"non-fast-forward-报错\"><a class=\"markdownIt-Anchor\" href=\"#non-fast-forward-报错\"></a> Non-fast-forward 报错</h3>\n<p><img src=\"/2022/03/08/Hexo-synchronization/image-20220516171510709.png\" alt=\"image-20220516171510709\"></p>\n<p>报错原因：</p>\n<p>别人上传到远程仓库后，你没有及时的同步或拉取到本地，但是你同时又添加了一些内容。当你在提交时，它会检测到你之前从远程仓库拉取的时候的仓库状态和现在的不一样。于是，它为了安全起见拒绝了你的提交。</p>\n<p>解决方法（推荐）：先合并之前的历史，再进行提交</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> fetch origin your_branch <span class=\"token comment\"># 先抓取远程仓库的更新到本地</span>\n<span class=\"token function\">git</span> merge origin your_branch <span class=\"token comment\"># 然后与你的本地仓库合并</span>\n<span class=\"token function\">git</span> pull --rebase origin your_branch <span class=\"token comment\"># 然后就可以提交修改了</span>\n</code></pre>\n<p>解决方法（不推荐）：丢弃之前的历史，强行提交</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> push --force <span class=\"token comment\"># 这种方法很不安全</span></code></pre>\n<hr>\n<p>注：本文部分内容参考自<a href=\"https://cloud.tencent.com/developer/article/1046404\">Hexo博客的安装部署及多电脑同步</a>，如有侵权，请联系我。</p>\n"},{"title":"Hexo文章发布指南","date":"2022-02-19T16:34:49.000Z","author":"Tony","katex":true,"_content":"\n## Upload your first article\n\n### Create a new post\n\n``` bash\nhexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\nhexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\nhexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\nhexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n\n### Advanced Settings\n\n​\t\tCreate a bat format file (e.g. `start.bat`) in the root folder of your blog.\n\n```bash\nhexo clean & hexo d & hexo g & hexo s\npause\n```\n\n​\t\tThen every time you uploaded a file or change any settings, you can just double click the .bat file to update your blog, which is very convenience.\n\n## Hexo发布类型样例\n\n### Title\n\n在md下直接使用 # 进行新建标题，左侧菜单栏会自动生成H1-H6的标题，very nice!\n\n<img src=\"Hexo_article/image-20220308162506034.png\" alt=\"image-20220308162506034\" style=\"zoom:50%;\" />\n\n### 头部字段\n\n在文章的第一行使用三个`-`（就是分割线）来创建头部字段。\n\n- 格式如下：\n\n```\ntitle: Hexo文章发布指南\ndate: 2077-02-20 00:34:49\nauthor: Tony\ncategories:\n\t- Hexo搭建\ntags: \n\t- tag1\n\t- tag2\nkatex: true\n```\n\n其中，`categories`在一篇文章中建议只设置一个，而`tags`可以设置很多个。这样可以防止文章分类混乱，在左侧菜单栏中可以很方便的访问。\n\n![image-20220308162715529](Hexo_article/image-20220308162715529.png)\n\n### 数学公式\n\n行内公式使用 $\\$$ 将数学公式括起来就好，行间公式使用两个$\\$\\$$，这跟md的格式是一样的。\n\n需要注意的是，如果文章中需要使用数学公式，最好在头部字段前添加`katex: true`的字样。\n\n- 数学公式样例：\n\n我是行内公式：$x=x^{45}+3$，我还可以接着写。。。\n$$\nx_1=x_3+2\\times x^6\\\\\n\\alpha：我是行间公式\\\\\n\\left[\n\\begin{matrix}\n1 & 2 & 3\\\\\n4 & 5 & 6\\\\\n7 & 8 & 9\\\\\n\\end{matrix}\n\\right]\n$$\n\n### 图片\n\n只需要将图片拖入md文档中即可，md会自动创建一个与文件名相同的文件夹以储存所有的图片素材，并会自动将图片复制到该文件夹中，因此所有的图片只需要输入相对路径即可。\n\n比如，本文章的名字为test，那么只需要这样写：`![IMG_1479](test/IMG_1479.jpg)`\n\n注：Hexo支持GIF格式的图片哦！\n\n![IMG_1479](Hexo_article/IMG_1479.jpg)\n\n![2d6f869662e83398f06070e2a14f838](Hexo_article/2d6f869662e83398f06070e2a14f838.jpg)\n\n![traffic-light](Hexo_article/traffic-light.gif)\n\n### 代码\n\n主题中默认代码有些会很丑，建议修改`_config.yml`中的指令把代码前面的行号取消，这样或许会变得好看一些，个人建议仅供参考。\n\n```c++\n#include<iostream>\nusing namespace std;\nint main()\n{\n\tint a,b,c;\n\tcin>>a>>c;\n\tfor(int i=0;i<a;i++)\n\t\tcout<<c*a<<endl;\n\treturn 0;\n}\n```\n\n### 文字\n\n- 高亮语法：==Highlight==ing （==）\n- 加粗：**Bold** （\\*\\*）\n- 斜体：*Wall*（\\*）\n- 删除线：~~请给我打钱~~（~~）\n\n### 音频及视频\n\n暂不支持。。。\n\n（正在努力开发中。。。）\n\n\n```html\n<video src='test/DSC_7412.MOV' \n       type='video/mp4' \n       controls='controls'  \n       preload=\"auto\"\n       width='100%' \n       height='100%'>\n</video>\n```\n\n$$\nEND\n$$\n","source":"_posts/Hexo_article.md","raw":"---\n\ntitle: Hexo文章发布指南\ndate: 2022-02-20 00:34:49\nauthor: Tony\ncategories:\n\t- Hexo搭建\ntags: \n\t- Hexo\nkatex: true\n---\n\n## Upload your first article\n\n### Create a new post\n\n``` bash\nhexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\nhexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\nhexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\nhexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n\n### Advanced Settings\n\n​\t\tCreate a bat format file (e.g. `start.bat`) in the root folder of your blog.\n\n```bash\nhexo clean & hexo d & hexo g & hexo s\npause\n```\n\n​\t\tThen every time you uploaded a file or change any settings, you can just double click the .bat file to update your blog, which is very convenience.\n\n## Hexo发布类型样例\n\n### Title\n\n在md下直接使用 # 进行新建标题，左侧菜单栏会自动生成H1-H6的标题，very nice!\n\n<img src=\"Hexo_article/image-20220308162506034.png\" alt=\"image-20220308162506034\" style=\"zoom:50%;\" />\n\n### 头部字段\n\n在文章的第一行使用三个`-`（就是分割线）来创建头部字段。\n\n- 格式如下：\n\n```\ntitle: Hexo文章发布指南\ndate: 2077-02-20 00:34:49\nauthor: Tony\ncategories:\n\t- Hexo搭建\ntags: \n\t- tag1\n\t- tag2\nkatex: true\n```\n\n其中，`categories`在一篇文章中建议只设置一个，而`tags`可以设置很多个。这样可以防止文章分类混乱，在左侧菜单栏中可以很方便的访问。\n\n![image-20220308162715529](Hexo_article/image-20220308162715529.png)\n\n### 数学公式\n\n行内公式使用 $\\$$ 将数学公式括起来就好，行间公式使用两个$\\$\\$$，这跟md的格式是一样的。\n\n需要注意的是，如果文章中需要使用数学公式，最好在头部字段前添加`katex: true`的字样。\n\n- 数学公式样例：\n\n我是行内公式：$x=x^{45}+3$，我还可以接着写。。。\n$$\nx_1=x_3+2\\times x^6\\\\\n\\alpha：我是行间公式\\\\\n\\left[\n\\begin{matrix}\n1 & 2 & 3\\\\\n4 & 5 & 6\\\\\n7 & 8 & 9\\\\\n\\end{matrix}\n\\right]\n$$\n\n### 图片\n\n只需要将图片拖入md文档中即可，md会自动创建一个与文件名相同的文件夹以储存所有的图片素材，并会自动将图片复制到该文件夹中，因此所有的图片只需要输入相对路径即可。\n\n比如，本文章的名字为test，那么只需要这样写：`![IMG_1479](test/IMG_1479.jpg)`\n\n注：Hexo支持GIF格式的图片哦！\n\n![IMG_1479](Hexo_article/IMG_1479.jpg)\n\n![2d6f869662e83398f06070e2a14f838](Hexo_article/2d6f869662e83398f06070e2a14f838.jpg)\n\n![traffic-light](Hexo_article/traffic-light.gif)\n\n### 代码\n\n主题中默认代码有些会很丑，建议修改`_config.yml`中的指令把代码前面的行号取消，这样或许会变得好看一些，个人建议仅供参考。\n\n```c++\n#include<iostream>\nusing namespace std;\nint main()\n{\n\tint a,b,c;\n\tcin>>a>>c;\n\tfor(int i=0;i<a;i++)\n\t\tcout<<c*a<<endl;\n\treturn 0;\n}\n```\n\n### 文字\n\n- 高亮语法：==Highlight==ing （==）\n- 加粗：**Bold** （\\*\\*）\n- 斜体：*Wall*（\\*）\n- 删除线：~~请给我打钱~~（~~）\n\n### 音频及视频\n\n暂不支持。。。\n\n（正在努力开发中。。。）\n\n\n```html\n<video src='test/DSC_7412.MOV' \n       type='video/mp4' \n       controls='controls'  \n       preload=\"auto\"\n       width='100%' \n       height='100%'>\n</video>\n```\n\n$$\nEND\n$$\n","slug":"Hexo_article","published":1,"updated":"2022-03-09T04:56:58.325Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrd7001y1gzu7zj4a3hk","content":"<h2 id=\"upload-your-first-article\"><a class=\"markdownIt-Anchor\" href=\"#upload-your-first-article\"></a> Upload your first article</h2>\n<h3 id=\"create-a-new-post\"><a class=\"markdownIt-Anchor\" href=\"#create-a-new-post\"></a> Create a new post</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo new <span class=\"token string\">\"My New Post\"</span></code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"run-server\"><a class=\"markdownIt-Anchor\" href=\"#run-server\"></a> Run server</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo server</code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"generate-static-files\"><a class=\"markdownIt-Anchor\" href=\"#generate-static-files\"></a> Generate static files</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo generate</code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"markdownIt-Anchor\" href=\"#deploy-to-remote-sites\"></a> Deploy to remote sites</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo deploy</code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n<h3 id=\"advanced-settings\"><a class=\"markdownIt-Anchor\" href=\"#advanced-settings\"></a> Advanced Settings</h3>\n<p>​\t\tCreate a bat format file (e.g. <code>start.bat</code>) in the root folder of your blog.</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo clean <span class=\"token operator\">&amp;</span> hexo d <span class=\"token operator\">&amp;</span> hexo g <span class=\"token operator\">&amp;</span> hexo s\npause</code></pre>\n<p>​\t\tThen every time you uploaded a file or change any settings, you can just double click the .bat file to update your blog, which is very convenience.</p>\n<h2 id=\"hexo发布类型样例\"><a class=\"markdownIt-Anchor\" href=\"#hexo发布类型样例\"></a> Hexo发布类型样例</h2>\n<h3 id=\"title\"><a class=\"markdownIt-Anchor\" href=\"#title\"></a> Title</h3>\n<p>在md下直接使用 # 进行新建标题，左侧菜单栏会自动生成H1-H6的标题，very nice!</p>\n<img src=\"/2022/02/20/Hexo_article/image-20220308162506034.png\" alt=\"image-20220308162506034\" style=\"zoom:50%;\" loading=\"lazy\">\n<h3 id=\"头部字段\"><a class=\"markdownIt-Anchor\" href=\"#头部字段\"></a> 头部字段</h3>\n<p>在文章的第一行使用三个<code>-</code>（就是分割线）来创建头部字段。</p>\n<ul>\n<li>格式如下：</li>\n</ul>\n<pre class=\"language-none\"><code class=\"language-none\">title: Hexo文章发布指南\ndate: 2077-02-20 00:34:49\nauthor: Tony\ncategories:\n\t- Hexo搭建\ntags: \n\t- tag1\n\t- tag2\nkatex: true</code></pre>\n<p>其中，<code>categories</code>在一篇文章中建议只设置一个，而<code>tags</code>可以设置很多个。这样可以防止文章分类混乱，在左侧菜单栏中可以很方便的访问。</p>\n<p><img src=\"/2022/02/20/Hexo_article/image-20220308162715529.png\" alt=\"image-20220308162715529\" loading=\"lazy\"></p>\n<h3 id=\"数学公式\"><a class=\"markdownIt-Anchor\" href=\"#数学公式\"></a> 数学公式</h3>\n<p>行内公式使用 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">$</mi></mrow><annotation encoding=\"application/x-tex\">\\$</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80556em;vertical-align:-0.05556em;\"></span><span class=\"mord\">$</span></span></span></span> 将数学公式括起来就好，行间公式使用两个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">$</mi><mi mathvariant=\"normal\">$</mi></mrow><annotation encoding=\"application/x-tex\">\\$\\$</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80556em;vertical-align:-0.05556em;\"></span><span class=\"mord\">$</span><span class=\"mord\">$</span></span></span></span>，这跟md的格式是一样的。</p>\n<p>需要注意的是，如果文章中需要使用数学公式，最好在头部字段前添加<code>katex: true</code>的字样。</p>\n<ul>\n<li>数学公式样例：</li>\n</ul>\n<p>我是行内公式：<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi><mo>=</mo><msup><mi>x</mi><mn>45</mn></msup><mo>+</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">x=x^{45}+3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">4</span><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span>，我还可以接着写。。。</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><msub><mi>x</mi><mn>3</mn></msub><mo>+</mo><mn>2</mn><mo>×</mo><msup><mi>x</mi><mn>6</mn></msup><mspace linebreak=\"newline\"></mspace><mi>α</mi><mi mathvariant=\"normal\">：</mi><mi mathvariant=\"normal\">我</mi><mi mathvariant=\"normal\">是</mi><mi mathvariant=\"normal\">行</mi><mi mathvariant=\"normal\">间</mi><mi mathvariant=\"normal\">公</mi><mi mathvariant=\"normal\">式</mi><mspace linebreak=\"newline\"></mspace><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>6</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>7</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>8</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>9</mn></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\">x_1=x_3+2\\times x^6\\\\\n\\alpha：我是行间公式\\\\\n\\left[\n\\begin{matrix}\n1 &amp; 2 &amp; 3\\\\\n4 &amp; 5 &amp; 6\\\\\n7 &amp; 8 &amp; 9\\\\\n\\end{matrix}\n\\right]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8641079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord cjk_fallback\">：</span><span class=\"mord cjk_fallback\">我</span><span class=\"mord cjk_fallback\">是</span><span class=\"mord cjk_fallback\">行</span><span class=\"mord cjk_fallback\">间</span><span class=\"mord cjk_fallback\">公</span><span class=\"mord cjk_fallback\">式</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:3.60004em;vertical-align:-1.55002em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05002em;\"><span style=\"top:-2.2500000000000004em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎣</span></span></span><span style=\"top:-4.05002em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎡</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.55002em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05em;\"><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span><span style=\"top:-3.0099999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">4</span></span></span><span style=\"top:-1.8099999999999994em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">7</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5500000000000007em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05em;\"><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.0099999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span><span style=\"top:-1.8099999999999994em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">8</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5500000000000007em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05em;\"><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span></span></span><span style=\"top:-3.0099999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">6</span></span></span><span style=\"top:-1.8099999999999994em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">9</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5500000000000007em;\"><span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05002em;\"><span style=\"top:-2.2500000000000004em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎦</span></span></span><span style=\"top:-4.05002em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎤</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.55002em;\"><span></span></span></span></span></span></span></span></span></span></span></span></p>\n<h3 id=\"图片\"><a class=\"markdownIt-Anchor\" href=\"#图片\"></a> 图片</h3>\n<p>只需要将图片拖入md文档中即可，md会自动创建一个与文件名相同的文件夹以储存所有的图片素材，并会自动将图片复制到该文件夹中，因此所有的图片只需要输入相对路径即可。</p>\n<p>比如，本文章的名字为test，那么只需要这样写：<code>![IMG_1479](test/IMG_1479.jpg)</code></p>\n<p>注：Hexo支持GIF格式的图片哦！</p>\n<p><img src=\"/2022/02/20/Hexo_article/IMG_1479.jpg\" alt=\"IMG_1479\" loading=\"lazy\"></p>\n<p><img src=\"/2022/02/20/Hexo_article/2d6f869662e83398f06070e2a14f838.jpg\" alt=\"2d6f869662e83398f06070e2a14f838\" loading=\"lazy\"></p>\n<p><img src=\"/2022/02/20/Hexo_article/traffic-light.gif\" alt=\"traffic-light\" loading=\"lazy\"></p>\n<h3 id=\"代码\"><a class=\"markdownIt-Anchor\" href=\"#代码\"></a> 代码</h3>\n<p>主题中默认代码有些会很丑，建议修改<code>_config.yml</code>中的指令把代码前面的行号取消，这样或许会变得好看一些，个人建议仅供参考。</p>\n<pre class=\"language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include&lt;iostream&gt;\nusing namespace std;\nint main()\n&#123;\n\tint a,b,c;\n\tcin&gt;&gt;a&gt;&gt;c;\n\tfor(int i&#x3D;0;i&lt;a;i++)\n\t\tcout&lt;&lt;c*a&lt;&lt;endl;\n\treturn 0;\n&#125;</code></pre>\n<h3 id=\"文字\"><a class=\"markdownIt-Anchor\" href=\"#文字\"></a> 文字</h3>\n<ul>\n<li>高亮语法：<mark>Highlight</mark>ing （==）</li>\n<li>加粗：<strong>Bold</strong> （**）</li>\n<li>斜体：<em>Wall</em>（*）</li>\n<li>删除线：<s>请给我打钱</s>（~~）</li>\n</ul>\n<h3 id=\"音频及视频\"><a class=\"markdownIt-Anchor\" href=\"#音频及视频\"></a> 音频及视频</h3>\n<p>暂不支持。。。</p>\n<p>（正在努力开发中。。。）</p>\n<pre class=\"language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>test/DSC_7412.MOV<span class=\"token punctuation\">'</span></span> \n       <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>video/mp4<span class=\"token punctuation\">'</span></span> \n       <span class=\"token attr-name\">controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>controls<span class=\"token punctuation\">'</span></span>  \n       <span class=\"token attr-name\">preload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>auto<span class=\"token punctuation\">\"</span></span>\n       <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>100%<span class=\"token punctuation\">'</span></span> \n       <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>100%<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span></code></pre>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>E</mi><mi>N</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">END\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"upload-your-first-article\"><a class=\"markdownIt-Anchor\" href=\"#upload-your-first-article\"></a> Upload your first article</h2>\n<h3 id=\"create-a-new-post\"><a class=\"markdownIt-Anchor\" href=\"#create-a-new-post\"></a> Create a new post</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo new <span class=\"token string\">\"My New Post\"</span></code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"run-server\"><a class=\"markdownIt-Anchor\" href=\"#run-server\"></a> Run server</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo server</code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"generate-static-files\"><a class=\"markdownIt-Anchor\" href=\"#generate-static-files\"></a> Generate static files</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo generate</code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"markdownIt-Anchor\" href=\"#deploy-to-remote-sites\"></a> Deploy to remote sites</h3>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo deploy</code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n<h3 id=\"advanced-settings\"><a class=\"markdownIt-Anchor\" href=\"#advanced-settings\"></a> Advanced Settings</h3>\n<p>​\t\tCreate a bat format file (e.g. <code>start.bat</code>) in the root folder of your blog.</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo clean <span class=\"token operator\">&amp;</span> hexo d <span class=\"token operator\">&amp;</span> hexo g <span class=\"token operator\">&amp;</span> hexo s\npause</code></pre>\n<p>​\t\tThen every time you uploaded a file or change any settings, you can just double click the .bat file to update your blog, which is very convenience.</p>\n<h2 id=\"hexo发布类型样例\"><a class=\"markdownIt-Anchor\" href=\"#hexo发布类型样例\"></a> Hexo发布类型样例</h2>\n<h3 id=\"title\"><a class=\"markdownIt-Anchor\" href=\"#title\"></a> Title</h3>\n<p>在md下直接使用 # 进行新建标题，左侧菜单栏会自动生成H1-H6的标题，very nice!</p>\n<img src=\"/2022/02/20/Hexo_article/image-20220308162506034.png\" alt=\"image-20220308162506034\" style=\"zoom:50%;\">\n<h3 id=\"头部字段\"><a class=\"markdownIt-Anchor\" href=\"#头部字段\"></a> 头部字段</h3>\n<p>在文章的第一行使用三个<code>-</code>（就是分割线）来创建头部字段。</p>\n<ul>\n<li>格式如下：</li>\n</ul>\n<pre class=\"language-none\"><code class=\"language-none\">title: Hexo文章发布指南\ndate: 2077-02-20 00:34:49\nauthor: Tony\ncategories:\n\t- Hexo搭建\ntags: \n\t- tag1\n\t- tag2\nkatex: true</code></pre>\n<p>其中，<code>categories</code>在一篇文章中建议只设置一个，而<code>tags</code>可以设置很多个。这样可以防止文章分类混乱，在左侧菜单栏中可以很方便的访问。</p>\n<p><img src=\"/2022/02/20/Hexo_article/image-20220308162715529.png\" alt=\"image-20220308162715529\"></p>\n<h3 id=\"数学公式\"><a class=\"markdownIt-Anchor\" href=\"#数学公式\"></a> 数学公式</h3>\n<p>行内公式使用 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">$</mi></mrow><annotation encoding=\"application/x-tex\">\\$</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80556em;vertical-align:-0.05556em;\"></span><span class=\"mord\">$</span></span></span></span> 将数学公式括起来就好，行间公式使用两个<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">$</mi><mi mathvariant=\"normal\">$</mi></mrow><annotation encoding=\"application/x-tex\">\\$\\$</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80556em;vertical-align:-0.05556em;\"></span><span class=\"mord\">$</span><span class=\"mord\">$</span></span></span></span>，这跟md的格式是一样的。</p>\n<p>需要注意的是，如果文章中需要使用数学公式，最好在头部字段前添加<code>katex: true</code>的字样。</p>\n<ul>\n<li>数学公式样例：</li>\n</ul>\n<p>我是行内公式：<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi><mo>=</mo><msup><mi>x</mi><mn>45</mn></msup><mo>+</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">x=x^{45}+3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">4</span><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span></span></span></span>，我还可以接着写。。。</p>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><msub><mi>x</mi><mn>3</mn></msub><mo>+</mo><mn>2</mn><mo>×</mo><msup><mi>x</mi><mn>6</mn></msup><mspace linebreak=\"newline\"></mspace><mi>α</mi><mi mathvariant=\"normal\">：</mi><mi mathvariant=\"normal\">我</mi><mi mathvariant=\"normal\">是</mi><mi mathvariant=\"normal\">行</mi><mi mathvariant=\"normal\">间</mi><mi mathvariant=\"normal\">公</mi><mi mathvariant=\"normal\">式</mi><mspace linebreak=\"newline\"></mspace><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>6</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>7</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>8</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>9</mn></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\">x_1=x_3+2\\times x^6\\\\\n\\alpha：我是行间公式\\\\\n\\left[\n\\begin{matrix}\n1 &amp; 2 &amp; 3\\\\\n4 &amp; 5 &amp; 6\\\\\n7 &amp; 8 &amp; 9\\\\\n\\end{matrix}\n\\right]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8641079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord cjk_fallback\">：</span><span class=\"mord cjk_fallback\">我</span><span class=\"mord cjk_fallback\">是</span><span class=\"mord cjk_fallback\">行</span><span class=\"mord cjk_fallback\">间</span><span class=\"mord cjk_fallback\">公</span><span class=\"mord cjk_fallback\">式</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:3.60004em;vertical-align:-1.55002em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05002em;\"><span style=\"top:-2.2500000000000004em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎣</span></span></span><span style=\"top:-4.05002em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎡</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.55002em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05em;\"><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span><span style=\"top:-3.0099999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">4</span></span></span><span style=\"top:-1.8099999999999994em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">7</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5500000000000007em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05em;\"><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.0099999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span><span style=\"top:-1.8099999999999994em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">8</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5500000000000007em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05em;\"><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span></span></span><span style=\"top:-3.0099999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">6</span></span></span><span style=\"top:-1.8099999999999994em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">9</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5500000000000007em;\"><span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05002em;\"><span style=\"top:-2.2500000000000004em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎦</span></span></span><span style=\"top:-4.05002em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎤</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.55002em;\"><span></span></span></span></span></span></span></span></span></span></span></span></p>\n<h3 id=\"图片\"><a class=\"markdownIt-Anchor\" href=\"#图片\"></a> 图片</h3>\n<p>只需要将图片拖入md文档中即可，md会自动创建一个与文件名相同的文件夹以储存所有的图片素材，并会自动将图片复制到该文件夹中，因此所有的图片只需要输入相对路径即可。</p>\n<p>比如，本文章的名字为test，那么只需要这样写：<code>![IMG_1479](test/IMG_1479.jpg)</code></p>\n<p>注：Hexo支持GIF格式的图片哦！</p>\n<p><img src=\"/2022/02/20/Hexo_article/IMG_1479.jpg\" alt=\"IMG_1479\"></p>\n<p><img src=\"/2022/02/20/Hexo_article/2d6f869662e83398f06070e2a14f838.jpg\" alt=\"2d6f869662e83398f06070e2a14f838\"></p>\n<p><img src=\"/2022/02/20/Hexo_article/traffic-light.gif\" alt=\"traffic-light\"></p>\n<h3 id=\"代码\"><a class=\"markdownIt-Anchor\" href=\"#代码\"></a> 代码</h3>\n<p>主题中默认代码有些会很丑，建议修改<code>_config.yml</code>中的指令把代码前面的行号取消，这样或许会变得好看一些，个人建议仅供参考。</p>\n<pre class=\"language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include&lt;iostream&gt;\nusing namespace std;\nint main()\n&#123;\n\tint a,b,c;\n\tcin&gt;&gt;a&gt;&gt;c;\n\tfor(int i&#x3D;0;i&lt;a;i++)\n\t\tcout&lt;&lt;c*a&lt;&lt;endl;\n\treturn 0;\n&#125;</code></pre>\n<h3 id=\"文字\"><a class=\"markdownIt-Anchor\" href=\"#文字\"></a> 文字</h3>\n<ul>\n<li>高亮语法：<mark>Highlight</mark>ing （==）</li>\n<li>加粗：<strong>Bold</strong> （**）</li>\n<li>斜体：<em>Wall</em>（*）</li>\n<li>删除线：<s>请给我打钱</s>（~~）</li>\n</ul>\n<h3 id=\"音频及视频\"><a class=\"markdownIt-Anchor\" href=\"#音频及视频\"></a> 音频及视频</h3>\n<p>暂不支持。。。</p>\n<p>（正在努力开发中。。。）</p>\n<pre class=\"language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>test/DSC_7412.MOV<span class=\"token punctuation\">'</span></span> \n       <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>video/mp4<span class=\"token punctuation\">'</span></span> \n       <span class=\"token attr-name\">controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>controls<span class=\"token punctuation\">'</span></span>  \n       <span class=\"token attr-name\">preload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>auto<span class=\"token punctuation\">\"</span></span>\n       <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>100%<span class=\"token punctuation\">'</span></span> \n       <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>100%<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span></code></pre>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>E</mi><mi>N</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">END\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span></p>\n"},{"title":"Hexo 网站搭建指南","date":"2022-02-23T19:14:29.000Z","author":"Tony","_content":"# Hexo 网站搭建指南\n\nWelcome to [Hexo](https://hexo.io/)! \n\nThis is a Guideline of building your own hexo, which is written in English, but easy to understand!\n\n## Preparation and Installation\n\n### Git Installation\n\n- Linux/Mac:\n\n```bash\nsudo apt install git\n```\n\n- Windows:\n\nOfficial link: [Download git](https://gitforwindows.org/)\n\n- Check whether installed or not:\n\n```bash\ngit --version\n```\n\n### Nodejs Installation\n\n- Linux/Mac:\n\n```bash\nsudo apt install nodejs\nsudo aot install npm\n```\n\n- Windows:\n\nOfficial link: [nodejs](https://nodejs.org/en/download/) (Suggest you to choose LTS version)\n\n- Check whether installed or not:\n\n```bash\nnode -v\nnpm -v\n```\n\n### Hexo Installation\n\n- Linux/Mac:\n\n```bash\nsudo npm install -g hexo-cli\n```\n\n- Windows:\n\n```bash\nnpm install -g hexo-cli\n```\n\n- Check whether installed or not:\n\n```bash\nhexo -v\n```\n\n## Deploy local Hexo\n\n​\t\tFirst you need to **choose or create a folder** to storage the local hexo website. For instance, in `C:/Software/My_Hexo`.\n\n​\t\tThen right click the folder, click `open in Windows terminal`; or just use command line to get into that folder.\n\n```bash\nsudo hexo init Mybolg\nls Myblog\nsudo npm install\n```\n\n​\t\t*Note that you can replace `Mybolg` into any word you like.\n\n​\t\tNow you can see some files inside the folder, but only three folders you need to concerntrated.\n\n![image-20220308165404552](Hexo_creation/image-20220308165404552.png)\n\n- node_modules: 依赖包\n- public：存放生成的页面\n- scaffolds：生成文章的一些模板\n- ==source==：你的文章和素材放在这里\n- ==themes==：字面意思\n- ==_config.yml==: 博客的配置文件\n\n## Use GitHub to host\n\n### Create a new repository on GitHub\n\n​\t\tFirstly, you need to have a GitHub account…\n\n​\t\tThen, create a **new repository** on GitHub and named `yourusername.github.io`, note that you **must** named like this (`yourusername` is your user name), otherwise the deployment cannot be recognized.\n\n![image-20220308165502809](Hexo_creation/image-20220308165502809.png) \n\n### Add SSH key to GitHub\n\n​\t\tBack to the terminal, generate the SSH and add it into GitHub so that GitHub can know whether the your computer are visiting the corresponding account.\n\n```bash\ngit cofig --global user.name \"yourusername\"\ngit cofig --global user.email \"youremail\"\nssh-keygen -t rsa -C \"youremail\"\n```\n\n​\t\tThe computer then will tell you the path of `.ssh`, find it on your computer, and open it via notepad.\n\n​\t\tTo say it simpler, SSH is just the ID of your computer, GitHub recognized your computer via this ID. `id_rsa` is your private key that you cannot show it to others, while `id_rsa.pub` is the public key, you can copy the info to GitHub.\n\n​\t\t`Github -> settings -> personal settings -> SSH and PGP keys -> New SSH key`\n\n​\t\tYou can verify whether add the SSH key successfully via your terminal:\n\n```bash\nssh -T git@github.com\n```\n\n### Deploy hexo to GitHub\n\n​\t\tOpen your folder, remember the three folders that I let you to concentrate? Now it turns into `_config.yml` file, open it and add something in the end:\n\n```bash\ndeploy:\n  type: git\n  repo: https://github.com/yourusername/yourusername.github.io.git\n  branch: master\n```\n\n​\t\t*Notice the format must be totally same with me, pay attention to the **blanks**.\n\n​\t\tBefore deployment, you need to install the `deploy-git` in your computer so that you can deploy your own hexo into GitHub.\n\n```bash\nsudo npm install hexo-deployer-git --save\n```\n\n​\t\tFinally, deploy your website via the following commands, and you can visit your bolg via `http://yourusername.github.io`.\n\n```bash\nhexo clean\nhexo deploy\nhexo generate\n```\n\n---\n\n注：本文部分内容引用自[hexo史上最全搭建教程_Fangzh的技术博客](https://blog.csdn.net/sinat_37781304/article/details/82729029)， 如有侵权，请联系我。","source":"_posts/Hexo_creation.md","raw":"---\ntitle: Hexo 网站搭建指南\ndate: 2022-02-24 03:14:29\nauthor: Tony\ntags: \n\t- Hexo\ncategories:\n\t- Hexo搭建\n---\n# Hexo 网站搭建指南\n\nWelcome to [Hexo](https://hexo.io/)! \n\nThis is a Guideline of building your own hexo, which is written in English, but easy to understand!\n\n## Preparation and Installation\n\n### Git Installation\n\n- Linux/Mac:\n\n```bash\nsudo apt install git\n```\n\n- Windows:\n\nOfficial link: [Download git](https://gitforwindows.org/)\n\n- Check whether installed or not:\n\n```bash\ngit --version\n```\n\n### Nodejs Installation\n\n- Linux/Mac:\n\n```bash\nsudo apt install nodejs\nsudo aot install npm\n```\n\n- Windows:\n\nOfficial link: [nodejs](https://nodejs.org/en/download/) (Suggest you to choose LTS version)\n\n- Check whether installed or not:\n\n```bash\nnode -v\nnpm -v\n```\n\n### Hexo Installation\n\n- Linux/Mac:\n\n```bash\nsudo npm install -g hexo-cli\n```\n\n- Windows:\n\n```bash\nnpm install -g hexo-cli\n```\n\n- Check whether installed or not:\n\n```bash\nhexo -v\n```\n\n## Deploy local Hexo\n\n​\t\tFirst you need to **choose or create a folder** to storage the local hexo website. For instance, in `C:/Software/My_Hexo`.\n\n​\t\tThen right click the folder, click `open in Windows terminal`; or just use command line to get into that folder.\n\n```bash\nsudo hexo init Mybolg\nls Myblog\nsudo npm install\n```\n\n​\t\t*Note that you can replace `Mybolg` into any word you like.\n\n​\t\tNow you can see some files inside the folder, but only three folders you need to concerntrated.\n\n![image-20220308165404552](Hexo_creation/image-20220308165404552.png)\n\n- node_modules: 依赖包\n- public：存放生成的页面\n- scaffolds：生成文章的一些模板\n- ==source==：你的文章和素材放在这里\n- ==themes==：字面意思\n- ==_config.yml==: 博客的配置文件\n\n## Use GitHub to host\n\n### Create a new repository on GitHub\n\n​\t\tFirstly, you need to have a GitHub account…\n\n​\t\tThen, create a **new repository** on GitHub and named `yourusername.github.io`, note that you **must** named like this (`yourusername` is your user name), otherwise the deployment cannot be recognized.\n\n![image-20220308165502809](Hexo_creation/image-20220308165502809.png) \n\n### Add SSH key to GitHub\n\n​\t\tBack to the terminal, generate the SSH and add it into GitHub so that GitHub can know whether the your computer are visiting the corresponding account.\n\n```bash\ngit cofig --global user.name \"yourusername\"\ngit cofig --global user.email \"youremail\"\nssh-keygen -t rsa -C \"youremail\"\n```\n\n​\t\tThe computer then will tell you the path of `.ssh`, find it on your computer, and open it via notepad.\n\n​\t\tTo say it simpler, SSH is just the ID of your computer, GitHub recognized your computer via this ID. `id_rsa` is your private key that you cannot show it to others, while `id_rsa.pub` is the public key, you can copy the info to GitHub.\n\n​\t\t`Github -> settings -> personal settings -> SSH and PGP keys -> New SSH key`\n\n​\t\tYou can verify whether add the SSH key successfully via your terminal:\n\n```bash\nssh -T git@github.com\n```\n\n### Deploy hexo to GitHub\n\n​\t\tOpen your folder, remember the three folders that I let you to concentrate? Now it turns into `_config.yml` file, open it and add something in the end:\n\n```bash\ndeploy:\n  type: git\n  repo: https://github.com/yourusername/yourusername.github.io.git\n  branch: master\n```\n\n​\t\t*Notice the format must be totally same with me, pay attention to the **blanks**.\n\n​\t\tBefore deployment, you need to install the `deploy-git` in your computer so that you can deploy your own hexo into GitHub.\n\n```bash\nsudo npm install hexo-deployer-git --save\n```\n\n​\t\tFinally, deploy your website via the following commands, and you can visit your bolg via `http://yourusername.github.io`.\n\n```bash\nhexo clean\nhexo deploy\nhexo generate\n```\n\n---\n\n注：本文部分内容引用自[hexo史上最全搭建教程_Fangzh的技术博客](https://blog.csdn.net/sinat_37781304/article/details/82729029)， 如有侵权，请联系我。","slug":"Hexo_creation","published":1,"updated":"2022-03-08T08:55:02.862Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrd800201gzu4mc93iz5","content":"<h1 id=\"hexo-网站搭建指南\"><a class=\"markdownIt-Anchor\" href=\"#hexo-网站搭建指南\"></a> Hexo 网站搭建指南</h1>\n<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>!</p>\n<p>This is a Guideline of building your own hexo, which is written in English, but easy to understand!</p>\n<h2 id=\"preparation-and-installation\"><a class=\"markdownIt-Anchor\" href=\"#preparation-and-installation\"></a> Preparation and Installation</h2>\n<h3 id=\"git-installation\"><a class=\"markdownIt-Anchor\" href=\"#git-installation\"></a> Git Installation</h3>\n<ul>\n<li>Linux/Mac:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">git</span></code></pre>\n<ul>\n<li>Windows:</li>\n</ul>\n<p>Official link: <a href=\"https://gitforwindows.org/\">Download git</a></p>\n<ul>\n<li>Check whether installed or not:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> --version</code></pre>\n<h3 id=\"nodejs-installation\"><a class=\"markdownIt-Anchor\" href=\"#nodejs-installation\"></a> Nodejs Installation</h3>\n<ul>\n<li>Linux/Mac:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> nodejs\n<span class=\"token function\">sudo</span> aot <span class=\"token function\">install</span> <span class=\"token function\">npm</span></code></pre>\n<ul>\n<li>Windows:</li>\n</ul>\n<p>Official link: <a href=\"https://nodejs.org/en/download/\">nodejs</a> (Suggest you to choose LTS version)</p>\n<ul>\n<li>Check whether installed or not:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> -v\n<span class=\"token function\">npm</span> -v</code></pre>\n<h3 id=\"hexo-installation\"><a class=\"markdownIt-Anchor\" href=\"#hexo-installation\"></a> Hexo Installation</h3>\n<ul>\n<li>Linux/Mac:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g hexo-cli</code></pre>\n<ul>\n<li>Windows:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g hexo-cli</code></pre>\n<ul>\n<li>Check whether installed or not:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo -v</code></pre>\n<h2 id=\"deploy-local-hexo\"><a class=\"markdownIt-Anchor\" href=\"#deploy-local-hexo\"></a> Deploy local Hexo</h2>\n<p>​\t\tFirst you need to <strong>choose or create a folder</strong> to storage the local hexo website. For instance, in <code>C:/Software/My_Hexo</code>.</p>\n<p>​\t\tThen right click the folder, click <code>open in Windows terminal</code>; or just use command line to get into that folder.</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> hexo init Mybolg\n<span class=\"token function\">ls</span> Myblog\n<span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre>\n<p>​\t\t*Note that you can replace <code>Mybolg</code> into any word you like.</p>\n<p>​\t\tNow you can see some files inside the folder, but only three folders you need to concerntrated.</p>\n<p><img src=\"/2022/02/24/Hexo_creation/image-20220308165404552.png\" alt=\"image-20220308165404552\" loading=\"lazy\"></p>\n<ul>\n<li>node_modules: 依赖包</li>\n<li>public：存放生成的页面</li>\n<li>scaffolds：生成文章的一些模板</li>\n<li><mark>source</mark>：你的文章和素材放在这里</li>\n<li><mark>themes</mark>：字面意思</li>\n<li><mark>_config.yml</mark>: 博客的配置文件</li>\n</ul>\n<h2 id=\"use-github-to-host\"><a class=\"markdownIt-Anchor\" href=\"#use-github-to-host\"></a> Use GitHub to host</h2>\n<h3 id=\"create-a-new-repository-on-github\"><a class=\"markdownIt-Anchor\" href=\"#create-a-new-repository-on-github\"></a> Create a new repository on GitHub</h3>\n<p>​\t\tFirstly, you need to have a GitHub account…</p>\n<p>​\t\tThen, create a <strong>new repository</strong> on GitHub and named <code>yourusername.github.io</code>, note that you <strong>must</strong> named like this (<code>yourusername</code> is your user name), otherwise the deployment cannot be recognized.</p>\n<p><img src=\"/2022/02/24/Hexo_creation/image-20220308165502809.png\" alt=\"image-20220308165502809\" loading=\"lazy\"></p>\n<h3 id=\"add-ssh-key-to-github\"><a class=\"markdownIt-Anchor\" href=\"#add-ssh-key-to-github\"></a> Add SSH key to GitHub</h3>\n<p>​\t\tBack to the terminal, generate the SSH and add it into GitHub so that GitHub can know whether the your computer are visiting the corresponding account.</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> cofig --global user.name <span class=\"token string\">\"yourusername\"</span>\n<span class=\"token function\">git</span> cofig --global user.email <span class=\"token string\">\"youremail\"</span>\nssh-keygen -t rsa -C <span class=\"token string\">\"youremail\"</span></code></pre>\n<p>​\t\tThe computer then will tell you the path of <code>.ssh</code>, find it on your computer, and open it via notepad.</p>\n<p>​\t\tTo say it simpler, SSH is just the ID of your computer, GitHub recognized your computer via this ID. <code>id_rsa</code> is your private key that you cannot show it to others, while <code>id_rsa.pub</code> is the public key, you can copy the info to GitHub.</p>\n<p>​\t\t<code>Github -&gt; settings -&gt; personal settings -&gt; SSH and PGP keys -&gt; New SSH key</code></p>\n<p>​\t\tYou can verify whether add the SSH key successfully via your terminal:</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">ssh</span> -T git@github.com</code></pre>\n<h3 id=\"deploy-hexo-to-github\"><a class=\"markdownIt-Anchor\" href=\"#deploy-hexo-to-github\"></a> Deploy hexo to GitHub</h3>\n<p>​\t\tOpen your folder, remember the three folders that I let you to concentrate? Now it turns into <code>_config.yml</code> file, open it and add something in the end:</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">deploy:\n  type: <span class=\"token function\">git</span>\n  repo: https://github.com/yourusername/yourusername.github.io.git\n  branch: master</code></pre>\n<p>​\t\t*Notice the format must be totally same with me, pay attention to the <strong>blanks</strong>.</p>\n<p>​\t\tBefore deployment, you need to install the <code>deploy-git</code> in your computer so that you can deploy your own hexo into GitHub.</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> hexo-deployer-git --save</code></pre>\n<p>​\t\tFinally, deploy your website via the following commands, and you can visit your bolg via <code>http://yourusername.github.io</code>.</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo clean\nhexo deploy\nhexo generate</code></pre>\n<hr>\n<p>注：本文部分内容引用自<a href=\"https://blog.csdn.net/sinat_37781304/article/details/82729029\">hexo史上最全搭建教程_Fangzh的技术博客</a>， 如有侵权，请联系我。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"hexo-网站搭建指南\"><a class=\"markdownIt-Anchor\" href=\"#hexo-网站搭建指南\"></a> Hexo 网站搭建指南</h1>\n<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>!</p>\n<p>This is a Guideline of building your own hexo, which is written in English, but easy to understand!</p>\n<h2 id=\"preparation-and-installation\"><a class=\"markdownIt-Anchor\" href=\"#preparation-and-installation\"></a> Preparation and Installation</h2>\n<h3 id=\"git-installation\"><a class=\"markdownIt-Anchor\" href=\"#git-installation\"></a> Git Installation</h3>\n<ul>\n<li>Linux/Mac:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">git</span></code></pre>\n<ul>\n<li>Windows:</li>\n</ul>\n<p>Official link: <a href=\"https://gitforwindows.org/\">Download git</a></p>\n<ul>\n<li>Check whether installed or not:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> --version</code></pre>\n<h3 id=\"nodejs-installation\"><a class=\"markdownIt-Anchor\" href=\"#nodejs-installation\"></a> Nodejs Installation</h3>\n<ul>\n<li>Linux/Mac:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> nodejs\n<span class=\"token function\">sudo</span> aot <span class=\"token function\">install</span> <span class=\"token function\">npm</span></code></pre>\n<ul>\n<li>Windows:</li>\n</ul>\n<p>Official link: <a href=\"https://nodejs.org/en/download/\">nodejs</a> (Suggest you to choose LTS version)</p>\n<ul>\n<li>Check whether installed or not:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> -v\n<span class=\"token function\">npm</span> -v</code></pre>\n<h3 id=\"hexo-installation\"><a class=\"markdownIt-Anchor\" href=\"#hexo-installation\"></a> Hexo Installation</h3>\n<ul>\n<li>Linux/Mac:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g hexo-cli</code></pre>\n<ul>\n<li>Windows:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g hexo-cli</code></pre>\n<ul>\n<li>Check whether installed or not:</li>\n</ul>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo -v</code></pre>\n<h2 id=\"deploy-local-hexo\"><a class=\"markdownIt-Anchor\" href=\"#deploy-local-hexo\"></a> Deploy local Hexo</h2>\n<p>​\t\tFirst you need to <strong>choose or create a folder</strong> to storage the local hexo website. For instance, in <code>C:/Software/My_Hexo</code>.</p>\n<p>​\t\tThen right click the folder, click <code>open in Windows terminal</code>; or just use command line to get into that folder.</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> hexo init Mybolg\n<span class=\"token function\">ls</span> Myblog\n<span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre>\n<p>​\t\t*Note that you can replace <code>Mybolg</code> into any word you like.</p>\n<p>​\t\tNow you can see some files inside the folder, but only three folders you need to concerntrated.</p>\n<p><img src=\"/2022/02/24/Hexo_creation/image-20220308165404552.png\" alt=\"image-20220308165404552\"></p>\n<ul>\n<li>node_modules: 依赖包</li>\n<li>public：存放生成的页面</li>\n<li>scaffolds：生成文章的一些模板</li>\n<li><mark>source</mark>：你的文章和素材放在这里</li>\n<li><mark>themes</mark>：字面意思</li>\n<li><mark>_config.yml</mark>: 博客的配置文件</li>\n</ul>\n<h2 id=\"use-github-to-host\"><a class=\"markdownIt-Anchor\" href=\"#use-github-to-host\"></a> Use GitHub to host</h2>\n<h3 id=\"create-a-new-repository-on-github\"><a class=\"markdownIt-Anchor\" href=\"#create-a-new-repository-on-github\"></a> Create a new repository on GitHub</h3>\n<p>​\t\tFirstly, you need to have a GitHub account…</p>\n<p>​\t\tThen, create a <strong>new repository</strong> on GitHub and named <code>yourusername.github.io</code>, note that you <strong>must</strong> named like this (<code>yourusername</code> is your user name), otherwise the deployment cannot be recognized.</p>\n<p><img src=\"/2022/02/24/Hexo_creation/image-20220308165502809.png\" alt=\"image-20220308165502809\"></p>\n<h3 id=\"add-ssh-key-to-github\"><a class=\"markdownIt-Anchor\" href=\"#add-ssh-key-to-github\"></a> Add SSH key to GitHub</h3>\n<p>​\t\tBack to the terminal, generate the SSH and add it into GitHub so that GitHub can know whether the your computer are visiting the corresponding account.</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> cofig --global user.name <span class=\"token string\">\"yourusername\"</span>\n<span class=\"token function\">git</span> cofig --global user.email <span class=\"token string\">\"youremail\"</span>\nssh-keygen -t rsa -C <span class=\"token string\">\"youremail\"</span></code></pre>\n<p>​\t\tThe computer then will tell you the path of <code>.ssh</code>, find it on your computer, and open it via notepad.</p>\n<p>​\t\tTo say it simpler, SSH is just the ID of your computer, GitHub recognized your computer via this ID. <code>id_rsa</code> is your private key that you cannot show it to others, while <code>id_rsa.pub</code> is the public key, you can copy the info to GitHub.</p>\n<p>​\t\t<code>Github -&gt; settings -&gt; personal settings -&gt; SSH and PGP keys -&gt; New SSH key</code></p>\n<p>​\t\tYou can verify whether add the SSH key successfully via your terminal:</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">ssh</span> -T git@github.com</code></pre>\n<h3 id=\"deploy-hexo-to-github\"><a class=\"markdownIt-Anchor\" href=\"#deploy-hexo-to-github\"></a> Deploy hexo to GitHub</h3>\n<p>​\t\tOpen your folder, remember the three folders that I let you to concentrate? Now it turns into <code>_config.yml</code> file, open it and add something in the end:</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">deploy:\n  type: <span class=\"token function\">git</span>\n  repo: https://github.com/yourusername/yourusername.github.io.git\n  branch: master</code></pre>\n<p>​\t\t*Notice the format must be totally same with me, pay attention to the <strong>blanks</strong>.</p>\n<p>​\t\tBefore deployment, you need to install the <code>deploy-git</code> in your computer so that you can deploy your own hexo into GitHub.</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> hexo-deployer-git --save</code></pre>\n<p>​\t\tFinally, deploy your website via the following commands, and you can visit your bolg via <code>http://yourusername.github.io</code>.</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">hexo clean\nhexo deploy\nhexo generate</code></pre>\n<hr>\n<p>注：本文部分内容引用自<a href=\"https://blog.csdn.net/sinat_37781304/article/details/82729029\">hexo史上最全搭建教程_Fangzh的技术博客</a>， 如有侵权，请联系我。</p>\n"},{"title":"Internet Protocol Security","date":"2022-04-08T09:27:26.000Z","author":"Tony","katex":true,"_content":"\n# Secure Tunnel\n\n## Tunneling\n\n隧道是一种用于将数据安全地从一个网络传输到另一个网络的协议。\n\nTunneling is the technology to establish a logical connection between two end-points.\n\n当数据通过隧道传输时，它在穿过隧道时被分成称为*数据包的*更小部分。数据包通过隧道加密，并发生另一个称为*封装的*过程。对于传输，私有网络数据和协议细节被封装在公共网络传输单元中。这些单位具有公共数据的外观，允许它们通过互联网发送。封装使数据包能够到达其预定目的地。解封装和解密发生在最终目的地。\n\nAt the sending site, the original packet is encapsulated with a new outer header, then the tunneled packet is routed to the destination according to the information in the outer header, and finally the outer header is de-encapsulated at the receiving side. The original packet can be continued being routed according to the information in the inner header.\n\n![image-20220408173945688](IPsec/image-20220408173945688.png)\n\n## Tunneling protocols\n\n$$\nTunnel\\ Protocols \n\\left\\{\n\\begin{matrix}\n\tunsecure\n\t\\left\\{\n\t\\begin{matrix}\n\t\tLayer\\ 2\\ Tunneling\\ Protocol\\ (L2TP)\\\\\n\t\tGeneric\\ Routing\\ Encapsulation\\ (GRE)\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\tsecure\\to\n\n\t\\begin{matrix}\n\t\tInternet\\ Protocol\\ Security\\ (IPsec)\n\t\\end{matrix}\n\n\\end{matrix}\n\\right.\n$$\n\nInternet Protocol Security (IPsec) is a framework that can protect IP traffic on the network layer with the following features:\n\n- Confidentiality 机密性\n- Integrity 数据完整性\n- Authentication 源鉴别\n- Anti-reply 重放攻击防护\n\n## IPsec sub-protocols\n\n$$\nIPsec\n\\left\\{\n\\begin{matrix}\n\tAuthentication\\ Header\\ (AH)\n\t\\left\\{\n\t\\begin{matrix}\n\t\tMD5\\\\\n\t\tSHA\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\tEncapsulated\\ Security\\ Payload\\ (ESP)\n\t\\left\\{\n\t\\begin{matrix}\n\t\tDES\\\\\n\t\t3DES\\\\\n\t\tAES\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\\end{matrix}\n\\right.\n$$\n\n\n\nAH协议提供源鉴别和数据完整性服务，但不提供机密性服务。\n\nESP协议提供源鉴别，数据完整性和机密性服务； 因此ESP协议应用更为广泛。\n\nAH protocol produce Integrity and Authentication services, but do not produce Confidentiality.\n\nESP protocol produce Confidentiality, Authentication and Integrity; therefore ESP protocol has a broader application.\n\n## IPsec Datagram\n\n$$\nIPsec\n\\left\\{\n\\begin{matrix}\n\ttunnel\\ mode\\to\n\t2\\ routers, router\\ and\\ host, 2\\ hosts\n\t\\\\\n\ttransport\\ mode\\to\n\t2\\ hosts\\ only\n\t\\\\\n\\end{matrix}\n\\right.\n$$\n\nIPsec supports two modes of operation:\n\nThe **Transport Mode** is most commonly used to protect the communication between two hosts. \n\nThe **Tunnel Mode** is most commonly used to protect the communication between two routers by building a secure tunnel, commonly known as a **VPN**.\n\n## Authentication Header Protocol\n\nLayer 3 protocol\n\n**Transport mode**: an AH header after the IP header. The entire IP packet will be authenticated.\n\n![image-20220408182745880](IPsec/image-20220408182745880.png)\n\n**Tunnel mode**: a new IP header is added on top of the original IP packet. \n\n![image-20220408182806622](IPsec/image-20220408182806622.png)\n\n## Encapsulating Security Payload Protocol\n\nLayer 3 protocol\n\n**Transport mode**: the original IP header is used, and an ESP header and trailer are added. The transport layer (TCP for example) and payload will be encrypted. It also offers authentication but unlike AH, it’s not for the entire IP packet. \n\n![image-20220408182852006](IPsec/image-20220408182852006.png)\n\n**Tunnel mode**: a new header is added, and the original IP header is now also encrypted.\n\n![image-20220408182902202](IPsec/image-20220408182902202.png)\n\n# Virtual Private Network\n\nA Virtual private network (VPN) is a private network that securely connects two or more remote sites across a public network such as the Internet. Instead of using dedicated physical connections between networks, VPNs use virtual connections (secure tunnel) routed through public networks. \n\n![image-20220408183423694](IPsec/image-20220408183423694.png)\n\n## VPN Security\n\n- Data confidentiality: DES, 3DES, AES (ESP of IPsec)\n- Data integrity: MD5, SHA (AH of IPsec)\n- Data origin authentication: PSK, RSA.\n\n**IPsec VPN** consists of set of standards used to establish a VPN connection. Within the VPN implementation, IPsec is applied in tunnel mode, which supports the **Encapsulating Security Payload** **(ESP)** and **Authentication Header (AH)** protocols.\n\n## Types of VPN\n\n![image-20220408183817734](IPsec/image-20220408183817734.png)\n\n## Security Associations\n\nIPsec datagram在两个实体之间发送(e.g. router-router, router-host, host-host)，在datagram发送之前，两者创建了一个网络层的逻辑连接，我们将这个逻辑连接称为安全关联( Security Association, SA)。\n\n一个SA是一个单工逻辑链接，也就是说，如果两个设备之间要互相发送datagram，那么至少要创建2个SA，每个方向至少创建一个。\n\nA Security Associations (SA) is a unidirectional agreement between the VPN participants that specify the security parameter index (SPI), destination IP address, and security protocol to use in securing a  communication channel. \n\nFull bidirectional communication requires at least two SAs, one for each direction.\n\n## IPsec VPN operations\n\n1. Interesting traffic initiates the IPsec process\n2. IKE phase 1 - generate the IKE SA for IKE phase 2.\n3.  IKE phase 2 - generate the IPsec SA for data transfer.\n4. Data transfer between IPsec peers \n5. IPsec tunnel termination.\n\n*more info of IKE: [IPSec VPN之IKE协议详解 | 曹世宏的博客 (cshihong.github.io)](https://cshihong.github.io/2019/04/03/IPSec-VPN之IKE协议详解/)","source":"_posts/IPsec.md","raw":"---\ntitle: Internet Protocol Security\ndate: 2022-04-08 17:27:26\nauthor: Tony\ntags:\n\t- VPN\n\t- IPsec\n\t- Computer Network\ncategories:\n\t- 计算机网络\nkatex: true\n---\n\n# Secure Tunnel\n\n## Tunneling\n\n隧道是一种用于将数据安全地从一个网络传输到另一个网络的协议。\n\nTunneling is the technology to establish a logical connection between two end-points.\n\n当数据通过隧道传输时，它在穿过隧道时被分成称为*数据包的*更小部分。数据包通过隧道加密，并发生另一个称为*封装的*过程。对于传输，私有网络数据和协议细节被封装在公共网络传输单元中。这些单位具有公共数据的外观，允许它们通过互联网发送。封装使数据包能够到达其预定目的地。解封装和解密发生在最终目的地。\n\nAt the sending site, the original packet is encapsulated with a new outer header, then the tunneled packet is routed to the destination according to the information in the outer header, and finally the outer header is de-encapsulated at the receiving side. The original packet can be continued being routed according to the information in the inner header.\n\n![image-20220408173945688](IPsec/image-20220408173945688.png)\n\n## Tunneling protocols\n\n$$\nTunnel\\ Protocols \n\\left\\{\n\\begin{matrix}\n\tunsecure\n\t\\left\\{\n\t\\begin{matrix}\n\t\tLayer\\ 2\\ Tunneling\\ Protocol\\ (L2TP)\\\\\n\t\tGeneric\\ Routing\\ Encapsulation\\ (GRE)\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\tsecure\\to\n\n\t\\begin{matrix}\n\t\tInternet\\ Protocol\\ Security\\ (IPsec)\n\t\\end{matrix}\n\n\\end{matrix}\n\\right.\n$$\n\nInternet Protocol Security (IPsec) is a framework that can protect IP traffic on the network layer with the following features:\n\n- Confidentiality 机密性\n- Integrity 数据完整性\n- Authentication 源鉴别\n- Anti-reply 重放攻击防护\n\n## IPsec sub-protocols\n\n$$\nIPsec\n\\left\\{\n\\begin{matrix}\n\tAuthentication\\ Header\\ (AH)\n\t\\left\\{\n\t\\begin{matrix}\n\t\tMD5\\\\\n\t\tSHA\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\tEncapsulated\\ Security\\ Payload\\ (ESP)\n\t\\left\\{\n\t\\begin{matrix}\n\t\tDES\\\\\n\t\t3DES\\\\\n\t\tAES\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\\end{matrix}\n\\right.\n$$\n\n\n\nAH协议提供源鉴别和数据完整性服务，但不提供机密性服务。\n\nESP协议提供源鉴别，数据完整性和机密性服务； 因此ESP协议应用更为广泛。\n\nAH protocol produce Integrity and Authentication services, but do not produce Confidentiality.\n\nESP protocol produce Confidentiality, Authentication and Integrity; therefore ESP protocol has a broader application.\n\n## IPsec Datagram\n\n$$\nIPsec\n\\left\\{\n\\begin{matrix}\n\ttunnel\\ mode\\to\n\t2\\ routers, router\\ and\\ host, 2\\ hosts\n\t\\\\\n\ttransport\\ mode\\to\n\t2\\ hosts\\ only\n\t\\\\\n\\end{matrix}\n\\right.\n$$\n\nIPsec supports two modes of operation:\n\nThe **Transport Mode** is most commonly used to protect the communication between two hosts. \n\nThe **Tunnel Mode** is most commonly used to protect the communication between two routers by building a secure tunnel, commonly known as a **VPN**.\n\n## Authentication Header Protocol\n\nLayer 3 protocol\n\n**Transport mode**: an AH header after the IP header. The entire IP packet will be authenticated.\n\n![image-20220408182745880](IPsec/image-20220408182745880.png)\n\n**Tunnel mode**: a new IP header is added on top of the original IP packet. \n\n![image-20220408182806622](IPsec/image-20220408182806622.png)\n\n## Encapsulating Security Payload Protocol\n\nLayer 3 protocol\n\n**Transport mode**: the original IP header is used, and an ESP header and trailer are added. The transport layer (TCP for example) and payload will be encrypted. It also offers authentication but unlike AH, it’s not for the entire IP packet. \n\n![image-20220408182852006](IPsec/image-20220408182852006.png)\n\n**Tunnel mode**: a new header is added, and the original IP header is now also encrypted.\n\n![image-20220408182902202](IPsec/image-20220408182902202.png)\n\n# Virtual Private Network\n\nA Virtual private network (VPN) is a private network that securely connects two or more remote sites across a public network such as the Internet. Instead of using dedicated physical connections between networks, VPNs use virtual connections (secure tunnel) routed through public networks. \n\n![image-20220408183423694](IPsec/image-20220408183423694.png)\n\n## VPN Security\n\n- Data confidentiality: DES, 3DES, AES (ESP of IPsec)\n- Data integrity: MD5, SHA (AH of IPsec)\n- Data origin authentication: PSK, RSA.\n\n**IPsec VPN** consists of set of standards used to establish a VPN connection. Within the VPN implementation, IPsec is applied in tunnel mode, which supports the **Encapsulating Security Payload** **(ESP)** and **Authentication Header (AH)** protocols.\n\n## Types of VPN\n\n![image-20220408183817734](IPsec/image-20220408183817734.png)\n\n## Security Associations\n\nIPsec datagram在两个实体之间发送(e.g. router-router, router-host, host-host)，在datagram发送之前，两者创建了一个网络层的逻辑连接，我们将这个逻辑连接称为安全关联( Security Association, SA)。\n\n一个SA是一个单工逻辑链接，也就是说，如果两个设备之间要互相发送datagram，那么至少要创建2个SA，每个方向至少创建一个。\n\nA Security Associations (SA) is a unidirectional agreement between the VPN participants that specify the security parameter index (SPI), destination IP address, and security protocol to use in securing a  communication channel. \n\nFull bidirectional communication requires at least two SAs, one for each direction.\n\n## IPsec VPN operations\n\n1. Interesting traffic initiates the IPsec process\n2. IKE phase 1 - generate the IKE SA for IKE phase 2.\n3.  IKE phase 2 - generate the IPsec SA for data transfer.\n4. Data transfer between IPsec peers \n5. IPsec tunnel termination.\n\n*more info of IKE: [IPSec VPN之IKE协议详解 | 曹世宏的博客 (cshihong.github.io)](https://cshihong.github.io/2019/04/03/IPSec-VPN之IKE协议详解/)","slug":"IPsec","published":1,"updated":"2022-11-01T05:53:00.581Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrd900241gzu7a8l7tuo","content":"<h1 id=\"secure-tunnel\"><a class=\"markdownIt-Anchor\" href=\"#secure-tunnel\"></a> Secure Tunnel</h1>\n<h2 id=\"tunneling\"><a class=\"markdownIt-Anchor\" href=\"#tunneling\"></a> Tunneling</h2>\n<p>隧道是一种用于将数据安全地从一个网络传输到另一个网络的协议。</p>\n<p>Tunneling is the technology to establish a logical connection between two end-points.</p>\n<p>当数据通过隧道传输时，它在穿过隧道时被分成称为<em>数据包的</em>更小部分。数据包通过隧道加密，并发生另一个称为<em>封装的</em>过程。对于传输，私有网络数据和协议细节被封装在公共网络传输单元中。这些单位具有公共数据的外观，允许它们通过互联网发送。封装使数据包能够到达其预定目的地。解封装和解密发生在最终目的地。</p>\n<p>At the sending site, the original packet is encapsulated with a new outer header, then the tunneled packet is routed to the destination according to the information in the outer header, and finally the outer header is de-encapsulated at the receiving side. The original packet can be continued being routed according to the information in the inner header.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408173945688.png\" alt=\"image-20220408173945688\" loading=\"lazy\"></p>\n<h2 id=\"tunneling-protocols\"><a class=\"markdownIt-Anchor\" href=\"#tunneling-protocols\"></a> Tunneling protocols</h2>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>T</mi><mi>u</mi><mi>n</mi><mi>n</mi><mi>e</mi><mi>l</mi><mtext> </mtext><mi>P</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>o</mi><mi>c</mi><mi>o</mi><mi>l</mi><mi>s</mi><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>u</mi><mi>n</mi><mi>s</mi><mi>e</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>e</mi><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>L</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mtext> </mtext><mn>2</mn><mtext> </mtext><mi>T</mi><mi>u</mi><mi>n</mi><mi>n</mi><mi>e</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>g</mi><mtext> </mtext><mi>P</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>o</mi><mi>c</mi><mi>o</mi><mi>l</mi><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>L</mi><mn>2</mn><mi>T</mi><mi>P</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>G</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>c</mi><mtext> </mtext><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>g</mi><mtext> </mtext><mi>E</mi><mi>n</mi><mi>c</mi><mi>a</mi><mi>p</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>G</mi><mi>R</mi><mi>E</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>s</mi><mi>e</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>e</mi><mo>→</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>I</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>n</mi><mi>e</mi><mi>t</mi><mtext> </mtext><mi>P</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>o</mi><mi>c</mi><mi>o</mi><mi>l</mi><mtext> </mtext><mi>S</mi><mi>e</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>y</mi><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>I</mi><mi>P</mi><mi>s</mi><mi>e</mi><mi>c</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">Tunnel\\ Protocols \n\\left\\{\n\\begin{matrix}\n\tunsecure\n\t\\left\\{\n\t\\begin{matrix}\n\t\tLayer\\ 2\\ Tunneling\\ Protocol\\ (L2TP)\\\\\n\t\tGeneric\\ Routing\\ Encapsulation\\ (GRE)\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\tsecure\\to\n\n\t\\begin{matrix}\n\t\tInternet\\ Protocol\\ Security\\ (IPsec)\n\t\\end{matrix}\n\n\\end{matrix}\n\\right.\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3.61003em;vertical-align:-1.555015em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">s</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05002em;\"><span style=\"top:-2.49999em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎩</span></span></span><span style=\"top:-3.15001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎨</span></span></span><span style=\"top:-4.30002em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎧</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.55002em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.055015em;\"><span style=\"top:-4.055015em;\"><span class=\"pstrut\" style=\"height:3.45em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\"> </span><span class=\"mord\">2</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">L</span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">G</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">G</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-2.254985em;\"><span class=\"pstrut\" style=\"height:3.45em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8500000000000001em;\"><span style=\"top:-3.01em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35000000000000003em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.555015em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>Internet Protocol Security (IPsec) is a framework that can protect IP traffic on the network layer with the following features:</p>\n<ul>\n<li>Confidentiality 机密性</li>\n<li>Integrity 数据完整性</li>\n<li>Authentication 源鉴别</li>\n<li>Anti-reply 重放攻击防护</li>\n</ul>\n<h2 id=\"ipsec-sub-protocols\"><a class=\"markdownIt-Anchor\" href=\"#ipsec-sub-protocols\"></a> IPsec sub-protocols</h2>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>I</mi><mi>P</mi><mi>s</mi><mi>e</mi><mi>c</mi><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>A</mi><mi>u</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>c</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mtext> </mtext><mi>H</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>r</mi><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>A</mi><mi>H</mi><mo stretchy=\"false\">)</mo><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>M</mi><mi>D</mi><mn>5</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>S</mi><mi>H</mi><mi>A</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>E</mi><mi>n</mi><mi>c</mi><mi>a</mi><mi>p</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>d</mi><mtext> </mtext><mi>S</mi><mi>e</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>y</mi><mtext> </mtext><mi>P</mi><mi>a</mi><mi>y</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>E</mi><mi>S</mi><mi>P</mi><mo stretchy=\"false\">)</mo><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>D</mi><mi>E</mi><mi>S</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mn>3</mn><mi>D</mi><mi>E</mi><mi>S</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>A</mi><mi>E</mi><mi>S</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">IPsec\n\\left\\{\n\\begin{matrix}\n\tAuthentication\\ Header\\ (AH)\n\t\\left\\{\n\t\\begin{matrix}\n\t\tMD5\\\\\n\t\tSHA\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\tEncapsulated\\ Security\\ Payload\\ (ESP)\n\t\\left\\{\n\t\\begin{matrix}\n\t\tDES\\\\\n\t\t3DES\\\\\n\t\tAES\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\\end{matrix}\n\\right.\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.00007em;vertical-align:-2.750035em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2500199999999997em;\"><span style=\"top:-1.2999899999999998em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎩</span></span></span><span style=\"top:-1.2999899999999998em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-1.5999899999999998em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-1.8999899999999998em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-2.1999899999999997em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-3.15001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎨</span></span></span><span style=\"top:-4.30001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-4.60001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-4.90001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-5.20001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-5.500019999999999em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎧</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75002em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.250035em;\"><span style=\"top:-5.850055em;\"><span class=\"pstrut\" style=\"height:4.05002em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">5</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathdefault\">A</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-2.850005em;\"><span class=\"pstrut\" style=\"height:4.05002em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05002em;\"><span style=\"top:-2.49999em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎩</span></span></span><span style=\"top:-3.15001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎨</span></span></span><span style=\"top:-4.30002em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎧</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.55002em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05em;\"><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span><span style=\"top:-3.0099999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span><span style=\"top:-1.8099999999999994em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5500000000000007em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.750035em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>AH协议提供源鉴别和数据完整性服务，但不提供机密性服务。</p>\n<p>ESP协议提供源鉴别，数据完整性和机密性服务； 因此ESP协议应用更为广泛。</p>\n<p>AH protocol produce Integrity and Authentication services, but do not produce Confidentiality.</p>\n<p>ESP protocol produce Confidentiality, Authentication and Integrity; therefore ESP protocol has a broader application.</p>\n<h2 id=\"ipsec-datagram\"><a class=\"markdownIt-Anchor\" href=\"#ipsec-datagram\"></a> IPsec Datagram</h2>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>I</mi><mi>P</mi><mi>s</mi><mi>e</mi><mi>c</mi><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>t</mi><mi>u</mi><mi>n</mi><mi>n</mi><mi>e</mi><mi>l</mi><mtext> </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>→</mo><mn>2</mn><mtext> </mtext><mi>r</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>s</mi><mo separator=\"true\">,</mo><mi>r</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>h</mi><mi>o</mi><mi>s</mi><mi>t</mi><mo separator=\"true\">,</mo><mn>2</mn><mtext> </mtext><mi>h</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>s</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>p</mi><mi>o</mi><mi>r</mi><mi>t</mi><mtext> </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>→</mo><mn>2</mn><mtext> </mtext><mi>h</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>s</mi><mtext> </mtext><mi>o</mi><mi>n</mi><mi>l</mi><mi>y</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">IPsec\n\\left\\{\n\\begin{matrix}\n\ttunnel\\ mode\\to\n\t2\\ routers, router\\ and\\ host, 2\\ hosts\n\t\\\\\n\ttransport\\ mode\\to\n\t2\\ hosts\\ only\n\t\\\\\n\\end{matrix}\n\\right.\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.40003em;vertical-align:-0.95003em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">2</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">s</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">2</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>IPsec supports two modes of operation:</p>\n<p>The <strong>Transport Mode</strong> is most commonly used to protect the communication between two hosts.</p>\n<p>The <strong>Tunnel Mode</strong> is most commonly used to protect the communication between two routers by building a secure tunnel, commonly known as a <strong>VPN</strong>.</p>\n<h2 id=\"authentication-header-protocol\"><a class=\"markdownIt-Anchor\" href=\"#authentication-header-protocol\"></a> Authentication Header Protocol</h2>\n<p>Layer 3 protocol</p>\n<p><strong>Transport mode</strong>: an AH header after the IP header. The entire IP packet will be authenticated.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408182745880.png\" alt=\"image-20220408182745880\" loading=\"lazy\"></p>\n<p><strong>Tunnel mode</strong>: a new IP header is added on top of the original IP packet.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408182806622.png\" alt=\"image-20220408182806622\" loading=\"lazy\"></p>\n<h2 id=\"encapsulating-security-payload-protocol\"><a class=\"markdownIt-Anchor\" href=\"#encapsulating-security-payload-protocol\"></a> Encapsulating Security Payload Protocol</h2>\n<p>Layer 3 protocol</p>\n<p><strong>Transport mode</strong>: the original IP header is used, and an ESP header and trailer are added. The transport layer (TCP for example) and payload will be encrypted. It also offers authentication but unlike AH, it’s not for the entire IP packet.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408182852006.png\" alt=\"image-20220408182852006\" loading=\"lazy\"></p>\n<p><strong>Tunnel mode</strong>: a new header is added, and the original IP header is now also encrypted.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408182902202.png\" alt=\"image-20220408182902202\" loading=\"lazy\"></p>\n<h1 id=\"virtual-private-network\"><a class=\"markdownIt-Anchor\" href=\"#virtual-private-network\"></a> Virtual Private Network</h1>\n<p>A Virtual private network (VPN) is a private network that securely connects two or more remote sites across a public network such as the Internet. Instead of using dedicated physical connections between networks, VPNs use virtual connections (secure tunnel) routed through public networks.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408183423694.png\" alt=\"image-20220408183423694\" loading=\"lazy\"></p>\n<h2 id=\"vpn-security\"><a class=\"markdownIt-Anchor\" href=\"#vpn-security\"></a> VPN Security</h2>\n<ul>\n<li>Data confidentiality: DES, 3DES, AES (ESP of IPsec)</li>\n<li>Data integrity: MD5, SHA (AH of IPsec)</li>\n<li>Data origin authentication: PSK, RSA.</li>\n</ul>\n<p><strong>IPsec VPN</strong> consists of set of standards used to establish a VPN connection. Within the VPN implementation, IPsec is applied in tunnel mode, which supports the <strong>Encapsulating Security Payload</strong> <strong>(ESP)</strong> and <strong>Authentication Header (AH)</strong> protocols.</p>\n<h2 id=\"types-of-vpn\"><a class=\"markdownIt-Anchor\" href=\"#types-of-vpn\"></a> Types of VPN</h2>\n<p><img src=\"/2022/04/08/IPsec/image-20220408183817734.png\" alt=\"image-20220408183817734\" loading=\"lazy\"></p>\n<h2 id=\"security-associations\"><a class=\"markdownIt-Anchor\" href=\"#security-associations\"></a> Security Associations</h2>\n<p>IPsec datagram在两个实体之间发送(e.g. router-router, router-host, host-host)，在datagram发送之前，两者创建了一个网络层的逻辑连接，我们将这个逻辑连接称为安全关联( Security Association, SA)。</p>\n<p>一个SA是一个单工逻辑链接，也就是说，如果两个设备之间要互相发送datagram，那么至少要创建2个SA，每个方向至少创建一个。</p>\n<p>A Security Associations (SA) is a unidirectional agreement between the VPN participants that specify the security parameter index (SPI), destination IP address, and security protocol to use in securing a  communication channel.</p>\n<p>Full bidirectional communication requires at least two SAs, one for each direction.</p>\n<h2 id=\"ipsec-vpn-operations\"><a class=\"markdownIt-Anchor\" href=\"#ipsec-vpn-operations\"></a> IPsec VPN operations</h2>\n<ol>\n<li>Interesting traffic initiates the IPsec process</li>\n<li>IKE phase 1 - generate the IKE SA for IKE phase 2.</li>\n<li>IKE phase 2 - generate the IPsec SA for data transfer.</li>\n<li>Data transfer between IPsec peers</li>\n<li>IPsec tunnel termination.</li>\n</ol>\n<p>*more info of IKE: <a href=\"https://cshihong.github.io/2019/04/03/IPSec-VPN%E4%B9%8BIKE%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/\">IPSec VPN之IKE协议详解 | 曹世宏的博客 (cshihong.github.io)</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"secure-tunnel\"><a class=\"markdownIt-Anchor\" href=\"#secure-tunnel\"></a> Secure Tunnel</h1>\n<h2 id=\"tunneling\"><a class=\"markdownIt-Anchor\" href=\"#tunneling\"></a> Tunneling</h2>\n<p>隧道是一种用于将数据安全地从一个网络传输到另一个网络的协议。</p>\n<p>Tunneling is the technology to establish a logical connection between two end-points.</p>\n<p>当数据通过隧道传输时，它在穿过隧道时被分成称为<em>数据包的</em>更小部分。数据包通过隧道加密，并发生另一个称为<em>封装的</em>过程。对于传输，私有网络数据和协议细节被封装在公共网络传输单元中。这些单位具有公共数据的外观，允许它们通过互联网发送。封装使数据包能够到达其预定目的地。解封装和解密发生在最终目的地。</p>\n<p>At the sending site, the original packet is encapsulated with a new outer header, then the tunneled packet is routed to the destination according to the information in the outer header, and finally the outer header is de-encapsulated at the receiving side. The original packet can be continued being routed according to the information in the inner header.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408173945688.png\" alt=\"image-20220408173945688\"></p>\n<h2 id=\"tunneling-protocols\"><a class=\"markdownIt-Anchor\" href=\"#tunneling-protocols\"></a> Tunneling protocols</h2>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>T</mi><mi>u</mi><mi>n</mi><mi>n</mi><mi>e</mi><mi>l</mi><mtext> </mtext><mi>P</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>o</mi><mi>c</mi><mi>o</mi><mi>l</mi><mi>s</mi><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>u</mi><mi>n</mi><mi>s</mi><mi>e</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>e</mi><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>L</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mtext> </mtext><mn>2</mn><mtext> </mtext><mi>T</mi><mi>u</mi><mi>n</mi><mi>n</mi><mi>e</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>g</mi><mtext> </mtext><mi>P</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>o</mi><mi>c</mi><mi>o</mi><mi>l</mi><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>L</mi><mn>2</mn><mi>T</mi><mi>P</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>G</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>c</mi><mtext> </mtext><mi>R</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>g</mi><mtext> </mtext><mi>E</mi><mi>n</mi><mi>c</mi><mi>a</mi><mi>p</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>G</mi><mi>R</mi><mi>E</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>s</mi><mi>e</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>e</mi><mo>→</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>I</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>n</mi><mi>e</mi><mi>t</mi><mtext> </mtext><mi>P</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>o</mi><mi>c</mi><mi>o</mi><mi>l</mi><mtext> </mtext><mi>S</mi><mi>e</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>y</mi><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>I</mi><mi>P</mi><mi>s</mi><mi>e</mi><mi>c</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">Tunnel\\ Protocols \n\\left\\{\n\\begin{matrix}\n\tunsecure\n\t\\left\\{\n\t\\begin{matrix}\n\t\tLayer\\ 2\\ Tunneling\\ Protocol\\ (L2TP)\\\\\n\t\tGeneric\\ Routing\\ Encapsulation\\ (GRE)\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\tsecure\\to\n\n\t\\begin{matrix}\n\t\tInternet\\ Protocol\\ Security\\ (IPsec)\n\t\\end{matrix}\n\n\\end{matrix}\n\\right.\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3.61003em;vertical-align:-1.555015em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">s</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05002em;\"><span style=\"top:-2.49999em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎩</span></span></span><span style=\"top:-3.15001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎨</span></span></span><span style=\"top:-4.30002em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎧</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.55002em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.055015em;\"><span style=\"top:-4.055015em;\"><span class=\"pstrut\" style=\"height:3.45em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\"> </span><span class=\"mord\">2</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">L</span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">G</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">G</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-2.254985em;\"><span class=\"pstrut\" style=\"height:3.45em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8500000000000001em;\"><span style=\"top:-3.01em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35000000000000003em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.555015em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>Internet Protocol Security (IPsec) is a framework that can protect IP traffic on the network layer with the following features:</p>\n<ul>\n<li>Confidentiality 机密性</li>\n<li>Integrity 数据完整性</li>\n<li>Authentication 源鉴别</li>\n<li>Anti-reply 重放攻击防护</li>\n</ul>\n<h2 id=\"ipsec-sub-protocols\"><a class=\"markdownIt-Anchor\" href=\"#ipsec-sub-protocols\"></a> IPsec sub-protocols</h2>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>I</mi><mi>P</mi><mi>s</mi><mi>e</mi><mi>c</mi><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>A</mi><mi>u</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>c</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mtext> </mtext><mi>H</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>r</mi><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>A</mi><mi>H</mi><mo stretchy=\"false\">)</mo><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>M</mi><mi>D</mi><mn>5</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>S</mi><mi>H</mi><mi>A</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>E</mi><mi>n</mi><mi>c</mi><mi>a</mi><mi>p</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>d</mi><mtext> </mtext><mi>S</mi><mi>e</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>y</mi><mtext> </mtext><mi>P</mi><mi>a</mi><mi>y</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>E</mi><mi>S</mi><mi>P</mi><mo stretchy=\"false\">)</mo><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>D</mi><mi>E</mi><mi>S</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mn>3</mn><mi>D</mi><mi>E</mi><mi>S</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>A</mi><mi>E</mi><mi>S</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">IPsec\n\\left\\{\n\\begin{matrix}\n\tAuthentication\\ Header\\ (AH)\n\t\\left\\{\n\t\\begin{matrix}\n\t\tMD5\\\\\n\t\tSHA\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\tEncapsulated\\ Security\\ Payload\\ (ESP)\n\t\\left\\{\n\t\\begin{matrix}\n\t\tDES\\\\\n\t\t3DES\\\\\n\t\tAES\\\\\n\t\\end{matrix}\n\t\\right.\n\t\\\\\n\\end{matrix}\n\\right.\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.00007em;vertical-align:-2.750035em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2500199999999997em;\"><span style=\"top:-1.2999899999999998em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎩</span></span></span><span style=\"top:-1.2999899999999998em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-1.5999899999999998em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-1.8999899999999998em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-2.1999899999999997em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-3.15001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎨</span></span></span><span style=\"top:-4.30001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-4.60001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-4.90001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-5.20001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-5.500019999999999em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎧</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75002em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.250035em;\"><span style=\"top:-5.850055em;\"><span class=\"pstrut\" style=\"height:4.05002em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">5</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathdefault\">A</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-2.850005em;\"><span class=\"pstrut\" style=\"height:4.05002em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05002em;\"><span style=\"top:-2.49999em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎩</span></span></span><span style=\"top:-3.15001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎨</span></span></span><span style=\"top:-4.30002em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎧</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.55002em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.05em;\"><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span><span style=\"top:-3.0099999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span><span style=\"top:-1.8099999999999994em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5500000000000007em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.750035em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>AH协议提供源鉴别和数据完整性服务，但不提供机密性服务。</p>\n<p>ESP协议提供源鉴别，数据完整性和机密性服务； 因此ESP协议应用更为广泛。</p>\n<p>AH protocol produce Integrity and Authentication services, but do not produce Confidentiality.</p>\n<p>ESP protocol produce Confidentiality, Authentication and Integrity; therefore ESP protocol has a broader application.</p>\n<h2 id=\"ipsec-datagram\"><a class=\"markdownIt-Anchor\" href=\"#ipsec-datagram\"></a> IPsec Datagram</h2>\n<p class=\"katex-block\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>I</mi><mi>P</mi><mi>s</mi><mi>e</mi><mi>c</mi><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>t</mi><mi>u</mi><mi>n</mi><mi>n</mi><mi>e</mi><mi>l</mi><mtext> </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>→</mo><mn>2</mn><mtext> </mtext><mi>r</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>s</mi><mo separator=\"true\">,</mo><mi>r</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>h</mi><mi>o</mi><mi>s</mi><mi>t</mi><mo separator=\"true\">,</mo><mn>2</mn><mtext> </mtext><mi>h</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>s</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>p</mi><mi>o</mi><mi>r</mi><mi>t</mi><mtext> </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>→</mo><mn>2</mn><mtext> </mtext><mi>h</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>s</mi><mtext> </mtext><mi>o</mi><mi>n</mi><mi>l</mi><mi>y</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">IPsec\n\\left\\{\n\\begin{matrix}\n\ttunnel\\ mode\\to\n\t2\\ routers, router\\ and\\ host, 2\\ hosts\n\t\\\\\n\ttransport\\ mode\\to\n\t2\\ hosts\\ only\n\t\\\\\n\\end{matrix}\n\\right.\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.40003em;vertical-align:-0.95003em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">2</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">s</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">2</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mspace\"> </span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>IPsec supports two modes of operation:</p>\n<p>The <strong>Transport Mode</strong> is most commonly used to protect the communication between two hosts.</p>\n<p>The <strong>Tunnel Mode</strong> is most commonly used to protect the communication between two routers by building a secure tunnel, commonly known as a <strong>VPN</strong>.</p>\n<h2 id=\"authentication-header-protocol\"><a class=\"markdownIt-Anchor\" href=\"#authentication-header-protocol\"></a> Authentication Header Protocol</h2>\n<p>Layer 3 protocol</p>\n<p><strong>Transport mode</strong>: an AH header after the IP header. The entire IP packet will be authenticated.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408182745880.png\" alt=\"image-20220408182745880\"></p>\n<p><strong>Tunnel mode</strong>: a new IP header is added on top of the original IP packet.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408182806622.png\" alt=\"image-20220408182806622\"></p>\n<h2 id=\"encapsulating-security-payload-protocol\"><a class=\"markdownIt-Anchor\" href=\"#encapsulating-security-payload-protocol\"></a> Encapsulating Security Payload Protocol</h2>\n<p>Layer 3 protocol</p>\n<p><strong>Transport mode</strong>: the original IP header is used, and an ESP header and trailer are added. The transport layer (TCP for example) and payload will be encrypted. It also offers authentication but unlike AH, it’s not for the entire IP packet.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408182852006.png\" alt=\"image-20220408182852006\"></p>\n<p><strong>Tunnel mode</strong>: a new header is added, and the original IP header is now also encrypted.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408182902202.png\" alt=\"image-20220408182902202\"></p>\n<h1 id=\"virtual-private-network\"><a class=\"markdownIt-Anchor\" href=\"#virtual-private-network\"></a> Virtual Private Network</h1>\n<p>A Virtual private network (VPN) is a private network that securely connects two or more remote sites across a public network such as the Internet. Instead of using dedicated physical connections between networks, VPNs use virtual connections (secure tunnel) routed through public networks.</p>\n<p><img src=\"/2022/04/08/IPsec/image-20220408183423694.png\" alt=\"image-20220408183423694\"></p>\n<h2 id=\"vpn-security\"><a class=\"markdownIt-Anchor\" href=\"#vpn-security\"></a> VPN Security</h2>\n<ul>\n<li>Data confidentiality: DES, 3DES, AES (ESP of IPsec)</li>\n<li>Data integrity: MD5, SHA (AH of IPsec)</li>\n<li>Data origin authentication: PSK, RSA.</li>\n</ul>\n<p><strong>IPsec VPN</strong> consists of set of standards used to establish a VPN connection. Within the VPN implementation, IPsec is applied in tunnel mode, which supports the <strong>Encapsulating Security Payload</strong> <strong>(ESP)</strong> and <strong>Authentication Header (AH)</strong> protocols.</p>\n<h2 id=\"types-of-vpn\"><a class=\"markdownIt-Anchor\" href=\"#types-of-vpn\"></a> Types of VPN</h2>\n<p><img src=\"/2022/04/08/IPsec/image-20220408183817734.png\" alt=\"image-20220408183817734\"></p>\n<h2 id=\"security-associations\"><a class=\"markdownIt-Anchor\" href=\"#security-associations\"></a> Security Associations</h2>\n<p>IPsec datagram在两个实体之间发送(e.g. router-router, router-host, host-host)，在datagram发送之前，两者创建了一个网络层的逻辑连接，我们将这个逻辑连接称为安全关联( Security Association, SA)。</p>\n<p>一个SA是一个单工逻辑链接，也就是说，如果两个设备之间要互相发送datagram，那么至少要创建2个SA，每个方向至少创建一个。</p>\n<p>A Security Associations (SA) is a unidirectional agreement between the VPN participants that specify the security parameter index (SPI), destination IP address, and security protocol to use in securing a  communication channel.</p>\n<p>Full bidirectional communication requires at least two SAs, one for each direction.</p>\n<h2 id=\"ipsec-vpn-operations\"><a class=\"markdownIt-Anchor\" href=\"#ipsec-vpn-operations\"></a> IPsec VPN operations</h2>\n<ol>\n<li>Interesting traffic initiates the IPsec process</li>\n<li>IKE phase 1 - generate the IKE SA for IKE phase 2.</li>\n<li>IKE phase 2 - generate the IPsec SA for data transfer.</li>\n<li>Data transfer between IPsec peers</li>\n<li>IPsec tunnel termination.</li>\n</ol>\n<p>*more info of IKE: <a href=\"https://cshihong.github.io/2019/04/03/IPSec-VPN%E4%B9%8BIKE%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/\">IPSec VPN之IKE协议详解 | 曹世宏的博客 (cshihong.github.io)</a></p>\n"},{"title":"KMP字符串匹配算法","date":"2022-04-14T10:55:04.000Z","author":"Tony","katex":true,"_content":"\n## 算法简介\n\nKMP 算法（Knuth-Morris-Pratt 算法）是一个著名的字符串匹配算法，这个算法由Donald Knuth、Vaughan Pratt、James H. Morris三人于1977年联合发表，故取这3人的姓氏命名此算法。\n\n该算法的执行时间是线性的，且只需要对目标字符串进行预处理，而非搜索的字符串；此算法利用这一特性以避免重新检查先前配对的字符。\n\n该算法通常与BM算法同时被人们提及和熟知，其时间复杂度与空间复杂度均相同，但多数情况下KPM算法实际速度略逊一筹，如果还不了解BM算法，可以参考我的这篇文章：[BM字符串匹配算法 | Tony (tonylsx.top)](http://tonylsx.top/2022/03/27/BM-algorithm/)\n\n## KMP算法原理\n\n从起始位置不回溯地匹配字符串，当出现失配情况时，利用已经得到的部分结果，尽可能地向右移动更远的位置。具体通过一个`next[]`数组确定移动多远的距离。\n\n## KMP的实现\n\n最核心的问题便是如何求解`next[]`数组。而`next[]`数组的值即为公共前缀后缀长度向右移动一位的结果，特别的`next[0]=-1`。\n\n如下面这个例子：`string substr=\"abaabca\"`，他的公共前缀后缀长度为`string public=\"0011201\"`，那么next数组为`{-1,0,0,1,1,2,0}`.\n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20190423221541855.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l5enNpcg==,size_16,color_FFFFFF,t_70)\n\n## 完整代码\n\n```cpp\n#include <iostream>\n#include <string>\n#include <vector>\nusing namespace std;\nint KMP(string str, string substr);\nint main()\n{\n    string str=\"abcdfffaerssssse\";\n    string substr=\"aers\";\n    cout << KMP(str, substr) << endl;\n    return 0;\n}\n\nint KMP(string str, string substr)\n{\n    int n = str.size();\n    int m = substr.size();\n\n    vector<int> next(m);\n    for (int i = 1, j = 0; i < m; i++)//预处理\n    {\n        while (j > 0 && substr[i] != substr[j])\n            j = next[j - 1];\n        if (substr[i] == substr[j])\n            j++;\n        next[i] = j;\n    }\n    for (int i = 0, j = 0; i < n; i++)\n    {\n        while (j > 0 && str[i] != substr[j])\n            j = next[j - 1];\n        if (str[i] == substr[j])\n            j++;\n        if (j == m)\n            return i - m + 1;\n    }\n}\n```\n\n## KMP与有限状态自动机\n\n`next[]`数组可以以有限状态自动机的方式来理解，状态转移图便是`next[]`数组所储存的信息，一个是当前匹配的状态，另一个是遇到的字符。\n\n如`string substr=\"ABABC\"`，那么他的状态转移图如下所示：\n\n![image-20220415153721845](KPM-algorithm/image-20220415153721845.png)\n\n而`next[]={-1,0,0,1,1}`，不知是否看出某些规律呢?\n\n## 完整代码\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nconst int len=10000;\nint dp[len][256];\nstring str,substr;\n\nvoid KMP(string pat)\n{\n    int M = pat.length();\n    // dp[状态][字符] = 下个状态\n    dp[0][pat[0]] = 1;// base case\n    int X = 0;// 影子状态 X 初始为 0\n    for (int j = 1; j < M; j++)// 构建状态转移图\n    {\n        for (int c = 0; c < 256; c++)\n            dp[j][c] = dp[X][c];\n        dp[j][pat[j]] = j + 1;\n        X = dp[X][pat[j]];// 更新影子状态\n    }\n}\n\nint search(string txt)\n{\n    int M = substr.length();\n    int N = txt.length();\n\n    int j = 0;// pat 的初始态为 0\n    for (int i = 0; i < N; i++)\n    {\n        j = dp[j][txt[i]];// 计算 pat 的下一个状态\n        if (j == M) // 到达终止态，返回结果\n            return i - M + 1;\n    }\n    return -1;// 没到达终止态，匹配失败\n}\nint main()\n{\n    str=\"aaac5a9aab\";\n    substr=\"aaab\";\n    KMP(substr);\n    int ans=search(str);\n    cout<<ans<<endl;\n    return 0;\n}\n\n```\n\n## 参考文章\n\n1. [KMP 算法详解 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/83334559)\n2. [KMP算法详解_yyzsir的博客-CSDN博客_kmp算法详解](https://blog.csdn.net/yyzsir/article/details/89462339)","source":"_posts/KPM-algorithm.md","raw":"---\ntitle: KMP字符串匹配算法\ndate: 2022-04-14 18:55:04\ntags:\n\t- KPM\n\t- algorithm\ncategories:\n\t- algorithm\nauthor: Tony\nkatex: true\n---\n\n## 算法简介\n\nKMP 算法（Knuth-Morris-Pratt 算法）是一个著名的字符串匹配算法，这个算法由Donald Knuth、Vaughan Pratt、James H. Morris三人于1977年联合发表，故取这3人的姓氏命名此算法。\n\n该算法的执行时间是线性的，且只需要对目标字符串进行预处理，而非搜索的字符串；此算法利用这一特性以避免重新检查先前配对的字符。\n\n该算法通常与BM算法同时被人们提及和熟知，其时间复杂度与空间复杂度均相同，但多数情况下KPM算法实际速度略逊一筹，如果还不了解BM算法，可以参考我的这篇文章：[BM字符串匹配算法 | Tony (tonylsx.top)](http://tonylsx.top/2022/03/27/BM-algorithm/)\n\n## KMP算法原理\n\n从起始位置不回溯地匹配字符串，当出现失配情况时，利用已经得到的部分结果，尽可能地向右移动更远的位置。具体通过一个`next[]`数组确定移动多远的距离。\n\n## KMP的实现\n\n最核心的问题便是如何求解`next[]`数组。而`next[]`数组的值即为公共前缀后缀长度向右移动一位的结果，特别的`next[0]=-1`。\n\n如下面这个例子：`string substr=\"abaabca\"`，他的公共前缀后缀长度为`string public=\"0011201\"`，那么next数组为`{-1,0,0,1,1,2,0}`.\n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20190423221541855.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l5enNpcg==,size_16,color_FFFFFF,t_70)\n\n## 完整代码\n\n```cpp\n#include <iostream>\n#include <string>\n#include <vector>\nusing namespace std;\nint KMP(string str, string substr);\nint main()\n{\n    string str=\"abcdfffaerssssse\";\n    string substr=\"aers\";\n    cout << KMP(str, substr) << endl;\n    return 0;\n}\n\nint KMP(string str, string substr)\n{\n    int n = str.size();\n    int m = substr.size();\n\n    vector<int> next(m);\n    for (int i = 1, j = 0; i < m; i++)//预处理\n    {\n        while (j > 0 && substr[i] != substr[j])\n            j = next[j - 1];\n        if (substr[i] == substr[j])\n            j++;\n        next[i] = j;\n    }\n    for (int i = 0, j = 0; i < n; i++)\n    {\n        while (j > 0 && str[i] != substr[j])\n            j = next[j - 1];\n        if (str[i] == substr[j])\n            j++;\n        if (j == m)\n            return i - m + 1;\n    }\n}\n```\n\n## KMP与有限状态自动机\n\n`next[]`数组可以以有限状态自动机的方式来理解，状态转移图便是`next[]`数组所储存的信息，一个是当前匹配的状态，另一个是遇到的字符。\n\n如`string substr=\"ABABC\"`，那么他的状态转移图如下所示：\n\n![image-20220415153721845](KPM-algorithm/image-20220415153721845.png)\n\n而`next[]={-1,0,0,1,1}`，不知是否看出某些规律呢?\n\n## 完整代码\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nconst int len=10000;\nint dp[len][256];\nstring str,substr;\n\nvoid KMP(string pat)\n{\n    int M = pat.length();\n    // dp[状态][字符] = 下个状态\n    dp[0][pat[0]] = 1;// base case\n    int X = 0;// 影子状态 X 初始为 0\n    for (int j = 1; j < M; j++)// 构建状态转移图\n    {\n        for (int c = 0; c < 256; c++)\n            dp[j][c] = dp[X][c];\n        dp[j][pat[j]] = j + 1;\n        X = dp[X][pat[j]];// 更新影子状态\n    }\n}\n\nint search(string txt)\n{\n    int M = substr.length();\n    int N = txt.length();\n\n    int j = 0;// pat 的初始态为 0\n    for (int i = 0; i < N; i++)\n    {\n        j = dp[j][txt[i]];// 计算 pat 的下一个状态\n        if (j == M) // 到达终止态，返回结果\n            return i - M + 1;\n    }\n    return -1;// 没到达终止态，匹配失败\n}\nint main()\n{\n    str=\"aaac5a9aab\";\n    substr=\"aaab\";\n    KMP(substr);\n    int ans=search(str);\n    cout<<ans<<endl;\n    return 0;\n}\n\n```\n\n## 参考文章\n\n1. [KMP 算法详解 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/83334559)\n2. [KMP算法详解_yyzsir的博客-CSDN博客_kmp算法详解](https://blog.csdn.net/yyzsir/article/details/89462339)","slug":"KPM-algorithm","published":1,"updated":"2022-11-01T05:53:00.581Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrda00271gzu573s2snt","content":"<h2 id=\"算法简介\"><a class=\"markdownIt-Anchor\" href=\"#算法简介\"></a> 算法简介</h2>\n<p>KMP 算法（Knuth-Morris-Pratt 算法）是一个著名的字符串匹配算法，这个算法由Donald Knuth、Vaughan Pratt、James H. Morris三人于1977年联合发表，故取这3人的姓氏命名此算法。</p>\n<p>该算法的执行时间是线性的，且只需要对目标字符串进行预处理，而非搜索的字符串；此算法利用这一特性以避免重新检查先前配对的字符。</p>\n<p>该算法通常与BM算法同时被人们提及和熟知，其时间复杂度与空间复杂度均相同，但多数情况下KPM算法实际速度略逊一筹，如果还不了解BM算法，可以参考我的这篇文章：<a href=\"http://tonylsx.top/2022/03/27/BM-algorithm/\">BM字符串匹配算法 | Tony (tonylsx.top)</a></p>\n<h2 id=\"kmp算法原理\"><a class=\"markdownIt-Anchor\" href=\"#kmp算法原理\"></a> KMP算法原理</h2>\n<p>从起始位置不回溯地匹配字符串，当出现失配情况时，利用已经得到的部分结果，尽可能地向右移动更远的位置。具体通过一个<code>next[]</code>数组确定移动多远的距离。</p>\n<h2 id=\"kmp的实现\"><a class=\"markdownIt-Anchor\" href=\"#kmp的实现\"></a> KMP的实现</h2>\n<p>最核心的问题便是如何求解<code>next[]</code>数组。而<code>next[]</code>数组的值即为公共前缀后缀长度向右移动一位的结果，特别的<code>next[0]=-1</code>。</p>\n<p>如下面这个例子：<code>string substr=&quot;abaabca&quot;</code>，他的公共前缀后缀长度为<code>string public=&quot;0011201&quot;</code>，那么next数组为<code>&#123;-1,0,0,1,1,2,0&#125;</code>.</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20190423221541855.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l5enNpcg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\" loading=\"lazy\"></p>\n<h2 id=\"完整代码\"><a class=\"markdownIt-Anchor\" href=\"#完整代码\"></a> 完整代码</h2>\n<pre class=\"language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;vector></span></span>\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">KMP</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">,</span> string substr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    string str<span class=\"token operator\">=</span><span class=\"token string\">\"abcdfffaerssssse\"</span><span class=\"token punctuation\">;</span>\n    string substr<span class=\"token operator\">=</span><span class=\"token string\">\"aers\"</span><span class=\"token punctuation\">;</span>\n    cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">KMP</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> substr<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">KMP</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">,</span> string substr<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> m <span class=\"token operator\">=</span> substr<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> m<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//预处理</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> substr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> substr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            j <span class=\"token operator\">=</span> next<span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> substr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            j<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        next<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> j<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> substr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            j <span class=\"token operator\">=</span> next<span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> substr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            j<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">==</span> m<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> i <span class=\"token operator\">-</span> m <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kmp与有限状态自动机\"><a class=\"markdownIt-Anchor\" href=\"#kmp与有限状态自动机\"></a> KMP与有限状态自动机</h2>\n<p><code>next[]</code>数组可以以有限状态自动机的方式来理解，状态转移图便是<code>next[]</code>数组所储存的信息，一个是当前匹配的状态，另一个是遇到的字符。</p>\n<p>如<code>string substr=&quot;ABABC&quot;</code>，那么他的状态转移图如下所示：</p>\n<p><img src=\"/2022/04/14/KPM-algorithm/image-20220415153721845.png\" alt=\"image-20220415153721845\" loading=\"lazy\"></p>\n<p>而<code>next[]=&#123;-1,0,0,1,1&#125;</code>，不知是否看出某些规律呢?</p>\n<h2 id=\"完整代码-2\"><a class=\"markdownIt-Anchor\" href=\"#完整代码-2\"></a> 完整代码</h2>\n<pre class=\"language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span><span class=\"token number\">10000</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> dp<span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nstring str<span class=\"token punctuation\">,</span>substr<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">KMP</span><span class=\"token punctuation\">(</span>string pat<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> M <span class=\"token operator\">=</span> pat<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// dp[状态][字符] = 下个状态</span>\n    dp<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>pat<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// base case</span>\n    <span class=\"token keyword\">int</span> X <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 影子状态 X 初始为 0</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> M<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// 构建状态转移图</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> c <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> c <span class=\"token operator\">&lt;</span> <span class=\"token number\">256</span><span class=\"token punctuation\">;</span> c<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> dp<span class=\"token punctuation\">[</span>X<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>pat<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        X <span class=\"token operator\">=</span> dp<span class=\"token punctuation\">[</span>X<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>pat<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 更新影子状态</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>string txt<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> M <span class=\"token operator\">=</span> substr<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> N <span class=\"token operator\">=</span> txt<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// pat 的初始态为 0</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        j <span class=\"token operator\">=</span> dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>txt<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 计算 pat 的下一个状态</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">==</span> M<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 到达终止态，返回结果</span>\n            <span class=\"token keyword\">return</span> i <span class=\"token operator\">-</span> M <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 没到达终止态，匹配失败</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    str<span class=\"token operator\">=</span><span class=\"token string\">\"aaac5a9aab\"</span><span class=\"token punctuation\">;</span>\n    substr<span class=\"token operator\">=</span><span class=\"token string\">\"aaab\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">KMP</span><span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ans<span class=\"token operator\">=</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span>ans<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n</code></pre>\n<h2 id=\"参考文章\"><a class=\"markdownIt-Anchor\" href=\"#参考文章\"></a> 参考文章</h2>\n<ol>\n<li><a href=\"https://zhuanlan.zhihu.com/p/83334559\">KMP 算法详解 - 知乎 (zhihu.com)</a></li>\n<li><a href=\"https://blog.csdn.net/yyzsir/article/details/89462339\">KMP算法详解_yyzsir的博客-CSDN博客_kmp算法详解</a></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"算法简介\"><a class=\"markdownIt-Anchor\" href=\"#算法简介\"></a> 算法简介</h2>\n<p>KMP 算法（Knuth-Morris-Pratt 算法）是一个著名的字符串匹配算法，这个算法由Donald Knuth、Vaughan Pratt、James H. Morris三人于1977年联合发表，故取这3人的姓氏命名此算法。</p>\n<p>该算法的执行时间是线性的，且只需要对目标字符串进行预处理，而非搜索的字符串；此算法利用这一特性以避免重新检查先前配对的字符。</p>\n<p>该算法通常与BM算法同时被人们提及和熟知，其时间复杂度与空间复杂度均相同，但多数情况下KPM算法实际速度略逊一筹，如果还不了解BM算法，可以参考我的这篇文章：<a href=\"http://tonylsx.top/2022/03/27/BM-algorithm/\">BM字符串匹配算法 | Tony (tonylsx.top)</a></p>\n<h2 id=\"kmp算法原理\"><a class=\"markdownIt-Anchor\" href=\"#kmp算法原理\"></a> KMP算法原理</h2>\n<p>从起始位置不回溯地匹配字符串，当出现失配情况时，利用已经得到的部分结果，尽可能地向右移动更远的位置。具体通过一个<code>next[]</code>数组确定移动多远的距离。</p>\n<h2 id=\"kmp的实现\"><a class=\"markdownIt-Anchor\" href=\"#kmp的实现\"></a> KMP的实现</h2>\n<p>最核心的问题便是如何求解<code>next[]</code>数组。而<code>next[]</code>数组的值即为公共前缀后缀长度向右移动一位的结果，特别的<code>next[0]=-1</code>。</p>\n<p>如下面这个例子：<code>string substr=&quot;abaabca&quot;</code>，他的公共前缀后缀长度为<code>string public=&quot;0011201&quot;</code>，那么next数组为<code>&#123;-1,0,0,1,1,2,0&#125;</code>.</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20190423221541855.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l5enNpcg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<h2 id=\"完整代码\"><a class=\"markdownIt-Anchor\" href=\"#完整代码\"></a> 完整代码</h2>\n<pre class=\"language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;vector></span></span>\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">KMP</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">,</span> string substr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    string str<span class=\"token operator\">=</span><span class=\"token string\">\"abcdfffaerssssse\"</span><span class=\"token punctuation\">;</span>\n    string substr<span class=\"token operator\">=</span><span class=\"token string\">\"aers\"</span><span class=\"token punctuation\">;</span>\n    cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">KMP</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> substr<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">KMP</span><span class=\"token punctuation\">(</span>string str<span class=\"token punctuation\">,</span> string substr<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> m <span class=\"token operator\">=</span> substr<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> m<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//预处理</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> substr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> substr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            j <span class=\"token operator\">=</span> next<span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> substr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            j<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        next<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> j<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> substr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            j <span class=\"token operator\">=</span> next<span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> substr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            j<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">==</span> m<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> i <span class=\"token operator\">-</span> m <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"kmp与有限状态自动机\"><a class=\"markdownIt-Anchor\" href=\"#kmp与有限状态自动机\"></a> KMP与有限状态自动机</h2>\n<p><code>next[]</code>数组可以以有限状态自动机的方式来理解，状态转移图便是<code>next[]</code>数组所储存的信息，一个是当前匹配的状态，另一个是遇到的字符。</p>\n<p>如<code>string substr=&quot;ABABC&quot;</code>，那么他的状态转移图如下所示：</p>\n<p><img src=\"/2022/04/14/KPM-algorithm/image-20220415153721845.png\" alt=\"image-20220415153721845\"></p>\n<p>而<code>next[]=&#123;-1,0,0,1,1&#125;</code>，不知是否看出某些规律呢?</p>\n<h2 id=\"完整代码-2\"><a class=\"markdownIt-Anchor\" href=\"#完整代码-2\"></a> 完整代码</h2>\n<pre class=\"language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span><span class=\"token number\">10000</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> dp<span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nstring str<span class=\"token punctuation\">,</span>substr<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">KMP</span><span class=\"token punctuation\">(</span>string pat<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> M <span class=\"token operator\">=</span> pat<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// dp[状态][字符] = 下个状态</span>\n    dp<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>pat<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// base case</span>\n    <span class=\"token keyword\">int</span> X <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 影子状态 X 初始为 0</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> M<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// 构建状态转移图</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> c <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> c <span class=\"token operator\">&lt;</span> <span class=\"token number\">256</span><span class=\"token punctuation\">;</span> c<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> dp<span class=\"token punctuation\">[</span>X<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>pat<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        X <span class=\"token operator\">=</span> dp<span class=\"token punctuation\">[</span>X<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>pat<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 更新影子状态</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>string txt<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> M <span class=\"token operator\">=</span> substr<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> N <span class=\"token operator\">=</span> txt<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// pat 的初始态为 0</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        j <span class=\"token operator\">=</span> dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>txt<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 计算 pat 的下一个状态</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">==</span> M<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 到达终止态，返回结果</span>\n            <span class=\"token keyword\">return</span> i <span class=\"token operator\">-</span> M <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 没到达终止态，匹配失败</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    str<span class=\"token operator\">=</span><span class=\"token string\">\"aaac5a9aab\"</span><span class=\"token punctuation\">;</span>\n    substr<span class=\"token operator\">=</span><span class=\"token string\">\"aaab\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">KMP</span><span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ans<span class=\"token operator\">=</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span>ans<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n</code></pre>\n<h2 id=\"参考文章\"><a class=\"markdownIt-Anchor\" href=\"#参考文章\"></a> 参考文章</h2>\n<ol>\n<li><a href=\"https://zhuanlan.zhihu.com/p/83334559\">KMP 算法详解 - 知乎 (zhihu.com)</a></li>\n<li><a href=\"https://blog.csdn.net/yyzsir/article/details/89462339\">KMP算法详解_yyzsir的博客-CSDN博客_kmp算法详解</a></li>\n</ol>\n"},{"title":"PERT","date":"2022-03-12T17:49:43.000Z","author":"Tony","katex":true,"_content":"\nPERT: Program Evaluation and Review Technique\n\n## 1. Tasks\n\nTry to write source code to implement the REPT process, i.e., identifying critical activities and critical path, and calculating the time to complete this software project. The following requirements should be satisfied:\n\n1. Upload all source code files (non including some compiling files, configuration files, etc.).\n2. Given a example (the example in the slide or your another example) as an input of your source code, show the result of your source code by screenshot.\n3. You choose use a file folder to include all these files, and the compress it into a compressed file for submission.\n\n## 2. Basic Algorithms to solve this issue\n\n### 2.0 Variables and its meaning\n\n- EST: Earliest Start Time\n- EFT: Earliest Finish Time\n- LST: Latest Start Time\n- LFT: Latest Finish Time\n- PRT: Project Time Usage (of each activity)\n\n### 2.1 Store data into adjacency matrix\n\nIn a PRET example, firstly we need to know how many activities should we solve, namely, input num as the total of PRET activities. Next, we need to build an array to storage the time usage in each of the task, namely, PRT.\n\nThe most difficult task, relatively speaking compared with the following input, is to storage the immediate predecessors of each activities. We can either use adjacency matrix or adjacency linked list to storage the predecessors, in my program, I will use matrix instead of linked list since the value num is not too large.\n\n### 2.2 Topological sort\n\nAs we all know, topological sort algorithm is useful and convenient to solve the dependency resolution which is extremely similar to PREP, hence I will use topological sort algorithm to implement the **Earliest Start Time** of each node. And the key formula to get EST is\n\n```\nEST[j] = max(EST[i] + PRT[i],EST[j])\n```\n\n**Earliest Finish Time** is simple to achieve when we know the EST since\n`EFT = EST+PRT`\n\nThe rest of two arrays **Latest Start Time** and **Latest Finish Time** is harder to find out. Actually, we can find out either of the two values and the other is easy to know since\n`LST=LFT-PRT`\n\nWhat I need to do is reverse all the arrows in PREP, that is, change the last activity to the first activity and change the first activity to the last one, and reverse all the activities and immediate predecessors. Using the same method with solving the EST, we can find out the LFT in the same way. Just Transpose the adjacency matrix, and use the key formula\n`LST[j]=min(LFT[i]-PRT[i],LFT[j])`\n\n### 2.3 Solutions\n\nAfter Getting four arrays EST, EFT, LST, LFT, we can easily find the Critical activities and Critical paths by Slacks, and the formula is\n`Slack = LST-EST=LFT-EFT`\n\nIf Slack is not zero, then this activity is a critical activity and those slacks can contribute to the critical path.\n\n## 3. Example and Results\n\nWhile using the example given below, we can create a graph and given it into adjacency matrix.\n\n| ACTIVIEY CODE | IMMEDIATE PREDCESSORS | TIME USAGE |\n| :------------ | :-------------------- | :--------- |\n| 1             | –                     | 2          |\n| 2             | 1                     | 4          |\n| 3             | 2                     | 10         |\n| 4             | 3                     | 6          |\n| 5             | 3                     | 4          |\n| 6             | 5                     | 5          |\n| 7             | 4                     | 7          |\n| 8             | 5 7                   | 9          |\n| 9             | 3                     | 7          |\n| 10            | 6 9                   | 8          |\n| 11            | 10                    | 4          |\n| 12            | 10                    | 5          |\n| 13            | 8                     | 2          |\n| 14            | 11 12                 | 6          |\n\nThe input in the program is shown below:\n\n![img](PERT/image-20210926121305734.png)\n\nAnd the graph is shown in the graph into a matrix.\n\n![img](PERT/image-20210926121433312.png)\n\n![img](PERT/image-20210926121452437.png)\n\nFinally we can get the solutions using topological sort algorithm.\n\n![img](PERT/image-20210926121557824.png)\n\nAnd the solution is shown below.\n\n![img](PERT/image-20210926125842698.png)\n\n## 4. Code\n\n```c\n#include<iostream>\n#include<vector>\n#include<sstream>\n#include<string>\n#include<iomanip>\n#include<fstream>\n#include<stack>\nusing namespace std;\nifstream fin(\"data.txt\");\nint num;\nint main()\n{\n\t//******************* Read Datas *******************\n\tcout << \"Please input the number of total projects:\";\n\tfin >> num;\n\tcout << num << endl;\n\tint* pro_time = new int[num + 2];//Project time usage\n\tvector<vector<int>> map(num + 2, vector<int>(num + 2));//adjacency matrix\n\n\tfor (int i = 1; i <= num; i++)\n\t\tfor (int j = 1; j <= num; j++)\n\t\t\tmap[i][j] = 0;\n\n\tfor (int i = 1; i <= num; i++)\n\t{\n\t\tcout << \"Please input the time that Project \" << i << \" should be used:\";\n\t\tfin >> pro_time[i];\n\t\tcout << pro_time[i] << endl;\n\t\tcout << \"Please input which project(s) should be done before Project \" << i << \":\";\n\n\t\tvector<int> temp;\n\t\tfin.get();\n\t\tstring str;\n\t\tgetline(fin, str);\n\t\tint tt;\n\t\tstringstream ss(str);\n\t\twhile (ss >> tt)\n\t\t\ttemp.push_back(tt);\n\t\t\n\t\tcout << str << endl;\n\t\tif (temp.empty())\n\t\t\tcontinue;\n\t\telse\n\t\t\tfor (auto tt : temp)\n\t\t\t\tmap[tt][i] = pro_time[i];\n\t}\n\n\t//******************* EST and EFT *******************\n\tint* Earliset_Start = new int[num + 2];\n\tfor (int i = 1; i <= num; i++)\n\t\tEarliset_Start[i] = 0;\n\n\t//******************* Topological Sort *******************\n\tstack<int> stk;\n\tstk.push(1);\n\twhile (!stk.empty())\n\t{\n\t\tint i = stk.top();\n\t\tstk.pop();\n\t\tfor (int j = i + 1; j <= num; j++)\n\t\t\tif (map[i][j] != 0)\n\t\t\t{\n\t\t\t\tstk.push(j);\n\t\t\t\tEarliset_Start[j] = max(Earliset_Start[i] + pro_time[i], Earliset_Start[j]);\n\t\t\t}\n\t}\n\n\t//Earliset Finish\n\tint* Earliset_Finish = new int[num + 2];\n\tfor (int i = 1; i <= num; i++)\n\t\tEarliset_Finish[i] = Earliset_Start[i] + pro_time[i];\n\n\t//******************* LST and LFT **************************\n\tfor (int i = 1; i <= num; i++)\n\t\tfor (int j = i; j <= num; j++)\n\t\t\tif (map[i][j] != 0)\n\t\t\t{\n\t\t\t\tmap[j][i] = map[i][j];\n\t\t\t\tmap[i][j] = 0;\n\t\t\t}\n\n\tint* Latest_Finish = new int[num + 2];\n\tint Finish_time = Earliset_Finish[num];\n\tfor (int i = 1; i <= num; i++)\n\t\tLatest_Finish[i] = Finish_time;\n\t//******************* Topological Sort *******************\n\t\n\tstk.push(num);//need to optimize...\n\tstk.push(num - 1);//need to optimize...\n\twhile (!stk.empty())\n\t{\n\t\tint i = stk.top();\n\t\tstk.pop();\n\t\tfor (int j = 1; j < i; j++)\n\t\t\tif (map[i][j] != 0)\n\t\t\t{\n\t\t\t\tstk.push(j);\n\t\t\t\tLatest_Finish[j] = min(Latest_Finish[i] - pro_time[i], Latest_Finish[j]);\t\n\t\t\t}\n\t}\n\n\tint* Latest_Start = new int[num + 2];\n\tfor (int i = 1; i <= num; i++)\n\t\tLatest_Start[i] = Latest_Finish[i] - pro_time[i];\n\n\t//Critical Activities\n\tbool* Critical_Activities = new bool[num + 2];\n\tfor (int i = 1; i <= num; i++)\n\t\tif (Latest_Start[i] - Earliset_Start[i] != 0)\n\t\t\tCritical_Activities[i] = false;\n\t\telse\n\t\t\tCritical_Activities[i] = true;\n\n\t//******************* Solutions *******************\n\tprintf(\"________________________________________________\\n\");\n\tfor (int i = 1; i <= num; i++)\n\t{\n\t\tfor (int j = 1; j <= num; j++)\n\t\t\tcout << setw(2) << map[i][j] << \" \";\n\t\tcout << endl;\n\t}\n\tprintf(\"________________________________________________\\n\");\n\tcout << \"pro_time:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << pro_time[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Earest Start:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << Earliset_Start[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Earest Finish:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << Earliset_Finish[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Latest Start:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << Latest_Start[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Latest Finish:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << Latest_Finish[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Critical Activities:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << Critical_Activities[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Critical Paths: A\";\n\tfor (int i = 2; i <= num; i++)\n\t\tif (Critical_Activities[i])\n\t\t\tcout << \"->\" << char(i + 64);\n\n\treturn 0;\n}\n```","source":"_posts/PERT.md","raw":"---\ntitle: PERT\ndate: 2022-03-13 01:49:43\nauthor: Tony\ntags:\n\t- algorithm\n\t- PERT\ncategories:\n\t- algorithm\nkatex: true\n---\n\nPERT: Program Evaluation and Review Technique\n\n## 1. Tasks\n\nTry to write source code to implement the REPT process, i.e., identifying critical activities and critical path, and calculating the time to complete this software project. The following requirements should be satisfied:\n\n1. Upload all source code files (non including some compiling files, configuration files, etc.).\n2. Given a example (the example in the slide or your another example) as an input of your source code, show the result of your source code by screenshot.\n3. You choose use a file folder to include all these files, and the compress it into a compressed file for submission.\n\n## 2. Basic Algorithms to solve this issue\n\n### 2.0 Variables and its meaning\n\n- EST: Earliest Start Time\n- EFT: Earliest Finish Time\n- LST: Latest Start Time\n- LFT: Latest Finish Time\n- PRT: Project Time Usage (of each activity)\n\n### 2.1 Store data into adjacency matrix\n\nIn a PRET example, firstly we need to know how many activities should we solve, namely, input num as the total of PRET activities. Next, we need to build an array to storage the time usage in each of the task, namely, PRT.\n\nThe most difficult task, relatively speaking compared with the following input, is to storage the immediate predecessors of each activities. We can either use adjacency matrix or adjacency linked list to storage the predecessors, in my program, I will use matrix instead of linked list since the value num is not too large.\n\n### 2.2 Topological sort\n\nAs we all know, topological sort algorithm is useful and convenient to solve the dependency resolution which is extremely similar to PREP, hence I will use topological sort algorithm to implement the **Earliest Start Time** of each node. And the key formula to get EST is\n\n```\nEST[j] = max(EST[i] + PRT[i],EST[j])\n```\n\n**Earliest Finish Time** is simple to achieve when we know the EST since\n`EFT = EST+PRT`\n\nThe rest of two arrays **Latest Start Time** and **Latest Finish Time** is harder to find out. Actually, we can find out either of the two values and the other is easy to know since\n`LST=LFT-PRT`\n\nWhat I need to do is reverse all the arrows in PREP, that is, change the last activity to the first activity and change the first activity to the last one, and reverse all the activities and immediate predecessors. Using the same method with solving the EST, we can find out the LFT in the same way. Just Transpose the adjacency matrix, and use the key formula\n`LST[j]=min(LFT[i]-PRT[i],LFT[j])`\n\n### 2.3 Solutions\n\nAfter Getting four arrays EST, EFT, LST, LFT, we can easily find the Critical activities and Critical paths by Slacks, and the formula is\n`Slack = LST-EST=LFT-EFT`\n\nIf Slack is not zero, then this activity is a critical activity and those slacks can contribute to the critical path.\n\n## 3. Example and Results\n\nWhile using the example given below, we can create a graph and given it into adjacency matrix.\n\n| ACTIVIEY CODE | IMMEDIATE PREDCESSORS | TIME USAGE |\n| :------------ | :-------------------- | :--------- |\n| 1             | –                     | 2          |\n| 2             | 1                     | 4          |\n| 3             | 2                     | 10         |\n| 4             | 3                     | 6          |\n| 5             | 3                     | 4          |\n| 6             | 5                     | 5          |\n| 7             | 4                     | 7          |\n| 8             | 5 7                   | 9          |\n| 9             | 3                     | 7          |\n| 10            | 6 9                   | 8          |\n| 11            | 10                    | 4          |\n| 12            | 10                    | 5          |\n| 13            | 8                     | 2          |\n| 14            | 11 12                 | 6          |\n\nThe input in the program is shown below:\n\n![img](PERT/image-20210926121305734.png)\n\nAnd the graph is shown in the graph into a matrix.\n\n![img](PERT/image-20210926121433312.png)\n\n![img](PERT/image-20210926121452437.png)\n\nFinally we can get the solutions using topological sort algorithm.\n\n![img](PERT/image-20210926121557824.png)\n\nAnd the solution is shown below.\n\n![img](PERT/image-20210926125842698.png)\n\n## 4. Code\n\n```c\n#include<iostream>\n#include<vector>\n#include<sstream>\n#include<string>\n#include<iomanip>\n#include<fstream>\n#include<stack>\nusing namespace std;\nifstream fin(\"data.txt\");\nint num;\nint main()\n{\n\t//******************* Read Datas *******************\n\tcout << \"Please input the number of total projects:\";\n\tfin >> num;\n\tcout << num << endl;\n\tint* pro_time = new int[num + 2];//Project time usage\n\tvector<vector<int>> map(num + 2, vector<int>(num + 2));//adjacency matrix\n\n\tfor (int i = 1; i <= num; i++)\n\t\tfor (int j = 1; j <= num; j++)\n\t\t\tmap[i][j] = 0;\n\n\tfor (int i = 1; i <= num; i++)\n\t{\n\t\tcout << \"Please input the time that Project \" << i << \" should be used:\";\n\t\tfin >> pro_time[i];\n\t\tcout << pro_time[i] << endl;\n\t\tcout << \"Please input which project(s) should be done before Project \" << i << \":\";\n\n\t\tvector<int> temp;\n\t\tfin.get();\n\t\tstring str;\n\t\tgetline(fin, str);\n\t\tint tt;\n\t\tstringstream ss(str);\n\t\twhile (ss >> tt)\n\t\t\ttemp.push_back(tt);\n\t\t\n\t\tcout << str << endl;\n\t\tif (temp.empty())\n\t\t\tcontinue;\n\t\telse\n\t\t\tfor (auto tt : temp)\n\t\t\t\tmap[tt][i] = pro_time[i];\n\t}\n\n\t//******************* EST and EFT *******************\n\tint* Earliset_Start = new int[num + 2];\n\tfor (int i = 1; i <= num; i++)\n\t\tEarliset_Start[i] = 0;\n\n\t//******************* Topological Sort *******************\n\tstack<int> stk;\n\tstk.push(1);\n\twhile (!stk.empty())\n\t{\n\t\tint i = stk.top();\n\t\tstk.pop();\n\t\tfor (int j = i + 1; j <= num; j++)\n\t\t\tif (map[i][j] != 0)\n\t\t\t{\n\t\t\t\tstk.push(j);\n\t\t\t\tEarliset_Start[j] = max(Earliset_Start[i] + pro_time[i], Earliset_Start[j]);\n\t\t\t}\n\t}\n\n\t//Earliset Finish\n\tint* Earliset_Finish = new int[num + 2];\n\tfor (int i = 1; i <= num; i++)\n\t\tEarliset_Finish[i] = Earliset_Start[i] + pro_time[i];\n\n\t//******************* LST and LFT **************************\n\tfor (int i = 1; i <= num; i++)\n\t\tfor (int j = i; j <= num; j++)\n\t\t\tif (map[i][j] != 0)\n\t\t\t{\n\t\t\t\tmap[j][i] = map[i][j];\n\t\t\t\tmap[i][j] = 0;\n\t\t\t}\n\n\tint* Latest_Finish = new int[num + 2];\n\tint Finish_time = Earliset_Finish[num];\n\tfor (int i = 1; i <= num; i++)\n\t\tLatest_Finish[i] = Finish_time;\n\t//******************* Topological Sort *******************\n\t\n\tstk.push(num);//need to optimize...\n\tstk.push(num - 1);//need to optimize...\n\twhile (!stk.empty())\n\t{\n\t\tint i = stk.top();\n\t\tstk.pop();\n\t\tfor (int j = 1; j < i; j++)\n\t\t\tif (map[i][j] != 0)\n\t\t\t{\n\t\t\t\tstk.push(j);\n\t\t\t\tLatest_Finish[j] = min(Latest_Finish[i] - pro_time[i], Latest_Finish[j]);\t\n\t\t\t}\n\t}\n\n\tint* Latest_Start = new int[num + 2];\n\tfor (int i = 1; i <= num; i++)\n\t\tLatest_Start[i] = Latest_Finish[i] - pro_time[i];\n\n\t//Critical Activities\n\tbool* Critical_Activities = new bool[num + 2];\n\tfor (int i = 1; i <= num; i++)\n\t\tif (Latest_Start[i] - Earliset_Start[i] != 0)\n\t\t\tCritical_Activities[i] = false;\n\t\telse\n\t\t\tCritical_Activities[i] = true;\n\n\t//******************* Solutions *******************\n\tprintf(\"________________________________________________\\n\");\n\tfor (int i = 1; i <= num; i++)\n\t{\n\t\tfor (int j = 1; j <= num; j++)\n\t\t\tcout << setw(2) << map[i][j] << \" \";\n\t\tcout << endl;\n\t}\n\tprintf(\"________________________________________________\\n\");\n\tcout << \"pro_time:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << pro_time[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Earest Start:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << Earliset_Start[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Earest Finish:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << Earliset_Finish[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Latest Start:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << Latest_Start[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Latest Finish:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << Latest_Finish[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Critical Activities:\";\n\tfor (int i = 1; i <= num; i++)\n\t\tcout << Critical_Activities[i] << \" \";\n\tprintf(\"\\n________________________________________________\\n\");\n\tcout << \"Critical Paths: A\";\n\tfor (int i = 2; i <= num; i++)\n\t\tif (Critical_Activities[i])\n\t\t\tcout << \"->\" << char(i + 64);\n\n\treturn 0;\n}\n```","slug":"PERT","published":1,"updated":"2022-03-12T10:11:49.326Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrdc002c1gzu97no6fg3","content":"<p>PERT: Program Evaluation and Review Technique</p>\n<h2 id=\"1-tasks\"><a class=\"markdownIt-Anchor\" href=\"#1-tasks\"></a> 1. Tasks</h2>\n<p>Try to write source code to implement the REPT process, i.e., identifying critical activities and critical path, and calculating the time to complete this software project. The following requirements should be satisfied:</p>\n<ol>\n<li>Upload all source code files (non including some compiling files, configuration files, etc.).</li>\n<li>Given a example (the example in the slide or your another example) as an input of your source code, show the result of your source code by screenshot.</li>\n<li>You choose use a file folder to include all these files, and the compress it into a compressed file for submission.</li>\n</ol>\n<h2 id=\"2-basic-algorithms-to-solve-this-issue\"><a class=\"markdownIt-Anchor\" href=\"#2-basic-algorithms-to-solve-this-issue\"></a> 2. Basic Algorithms to solve this issue</h2>\n<h3 id=\"20-variables-and-its-meaning\"><a class=\"markdownIt-Anchor\" href=\"#20-variables-and-its-meaning\"></a> 2.0 Variables and its meaning</h3>\n<ul>\n<li>EST: Earliest Start Time</li>\n<li>EFT: Earliest Finish Time</li>\n<li>LST: Latest Start Time</li>\n<li>LFT: Latest Finish Time</li>\n<li>PRT: Project Time Usage (of each activity)</li>\n</ul>\n<h3 id=\"21-store-data-into-adjacency-matrix\"><a class=\"markdownIt-Anchor\" href=\"#21-store-data-into-adjacency-matrix\"></a> 2.1 Store data into adjacency matrix</h3>\n<p>In a PRET example, firstly we need to know how many activities should we solve, namely, input num as the total of PRET activities. Next, we need to build an array to storage the time usage in each of the task, namely, PRT.</p>\n<p>The most difficult task, relatively speaking compared with the following input, is to storage the immediate predecessors of each activities. We can either use adjacency matrix or adjacency linked list to storage the predecessors, in my program, I will use matrix instead of linked list since the value num is not too large.</p>\n<h3 id=\"22-topological-sort\"><a class=\"markdownIt-Anchor\" href=\"#22-topological-sort\"></a> 2.2 Topological sort</h3>\n<p>As we all know, topological sort algorithm is useful and convenient to solve the dependency resolution which is extremely similar to PREP, hence I will use topological sort algorithm to implement the <strong>Earliest Start Time</strong> of each node. And the key formula to get EST is</p>\n<pre class=\"language-none\"><code class=\"language-none\">EST[j] &#x3D; max(EST[i] + PRT[i],EST[j])</code></pre>\n<p><strong>Earliest Finish Time</strong> is simple to achieve when we know the EST since<br>\n<code>EFT = EST+PRT</code></p>\n<p>The rest of two arrays <strong>Latest Start Time</strong> and <strong>Latest Finish Time</strong> is harder to find out. Actually, we can find out either of the two values and the other is easy to know since<br>\n<code>LST=LFT-PRT</code></p>\n<p>What I need to do is reverse all the arrows in PREP, that is, change the last activity to the first activity and change the first activity to the last one, and reverse all the activities and immediate predecessors. Using the same method with solving the EST, we can find out the LFT in the same way. Just Transpose the adjacency matrix, and use the key formula<br>\n<code>LST[j]=min(LFT[i]-PRT[i],LFT[j])</code></p>\n<h3 id=\"23-solutions\"><a class=\"markdownIt-Anchor\" href=\"#23-solutions\"></a> 2.3 Solutions</h3>\n<p>After Getting four arrays EST, EFT, LST, LFT, we can easily find the Critical activities and Critical paths by Slacks, and the formula is<br>\n<code>Slack = LST-EST=LFT-EFT</code></p>\n<p>If Slack is not zero, then this activity is a critical activity and those slacks can contribute to the critical path.</p>\n<h2 id=\"3-example-and-results\"><a class=\"markdownIt-Anchor\" href=\"#3-example-and-results\"></a> 3. Example and Results</h2>\n<p>While using the example given below, we can create a graph and given it into adjacency matrix.</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ACTIVIEY CODE</th>\n<th style=\"text-align:left\">IMMEDIATE PREDCESSORS</th>\n<th style=\"text-align:left\">TIME USAGE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">–</td>\n<td style=\"text-align:left\">2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">2</td>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">4</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">2</td>\n<td style=\"text-align:left\">10</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">4</td>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">6</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">4</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">6</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">7</td>\n<td style=\"text-align:left\">4</td>\n<td style=\"text-align:left\">7</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">8</td>\n<td style=\"text-align:left\">5 7</td>\n<td style=\"text-align:left\">9</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">9</td>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">7</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">6 9</td>\n<td style=\"text-align:left\">8</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">11</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">4</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">12</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">5</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">13</td>\n<td style=\"text-align:left\">8</td>\n<td style=\"text-align:left\">2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">14</td>\n<td style=\"text-align:left\">11 12</td>\n<td style=\"text-align:left\">6</td>\n</tr>\n</tbody>\n</table>\n<p>The input in the program is shown below:</p>\n<p><img src=\"/2022/03/13/PERT/image-20210926121305734.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>And the graph is shown in the graph into a matrix.</p>\n<p><img src=\"/2022/03/13/PERT/image-20210926121433312.png\" alt=\"img\" loading=\"lazy\"></p>\n<p><img src=\"/2022/03/13/PERT/image-20210926121452437.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>Finally we can get the solutions using topological sort algorithm.</p>\n<p><img src=\"/2022/03/13/PERT/image-20210926121557824.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>And the solution is shown below.</p>\n<p><img src=\"/2022/03/13/PERT/image-20210926125842698.png\" alt=\"img\" loading=\"lazy\"></p>\n<h2 id=\"4-code\"><a class=\"markdownIt-Anchor\" href=\"#4-code\"></a> 4. Code</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;vector></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;sstream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iomanip></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;fstream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;stack></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\nifstream <span class=\"token function\">fin</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"data.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> num<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//******************* Read Datas *******************</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Please input the number of total projects:\"</span><span class=\"token punctuation\">;</span>\n\tfin <span class=\"token operator\">>></span> num<span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> num <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> pro_time <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//Project time usage</span>\n\tvector<span class=\"token operator\">&lt;</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span> <span class=\"token function\">map</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//adjacency matrix</span>\n\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\tmap<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Please input the time that Project \"</span> <span class=\"token operator\">&lt;&lt;</span> i <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" should be used:\"</span><span class=\"token punctuation\">;</span>\n\t\tfin <span class=\"token operator\">>></span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Please input which project(s) should be done before Project \"</span> <span class=\"token operator\">&lt;&lt;</span> i <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\":\"</span><span class=\"token punctuation\">;</span>\n\n\t\tvector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> temp<span class=\"token punctuation\">;</span>\n\t\tfin<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tstring str<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">getline</span><span class=\"token punctuation\">(</span>fin<span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">int</span> tt<span class=\"token punctuation\">;</span>\n\t\tstringstream <span class=\"token function\">ss</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>ss <span class=\"token operator\">>></span> tt<span class=\"token punctuation\">)</span>\n\t\t\ttemp<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>tt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> str <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> tt <span class=\"token operator\">:</span> temp<span class=\"token punctuation\">)</span>\n\t\t\t\tmap<span class=\"token punctuation\">[</span>tt<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token comment\">//******************* EST and EFT *******************</span>\n\t<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> Earliset_Start <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tEarliset_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//******************* Topological Sort *******************</span>\n\tstack<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> stk<span class=\"token punctuation\">;</span>\n\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stk<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> stk<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tEarliset_Start<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>Earliset_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> Earliset_Start<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token comment\">//Earliset Finish</span>\n\t<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> Earliset_Finish <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tEarliset_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Earliset_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//******************* LST and LFT **************************</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\tmap<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t\t\tmap<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> Latest_Finish <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> Finish_time <span class=\"token operator\">=</span> Earliset_Finish<span class=\"token punctuation\">[</span>num<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tLatest_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Finish_time<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//******************* Topological Sort *******************</span>\n\t\n\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//need to optimize...</span>\n\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//need to optimize...</span>\n\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stk<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> stk<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> i<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tLatest_Finish<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">min</span><span class=\"token punctuation\">(</span>Latest_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> Latest_Finish<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> Latest_Start <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tLatest_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Latest_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//Critical Activities</span>\n\tbool<span class=\"token operator\">*</span> Critical_Activities <span class=\"token operator\">=</span> new bool<span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Latest_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> Earliset_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\tCritical_Activities<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t\tCritical_Activities<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//******************* Solutions *******************</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">setw</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"pro_time:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Earest Start:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> Earliset_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Earest Finish:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> Earliset_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Latest Start:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> Latest_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Latest Finish:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> Latest_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Critical Activities:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> Critical_Activities<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Critical Paths: A\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Critical_Activities<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"->\"</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token keyword\">char</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>","site":{"data":{}},"excerpt":"","more":"<p>PERT: Program Evaluation and Review Technique</p>\n<h2 id=\"1-tasks\"><a class=\"markdownIt-Anchor\" href=\"#1-tasks\"></a> 1. Tasks</h2>\n<p>Try to write source code to implement the REPT process, i.e., identifying critical activities and critical path, and calculating the time to complete this software project. The following requirements should be satisfied:</p>\n<ol>\n<li>Upload all source code files (non including some compiling files, configuration files, etc.).</li>\n<li>Given a example (the example in the slide or your another example) as an input of your source code, show the result of your source code by screenshot.</li>\n<li>You choose use a file folder to include all these files, and the compress it into a compressed file for submission.</li>\n</ol>\n<h2 id=\"2-basic-algorithms-to-solve-this-issue\"><a class=\"markdownIt-Anchor\" href=\"#2-basic-algorithms-to-solve-this-issue\"></a> 2. Basic Algorithms to solve this issue</h2>\n<h3 id=\"20-variables-and-its-meaning\"><a class=\"markdownIt-Anchor\" href=\"#20-variables-and-its-meaning\"></a> 2.0 Variables and its meaning</h3>\n<ul>\n<li>EST: Earliest Start Time</li>\n<li>EFT: Earliest Finish Time</li>\n<li>LST: Latest Start Time</li>\n<li>LFT: Latest Finish Time</li>\n<li>PRT: Project Time Usage (of each activity)</li>\n</ul>\n<h3 id=\"21-store-data-into-adjacency-matrix\"><a class=\"markdownIt-Anchor\" href=\"#21-store-data-into-adjacency-matrix\"></a> 2.1 Store data into adjacency matrix</h3>\n<p>In a PRET example, firstly we need to know how many activities should we solve, namely, input num as the total of PRET activities. Next, we need to build an array to storage the time usage in each of the task, namely, PRT.</p>\n<p>The most difficult task, relatively speaking compared with the following input, is to storage the immediate predecessors of each activities. We can either use adjacency matrix or adjacency linked list to storage the predecessors, in my program, I will use matrix instead of linked list since the value num is not too large.</p>\n<h3 id=\"22-topological-sort\"><a class=\"markdownIt-Anchor\" href=\"#22-topological-sort\"></a> 2.2 Topological sort</h3>\n<p>As we all know, topological sort algorithm is useful and convenient to solve the dependency resolution which is extremely similar to PREP, hence I will use topological sort algorithm to implement the <strong>Earliest Start Time</strong> of each node. And the key formula to get EST is</p>\n<pre class=\"language-none\"><code class=\"language-none\">EST[j] &#x3D; max(EST[i] + PRT[i],EST[j])</code></pre>\n<p><strong>Earliest Finish Time</strong> is simple to achieve when we know the EST since<br>\n<code>EFT = EST+PRT</code></p>\n<p>The rest of two arrays <strong>Latest Start Time</strong> and <strong>Latest Finish Time</strong> is harder to find out. Actually, we can find out either of the two values and the other is easy to know since<br>\n<code>LST=LFT-PRT</code></p>\n<p>What I need to do is reverse all the arrows in PREP, that is, change the last activity to the first activity and change the first activity to the last one, and reverse all the activities and immediate predecessors. Using the same method with solving the EST, we can find out the LFT in the same way. Just Transpose the adjacency matrix, and use the key formula<br>\n<code>LST[j]=min(LFT[i]-PRT[i],LFT[j])</code></p>\n<h3 id=\"23-solutions\"><a class=\"markdownIt-Anchor\" href=\"#23-solutions\"></a> 2.3 Solutions</h3>\n<p>After Getting four arrays EST, EFT, LST, LFT, we can easily find the Critical activities and Critical paths by Slacks, and the formula is<br>\n<code>Slack = LST-EST=LFT-EFT</code></p>\n<p>If Slack is not zero, then this activity is a critical activity and those slacks can contribute to the critical path.</p>\n<h2 id=\"3-example-and-results\"><a class=\"markdownIt-Anchor\" href=\"#3-example-and-results\"></a> 3. Example and Results</h2>\n<p>While using the example given below, we can create a graph and given it into adjacency matrix.</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ACTIVIEY CODE</th>\n<th style=\"text-align:left\">IMMEDIATE PREDCESSORS</th>\n<th style=\"text-align:left\">TIME USAGE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">–</td>\n<td style=\"text-align:left\">2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">2</td>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">4</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">2</td>\n<td style=\"text-align:left\">10</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">4</td>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">6</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">4</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">6</td>\n<td style=\"text-align:left\">5</td>\n<td style=\"text-align:left\">5</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">7</td>\n<td style=\"text-align:left\">4</td>\n<td style=\"text-align:left\">7</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">8</td>\n<td style=\"text-align:left\">5 7</td>\n<td style=\"text-align:left\">9</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">9</td>\n<td style=\"text-align:left\">3</td>\n<td style=\"text-align:left\">7</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">6 9</td>\n<td style=\"text-align:left\">8</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">11</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">4</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">12</td>\n<td style=\"text-align:left\">10</td>\n<td style=\"text-align:left\">5</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">13</td>\n<td style=\"text-align:left\">8</td>\n<td style=\"text-align:left\">2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">14</td>\n<td style=\"text-align:left\">11 12</td>\n<td style=\"text-align:left\">6</td>\n</tr>\n</tbody>\n</table>\n<p>The input in the program is shown below:</p>\n<p><img src=\"/2022/03/13/PERT/image-20210926121305734.png\" alt=\"img\"></p>\n<p>And the graph is shown in the graph into a matrix.</p>\n<p><img src=\"/2022/03/13/PERT/image-20210926121433312.png\" alt=\"img\"></p>\n<p><img src=\"/2022/03/13/PERT/image-20210926121452437.png\" alt=\"img\"></p>\n<p>Finally we can get the solutions using topological sort algorithm.</p>\n<p><img src=\"/2022/03/13/PERT/image-20210926121557824.png\" alt=\"img\"></p>\n<p>And the solution is shown below.</p>\n<p><img src=\"/2022/03/13/PERT/image-20210926125842698.png\" alt=\"img\"></p>\n<h2 id=\"4-code\"><a class=\"markdownIt-Anchor\" href=\"#4-code\"></a> 4. Code</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;vector></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;sstream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;iomanip></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;fstream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;stack></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\nifstream <span class=\"token function\">fin</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"data.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> num<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//******************* Read Datas *******************</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Please input the number of total projects:\"</span><span class=\"token punctuation\">;</span>\n\tfin <span class=\"token operator\">>></span> num<span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> num <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> pro_time <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//Project time usage</span>\n\tvector<span class=\"token operator\">&lt;</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span> <span class=\"token function\">map</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//adjacency matrix</span>\n\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\tmap<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Please input the time that Project \"</span> <span class=\"token operator\">&lt;&lt;</span> i <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" should be used:\"</span><span class=\"token punctuation\">;</span>\n\t\tfin <span class=\"token operator\">>></span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Please input which project(s) should be done before Project \"</span> <span class=\"token operator\">&lt;&lt;</span> i <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\":\"</span><span class=\"token punctuation\">;</span>\n\n\t\tvector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> temp<span class=\"token punctuation\">;</span>\n\t\tfin<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tstring str<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">getline</span><span class=\"token punctuation\">(</span>fin<span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">int</span> tt<span class=\"token punctuation\">;</span>\n\t\tstringstream <span class=\"token function\">ss</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>ss <span class=\"token operator\">>></span> tt<span class=\"token punctuation\">)</span>\n\t\t\ttemp<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>tt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> str <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> tt <span class=\"token operator\">:</span> temp<span class=\"token punctuation\">)</span>\n\t\t\t\tmap<span class=\"token punctuation\">[</span>tt<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token comment\">//******************* EST and EFT *******************</span>\n\t<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> Earliset_Start <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tEarliset_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//******************* Topological Sort *******************</span>\n\tstack<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> stk<span class=\"token punctuation\">;</span>\n\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stk<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> stk<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tEarliset_Start<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>Earliset_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> Earliset_Start<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token comment\">//Earliset Finish</span>\n\t<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> Earliset_Finish <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tEarliset_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Earliset_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//******************* LST and LFT **************************</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\tmap<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t\t\tmap<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> Latest_Finish <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> Finish_time <span class=\"token operator\">=</span> Earliset_Finish<span class=\"token punctuation\">[</span>num<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tLatest_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Finish_time<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//******************* Topological Sort *******************</span>\n\t\n\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//need to optimize...</span>\n\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//need to optimize...</span>\n\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stk<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> stk<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> i<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\tstk<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tLatest_Finish<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">min</span><span class=\"token punctuation\">(</span>Latest_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> Latest_Finish<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token keyword\">int</span><span class=\"token operator\">*</span> Latest_Start <span class=\"token operator\">=</span> new <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tLatest_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Latest_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//Critical Activities</span>\n\tbool<span class=\"token operator\">*</span> Critical_Activities <span class=\"token operator\">=</span> new bool<span class=\"token punctuation\">[</span>num <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Latest_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> Earliset_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\tCritical_Activities<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t\tCritical_Activities<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//******************* Solutions *******************</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">setw</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> map<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"pro_time:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> pro_time<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Earest Start:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> Earliset_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Earest Finish:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> Earliset_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Latest Start:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> Latest_Start<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Latest Finish:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> Latest_Finish<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Critical Activities:\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> Critical_Activities<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n________________________________________________\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Critical Paths: A\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> num<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Critical_Activities<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"->\"</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token keyword\">char</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>"},{"layout":"post","title":"Python WordCloud","date":"2022-11-03T10:57:59.000Z","author":"Tony","_content":"\n# Python WordCloud简介\n\n### Code\n\n```python\nimport wordcloud\nimport jieba # 用于中文词语分割\nfrom urllib import request\nfrom html2text import html2text\n\n\ndef main():\n    w = wordcloud.WordCloud(width=3500, height=3500, font_path=r'C:\\Windows\\Fonts\\simfang.ttf', background_color=\"white\")\n    w.generate(\" \".join(jieba.cut(file_content, cut_all=False)))\n    w.to_file(\"output.png\")\n\n\nif __name__ == '__main__':\n    # url = 'http://tonylsx.top/2022/04/09/4-dimensional/'\n    url = 'http://tonylsx.top/2022/07/21/Python-json/'\n    file = request.urlopen(url)\n\n    file_text = file.read().decode('utf-8')\n    file_content = html2text(file_text)\n    # print(file_content)\n    main()\n\n```\n\n### WordCloud Output\n\nWordCloud输出图片(`output.png`)：\n\n![haha](Python-WordCloud/haha.png)\n\n# 为WordCloud添加图片轮廓\n\n### Code\n\n```python\nimport wordcloud\nimport jieba\nfrom imageio import imread\nfrom urllib import request\nfrom html2text import html2text\n\n\ndef main():\n    photo1 = imread(\"photo.png\")\n    print(photo1.shape)  # (748, 1029, 4)\n    photo2 = imread(\"photo2.jpg\")\n    print(photo2.shape)  # (1270, 1585, 3)\n\n    w = wordcloud.WordCloud(width=3500, height=3500, font_path=r'C:\\Windows\\Fonts\\simfang.ttf',\n                            mask=photo2, background_color=\"white\")\n    w.generate(\" \".join(jieba.cut(file_content, cut_all=False)))\n    w.to_file(\"output.png\")\n\n\nif __name__ == '__main__':\n    # url = 'http://tonylsx.top/2022/04/09/4-dimensional/'\n    url = 'http://tonylsx.top/2022/07/21/Python-json/'\n    file = request.urlopen(url)\n\n    file_text = file.read().decode('utf-8')\n    file_content = html2text(file_text)\n    # print(file_content)\n    main()\n\n```\n\n代码中可以看到，`.png`图片是四维数组，其中第四维度是$\\alpha$通道，代表透明度；`.jpg`图片是三维数组，三个维度分别代表RGB三元色。通过调整图片元素的值，全0代表白色，全255代表黑色，可以控制WordCloud的输出轮廓，实现美丽且优雅的图片哦~\n\n### WordCloud Output\n\n原图片(`photo2.png`)：\n\n![photo2](Python-WordCloud/photo2.jpg)\n\nWordCloud输出图片(`output.png`)：\n\n![haha-1667472516501-1](Python-WordCloud/haha-1667472516501-1-1667473201885-3.png)\n","source":"_posts/Python-WordCloud.md","raw":"---\nlayout: post\ntitle: Python WordCloud\ndate: 2022-11-03 18:57:59\nauthor: Tony\ntags:\n  - Python\n  - WordCloud\ncategories:\n  - Python\n---\n\n# Python WordCloud简介\n\n### Code\n\n```python\nimport wordcloud\nimport jieba # 用于中文词语分割\nfrom urllib import request\nfrom html2text import html2text\n\n\ndef main():\n    w = wordcloud.WordCloud(width=3500, height=3500, font_path=r'C:\\Windows\\Fonts\\simfang.ttf', background_color=\"white\")\n    w.generate(\" \".join(jieba.cut(file_content, cut_all=False)))\n    w.to_file(\"output.png\")\n\n\nif __name__ == '__main__':\n    # url = 'http://tonylsx.top/2022/04/09/4-dimensional/'\n    url = 'http://tonylsx.top/2022/07/21/Python-json/'\n    file = request.urlopen(url)\n\n    file_text = file.read().decode('utf-8')\n    file_content = html2text(file_text)\n    # print(file_content)\n    main()\n\n```\n\n### WordCloud Output\n\nWordCloud输出图片(`output.png`)：\n\n![haha](Python-WordCloud/haha.png)\n\n# 为WordCloud添加图片轮廓\n\n### Code\n\n```python\nimport wordcloud\nimport jieba\nfrom imageio import imread\nfrom urllib import request\nfrom html2text import html2text\n\n\ndef main():\n    photo1 = imread(\"photo.png\")\n    print(photo1.shape)  # (748, 1029, 4)\n    photo2 = imread(\"photo2.jpg\")\n    print(photo2.shape)  # (1270, 1585, 3)\n\n    w = wordcloud.WordCloud(width=3500, height=3500, font_path=r'C:\\Windows\\Fonts\\simfang.ttf',\n                            mask=photo2, background_color=\"white\")\n    w.generate(\" \".join(jieba.cut(file_content, cut_all=False)))\n    w.to_file(\"output.png\")\n\n\nif __name__ == '__main__':\n    # url = 'http://tonylsx.top/2022/04/09/4-dimensional/'\n    url = 'http://tonylsx.top/2022/07/21/Python-json/'\n    file = request.urlopen(url)\n\n    file_text = file.read().decode('utf-8')\n    file_content = html2text(file_text)\n    # print(file_content)\n    main()\n\n```\n\n代码中可以看到，`.png`图片是四维数组，其中第四维度是$\\alpha$通道，代表透明度；`.jpg`图片是三维数组，三个维度分别代表RGB三元色。通过调整图片元素的值，全0代表白色，全255代表黑色，可以控制WordCloud的输出轮廓，实现美丽且优雅的图片哦~\n\n### WordCloud Output\n\n原图片(`photo2.png`)：\n\n![photo2](Python-WordCloud/photo2.jpg)\n\nWordCloud输出图片(`output.png`)：\n\n![haha-1667472516501-1](Python-WordCloud/haha-1667472516501-1-1667473201885-3.png)\n","slug":"Python-WordCloud","published":1,"updated":"2022-11-03T11:12:52.859Z","comments":1,"photos":[],"link":"","_id":"clb4gsrdd002f1gzu0at40ryf","content":"<h1 id=\"python-wordcloud简介\"><a class=\"markdownIt-Anchor\" href=\"#python-wordcloud简介\"></a> Python WordCloud简介</h1>\n<h3 id=\"code\"><a class=\"markdownIt-Anchor\" href=\"#code\"></a> Code</h3>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> wordcloud\n<span class=\"token keyword\">import</span> jieba <span class=\"token comment\"># 用于中文词语分割</span>\n<span class=\"token keyword\">from</span> urllib <span class=\"token keyword\">import</span> request\n<span class=\"token keyword\">from</span> html2text <span class=\"token keyword\">import</span> html2text\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    w <span class=\"token operator\">=</span> wordcloud<span class=\"token punctuation\">.</span>WordCloud<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">3500</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token number\">3500</span><span class=\"token punctuation\">,</span> font_path<span class=\"token operator\">=</span><span class=\"token string\">r'C:\\Windows\\Fonts\\simfang.ttf'</span><span class=\"token punctuation\">,</span> background_color<span class=\"token operator\">=</span><span class=\"token string\">\"white\"</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>generate<span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>jieba<span class=\"token punctuation\">.</span>cut<span class=\"token punctuation\">(</span>file_content<span class=\"token punctuation\">,</span> cut_all<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>to_file<span class=\"token punctuation\">(</span><span class=\"token string\">\"output.png\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># url = 'http://tonylsx.top/2022/04/09/4-dimensional/'</span>\n    url <span class=\"token operator\">=</span> <span class=\"token string\">'http://tonylsx.top/2022/07/21/Python-json/'</span>\n    <span class=\"token builtin\">file</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>urlopen<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n\n    file_text <span class=\"token operator\">=</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n    file_content <span class=\"token operator\">=</span> html2text<span class=\"token punctuation\">(</span>file_text<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># print(file_content)</span>\n    main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h3 id=\"wordcloud-output\"><a class=\"markdownIt-Anchor\" href=\"#wordcloud-output\"></a> WordCloud Output</h3>\n<p>WordCloud输出图片(<code>output.png</code>)：</p>\n<p><img src=\"/2022/11/03/Python-WordCloud/haha.png\" alt=\"haha\" loading=\"lazy\"></p>\n<h1 id=\"为wordcloud添加图片轮廓\"><a class=\"markdownIt-Anchor\" href=\"#为wordcloud添加图片轮廓\"></a> 为WordCloud添加图片轮廓</h1>\n<h3 id=\"code-2\"><a class=\"markdownIt-Anchor\" href=\"#code-2\"></a> Code</h3>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> wordcloud\n<span class=\"token keyword\">import</span> jieba\n<span class=\"token keyword\">from</span> imageio <span class=\"token keyword\">import</span> imread\n<span class=\"token keyword\">from</span> urllib <span class=\"token keyword\">import</span> request\n<span class=\"token keyword\">from</span> html2text <span class=\"token keyword\">import</span> html2text\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    photo1 <span class=\"token operator\">=</span> imread<span class=\"token punctuation\">(</span><span class=\"token string\">\"photo.png\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>photo1<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (748, 1029, 4)</span>\n    photo2 <span class=\"token operator\">=</span> imread<span class=\"token punctuation\">(</span><span class=\"token string\">\"photo2.jpg\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>photo2<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (1270, 1585, 3)</span>\n\n    w <span class=\"token operator\">=</span> wordcloud<span class=\"token punctuation\">.</span>WordCloud<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">3500</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token number\">3500</span><span class=\"token punctuation\">,</span> font_path<span class=\"token operator\">=</span><span class=\"token string\">r'C:\\Windows\\Fonts\\simfang.ttf'</span><span class=\"token punctuation\">,</span>\n                            mask<span class=\"token operator\">=</span>photo2<span class=\"token punctuation\">,</span> background_color<span class=\"token operator\">=</span><span class=\"token string\">\"white\"</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>generate<span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>jieba<span class=\"token punctuation\">.</span>cut<span class=\"token punctuation\">(</span>file_content<span class=\"token punctuation\">,</span> cut_all<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>to_file<span class=\"token punctuation\">(</span><span class=\"token string\">\"output.png\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># url = 'http://tonylsx.top/2022/04/09/4-dimensional/'</span>\n    url <span class=\"token operator\">=</span> <span class=\"token string\">'http://tonylsx.top/2022/07/21/Python-json/'</span>\n    <span class=\"token builtin\">file</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>urlopen<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n\n    file_text <span class=\"token operator\">=</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n    file_content <span class=\"token operator\">=</span> html2text<span class=\"token punctuation\">(</span>file_text<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># print(file_content)</span>\n    main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>代码中可以看到，<code>.png</code>图片是四维数组，其中第四维度是<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span></span></span></span>通道，代表透明度；<code>.jpg</code>图片是三维数组，三个维度分别代表RGB三元色。通过调整图片元素的值，全0代表白色，全255代表黑色，可以控制WordCloud的输出轮廓，实现美丽且优雅的图片哦~</p>\n<h3 id=\"wordcloud-output-2\"><a class=\"markdownIt-Anchor\" href=\"#wordcloud-output-2\"></a> WordCloud Output</h3>\n<p>原图片(<code>photo2.png</code>)：</p>\n<p><img src=\"/2022/11/03/Python-WordCloud/photo2.jpg\" alt=\"photo2\" loading=\"lazy\"></p>\n<p>WordCloud输出图片(<code>output.png</code>)：</p>\n<p><img src=\"/2022/11/03/Python-WordCloud/haha-1667472516501-1-1667473201885-3.png\" alt=\"haha-1667472516501-1\" loading=\"lazy\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"python-wordcloud简介\"><a class=\"markdownIt-Anchor\" href=\"#python-wordcloud简介\"></a> Python WordCloud简介</h1>\n<h3 id=\"code\"><a class=\"markdownIt-Anchor\" href=\"#code\"></a> Code</h3>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> wordcloud\n<span class=\"token keyword\">import</span> jieba <span class=\"token comment\"># 用于中文词语分割</span>\n<span class=\"token keyword\">from</span> urllib <span class=\"token keyword\">import</span> request\n<span class=\"token keyword\">from</span> html2text <span class=\"token keyword\">import</span> html2text\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    w <span class=\"token operator\">=</span> wordcloud<span class=\"token punctuation\">.</span>WordCloud<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">3500</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token number\">3500</span><span class=\"token punctuation\">,</span> font_path<span class=\"token operator\">=</span><span class=\"token string\">r'C:\\Windows\\Fonts\\simfang.ttf'</span><span class=\"token punctuation\">,</span> background_color<span class=\"token operator\">=</span><span class=\"token string\">\"white\"</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>generate<span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>jieba<span class=\"token punctuation\">.</span>cut<span class=\"token punctuation\">(</span>file_content<span class=\"token punctuation\">,</span> cut_all<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>to_file<span class=\"token punctuation\">(</span><span class=\"token string\">\"output.png\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># url = 'http://tonylsx.top/2022/04/09/4-dimensional/'</span>\n    url <span class=\"token operator\">=</span> <span class=\"token string\">'http://tonylsx.top/2022/07/21/Python-json/'</span>\n    <span class=\"token builtin\">file</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>urlopen<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n\n    file_text <span class=\"token operator\">=</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n    file_content <span class=\"token operator\">=</span> html2text<span class=\"token punctuation\">(</span>file_text<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># print(file_content)</span>\n    main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h3 id=\"wordcloud-output\"><a class=\"markdownIt-Anchor\" href=\"#wordcloud-output\"></a> WordCloud Output</h3>\n<p>WordCloud输出图片(<code>output.png</code>)：</p>\n<p><img src=\"/2022/11/03/Python-WordCloud/haha.png\" alt=\"haha\"></p>\n<h1 id=\"为wordcloud添加图片轮廓\"><a class=\"markdownIt-Anchor\" href=\"#为wordcloud添加图片轮廓\"></a> 为WordCloud添加图片轮廓</h1>\n<h3 id=\"code-2\"><a class=\"markdownIt-Anchor\" href=\"#code-2\"></a> Code</h3>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> wordcloud\n<span class=\"token keyword\">import</span> jieba\n<span class=\"token keyword\">from</span> imageio <span class=\"token keyword\">import</span> imread\n<span class=\"token keyword\">from</span> urllib <span class=\"token keyword\">import</span> request\n<span class=\"token keyword\">from</span> html2text <span class=\"token keyword\">import</span> html2text\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    photo1 <span class=\"token operator\">=</span> imread<span class=\"token punctuation\">(</span><span class=\"token string\">\"photo.png\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>photo1<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (748, 1029, 4)</span>\n    photo2 <span class=\"token operator\">=</span> imread<span class=\"token punctuation\">(</span><span class=\"token string\">\"photo2.jpg\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>photo2<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (1270, 1585, 3)</span>\n\n    w <span class=\"token operator\">=</span> wordcloud<span class=\"token punctuation\">.</span>WordCloud<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">3500</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token number\">3500</span><span class=\"token punctuation\">,</span> font_path<span class=\"token operator\">=</span><span class=\"token string\">r'C:\\Windows\\Fonts\\simfang.ttf'</span><span class=\"token punctuation\">,</span>\n                            mask<span class=\"token operator\">=</span>photo2<span class=\"token punctuation\">,</span> background_color<span class=\"token operator\">=</span><span class=\"token string\">\"white\"</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>generate<span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>jieba<span class=\"token punctuation\">.</span>cut<span class=\"token punctuation\">(</span>file_content<span class=\"token punctuation\">,</span> cut_all<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>to_file<span class=\"token punctuation\">(</span><span class=\"token string\">\"output.png\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># url = 'http://tonylsx.top/2022/04/09/4-dimensional/'</span>\n    url <span class=\"token operator\">=</span> <span class=\"token string\">'http://tonylsx.top/2022/07/21/Python-json/'</span>\n    <span class=\"token builtin\">file</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>urlopen<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n\n    file_text <span class=\"token operator\">=</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n    file_content <span class=\"token operator\">=</span> html2text<span class=\"token punctuation\">(</span>file_text<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># print(file_content)</span>\n    main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>代码中可以看到，<code>.png</code>图片是四维数组，其中第四维度是<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.0037em;\">α</span></span></span></span>通道，代表透明度；<code>.jpg</code>图片是三维数组，三个维度分别代表RGB三元色。通过调整图片元素的值，全0代表白色，全255代表黑色，可以控制WordCloud的输出轮廓，实现美丽且优雅的图片哦~</p>\n<h3 id=\"wordcloud-output-2\"><a class=\"markdownIt-Anchor\" href=\"#wordcloud-output-2\"></a> WordCloud Output</h3>\n<p>原图片(<code>photo2.png</code>)：</p>\n<p><img src=\"/2022/11/03/Python-WordCloud/photo2.jpg\" alt=\"photo2\"></p>\n<p>WordCloud输出图片(<code>output.png</code>)：</p>\n<p><img src=\"/2022/11/03/Python-WordCloud/haha-1667472516501-1-1667473201885-3.png\" alt=\"haha-1667472516501-1\"></p>\n"},{"title":"Python处理json文件","date":"2022-07-21T14:00:11.000Z","author":"Tony","katex":true,"_content":"\n\n\n# 使用python处理json文件\n\n本文简单介绍如何通过python正则表达式的方式和通过调用json package读取json数据，以及将python中的数组转化成json并导出到外部文档。\n\n## 1.1 什么是json\n\nJSON或JavaScript Object Notation，是一种**使用文本存储数据对象的格式。**换句话说，它是一种**数据结构，将对象用文本形式表示出来。**尽管它来源自JavaScript，但它已成为传输对象的实际标准。\n\n大多数编程语言都支持JSON格式，本文将采用python读取数据。JSON格式的文件经常用于**API传输数据对象。**以下是JSON字符串的示例：\n\n```json\n{\n\t\"name\": \"Tony\",\n\t\"ID\": \"455190\",\n\t\"language\": \"en\",\n\t\"course\":\n\t[\n\t\t\"Math\",\n\t\t\"Chinese\",\n\t\t\"Physics\",\n\t\t\"Computer Science\"\n\t],\n\t\"Graduated\": \"False\"\n}\n```\n\n这里需要注意的是，`{}`里的值称之为**key**, `[]`里的值称之为**array**.\n\n## 正则表达式读取json文件\n\n这里使用的是正则表达式来查找所要搜索的内容，此方法不具有通用性，需要根据具体的json文件的格式手动更改正则表达式的内容。\n\n```python\n'''\n{\n\t\"DATA1\": [\n\t{\"name\": \"Tony\", \"age\": \"19\", \"ID\": \"344909\"},\n\t{\"name\": \"Tina\", \"age\": \"22\", \"ID\": \"311921\"},\n\t{\"name\": \"Jack\", \"age\": \"23\", \"ID\": \"340223\"},\n\t{\"name\": \"Tian\", \"age\": \"20\", \"ID\": \"122008\"}\n\t]\n}\n'''\nimport re # 正则表达式\n# 读入文件\nwith open('test.json', 'r', encoding=\"utf-8\") as f:\n    data = f.read() # 读取json文件\n    \nage = [] # 存放字符串 \"age\": \"XX\"\nans = [] # 存放年龄数字 19 20 22\n\nm = re.findall(r\"\\\"age\\\": \\\"\\d+\\\"\", data) # \"age\": \"XX\"\nif m:\n    for i in m:\n        age.append(i)\nfor i in age:\n    temp = re.findall(r\"\\d+\", i) # 搜索 \"age\": \"XX\" 中的XX\n    ans.append(int(temp[0])) # str转换为int\n    # temp = i.replace(\"age\\\": \\\"\", \"\")\n    # temp = temp.replace(\"\\\",\", \"\")\n    # age.append(temp)\n# 读出文件\nf = open('ans.txt', 'w', encoding=\"utf-8\")\nfor i in ans:\n    print(i, file=f)\nf.close()\n```\n\n对于数字等区分度较大类型的格式，正则表达式相对容易些，但是如果要处理如姓名的json文件，正则表达式将会极其复杂；而且若是要处理较多种类的数据，我们需要对每一种数据类型都编写特定的正则表达式，其工作量将会极为庞大。\n\n当然，这种相对传统的方法也有自己的优点，比如在非json文件格式下批量处理数据，我们就只能依靠这种”麻烦“的方法了，因此正则表达式的方法也需要我们熟练掌握。\n\n## Python中的JSON处理json文件\n\n当我们使用python中的json packages来处理json文件时，首先要保证json文件的格式是标准的，如果文件并非标准格式（比如少了一个后括号之类），python将会报错，文件无法正常读入。\n\n```python\n'''\n{\n\t\"DATA1\": [\n\t{\"name\": \"Tony\", \"age\": \"19\", \"ID\": \"344909\"},\n\t{\"name\": \"Tina\", \"age\": \"22\", \"ID\": \"311921\"},\n\t{\"name\": \"Jack\", \"age\": \"23\", \"ID\": \"340223\"},\n\t{\"name\": \"Tian\", \"age\": \"20\", \"ID\": \"122008\"}\n\t],\n\t\"DATA2\": \"data2\",\n\t\"DATA3\": \"data3\"\n}\n'''\nimport json\nimport jsonpath\n# input\nwith open('test.json', 'r', encoding='utf-8') as f:\n    file = json.load(f)\n    # print(type(file)) <class 'dict'>\n    f.close()\n\nfile.keys() # dict_keys['DATA1', 'DATA2', 'DATA3']\ndata['DATA2'] # \"data2\"\n\nname = jsonpath.jsonpath(file, '$..name')\nage = jsonpath.jsonpath(file, '$..age')\nprint(name) # [\"Tony\", \"Tina\", \"Jack\", \"Tian\"]\nprint(age) # [19, 22, 23, 20]\n# output\nf = open('ans.txt', 'w', encoding=\"utf-8\")\nfor i in range(0, len(name)):\n    print(name[i] + \": \" + age[i], file=f)\nf.close()\n```\n\n以上示例中，`json.load()`函数自动将文档转化为`dict`格式读取到python中，我们可以通过`key()`函数访问其字典键值，通过`jsonpath.jsonpath()`函数获取数组中对应关键字的值（需要导入jsonpath）。此方法可以高效的处理json文件，但是需要注意的是原始文件的格式必须为json文件。\n\n## 将python数据转换为json文件\n\n我们使用`dump()`函数可以将python数据写成json格式，详情见样例：\n\n```python\nimport json\nlanguages = (\"English\", \"Chinese\")\ncountry = \n{\n    \"name\": \"Tony\",\n    \"age\": 34,\n    \"languages\": languages,\n    \"Male\": False,\n}\n\nwith open('countries_exported.json', 'w') as f:\njson.dump(country, f, indent=4) # indent 缩进\n```\n\n其导出的json文件格式如下：\n\n```json\n{\n    \"name\": \"Tony\",\n    \"age\": 34,\n    \"languages\": [\n        \"English\",\n        \"Chinese\"\n    ],\n    \"Male\": false\n}\n```\n\n","source":"_posts/Python-json.md","raw":"---\ntitle: Python处理json文件\ndate: 2022-07-21 22:00:11\nauthor: Tony\ntags: \n  - json\n  - Python\ncategories: \n  - Python\nkatex: true\n---\n\n\n\n# 使用python处理json文件\n\n本文简单介绍如何通过python正则表达式的方式和通过调用json package读取json数据，以及将python中的数组转化成json并导出到外部文档。\n\n## 1.1 什么是json\n\nJSON或JavaScript Object Notation，是一种**使用文本存储数据对象的格式。**换句话说，它是一种**数据结构，将对象用文本形式表示出来。**尽管它来源自JavaScript，但它已成为传输对象的实际标准。\n\n大多数编程语言都支持JSON格式，本文将采用python读取数据。JSON格式的文件经常用于**API传输数据对象。**以下是JSON字符串的示例：\n\n```json\n{\n\t\"name\": \"Tony\",\n\t\"ID\": \"455190\",\n\t\"language\": \"en\",\n\t\"course\":\n\t[\n\t\t\"Math\",\n\t\t\"Chinese\",\n\t\t\"Physics\",\n\t\t\"Computer Science\"\n\t],\n\t\"Graduated\": \"False\"\n}\n```\n\n这里需要注意的是，`{}`里的值称之为**key**, `[]`里的值称之为**array**.\n\n## 正则表达式读取json文件\n\n这里使用的是正则表达式来查找所要搜索的内容，此方法不具有通用性，需要根据具体的json文件的格式手动更改正则表达式的内容。\n\n```python\n'''\n{\n\t\"DATA1\": [\n\t{\"name\": \"Tony\", \"age\": \"19\", \"ID\": \"344909\"},\n\t{\"name\": \"Tina\", \"age\": \"22\", \"ID\": \"311921\"},\n\t{\"name\": \"Jack\", \"age\": \"23\", \"ID\": \"340223\"},\n\t{\"name\": \"Tian\", \"age\": \"20\", \"ID\": \"122008\"}\n\t]\n}\n'''\nimport re # 正则表达式\n# 读入文件\nwith open('test.json', 'r', encoding=\"utf-8\") as f:\n    data = f.read() # 读取json文件\n    \nage = [] # 存放字符串 \"age\": \"XX\"\nans = [] # 存放年龄数字 19 20 22\n\nm = re.findall(r\"\\\"age\\\": \\\"\\d+\\\"\", data) # \"age\": \"XX\"\nif m:\n    for i in m:\n        age.append(i)\nfor i in age:\n    temp = re.findall(r\"\\d+\", i) # 搜索 \"age\": \"XX\" 中的XX\n    ans.append(int(temp[0])) # str转换为int\n    # temp = i.replace(\"age\\\": \\\"\", \"\")\n    # temp = temp.replace(\"\\\",\", \"\")\n    # age.append(temp)\n# 读出文件\nf = open('ans.txt', 'w', encoding=\"utf-8\")\nfor i in ans:\n    print(i, file=f)\nf.close()\n```\n\n对于数字等区分度较大类型的格式，正则表达式相对容易些，但是如果要处理如姓名的json文件，正则表达式将会极其复杂；而且若是要处理较多种类的数据，我们需要对每一种数据类型都编写特定的正则表达式，其工作量将会极为庞大。\n\n当然，这种相对传统的方法也有自己的优点，比如在非json文件格式下批量处理数据，我们就只能依靠这种”麻烦“的方法了，因此正则表达式的方法也需要我们熟练掌握。\n\n## Python中的JSON处理json文件\n\n当我们使用python中的json packages来处理json文件时，首先要保证json文件的格式是标准的，如果文件并非标准格式（比如少了一个后括号之类），python将会报错，文件无法正常读入。\n\n```python\n'''\n{\n\t\"DATA1\": [\n\t{\"name\": \"Tony\", \"age\": \"19\", \"ID\": \"344909\"},\n\t{\"name\": \"Tina\", \"age\": \"22\", \"ID\": \"311921\"},\n\t{\"name\": \"Jack\", \"age\": \"23\", \"ID\": \"340223\"},\n\t{\"name\": \"Tian\", \"age\": \"20\", \"ID\": \"122008\"}\n\t],\n\t\"DATA2\": \"data2\",\n\t\"DATA3\": \"data3\"\n}\n'''\nimport json\nimport jsonpath\n# input\nwith open('test.json', 'r', encoding='utf-8') as f:\n    file = json.load(f)\n    # print(type(file)) <class 'dict'>\n    f.close()\n\nfile.keys() # dict_keys['DATA1', 'DATA2', 'DATA3']\ndata['DATA2'] # \"data2\"\n\nname = jsonpath.jsonpath(file, '$..name')\nage = jsonpath.jsonpath(file, '$..age')\nprint(name) # [\"Tony\", \"Tina\", \"Jack\", \"Tian\"]\nprint(age) # [19, 22, 23, 20]\n# output\nf = open('ans.txt', 'w', encoding=\"utf-8\")\nfor i in range(0, len(name)):\n    print(name[i] + \": \" + age[i], file=f)\nf.close()\n```\n\n以上示例中，`json.load()`函数自动将文档转化为`dict`格式读取到python中，我们可以通过`key()`函数访问其字典键值，通过`jsonpath.jsonpath()`函数获取数组中对应关键字的值（需要导入jsonpath）。此方法可以高效的处理json文件，但是需要注意的是原始文件的格式必须为json文件。\n\n## 将python数据转换为json文件\n\n我们使用`dump()`函数可以将python数据写成json格式，详情见样例：\n\n```python\nimport json\nlanguages = (\"English\", \"Chinese\")\ncountry = \n{\n    \"name\": \"Tony\",\n    \"age\": 34,\n    \"languages\": languages,\n    \"Male\": False,\n}\n\nwith open('countries_exported.json', 'w') as f:\njson.dump(country, f, indent=4) # indent 缩进\n```\n\n其导出的json文件格式如下：\n\n```json\n{\n    \"name\": \"Tony\",\n    \"age\": 34,\n    \"languages\": [\n        \"English\",\n        \"Chinese\"\n    ],\n    \"Male\": false\n}\n```\n\n","slug":"Python-json","published":1,"updated":"2022-11-03T11:01:31.706Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrde002j1gzu34xr26pn","content":"<h1 id=\"使用python处理json文件\"><a class=\"markdownIt-Anchor\" href=\"#使用python处理json文件\"></a> 使用python处理json文件</h1>\n<p>本文简单介绍如何通过python正则表达式的方式和通过调用json package读取json数据，以及将python中的数组转化成json并导出到外部文档。</p>\n<h2 id=\"11-什么是json\"><a class=\"markdownIt-Anchor\" href=\"#11-什么是json\"></a> 1.1 什么是json</h2>\n<p>JSON或JavaScript Object Notation，是一种**使用文本存储数据对象的格式。<strong>换句话说，它是一种</strong>数据结构，将对象用文本形式表示出来。**尽管它来源自JavaScript，但它已成为传输对象的实际标准。</p>\n<p>大多数编程语言都支持JSON格式，本文将采用python读取数据。JSON格式的文件经常用于**API传输数据对象。**以下是JSON字符串的示例：</p>\n<pre class=\"language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"ID\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"455190\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"language\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"en\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"course\"</span><span class=\"token operator\">:</span>\n\t<span class=\"token punctuation\">[</span>\n\t\t<span class=\"token string\">\"Math\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"Chinese\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"Physics\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"Computer Science\"</span>\n\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"Graduated\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"False\"</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>这里需要注意的是，<code>&#123;&#125;</code>里的值称之为<strong>key</strong>, <code>[]</code>里的值称之为<strong>array</strong>.</p>\n<h2 id=\"正则表达式读取json文件\"><a class=\"markdownIt-Anchor\" href=\"#正则表达式读取json文件\"></a> 正则表达式读取json文件</h2>\n<p>这里使用的是正则表达式来查找所要搜索的内容，此方法不具有通用性，需要根据具体的json文件的格式手动更改正则表达式的内容。</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token triple-quoted-string string\">'''\n&#123;\n\t\"DATA1\": [\n\t&#123;\"name\": \"Tony\", \"age\": \"19\", \"ID\": \"344909\"&#125;,\n\t&#123;\"name\": \"Tina\", \"age\": \"22\", \"ID\": \"311921\"&#125;,\n\t&#123;\"name\": \"Jack\", \"age\": \"23\", \"ID\": \"340223\"&#125;,\n\t&#123;\"name\": \"Tian\", \"age\": \"20\", \"ID\": \"122008\"&#125;\n\t]\n&#125;\n'''</span>\n<span class=\"token keyword\">import</span> re <span class=\"token comment\"># 正则表达式</span>\n<span class=\"token comment\"># 读入文件</span>\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test.json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    data <span class=\"token operator\">=</span> f<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 读取json文件</span>\n    \nage <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 存放字符串 \"age\": \"XX\"</span>\nans <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 存放年龄数字 19 20 22</span>\n\nm <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>findall<span class=\"token punctuation\">(</span><span class=\"token string\">r\"\\\"age\\\": \\\"\\d+\\\"\"</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span> <span class=\"token comment\"># \"age\": \"XX\"</span>\n<span class=\"token keyword\">if</span> m<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> m<span class=\"token punctuation\">:</span>\n        age<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> age<span class=\"token punctuation\">:</span>\n    temp <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>findall<span class=\"token punctuation\">(</span><span class=\"token string\">r\"\\d+\"</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 搜索 \"age\": \"XX\" 中的XX</span>\n    ans<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># str转换为int</span>\n    <span class=\"token comment\"># temp = i.replace(\"age\\\": \\\"\", \"\")</span>\n    <span class=\"token comment\"># temp = temp.replace(\"\\\",\", \"\")</span>\n    <span class=\"token comment\"># age.append(temp)</span>\n<span class=\"token comment\"># 读出文件</span>\nf <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ans.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> ans<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token operator\">=</span>f<span class=\"token punctuation\">)</span>\nf<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<p>对于数字等区分度较大类型的格式，正则表达式相对容易些，但是如果要处理如姓名的json文件，正则表达式将会极其复杂；而且若是要处理较多种类的数据，我们需要对每一种数据类型都编写特定的正则表达式，其工作量将会极为庞大。</p>\n<p>当然，这种相对传统的方法也有自己的优点，比如在非json文件格式下批量处理数据，我们就只能依靠这种”麻烦“的方法了，因此正则表达式的方法也需要我们熟练掌握。</p>\n<h2 id=\"python中的json处理json文件\"><a class=\"markdownIt-Anchor\" href=\"#python中的json处理json文件\"></a> Python中的JSON处理json文件</h2>\n<p>当我们使用python中的json packages来处理json文件时，首先要保证json文件的格式是标准的，如果文件并非标准格式（比如少了一个后括号之类），python将会报错，文件无法正常读入。</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token triple-quoted-string string\">'''\n&#123;\n\t\"DATA1\": [\n\t&#123;\"name\": \"Tony\", \"age\": \"19\", \"ID\": \"344909\"&#125;,\n\t&#123;\"name\": \"Tina\", \"age\": \"22\", \"ID\": \"311921\"&#125;,\n\t&#123;\"name\": \"Jack\", \"age\": \"23\", \"ID\": \"340223\"&#125;,\n\t&#123;\"name\": \"Tian\", \"age\": \"20\", \"ID\": \"122008\"&#125;\n\t],\n\t\"DATA2\": \"data2\",\n\t\"DATA3\": \"data3\"\n&#125;\n'''</span>\n<span class=\"token keyword\">import</span> json\n<span class=\"token keyword\">import</span> jsonpath\n<span class=\"token comment\"># input</span>\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test.json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    <span class=\"token builtin\">file</span> <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># print(type(file)) &lt;class 'dict'></span>\n    f<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># dict_keys['DATA1', 'DATA2', 'DATA3']</span>\ndata<span class=\"token punctuation\">[</span><span class=\"token string\">'DATA2'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># \"data2\"</span>\n\nname <span class=\"token operator\">=</span> jsonpath<span class=\"token punctuation\">.</span>jsonpath<span class=\"token punctuation\">(</span><span class=\"token builtin\">file</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$..name'</span><span class=\"token punctuation\">)</span>\nage <span class=\"token operator\">=</span> jsonpath<span class=\"token punctuation\">.</span>jsonpath<span class=\"token punctuation\">(</span><span class=\"token builtin\">file</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$..age'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\"># [\"Tony\", \"Tina\", \"Jack\", \"Tian\"]</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>age<span class=\"token punctuation\">)</span> <span class=\"token comment\"># [19, 22, 23, 20]</span>\n<span class=\"token comment\"># output</span>\nf <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ans.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token string\">\": \"</span> <span class=\"token operator\">+</span> age<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token operator\">=</span>f<span class=\"token punctuation\">)</span>\nf<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<p>以上示例中，<code>json.load()</code>函数自动将文档转化为<code>dict</code>格式读取到python中，我们可以通过<code>key()</code>函数访问其字典键值，通过<code>jsonpath.jsonpath()</code>函数获取数组中对应关键字的值（需要导入jsonpath）。此方法可以高效的处理json文件，但是需要注意的是原始文件的格式必须为json文件。</p>\n<h2 id=\"将python数据转换为json文件\"><a class=\"markdownIt-Anchor\" href=\"#将python数据转换为json文件\"></a> 将python数据转换为json文件</h2>\n<p>我们使用<code>dump()</code>函数可以将python数据写成json格式，详情见样例：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> json\nlanguages <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"English\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Chinese\"</span><span class=\"token punctuation\">)</span>\ncountry <span class=\"token operator\">=</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"age\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">34</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"languages\"</span><span class=\"token punctuation\">:</span> languages<span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Male\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'countries_exported.json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\njson<span class=\"token punctuation\">.</span>dump<span class=\"token punctuation\">(</span>country<span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">,</span> indent<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># indent 缩进</span></code></pre>\n<p>其导出的json文件格式如下：</p>\n<pre class=\"language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">34</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"languages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"English\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Chinese\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Male\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"使用python处理json文件\"><a class=\"markdownIt-Anchor\" href=\"#使用python处理json文件\"></a> 使用python处理json文件</h1>\n<p>本文简单介绍如何通过python正则表达式的方式和通过调用json package读取json数据，以及将python中的数组转化成json并导出到外部文档。</p>\n<h2 id=\"11-什么是json\"><a class=\"markdownIt-Anchor\" href=\"#11-什么是json\"></a> 1.1 什么是json</h2>\n<p>JSON或JavaScript Object Notation，是一种**使用文本存储数据对象的格式。<strong>换句话说，它是一种</strong>数据结构，将对象用文本形式表示出来。**尽管它来源自JavaScript，但它已成为传输对象的实际标准。</p>\n<p>大多数编程语言都支持JSON格式，本文将采用python读取数据。JSON格式的文件经常用于**API传输数据对象。**以下是JSON字符串的示例：</p>\n<pre class=\"language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"ID\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"455190\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"language\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"en\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"course\"</span><span class=\"token operator\">:</span>\n\t<span class=\"token punctuation\">[</span>\n\t\t<span class=\"token string\">\"Math\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"Chinese\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"Physics\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"Computer Science\"</span>\n\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"Graduated\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"False\"</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>这里需要注意的是，<code>&#123;&#125;</code>里的值称之为<strong>key</strong>, <code>[]</code>里的值称之为<strong>array</strong>.</p>\n<h2 id=\"正则表达式读取json文件\"><a class=\"markdownIt-Anchor\" href=\"#正则表达式读取json文件\"></a> 正则表达式读取json文件</h2>\n<p>这里使用的是正则表达式来查找所要搜索的内容，此方法不具有通用性，需要根据具体的json文件的格式手动更改正则表达式的内容。</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token triple-quoted-string string\">'''\n&#123;\n\t\"DATA1\": [\n\t&#123;\"name\": \"Tony\", \"age\": \"19\", \"ID\": \"344909\"&#125;,\n\t&#123;\"name\": \"Tina\", \"age\": \"22\", \"ID\": \"311921\"&#125;,\n\t&#123;\"name\": \"Jack\", \"age\": \"23\", \"ID\": \"340223\"&#125;,\n\t&#123;\"name\": \"Tian\", \"age\": \"20\", \"ID\": \"122008\"&#125;\n\t]\n&#125;\n'''</span>\n<span class=\"token keyword\">import</span> re <span class=\"token comment\"># 正则表达式</span>\n<span class=\"token comment\"># 读入文件</span>\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test.json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    data <span class=\"token operator\">=</span> f<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 读取json文件</span>\n    \nage <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 存放字符串 \"age\": \"XX\"</span>\nans <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 存放年龄数字 19 20 22</span>\n\nm <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>findall<span class=\"token punctuation\">(</span><span class=\"token string\">r\"\\\"age\\\": \\\"\\d+\\\"\"</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span> <span class=\"token comment\"># \"age\": \"XX\"</span>\n<span class=\"token keyword\">if</span> m<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> m<span class=\"token punctuation\">:</span>\n        age<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> age<span class=\"token punctuation\">:</span>\n    temp <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>findall<span class=\"token punctuation\">(</span><span class=\"token string\">r\"\\d+\"</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 搜索 \"age\": \"XX\" 中的XX</span>\n    ans<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># str转换为int</span>\n    <span class=\"token comment\"># temp = i.replace(\"age\\\": \\\"\", \"\")</span>\n    <span class=\"token comment\"># temp = temp.replace(\"\\\",\", \"\")</span>\n    <span class=\"token comment\"># age.append(temp)</span>\n<span class=\"token comment\"># 读出文件</span>\nf <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ans.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> ans<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token operator\">=</span>f<span class=\"token punctuation\">)</span>\nf<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<p>对于数字等区分度较大类型的格式，正则表达式相对容易些，但是如果要处理如姓名的json文件，正则表达式将会极其复杂；而且若是要处理较多种类的数据，我们需要对每一种数据类型都编写特定的正则表达式，其工作量将会极为庞大。</p>\n<p>当然，这种相对传统的方法也有自己的优点，比如在非json文件格式下批量处理数据，我们就只能依靠这种”麻烦“的方法了，因此正则表达式的方法也需要我们熟练掌握。</p>\n<h2 id=\"python中的json处理json文件\"><a class=\"markdownIt-Anchor\" href=\"#python中的json处理json文件\"></a> Python中的JSON处理json文件</h2>\n<p>当我们使用python中的json packages来处理json文件时，首先要保证json文件的格式是标准的，如果文件并非标准格式（比如少了一个后括号之类），python将会报错，文件无法正常读入。</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token triple-quoted-string string\">'''\n&#123;\n\t\"DATA1\": [\n\t&#123;\"name\": \"Tony\", \"age\": \"19\", \"ID\": \"344909\"&#125;,\n\t&#123;\"name\": \"Tina\", \"age\": \"22\", \"ID\": \"311921\"&#125;,\n\t&#123;\"name\": \"Jack\", \"age\": \"23\", \"ID\": \"340223\"&#125;,\n\t&#123;\"name\": \"Tian\", \"age\": \"20\", \"ID\": \"122008\"&#125;\n\t],\n\t\"DATA2\": \"data2\",\n\t\"DATA3\": \"data3\"\n&#125;\n'''</span>\n<span class=\"token keyword\">import</span> json\n<span class=\"token keyword\">import</span> jsonpath\n<span class=\"token comment\"># input</span>\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test.json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    <span class=\"token builtin\">file</span> <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># print(type(file)) &lt;class 'dict'></span>\n    f<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># dict_keys['DATA1', 'DATA2', 'DATA3']</span>\ndata<span class=\"token punctuation\">[</span><span class=\"token string\">'DATA2'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># \"data2\"</span>\n\nname <span class=\"token operator\">=</span> jsonpath<span class=\"token punctuation\">.</span>jsonpath<span class=\"token punctuation\">(</span><span class=\"token builtin\">file</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$..name'</span><span class=\"token punctuation\">)</span>\nage <span class=\"token operator\">=</span> jsonpath<span class=\"token punctuation\">.</span>jsonpath<span class=\"token punctuation\">(</span><span class=\"token builtin\">file</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$..age'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\"># [\"Tony\", \"Tina\", \"Jack\", \"Tian\"]</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>age<span class=\"token punctuation\">)</span> <span class=\"token comment\"># [19, 22, 23, 20]</span>\n<span class=\"token comment\"># output</span>\nf <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ans.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token string\">\": \"</span> <span class=\"token operator\">+</span> age<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token operator\">=</span>f<span class=\"token punctuation\">)</span>\nf<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<p>以上示例中，<code>json.load()</code>函数自动将文档转化为<code>dict</code>格式读取到python中，我们可以通过<code>key()</code>函数访问其字典键值，通过<code>jsonpath.jsonpath()</code>函数获取数组中对应关键字的值（需要导入jsonpath）。此方法可以高效的处理json文件，但是需要注意的是原始文件的格式必须为json文件。</p>\n<h2 id=\"将python数据转换为json文件\"><a class=\"markdownIt-Anchor\" href=\"#将python数据转换为json文件\"></a> 将python数据转换为json文件</h2>\n<p>我们使用<code>dump()</code>函数可以将python数据写成json格式，详情见样例：</p>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> json\nlanguages <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"English\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Chinese\"</span><span class=\"token punctuation\">)</span>\ncountry <span class=\"token operator\">=</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"age\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">34</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"languages\"</span><span class=\"token punctuation\">:</span> languages<span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Male\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'countries_exported.json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\njson<span class=\"token punctuation\">.</span>dump<span class=\"token punctuation\">(</span>country<span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">,</span> indent<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># indent 缩进</span></code></pre>\n<p>其导出的json文件格式如下：</p>\n<pre class=\"language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">34</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"languages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"English\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Chinese\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Male\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n"},{"title":"R2S家庭组网实操","date":"2022-02-26T12:16:48.000Z","author":"Tony","_content":"\n## 前言\n\n本文授权转载自[R2S家庭组网实操 – Orange Tien](https://www.bytedance.fit/?p=1051)，作者：Orange Tien，在此基础上略加修改，~~并不会定期更新~~。\n\n本文主要介绍R2S的基本使用方法，目前本人（Tony）也在原作者（Orange Tien）的怂恿下在两个地方分别搭建了两个R2S，看起来很简单，其实不是一帆风顺；因此也会把实际组网中遇到的问题列到最后供大家参考。\n\n## 确定所需物理设备\n\n- 一台R2S软路由以及它的电源线\n- 两根用不着太长的网线一张TF卡（作为R2S的系统盘）以及一个读写TF卡的读卡器\n- 一台可以插网线的电脑\n- 交换机（可选）\n- 插排（某些时候插座不够用）\n\n## 烧录OpenWrt系统\n\n烧录软件：[BalenaEtcher](https://www.balena.io/etcher/)\n\n软路由系统：\n\n[OpenWrt-R2S-dongdong](https://bigdongdong.cowtransfer.com/s/a3420546d30343)\n\n[OpenWrt-R2S-esir](https://bigdongdong.cowtransfer.com/s/9a349ee597aa4f)\n\n第一个链接比较新，界面比较好看一些，推荐选择这个下载；第二个系统是eSir大人写的2020版本，已经很旧了；~~奈何暂时没找到别的系统~~，如果自行找到更好的系统也可以不用这俩链接。注意系统是要支持Arm架构的，因为Openwrt不是x86架构下的产物。\n\n##  开始烧录系统至TF卡\n\n打开BalenaEtcher，选择Flash from file，然后将OpenWrt系统烧录到TF卡中即可。\n\n![img](R2S_build/image-1.png)\n\n注意：选择文件时只选择镜像文件，不要把那些七七八八的文档说明也选进去。选择`.gz`(`.img`)文件来烧录即可，烧录完成后直接拔掉读卡器；系统会提示格式化，此时千万**不要**格式化！！！（~~否则，就重来一遍吧~~）\n\n##  登入R2S后台\n\n把烧录好固件的TF卡插入R2S，然后给它插上电源，WAN口可以不接，将R2S的LAN口连接电脑的网口，根据所刷入的固件（软路由系统）的不同来决定后台地址，一般来说，软路由后台是`192.168.X.1` ，本文的系统后台是`192.168.22.1`，所以说我们在电脑浏览器内输入`192.168.5.1`(`192.168.22.1`)以进入后台。后台账号是root，默认密码基本都是password（若下载本文的系统，密码则为空），具体操作链接里面写的很清楚。\n\n## 拨号或者DHCP客户端\n\n### 光猫拨号\n\n如果你家里的组网方式是通过光猫拨号（通常都是光猫拨号），那么设置方法如下：\n\n选择 网络-接口， 然后选择 修改WAN口设置\n\n![img](R2S_build/image-2-1024x507.png)\n\n将WAN口设置成DHCP客户端，然后保存应用即可，此外无须做其他任何设置。\n\n![img](R2S_build/image-3-1024x485.png)\n\n### R2S拨号\n\n如果你的光猫是桥接，那么就由路由器来拨号（通常来说，哪个网络设备配置更好，就誰来拨号，由于R2S的稳定性远不如光猫，所以这里选择光猫拨号更好），设置方法如下：\n\n![img](R2S_build/image-5.png)\n\n同样，选择修改WAN口，协议设置成PPPoE, PAP/CHAP，账号密码就是光猫的账号密码。比如电信宽带就是以`@163.gd`结尾的，密码如果忘记的话直接拨打10000（10086）重置就好，省时省力。\n\n![img](R2S_build/image-2-1024x507.png)\n\n接下来，需要用超级管理员账号登陆到光猫的IP中（`192.168.1.1`）,各大运营商的超级管理员账号和密码可以自行搜索。选择 网络-协议，然后设置成DHCP客户端。\n\n### 小结\n\n用什么拨号，什么就选择PPPoE，然后其它设备就都设置成DHCP。\n\n用光猫拨号，光猫的设置里面就选择PPPoE，软路由以及其它路由器就选择DHCP客户端；\n\n用R2S拨号，光猫和其它路由设备的设置里面就选择DHCP客户端，软路由选择PPPoE。\n\n## 各设备接入网络\n\n将软路由的WAN口与光猫的千兆口相连，然后断开软路由的LAN口与电脑网口的连接，此时软路由的LAN口根据各人组网要求的不同选择接不同的设备，可以接交换机，也可以接一台路由器（路由器设置为有线中继模式，也就是无线AP模式）\n\n如果家中设备比较多，或者很多屋子都需要连网线的话，可以买一个最便宜的千兆交换机放到弱电箱中，然后吧R2S接到交换机与光猫中间，这样就可以实现整个局域网都接入到软路由中来。（我来草草的画个图）\n\n![image-20220305212846426](R2S_build/image-20220305212846426.png)\n\n## 利用插件设置科学上网\n\n根据前面的步骤，如果你的设备能够正常访问网络了，就可以开始探索OpenWrt的各类插件了。关于科学上网，常见的插件有PassWall, ShadowScoksR++, OpenClash，由于OpenClash具备强大的分流策略机制（根据你访问的域名或者IP的不同决定走不同的节点），我们在此以OpenCalsh为例设置科学上网\n\n![img](R2S_build/image-7.png)\n\n首先，在服务菜单中找到OpenClash，然后选择配置文件订阅，选择添加配置文件\n\n![img](R2S_build/image-8.png)\n\n配置文件名随便写，用途是给用户自己区分的，订阅地址填上机场给你的订阅地址，其余地方无需设置，直接应用并保存即可。然后回到OpenClash主页，配置文件区域发送了变化。\n\n![img](R2S_build/image-9-1024x194.png)\n\n最后点击左下角的启动按钮，等待服务器上线运行即可。\n\n![img](R2S_build/image-10.png)\n\n如果你设置后无法正常科学上网，原因是有很多的，需要你自己慢慢排查。\n\n## 更多（原作者的话）\n\n[NanoPi R2S WIKI](https://wiki.friendlyarm.com/wiki/index.php/NanoPi_R2S/zh)\n\n上面的链接是R2S的WIKI书，上面详细记录了R2S的配置以及实际测速情况，也有如何编译系统等教程。\n\n个人使用R2S两年，从大一到大三都在用这个，感觉就是到千兆不太行，500M是瓶颈了，然后连久了没那么稳定，官网手册上宣传它是又稳定又能达到千兆的，这个听听就好，R2S本来是适合入门的，但是现在价格炒的太高了，没这个必要去买它，目前有很多更具有性价比的软路由可供选择。\n\n此外向大家推荐软路由界的大佬: [JackStone的Youtube主页](https://youtube.com/c/jackstone) ，人称老白，做了很多小主机的视频，如果想选购更具性价比的设备，可以看他的合集，比如2021软路由选购建议这些。\n\n## 组网时遇到过的问题（我的话）\n\n1. 组网的过程中可能出现无法自动分配IP地址的问题，比如说小米的路由器默认会分配`192.168.31.XXX`；如果你会手动配置的话可以试试，不过最简单的办法就是等，去洗个澡回来就好了。如果还没好，那么可以考虑RESET一下路由器。\n2. OpenClash插件在首次启动的时候，可能会启动失败，他会提示需要你选择编译架构，按照他的提示，选择Arm-v8架构即可。\n3. 网线通常插上马上就会亮灯，5s左右就能ping通，不过不要太相信科学。~~我有一次ping了10多分钟。~~真的，不通的话不一定是没插紧，也不一定是插错了，**很有可能是因为你没给我微信或者支付宝赞赏**。\n4. R2S是很基础的一款软路由，稳定性可能不会太好，不过最有可能导致网络不稳定的还是机场的选择，如果选择廉价机场的话，要做好不知道什么时候突然断网10分钟的准备。\n5. 计算机网络这门学科是玄学的一个分支。\n\n","source":"_posts/R2S_build.md","raw":"---\ntitle: R2S家庭组网实操\ndate: 2022-02-26 20:16:48\nauthor: Tony\ncategories:\n\t- 计算机网络\ntags:\n\t- R2S\n\t- Computer Network\n\t- 软路由\n\t- 科学上网\n---\n\n## 前言\n\n本文授权转载自[R2S家庭组网实操 – Orange Tien](https://www.bytedance.fit/?p=1051)，作者：Orange Tien，在此基础上略加修改，~~并不会定期更新~~。\n\n本文主要介绍R2S的基本使用方法，目前本人（Tony）也在原作者（Orange Tien）的怂恿下在两个地方分别搭建了两个R2S，看起来很简单，其实不是一帆风顺；因此也会把实际组网中遇到的问题列到最后供大家参考。\n\n## 确定所需物理设备\n\n- 一台R2S软路由以及它的电源线\n- 两根用不着太长的网线一张TF卡（作为R2S的系统盘）以及一个读写TF卡的读卡器\n- 一台可以插网线的电脑\n- 交换机（可选）\n- 插排（某些时候插座不够用）\n\n## 烧录OpenWrt系统\n\n烧录软件：[BalenaEtcher](https://www.balena.io/etcher/)\n\n软路由系统：\n\n[OpenWrt-R2S-dongdong](https://bigdongdong.cowtransfer.com/s/a3420546d30343)\n\n[OpenWrt-R2S-esir](https://bigdongdong.cowtransfer.com/s/9a349ee597aa4f)\n\n第一个链接比较新，界面比较好看一些，推荐选择这个下载；第二个系统是eSir大人写的2020版本，已经很旧了；~~奈何暂时没找到别的系统~~，如果自行找到更好的系统也可以不用这俩链接。注意系统是要支持Arm架构的，因为Openwrt不是x86架构下的产物。\n\n##  开始烧录系统至TF卡\n\n打开BalenaEtcher，选择Flash from file，然后将OpenWrt系统烧录到TF卡中即可。\n\n![img](R2S_build/image-1.png)\n\n注意：选择文件时只选择镜像文件，不要把那些七七八八的文档说明也选进去。选择`.gz`(`.img`)文件来烧录即可，烧录完成后直接拔掉读卡器；系统会提示格式化，此时千万**不要**格式化！！！（~~否则，就重来一遍吧~~）\n\n##  登入R2S后台\n\n把烧录好固件的TF卡插入R2S，然后给它插上电源，WAN口可以不接，将R2S的LAN口连接电脑的网口，根据所刷入的固件（软路由系统）的不同来决定后台地址，一般来说，软路由后台是`192.168.X.1` ，本文的系统后台是`192.168.22.1`，所以说我们在电脑浏览器内输入`192.168.5.1`(`192.168.22.1`)以进入后台。后台账号是root，默认密码基本都是password（若下载本文的系统，密码则为空），具体操作链接里面写的很清楚。\n\n## 拨号或者DHCP客户端\n\n### 光猫拨号\n\n如果你家里的组网方式是通过光猫拨号（通常都是光猫拨号），那么设置方法如下：\n\n选择 网络-接口， 然后选择 修改WAN口设置\n\n![img](R2S_build/image-2-1024x507.png)\n\n将WAN口设置成DHCP客户端，然后保存应用即可，此外无须做其他任何设置。\n\n![img](R2S_build/image-3-1024x485.png)\n\n### R2S拨号\n\n如果你的光猫是桥接，那么就由路由器来拨号（通常来说，哪个网络设备配置更好，就誰来拨号，由于R2S的稳定性远不如光猫，所以这里选择光猫拨号更好），设置方法如下：\n\n![img](R2S_build/image-5.png)\n\n同样，选择修改WAN口，协议设置成PPPoE, PAP/CHAP，账号密码就是光猫的账号密码。比如电信宽带就是以`@163.gd`结尾的，密码如果忘记的话直接拨打10000（10086）重置就好，省时省力。\n\n![img](R2S_build/image-2-1024x507.png)\n\n接下来，需要用超级管理员账号登陆到光猫的IP中（`192.168.1.1`）,各大运营商的超级管理员账号和密码可以自行搜索。选择 网络-协议，然后设置成DHCP客户端。\n\n### 小结\n\n用什么拨号，什么就选择PPPoE，然后其它设备就都设置成DHCP。\n\n用光猫拨号，光猫的设置里面就选择PPPoE，软路由以及其它路由器就选择DHCP客户端；\n\n用R2S拨号，光猫和其它路由设备的设置里面就选择DHCP客户端，软路由选择PPPoE。\n\n## 各设备接入网络\n\n将软路由的WAN口与光猫的千兆口相连，然后断开软路由的LAN口与电脑网口的连接，此时软路由的LAN口根据各人组网要求的不同选择接不同的设备，可以接交换机，也可以接一台路由器（路由器设置为有线中继模式，也就是无线AP模式）\n\n如果家中设备比较多，或者很多屋子都需要连网线的话，可以买一个最便宜的千兆交换机放到弱电箱中，然后吧R2S接到交换机与光猫中间，这样就可以实现整个局域网都接入到软路由中来。（我来草草的画个图）\n\n![image-20220305212846426](R2S_build/image-20220305212846426.png)\n\n## 利用插件设置科学上网\n\n根据前面的步骤，如果你的设备能够正常访问网络了，就可以开始探索OpenWrt的各类插件了。关于科学上网，常见的插件有PassWall, ShadowScoksR++, OpenClash，由于OpenClash具备强大的分流策略机制（根据你访问的域名或者IP的不同决定走不同的节点），我们在此以OpenCalsh为例设置科学上网\n\n![img](R2S_build/image-7.png)\n\n首先，在服务菜单中找到OpenClash，然后选择配置文件订阅，选择添加配置文件\n\n![img](R2S_build/image-8.png)\n\n配置文件名随便写，用途是给用户自己区分的，订阅地址填上机场给你的订阅地址，其余地方无需设置，直接应用并保存即可。然后回到OpenClash主页，配置文件区域发送了变化。\n\n![img](R2S_build/image-9-1024x194.png)\n\n最后点击左下角的启动按钮，等待服务器上线运行即可。\n\n![img](R2S_build/image-10.png)\n\n如果你设置后无法正常科学上网，原因是有很多的，需要你自己慢慢排查。\n\n## 更多（原作者的话）\n\n[NanoPi R2S WIKI](https://wiki.friendlyarm.com/wiki/index.php/NanoPi_R2S/zh)\n\n上面的链接是R2S的WIKI书，上面详细记录了R2S的配置以及实际测速情况，也有如何编译系统等教程。\n\n个人使用R2S两年，从大一到大三都在用这个，感觉就是到千兆不太行，500M是瓶颈了，然后连久了没那么稳定，官网手册上宣传它是又稳定又能达到千兆的，这个听听就好，R2S本来是适合入门的，但是现在价格炒的太高了，没这个必要去买它，目前有很多更具有性价比的软路由可供选择。\n\n此外向大家推荐软路由界的大佬: [JackStone的Youtube主页](https://youtube.com/c/jackstone) ，人称老白，做了很多小主机的视频，如果想选购更具性价比的设备，可以看他的合集，比如2021软路由选购建议这些。\n\n## 组网时遇到过的问题（我的话）\n\n1. 组网的过程中可能出现无法自动分配IP地址的问题，比如说小米的路由器默认会分配`192.168.31.XXX`；如果你会手动配置的话可以试试，不过最简单的办法就是等，去洗个澡回来就好了。如果还没好，那么可以考虑RESET一下路由器。\n2. OpenClash插件在首次启动的时候，可能会启动失败，他会提示需要你选择编译架构，按照他的提示，选择Arm-v8架构即可。\n3. 网线通常插上马上就会亮灯，5s左右就能ping通，不过不要太相信科学。~~我有一次ping了10多分钟。~~真的，不通的话不一定是没插紧，也不一定是插错了，**很有可能是因为你没给我微信或者支付宝赞赏**。\n4. R2S是很基础的一款软路由，稳定性可能不会太好，不过最有可能导致网络不稳定的还是机场的选择，如果选择廉价机场的话，要做好不知道什么时候突然断网10分钟的准备。\n5. 计算机网络这门学科是玄学的一个分支。\n\n","slug":"R2S_build","published":1,"updated":"2022-03-06T12:03:04.288Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrdf002l1gzu7rol697e","content":"<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\"></a> 前言</h2>\n<p>本文授权转载自<a href=\"https://www.bytedance.fit/?p=1051\">R2S家庭组网实操 – Orange Tien</a>，作者：Orange Tien，在此基础上略加修改，<s>并不会定期更新</s>。</p>\n<p>本文主要介绍R2S的基本使用方法，目前本人（Tony）也在原作者（Orange Tien）的怂恿下在两个地方分别搭建了两个R2S，看起来很简单，其实不是一帆风顺；因此也会把实际组网中遇到的问题列到最后供大家参考。</p>\n<h2 id=\"确定所需物理设备\"><a class=\"markdownIt-Anchor\" href=\"#确定所需物理设备\"></a> 确定所需物理设备</h2>\n<ul>\n<li>一台R2S软路由以及它的电源线</li>\n<li>两根用不着太长的网线一张TF卡（作为R2S的系统盘）以及一个读写TF卡的读卡器</li>\n<li>一台可以插网线的电脑</li>\n<li>交换机（可选）</li>\n<li>插排（某些时候插座不够用）</li>\n</ul>\n<h2 id=\"烧录openwrt系统\"><a class=\"markdownIt-Anchor\" href=\"#烧录openwrt系统\"></a> 烧录OpenWrt系统</h2>\n<p>烧录软件：<a href=\"https://www.balena.io/etcher/\">BalenaEtcher</a></p>\n<p>软路由系统：</p>\n<p><a href=\"https://bigdongdong.cowtransfer.com/s/a3420546d30343\">OpenWrt-R2S-dongdong</a></p>\n<p><a href=\"https://bigdongdong.cowtransfer.com/s/9a349ee597aa4f\">OpenWrt-R2S-esir</a></p>\n<p>第一个链接比较新，界面比较好看一些，推荐选择这个下载；第二个系统是eSir大人写的2020版本，已经很旧了；<s>奈何暂时没找到别的系统</s>，如果自行找到更好的系统也可以不用这俩链接。注意系统是要支持Arm架构的，因为Openwrt不是x86架构下的产物。</p>\n<h2 id=\"开始烧录系统至tf卡\"><a class=\"markdownIt-Anchor\" href=\"#开始烧录系统至tf卡\"></a> 开始烧录系统至TF卡</h2>\n<p>打开BalenaEtcher，选择Flash from file，然后将OpenWrt系统烧录到TF卡中即可。</p>\n<p><img src=\"/2022/02/26/R2S_build/image-1.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>注意：选择文件时只选择镜像文件，不要把那些七七八八的文档说明也选进去。选择<code>.gz</code>(<code>.img</code>)文件来烧录即可，烧录完成后直接拔掉读卡器；系统会提示格式化，此时千万<strong>不要</strong>格式化！！！（<s>否则，就重来一遍吧</s>）</p>\n<h2 id=\"登入r2s后台\"><a class=\"markdownIt-Anchor\" href=\"#登入r2s后台\"></a> 登入R2S后台</h2>\n<p>把烧录好固件的TF卡插入R2S，然后给它插上电源，WAN口可以不接，将R2S的LAN口连接电脑的网口，根据所刷入的固件（软路由系统）的不同来决定后台地址，一般来说，软路由后台是<code>192.168.X.1</code> ，本文的系统后台是<code>192.168.22.1</code>，所以说我们在电脑浏览器内输入<code>192.168.5.1</code>(<code>192.168.22.1</code>)以进入后台。后台账号是root，默认密码基本都是password（若下载本文的系统，密码则为空），具体操作链接里面写的很清楚。</p>\n<h2 id=\"拨号或者dhcp客户端\"><a class=\"markdownIt-Anchor\" href=\"#拨号或者dhcp客户端\"></a> 拨号或者DHCP客户端</h2>\n<h3 id=\"光猫拨号\"><a class=\"markdownIt-Anchor\" href=\"#光猫拨号\"></a> 光猫拨号</h3>\n<p>如果你家里的组网方式是通过光猫拨号（通常都是光猫拨号），那么设置方法如下：</p>\n<p>选择 网络-接口， 然后选择 修改WAN口设置</p>\n<p><img src=\"/2022/02/26/R2S_build/image-2-1024x507.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>将WAN口设置成DHCP客户端，然后保存应用即可，此外无须做其他任何设置。</p>\n<p><img src=\"/2022/02/26/R2S_build/image-3-1024x485.png\" alt=\"img\" loading=\"lazy\"></p>\n<h3 id=\"r2s拨号\"><a class=\"markdownIt-Anchor\" href=\"#r2s拨号\"></a> R2S拨号</h3>\n<p>如果你的光猫是桥接，那么就由路由器来拨号（通常来说，哪个网络设备配置更好，就誰来拨号，由于R2S的稳定性远不如光猫，所以这里选择光猫拨号更好），设置方法如下：</p>\n<p><img src=\"/2022/02/26/R2S_build/image-5.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>同样，选择修改WAN口，协议设置成PPPoE, PAP/CHAP，账号密码就是光猫的账号密码。比如电信宽带就是以<code>@163.gd</code>结尾的，密码如果忘记的话直接拨打10000（10086）重置就好，省时省力。</p>\n<p><img src=\"/2022/02/26/R2S_build/image-2-1024x507.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>接下来，需要用超级管理员账号登陆到光猫的IP中（<code>192.168.1.1</code>）,各大运营商的超级管理员账号和密码可以自行搜索。选择 网络-协议，然后设置成DHCP客户端。</p>\n<h3 id=\"小结\"><a class=\"markdownIt-Anchor\" href=\"#小结\"></a> 小结</h3>\n<p>用什么拨号，什么就选择PPPoE，然后其它设备就都设置成DHCP。</p>\n<p>用光猫拨号，光猫的设置里面就选择PPPoE，软路由以及其它路由器就选择DHCP客户端；</p>\n<p>用R2S拨号，光猫和其它路由设备的设置里面就选择DHCP客户端，软路由选择PPPoE。</p>\n<h2 id=\"各设备接入网络\"><a class=\"markdownIt-Anchor\" href=\"#各设备接入网络\"></a> 各设备接入网络</h2>\n<p>将软路由的WAN口与光猫的千兆口相连，然后断开软路由的LAN口与电脑网口的连接，此时软路由的LAN口根据各人组网要求的不同选择接不同的设备，可以接交换机，也可以接一台路由器（路由器设置为有线中继模式，也就是无线AP模式）</p>\n<p>如果家中设备比较多，或者很多屋子都需要连网线的话，可以买一个最便宜的千兆交换机放到弱电箱中，然后吧R2S接到交换机与光猫中间，这样就可以实现整个局域网都接入到软路由中来。（我来草草的画个图）</p>\n<p><img src=\"/2022/02/26/R2S_build/image-20220305212846426.png\" alt=\"image-20220305212846426\" loading=\"lazy\"></p>\n<h2 id=\"利用插件设置科学上网\"><a class=\"markdownIt-Anchor\" href=\"#利用插件设置科学上网\"></a> 利用插件设置科学上网</h2>\n<p>根据前面的步骤，如果你的设备能够正常访问网络了，就可以开始探索OpenWrt的各类插件了。关于科学上网，常见的插件有PassWall, ShadowScoksR++, OpenClash，由于OpenClash具备强大的分流策略机制（根据你访问的域名或者IP的不同决定走不同的节点），我们在此以OpenCalsh为例设置科学上网</p>\n<p><img src=\"/2022/02/26/R2S_build/image-7.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>首先，在服务菜单中找到OpenClash，然后选择配置文件订阅，选择添加配置文件</p>\n<p><img src=\"/2022/02/26/R2S_build/image-8.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>配置文件名随便写，用途是给用户自己区分的，订阅地址填上机场给你的订阅地址，其余地方无需设置，直接应用并保存即可。然后回到OpenClash主页，配置文件区域发送了变化。</p>\n<p><img src=\"/2022/02/26/R2S_build/image-9-1024x194.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>最后点击左下角的启动按钮，等待服务器上线运行即可。</p>\n<p><img src=\"/2022/02/26/R2S_build/image-10.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>如果你设置后无法正常科学上网，原因是有很多的，需要你自己慢慢排查。</p>\n<h2 id=\"更多原作者的话\"><a class=\"markdownIt-Anchor\" href=\"#更多原作者的话\"></a> 更多（原作者的话）</h2>\n<p><a href=\"https://wiki.friendlyarm.com/wiki/index.php/NanoPi_R2S/zh\">NanoPi R2S WIKI</a></p>\n<p>上面的链接是R2S的WIKI书，上面详细记录了R2S的配置以及实际测速情况，也有如何编译系统等教程。</p>\n<p>个人使用R2S两年，从大一到大三都在用这个，感觉就是到千兆不太行，500M是瓶颈了，然后连久了没那么稳定，官网手册上宣传它是又稳定又能达到千兆的，这个听听就好，R2S本来是适合入门的，但是现在价格炒的太高了，没这个必要去买它，目前有很多更具有性价比的软路由可供选择。</p>\n<p>此外向大家推荐软路由界的大佬: <a href=\"https://youtube.com/c/jackstone\">JackStone的Youtube主页</a> ，人称老白，做了很多小主机的视频，如果想选购更具性价比的设备，可以看他的合集，比如2021软路由选购建议这些。</p>\n<h2 id=\"组网时遇到过的问题我的话\"><a class=\"markdownIt-Anchor\" href=\"#组网时遇到过的问题我的话\"></a> 组网时遇到过的问题（我的话）</h2>\n<ol>\n<li>组网的过程中可能出现无法自动分配IP地址的问题，比如说小米的路由器默认会分配<code>192.168.31.XXX</code>；如果你会手动配置的话可以试试，不过最简单的办法就是等，去洗个澡回来就好了。如果还没好，那么可以考虑RESET一下路由器。</li>\n<li>OpenClash插件在首次启动的时候，可能会启动失败，他会提示需要你选择编译架构，按照他的提示，选择Arm-v8架构即可。</li>\n<li>网线通常插上马上就会亮灯，5s左右就能ping通，不过不要太相信科学。~~我有一次ping了10多分钟。~~真的，不通的话不一定是没插紧，也不一定是插错了，<strong>很有可能是因为你没给我微信或者支付宝赞赏</strong>。</li>\n<li>R2S是很基础的一款软路由，稳定性可能不会太好，不过最有可能导致网络不稳定的还是机场的选择，如果选择廉价机场的话，要做好不知道什么时候突然断网10分钟的准备。</li>\n<li>计算机网络这门学科是玄学的一个分支。</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\"></a> 前言</h2>\n<p>本文授权转载自<a href=\"https://www.bytedance.fit/?p=1051\">R2S家庭组网实操 – Orange Tien</a>，作者：Orange Tien，在此基础上略加修改，<s>并不会定期更新</s>。</p>\n<p>本文主要介绍R2S的基本使用方法，目前本人（Tony）也在原作者（Orange Tien）的怂恿下在两个地方分别搭建了两个R2S，看起来很简单，其实不是一帆风顺；因此也会把实际组网中遇到的问题列到最后供大家参考。</p>\n<h2 id=\"确定所需物理设备\"><a class=\"markdownIt-Anchor\" href=\"#确定所需物理设备\"></a> 确定所需物理设备</h2>\n<ul>\n<li>一台R2S软路由以及它的电源线</li>\n<li>两根用不着太长的网线一张TF卡（作为R2S的系统盘）以及一个读写TF卡的读卡器</li>\n<li>一台可以插网线的电脑</li>\n<li>交换机（可选）</li>\n<li>插排（某些时候插座不够用）</li>\n</ul>\n<h2 id=\"烧录openwrt系统\"><a class=\"markdownIt-Anchor\" href=\"#烧录openwrt系统\"></a> 烧录OpenWrt系统</h2>\n<p>烧录软件：<a href=\"https://www.balena.io/etcher/\">BalenaEtcher</a></p>\n<p>软路由系统：</p>\n<p><a href=\"https://bigdongdong.cowtransfer.com/s/a3420546d30343\">OpenWrt-R2S-dongdong</a></p>\n<p><a href=\"https://bigdongdong.cowtransfer.com/s/9a349ee597aa4f\">OpenWrt-R2S-esir</a></p>\n<p>第一个链接比较新，界面比较好看一些，推荐选择这个下载；第二个系统是eSir大人写的2020版本，已经很旧了；<s>奈何暂时没找到别的系统</s>，如果自行找到更好的系统也可以不用这俩链接。注意系统是要支持Arm架构的，因为Openwrt不是x86架构下的产物。</p>\n<h2 id=\"开始烧录系统至tf卡\"><a class=\"markdownIt-Anchor\" href=\"#开始烧录系统至tf卡\"></a> 开始烧录系统至TF卡</h2>\n<p>打开BalenaEtcher，选择Flash from file，然后将OpenWrt系统烧录到TF卡中即可。</p>\n<p><img src=\"/2022/02/26/R2S_build/image-1.png\" alt=\"img\"></p>\n<p>注意：选择文件时只选择镜像文件，不要把那些七七八八的文档说明也选进去。选择<code>.gz</code>(<code>.img</code>)文件来烧录即可，烧录完成后直接拔掉读卡器；系统会提示格式化，此时千万<strong>不要</strong>格式化！！！（<s>否则，就重来一遍吧</s>）</p>\n<h2 id=\"登入r2s后台\"><a class=\"markdownIt-Anchor\" href=\"#登入r2s后台\"></a> 登入R2S后台</h2>\n<p>把烧录好固件的TF卡插入R2S，然后给它插上电源，WAN口可以不接，将R2S的LAN口连接电脑的网口，根据所刷入的固件（软路由系统）的不同来决定后台地址，一般来说，软路由后台是<code>192.168.X.1</code> ，本文的系统后台是<code>192.168.22.1</code>，所以说我们在电脑浏览器内输入<code>192.168.5.1</code>(<code>192.168.22.1</code>)以进入后台。后台账号是root，默认密码基本都是password（若下载本文的系统，密码则为空），具体操作链接里面写的很清楚。</p>\n<h2 id=\"拨号或者dhcp客户端\"><a class=\"markdownIt-Anchor\" href=\"#拨号或者dhcp客户端\"></a> 拨号或者DHCP客户端</h2>\n<h3 id=\"光猫拨号\"><a class=\"markdownIt-Anchor\" href=\"#光猫拨号\"></a> 光猫拨号</h3>\n<p>如果你家里的组网方式是通过光猫拨号（通常都是光猫拨号），那么设置方法如下：</p>\n<p>选择 网络-接口， 然后选择 修改WAN口设置</p>\n<p><img src=\"/2022/02/26/R2S_build/image-2-1024x507.png\" alt=\"img\"></p>\n<p>将WAN口设置成DHCP客户端，然后保存应用即可，此外无须做其他任何设置。</p>\n<p><img src=\"/2022/02/26/R2S_build/image-3-1024x485.png\" alt=\"img\"></p>\n<h3 id=\"r2s拨号\"><a class=\"markdownIt-Anchor\" href=\"#r2s拨号\"></a> R2S拨号</h3>\n<p>如果你的光猫是桥接，那么就由路由器来拨号（通常来说，哪个网络设备配置更好，就誰来拨号，由于R2S的稳定性远不如光猫，所以这里选择光猫拨号更好），设置方法如下：</p>\n<p><img src=\"/2022/02/26/R2S_build/image-5.png\" alt=\"img\"></p>\n<p>同样，选择修改WAN口，协议设置成PPPoE, PAP/CHAP，账号密码就是光猫的账号密码。比如电信宽带就是以<code>@163.gd</code>结尾的，密码如果忘记的话直接拨打10000（10086）重置就好，省时省力。</p>\n<p><img src=\"/2022/02/26/R2S_build/image-2-1024x507.png\" alt=\"img\"></p>\n<p>接下来，需要用超级管理员账号登陆到光猫的IP中（<code>192.168.1.1</code>）,各大运营商的超级管理员账号和密码可以自行搜索。选择 网络-协议，然后设置成DHCP客户端。</p>\n<h3 id=\"小结\"><a class=\"markdownIt-Anchor\" href=\"#小结\"></a> 小结</h3>\n<p>用什么拨号，什么就选择PPPoE，然后其它设备就都设置成DHCP。</p>\n<p>用光猫拨号，光猫的设置里面就选择PPPoE，软路由以及其它路由器就选择DHCP客户端；</p>\n<p>用R2S拨号，光猫和其它路由设备的设置里面就选择DHCP客户端，软路由选择PPPoE。</p>\n<h2 id=\"各设备接入网络\"><a class=\"markdownIt-Anchor\" href=\"#各设备接入网络\"></a> 各设备接入网络</h2>\n<p>将软路由的WAN口与光猫的千兆口相连，然后断开软路由的LAN口与电脑网口的连接，此时软路由的LAN口根据各人组网要求的不同选择接不同的设备，可以接交换机，也可以接一台路由器（路由器设置为有线中继模式，也就是无线AP模式）</p>\n<p>如果家中设备比较多，或者很多屋子都需要连网线的话，可以买一个最便宜的千兆交换机放到弱电箱中，然后吧R2S接到交换机与光猫中间，这样就可以实现整个局域网都接入到软路由中来。（我来草草的画个图）</p>\n<p><img src=\"/2022/02/26/R2S_build/image-20220305212846426.png\" alt=\"image-20220305212846426\"></p>\n<h2 id=\"利用插件设置科学上网\"><a class=\"markdownIt-Anchor\" href=\"#利用插件设置科学上网\"></a> 利用插件设置科学上网</h2>\n<p>根据前面的步骤，如果你的设备能够正常访问网络了，就可以开始探索OpenWrt的各类插件了。关于科学上网，常见的插件有PassWall, ShadowScoksR++, OpenClash，由于OpenClash具备强大的分流策略机制（根据你访问的域名或者IP的不同决定走不同的节点），我们在此以OpenCalsh为例设置科学上网</p>\n<p><img src=\"/2022/02/26/R2S_build/image-7.png\" alt=\"img\"></p>\n<p>首先，在服务菜单中找到OpenClash，然后选择配置文件订阅，选择添加配置文件</p>\n<p><img src=\"/2022/02/26/R2S_build/image-8.png\" alt=\"img\"></p>\n<p>配置文件名随便写，用途是给用户自己区分的，订阅地址填上机场给你的订阅地址，其余地方无需设置，直接应用并保存即可。然后回到OpenClash主页，配置文件区域发送了变化。</p>\n<p><img src=\"/2022/02/26/R2S_build/image-9-1024x194.png\" alt=\"img\"></p>\n<p>最后点击左下角的启动按钮，等待服务器上线运行即可。</p>\n<p><img src=\"/2022/02/26/R2S_build/image-10.png\" alt=\"img\"></p>\n<p>如果你设置后无法正常科学上网，原因是有很多的，需要你自己慢慢排查。</p>\n<h2 id=\"更多原作者的话\"><a class=\"markdownIt-Anchor\" href=\"#更多原作者的话\"></a> 更多（原作者的话）</h2>\n<p><a href=\"https://wiki.friendlyarm.com/wiki/index.php/NanoPi_R2S/zh\">NanoPi R2S WIKI</a></p>\n<p>上面的链接是R2S的WIKI书，上面详细记录了R2S的配置以及实际测速情况，也有如何编译系统等教程。</p>\n<p>个人使用R2S两年，从大一到大三都在用这个，感觉就是到千兆不太行，500M是瓶颈了，然后连久了没那么稳定，官网手册上宣传它是又稳定又能达到千兆的，这个听听就好，R2S本来是适合入门的，但是现在价格炒的太高了，没这个必要去买它，目前有很多更具有性价比的软路由可供选择。</p>\n<p>此外向大家推荐软路由界的大佬: <a href=\"https://youtube.com/c/jackstone\">JackStone的Youtube主页</a> ，人称老白，做了很多小主机的视频，如果想选购更具性价比的设备，可以看他的合集，比如2021软路由选购建议这些。</p>\n<h2 id=\"组网时遇到过的问题我的话\"><a class=\"markdownIt-Anchor\" href=\"#组网时遇到过的问题我的话\"></a> 组网时遇到过的问题（我的话）</h2>\n<ol>\n<li>组网的过程中可能出现无法自动分配IP地址的问题，比如说小米的路由器默认会分配<code>192.168.31.XXX</code>；如果你会手动配置的话可以试试，不过最简单的办法就是等，去洗个澡回来就好了。如果还没好，那么可以考虑RESET一下路由器。</li>\n<li>OpenClash插件在首次启动的时候，可能会启动失败，他会提示需要你选择编译架构，按照他的提示，选择Arm-v8架构即可。</li>\n<li>网线通常插上马上就会亮灯，5s左右就能ping通，不过不要太相信科学。~~我有一次ping了10多分钟。~~真的，不通的话不一定是没插紧，也不一定是插错了，<strong>很有可能是因为你没给我微信或者支付宝赞赏</strong>。</li>\n<li>R2S是很基础的一款软路由，稳定性可能不会太好，不过最有可能导致网络不稳定的还是机场的选择，如果选择廉价机场的话，要做好不知道什么时候突然断网10分钟的准备。</li>\n<li>计算机网络这门学科是玄学的一个分支。</li>\n</ol>\n"},{"title":"STM32 简介","date":"2022-05-09T06:36:48.000Z","author":"Tony","katex":true,"_content":"\n# STM32 介绍\n\nSTM32单片机主要是由意法半导体公司设计的微控制器,其具有低功耗、低成本和高性能的特点,适用于嵌入式应用。其采用ARM Cortex-O内核,根据其内核架构的不同,可以将其分成一系列产品,当前主流的产品包括STM32F0、STM32F1、STM32F3,具有超低功耗的产品包括STM32L0、STM32L1、STM32L4等。由于STM32单片机中应用的内核具有先进的架构,使其在实施性能以及功耗控制等方面都具有较强表现,因此在整合和集成方面就有较大的优势,开发起来较为方便,该类型的单片机能非常迅速地实现开发和投入市场,当前市场中这种类型的单片机十分常见,类型多样,包括基础型、智能型和高级型等,应用都比较广泛。\n\n# STM32 Cube IDE 介绍\n\n首先下载STM32的编程IDE：STM32CubeIDE. (下载链接：[STM32CubeIDE - Integrated Development Environment for STM32 - STMicroelectronics](https://www.st.com/en/development-tools/stm32cubeide.html?msclkid=3559ada6cf6311ecbd9f53d57c28a659))\n\n与其它编程语言一样，嵌入式开发同样倾向于使用高大上的IDE进行编程，其原因是此类IDE可以自动生成绝大部分代码，以及代码补全，编译运行烧录等一条龙服务。不需要用户手动写入大量枯燥无味的代码，极大地降低学习成本。\n\n下载后新建工程文件，本次编程的目标是**将一个简单的跑马灯代码烧录到单片机中**并运行MCU。\n\n新建工程文件后需要手动选择MCU的具体型号，左上角搜索单片机的具体型号即可，选中手里的单片机型号，右下角点击下一步。\n\n![Screenshot 2022-05-09 131459](STM32-Introduction/Screenshot%202022-05-09%20131459.png)\n\n接下来会跳出如下界面，选择工程存放的目录和工程名称，其它的不需要做调整。这里我们选择C语言作为目标语言即可，不需要选择C++语言，如果你熟悉C++的单片机编译就当我没说。\n\n<img src=\"STM32-Introduction/Screenshot%202022-05-09%20131527.png\" alt=\"Screenshot 2022-05-09 131527\" style=\"zoom:75%;\" />\n\n接下来就会跳出STM32Cube IDE的主界面，我这里引用了[Naisu Xu的博客](https://blog.csdn.net/Naisu_kun/article/details/95935283?msclkid=ca6cf665cf6511ecae8b0207cf9b728f)里面的一篇文章里的图片来介绍整个界面的各个模块的功能。\n\n![在这里插入图片描述](STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70.png)\n\n最初的界面是单片机CPU的引脚视图，右上角可以切换到代码编辑视图；我们在编译工程时将频繁地使用这两个视图。\n\n![在这里插入图片描述](STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70-16520801218142.png)\n\n#  STM32 开发流程\n\n首先在引脚视图下找到RCC， RCC是控制时钟频率的引脚，将High Speed Clock (HSE)调整成 Crystal/Ceramic Resonator模式。调整之后可以看到视图中的两个控制RCC的引脚变绿。\n\n![Screenshot 2022-05-09 130125](STM32-Introduction/Screenshot%202022-05-09%20130125.png)\n\n接下来找到SYS引脚，该引脚指向的是Debug模块，将其点亮可以更好的支持编译和调试代码，不过对于跑马灯程序来讲，可以忽略这一步。\n\n![Screenshot 2022-05-09 130159](STM32-Introduction/Screenshot%202022-05-09%20130159.png)\n\n下一步，找到自己手中的单片机的原理图，找到LED指示灯，我自己的STM32F407的LED灯的原理图如下，可以看到$PD12, PD13, PD14, PD15$引脚分别控制四种不同颜色的二极管。\n\n![img](STM32-Introduction/Center.png)\n\n右键点击$PD12$引脚，选择$GPIO\\_Output$将其点亮，将GPIO调整到$Pull-up$，并将引脚名称变为$LED_3$。如下图所示：\n\n![Screenshot 2022-05-09 130051](STM32-Introduction/Screenshot%202022-05-09%20130051.png)\n\n同理设置好$PD13, PD14, PD15$的引脚，可以从上图中看到引脚在设置好之后会变绿。这时候转到代码编辑模式，可以看到我们在设置好这些引脚后在`main.h`中会自动生成一些宏定义代码，如下图所示：\n\n![Screenshot 2022-05-09 125830](STM32-Introduction/Screenshot%202022-05-09%20125830-16520802827714.png)\n\n```c\n#define LED4_Pin GPIO_PIN_12\n#define LED4_GPIO_Port GPIOD\n#define LED3_Pin GPIO_PIN_13\n#define LED3_GPIO_Port GPIOD\n#define LED5_Pin GPIO_PIN_14\n#define LED5_GPIO_Port GPIOD\n```\n\n接下来转到`main.c`函数中，在`while()`循环中加入代码。需要注意的是，要在`/* USER CODE BEGIN WHILE */ `和`/* USER CODE END WHILE */`之间编写代码，否则在重新编译固件的时候会将其余代码全部初始化。\n\n![Screenshot 2022-05-09 130023](STM32-Introduction/Screenshot%202022-05-09%20130023.png)\n\n```c\n  /* USER CODE BEGIN WHILE */\n  while (1)\n  {\n\t  HAL_GPIO_WritePin(LED3_GPIO_Port, LED3_Pin, GPIO_PIN_RESET);\n\t  HAL_Delay(100);\n\t  HAL_GPIO_WritePin(LED3_GPIO_Port, LED3_Pin, GPIO_PIN_SET);\n\t  HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_RESET);\n\t  HAL_Delay(100);\n\t  HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_SET);\n\t  HAL_GPIO_WritePin(LED5_GPIO_Port, LED5_Pin, GPIO_PIN_RESET);\n\t  HAL_Delay(100);\n\t  HAL_GPIO_WritePin(LED5_GPIO_Port, LED5_Pin, GPIO_PIN_SET);\n    /* USER CODE END WHILE */\n\n    /* USER CODE BEGIN 3 */\n\n  }\n```\n\n写好后点击编译固件（就是那个锤子），然后在电脑上链接单片机，点击运行程序即可将代码写入单片机。\n\n![Screenshot 2022-05-09 130250](STM32-Introduction/Screenshot%202022-05-09%20130250.png)\n\n大功告成了！\n\n<video src=\"STM32-Introduction/b6b59519626c1efe2aa367207f45ce83.mp4\"></video>\n","source":"_posts/STM32-Introduction.md","raw":"---\ntitle: STM32 简介\ndate: 2022-05-09 14:36:48\ntags: \n  - STM32\n  - MCU\n  - 嵌入式\ncategories: MCU\nauthor: Tony\nkatex: true\n---\n\n# STM32 介绍\n\nSTM32单片机主要是由意法半导体公司设计的微控制器,其具有低功耗、低成本和高性能的特点,适用于嵌入式应用。其采用ARM Cortex-O内核,根据其内核架构的不同,可以将其分成一系列产品,当前主流的产品包括STM32F0、STM32F1、STM32F3,具有超低功耗的产品包括STM32L0、STM32L1、STM32L4等。由于STM32单片机中应用的内核具有先进的架构,使其在实施性能以及功耗控制等方面都具有较强表现,因此在整合和集成方面就有较大的优势,开发起来较为方便,该类型的单片机能非常迅速地实现开发和投入市场,当前市场中这种类型的单片机十分常见,类型多样,包括基础型、智能型和高级型等,应用都比较广泛。\n\n# STM32 Cube IDE 介绍\n\n首先下载STM32的编程IDE：STM32CubeIDE. (下载链接：[STM32CubeIDE - Integrated Development Environment for STM32 - STMicroelectronics](https://www.st.com/en/development-tools/stm32cubeide.html?msclkid=3559ada6cf6311ecbd9f53d57c28a659))\n\n与其它编程语言一样，嵌入式开发同样倾向于使用高大上的IDE进行编程，其原因是此类IDE可以自动生成绝大部分代码，以及代码补全，编译运行烧录等一条龙服务。不需要用户手动写入大量枯燥无味的代码，极大地降低学习成本。\n\n下载后新建工程文件，本次编程的目标是**将一个简单的跑马灯代码烧录到单片机中**并运行MCU。\n\n新建工程文件后需要手动选择MCU的具体型号，左上角搜索单片机的具体型号即可，选中手里的单片机型号，右下角点击下一步。\n\n![Screenshot 2022-05-09 131459](STM32-Introduction/Screenshot%202022-05-09%20131459.png)\n\n接下来会跳出如下界面，选择工程存放的目录和工程名称，其它的不需要做调整。这里我们选择C语言作为目标语言即可，不需要选择C++语言，如果你熟悉C++的单片机编译就当我没说。\n\n<img src=\"STM32-Introduction/Screenshot%202022-05-09%20131527.png\" alt=\"Screenshot 2022-05-09 131527\" style=\"zoom:75%;\" />\n\n接下来就会跳出STM32Cube IDE的主界面，我这里引用了[Naisu Xu的博客](https://blog.csdn.net/Naisu_kun/article/details/95935283?msclkid=ca6cf665cf6511ecae8b0207cf9b728f)里面的一篇文章里的图片来介绍整个界面的各个模块的功能。\n\n![在这里插入图片描述](STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70.png)\n\n最初的界面是单片机CPU的引脚视图，右上角可以切换到代码编辑视图；我们在编译工程时将频繁地使用这两个视图。\n\n![在这里插入图片描述](STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70-16520801218142.png)\n\n#  STM32 开发流程\n\n首先在引脚视图下找到RCC， RCC是控制时钟频率的引脚，将High Speed Clock (HSE)调整成 Crystal/Ceramic Resonator模式。调整之后可以看到视图中的两个控制RCC的引脚变绿。\n\n![Screenshot 2022-05-09 130125](STM32-Introduction/Screenshot%202022-05-09%20130125.png)\n\n接下来找到SYS引脚，该引脚指向的是Debug模块，将其点亮可以更好的支持编译和调试代码，不过对于跑马灯程序来讲，可以忽略这一步。\n\n![Screenshot 2022-05-09 130159](STM32-Introduction/Screenshot%202022-05-09%20130159.png)\n\n下一步，找到自己手中的单片机的原理图，找到LED指示灯，我自己的STM32F407的LED灯的原理图如下，可以看到$PD12, PD13, PD14, PD15$引脚分别控制四种不同颜色的二极管。\n\n![img](STM32-Introduction/Center.png)\n\n右键点击$PD12$引脚，选择$GPIO\\_Output$将其点亮，将GPIO调整到$Pull-up$，并将引脚名称变为$LED_3$。如下图所示：\n\n![Screenshot 2022-05-09 130051](STM32-Introduction/Screenshot%202022-05-09%20130051.png)\n\n同理设置好$PD13, PD14, PD15$的引脚，可以从上图中看到引脚在设置好之后会变绿。这时候转到代码编辑模式，可以看到我们在设置好这些引脚后在`main.h`中会自动生成一些宏定义代码，如下图所示：\n\n![Screenshot 2022-05-09 125830](STM32-Introduction/Screenshot%202022-05-09%20125830-16520802827714.png)\n\n```c\n#define LED4_Pin GPIO_PIN_12\n#define LED4_GPIO_Port GPIOD\n#define LED3_Pin GPIO_PIN_13\n#define LED3_GPIO_Port GPIOD\n#define LED5_Pin GPIO_PIN_14\n#define LED5_GPIO_Port GPIOD\n```\n\n接下来转到`main.c`函数中，在`while()`循环中加入代码。需要注意的是，要在`/* USER CODE BEGIN WHILE */ `和`/* USER CODE END WHILE */`之间编写代码，否则在重新编译固件的时候会将其余代码全部初始化。\n\n![Screenshot 2022-05-09 130023](STM32-Introduction/Screenshot%202022-05-09%20130023.png)\n\n```c\n  /* USER CODE BEGIN WHILE */\n  while (1)\n  {\n\t  HAL_GPIO_WritePin(LED3_GPIO_Port, LED3_Pin, GPIO_PIN_RESET);\n\t  HAL_Delay(100);\n\t  HAL_GPIO_WritePin(LED3_GPIO_Port, LED3_Pin, GPIO_PIN_SET);\n\t  HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_RESET);\n\t  HAL_Delay(100);\n\t  HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_SET);\n\t  HAL_GPIO_WritePin(LED5_GPIO_Port, LED5_Pin, GPIO_PIN_RESET);\n\t  HAL_Delay(100);\n\t  HAL_GPIO_WritePin(LED5_GPIO_Port, LED5_Pin, GPIO_PIN_SET);\n    /* USER CODE END WHILE */\n\n    /* USER CODE BEGIN 3 */\n\n  }\n```\n\n写好后点击编译固件（就是那个锤子），然后在电脑上链接单片机，点击运行程序即可将代码写入单片机。\n\n![Screenshot 2022-05-09 130250](STM32-Introduction/Screenshot%202022-05-09%20130250.png)\n\n大功告成了！\n\n<video src=\"STM32-Introduction/b6b59519626c1efe2aa367207f45ce83.mp4\"></video>\n","slug":"STM32-Introduction","published":1,"updated":"2022-05-09T14:48:34.984Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrdg002p1gzu04yne0c8","content":"<h1 id=\"stm32-介绍\"><a class=\"markdownIt-Anchor\" href=\"#stm32-介绍\"></a> STM32 介绍</h1>\n<p>STM32单片机主要是由意法半导体公司设计的微控制器,其具有低功耗、低成本和高性能的特点,适用于嵌入式应用。其采用ARM Cortex-O内核,根据其内核架构的不同,可以将其分成一系列产品,当前主流的产品包括STM32F0、STM32F1、STM32F3,具有超低功耗的产品包括STM32L0、STM32L1、STM32L4等。由于STM32单片机中应用的内核具有先进的架构,使其在实施性能以及功耗控制等方面都具有较强表现,因此在整合和集成方面就有较大的优势,开发起来较为方便,该类型的单片机能非常迅速地实现开发和投入市场,当前市场中这种类型的单片机十分常见,类型多样,包括基础型、智能型和高级型等,应用都比较广泛。</p>\n<h1 id=\"stm32-cube-ide-介绍\"><a class=\"markdownIt-Anchor\" href=\"#stm32-cube-ide-介绍\"></a> STM32 Cube IDE 介绍</h1>\n<p>首先下载STM32的编程IDE：STM32CubeIDE. (下载链接：<a href=\"https://www.st.com/en/development-tools/stm32cubeide.html?msclkid=3559ada6cf6311ecbd9f53d57c28a659\">STM32CubeIDE - Integrated Development Environment for STM32 - STMicroelectronics</a>)</p>\n<p>与其它编程语言一样，嵌入式开发同样倾向于使用高大上的IDE进行编程，其原因是此类IDE可以自动生成绝大部分代码，以及代码补全，编译运行烧录等一条龙服务。不需要用户手动写入大量枯燥无味的代码，极大地降低学习成本。</p>\n<p>下载后新建工程文件，本次编程的目标是<strong>将一个简单的跑马灯代码烧录到单片机中</strong>并运行MCU。</p>\n<p>新建工程文件后需要手动选择MCU的具体型号，左上角搜索单片机的具体型号即可，选中手里的单片机型号，右下角点击下一步。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20131459.png\" alt=\"Screenshot 2022-05-09 131459\" loading=\"lazy\"></p>\n<p>接下来会跳出如下界面，选择工程存放的目录和工程名称，其它的不需要做调整。这里我们选择C语言作为目标语言即可，不需要选择C<ins>语言，如果你熟悉C</ins>的单片机编译就当我没说。</p>\n<img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20131527.png\" alt=\"Screenshot 2022-05-09 131527\" style=\"zoom:75%;\" loading=\"lazy\">\n<p>接下来就会跳出STM32Cube IDE的主界面，我这里引用了<a href=\"https://blog.csdn.net/Naisu_kun/article/details/95935283?msclkid=ca6cf665cf6511ecae8b0207cf9b728f\">Naisu Xu的博客</a>里面的一篇文章里的图片来介绍整个界面的各个模块的功能。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70.png\" alt=\"在这里插入图片描述\" loading=\"lazy\"></p>\n<p>最初的界面是单片机CPU的引脚视图，右上角可以切换到代码编辑视图；我们在编译工程时将频繁地使用这两个视图。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70-16520801218142.png\" alt=\"在这里插入图片描述\" loading=\"lazy\"></p>\n<h1 id=\"stm32-开发流程\"><a class=\"markdownIt-Anchor\" href=\"#stm32-开发流程\"></a> STM32 开发流程</h1>\n<p>首先在引脚视图下找到RCC， RCC是控制时钟频率的引脚，将High Speed Clock (HSE)调整成 Crystal/Ceramic Resonator模式。调整之后可以看到视图中的两个控制RCC的引脚变绿。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20130125.png\" alt=\"Screenshot 2022-05-09 130125\" loading=\"lazy\"></p>\n<p>接下来找到SYS引脚，该引脚指向的是Debug模块，将其点亮可以更好的支持编译和调试代码，不过对于跑马灯程序来讲，可以忽略这一步。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20130159.png\" alt=\"Screenshot 2022-05-09 130159\" loading=\"lazy\"></p>\n<p>下一步，找到自己手中的单片机的原理图，找到LED指示灯，我自己的STM32F407的LED灯的原理图如下，可以看到<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>D</mi><mn>12</mn><mo separator=\"true\">,</mo><mi>P</mi><mi>D</mi><mn>13</mn><mo separator=\"true\">,</mo><mi>P</mi><mi>D</mi><mn>14</mn><mo separator=\"true\">,</mo><mi>P</mi><mi>D</mi><mn>15</mn></mrow><annotation encoding=\"application/x-tex\">PD12, PD13, PD14, PD15</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">5</span></span></span></span>引脚分别控制四种不同颜色的二极管。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Center.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>右键点击<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>D</mi><mn>12</mn></mrow><annotation encoding=\"application/x-tex\">PD12</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">2</span></span></span></span>引脚，选择<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>G</mi><mi>P</mi><mi>I</mi><mi>O</mi><mi mathvariant=\"normal\">_</mi><mi>O</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">GPIO\\_Output</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.99333em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span></span></span></span>将其点亮，将GPIO调整到<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>u</mi><mi>l</mi><mi>l</mi><mo>−</mo><mi>u</mi><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">Pull-up</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">p</span></span></span></span>，并将引脚名称变为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>L</mi><mi>E</mi><msub><mi>D</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">LED_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>。如下图所示：</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20130051.png\" alt=\"Screenshot 2022-05-09 130051\" loading=\"lazy\"></p>\n<p>同理设置好<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>D</mi><mn>13</mn><mo separator=\"true\">,</mo><mi>P</mi><mi>D</mi><mn>14</mn><mo separator=\"true\">,</mo><mi>P</mi><mi>D</mi><mn>15</mn></mrow><annotation encoding=\"application/x-tex\">PD13, PD14, PD15</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">5</span></span></span></span>的引脚，可以从上图中看到引脚在设置好之后会变绿。这时候转到代码编辑模式，可以看到我们在设置好这些引脚后在<code>main.h</code>中会自动生成一些宏定义代码，如下图所示：</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20125830-16520802827714.png\" alt=\"Screenshot 2022-05-09 125830\" loading=\"lazy\"></p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED4_Pin</span> <span class=\"token expression\">GPIO_PIN_12</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED4_GPIO_Port</span> <span class=\"token expression\">GPIOD</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED3_Pin</span> <span class=\"token expression\">GPIO_PIN_13</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED3_GPIO_Port</span> <span class=\"token expression\">GPIOD</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED5_Pin</span> <span class=\"token expression\">GPIO_PIN_14</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED5_GPIO_Port</span> <span class=\"token expression\">GPIOD</span></span></code></pre>\n<p>接下来转到<code>main.c</code>函数中，在<code>while()</code>循环中加入代码。需要注意的是，要在<code>/* USER CODE BEGIN WHILE */</code>和<code>/* USER CODE END WHILE */</code>之间编写代码，否则在重新编译固件的时候会将其余代码全部初始化。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20130023.png\" alt=\"Screenshot 2022-05-09 130023\" loading=\"lazy\"></p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token comment\">/* USER CODE BEGIN WHILE */</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED3_GPIO_Port<span class=\"token punctuation\">,</span> LED3_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_RESET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_Delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED3_GPIO_Port<span class=\"token punctuation\">,</span> LED3_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_SET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED4_GPIO_Port<span class=\"token punctuation\">,</span> LED4_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_RESET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_Delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED4_GPIO_Port<span class=\"token punctuation\">,</span> LED4_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_SET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED5_GPIO_Port<span class=\"token punctuation\">,</span> LED5_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_RESET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_Delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED5_GPIO_Port<span class=\"token punctuation\">,</span> LED5_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_SET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">/* USER CODE END WHILE */</span>\n\n  <span class=\"token comment\">/* USER CODE BEGIN 3 */</span>\n\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>写好后点击编译固件（就是那个锤子），然后在电脑上链接单片机，点击运行程序即可将代码写入单片机。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20130250.png\" alt=\"Screenshot 2022-05-09 130250\" loading=\"lazy\"></p>\n<p>大功告成了！</p>\n<p><video src=\"STM32-Introduction/b6b59519626c1efe2aa367207f45ce83.mp4\"></video></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"stm32-介绍\"><a class=\"markdownIt-Anchor\" href=\"#stm32-介绍\"></a> STM32 介绍</h1>\n<p>STM32单片机主要是由意法半导体公司设计的微控制器,其具有低功耗、低成本和高性能的特点,适用于嵌入式应用。其采用ARM Cortex-O内核,根据其内核架构的不同,可以将其分成一系列产品,当前主流的产品包括STM32F0、STM32F1、STM32F3,具有超低功耗的产品包括STM32L0、STM32L1、STM32L4等。由于STM32单片机中应用的内核具有先进的架构,使其在实施性能以及功耗控制等方面都具有较强表现,因此在整合和集成方面就有较大的优势,开发起来较为方便,该类型的单片机能非常迅速地实现开发和投入市场,当前市场中这种类型的单片机十分常见,类型多样,包括基础型、智能型和高级型等,应用都比较广泛。</p>\n<h1 id=\"stm32-cube-ide-介绍\"><a class=\"markdownIt-Anchor\" href=\"#stm32-cube-ide-介绍\"></a> STM32 Cube IDE 介绍</h1>\n<p>首先下载STM32的编程IDE：STM32CubeIDE. (下载链接：<a href=\"https://www.st.com/en/development-tools/stm32cubeide.html?msclkid=3559ada6cf6311ecbd9f53d57c28a659\">STM32CubeIDE - Integrated Development Environment for STM32 - STMicroelectronics</a>)</p>\n<p>与其它编程语言一样，嵌入式开发同样倾向于使用高大上的IDE进行编程，其原因是此类IDE可以自动生成绝大部分代码，以及代码补全，编译运行烧录等一条龙服务。不需要用户手动写入大量枯燥无味的代码，极大地降低学习成本。</p>\n<p>下载后新建工程文件，本次编程的目标是<strong>将一个简单的跑马灯代码烧录到单片机中</strong>并运行MCU。</p>\n<p>新建工程文件后需要手动选择MCU的具体型号，左上角搜索单片机的具体型号即可，选中手里的单片机型号，右下角点击下一步。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20131459.png\" alt=\"Screenshot 2022-05-09 131459\"></p>\n<p>接下来会跳出如下界面，选择工程存放的目录和工程名称，其它的不需要做调整。这里我们选择C语言作为目标语言即可，不需要选择C<ins>语言，如果你熟悉C</ins>的单片机编译就当我没说。</p>\n<img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20131527.png\" alt=\"Screenshot 2022-05-09 131527\" style=\"zoom:75%;\">\n<p>接下来就会跳出STM32Cube IDE的主界面，我这里引用了<a href=\"https://blog.csdn.net/Naisu_kun/article/details/95935283?msclkid=ca6cf665cf6511ecae8b0207cf9b728f\">Naisu Xu的博客</a>里面的一篇文章里的图片来介绍整个界面的各个模块的功能。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70.png\" alt=\"在这里插入图片描述\"></p>\n<p>最初的界面是单片机CPU的引脚视图，右上角可以切换到代码编辑视图；我们在编译工程时将频繁地使用这两个视图。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70-16520801218142.png\" alt=\"在这里插入图片描述\"></p>\n<h1 id=\"stm32-开发流程\"><a class=\"markdownIt-Anchor\" href=\"#stm32-开发流程\"></a> STM32 开发流程</h1>\n<p>首先在引脚视图下找到RCC， RCC是控制时钟频率的引脚，将High Speed Clock (HSE)调整成 Crystal/Ceramic Resonator模式。调整之后可以看到视图中的两个控制RCC的引脚变绿。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20130125.png\" alt=\"Screenshot 2022-05-09 130125\"></p>\n<p>接下来找到SYS引脚，该引脚指向的是Debug模块，将其点亮可以更好的支持编译和调试代码，不过对于跑马灯程序来讲，可以忽略这一步。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20130159.png\" alt=\"Screenshot 2022-05-09 130159\"></p>\n<p>下一步，找到自己手中的单片机的原理图，找到LED指示灯，我自己的STM32F407的LED灯的原理图如下，可以看到<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>D</mi><mn>12</mn><mo separator=\"true\">,</mo><mi>P</mi><mi>D</mi><mn>13</mn><mo separator=\"true\">,</mo><mi>P</mi><mi>D</mi><mn>14</mn><mo separator=\"true\">,</mo><mi>P</mi><mi>D</mi><mn>15</mn></mrow><annotation encoding=\"application/x-tex\">PD12, PD13, PD14, PD15</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">5</span></span></span></span>引脚分别控制四种不同颜色的二极管。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Center.png\" alt=\"img\"></p>\n<p>右键点击<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>D</mi><mn>12</mn></mrow><annotation encoding=\"application/x-tex\">PD12</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">2</span></span></span></span>引脚，选择<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>G</mi><mi>P</mi><mi>I</mi><mi>O</mi><mi mathvariant=\"normal\">_</mi><mi>O</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">GPIO\\_Output</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.99333em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span></span></span></span>将其点亮，将GPIO调整到<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>u</mi><mi>l</mi><mi>l</mi><mo>−</mo><mi>u</mi><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">Pull-up</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">p</span></span></span></span>，并将引脚名称变为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>L</mi><mi>E</mi><msub><mi>D</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">LED_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>。如下图所示：</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20130051.png\" alt=\"Screenshot 2022-05-09 130051\"></p>\n<p>同理设置好<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>D</mi><mn>13</mn><mo separator=\"true\">,</mo><mi>P</mi><mi>D</mi><mn>14</mn><mo separator=\"true\">,</mo><mi>P</mi><mi>D</mi><mn>15</mn></mrow><annotation encoding=\"application/x-tex\">PD13, PD14, PD15</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord\">1</span><span class=\"mord\">5</span></span></span></span>的引脚，可以从上图中看到引脚在设置好之后会变绿。这时候转到代码编辑模式，可以看到我们在设置好这些引脚后在<code>main.h</code>中会自动生成一些宏定义代码，如下图所示：</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20125830-16520802827714.png\" alt=\"Screenshot 2022-05-09 125830\"></p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED4_Pin</span> <span class=\"token expression\">GPIO_PIN_12</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED4_GPIO_Port</span> <span class=\"token expression\">GPIOD</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED3_Pin</span> <span class=\"token expression\">GPIO_PIN_13</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED3_GPIO_Port</span> <span class=\"token expression\">GPIOD</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED5_Pin</span> <span class=\"token expression\">GPIO_PIN_14</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED5_GPIO_Port</span> <span class=\"token expression\">GPIOD</span></span></code></pre>\n<p>接下来转到<code>main.c</code>函数中，在<code>while()</code>循环中加入代码。需要注意的是，要在<code>/* USER CODE BEGIN WHILE */</code>和<code>/* USER CODE END WHILE */</code>之间编写代码，否则在重新编译固件的时候会将其余代码全部初始化。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20130023.png\" alt=\"Screenshot 2022-05-09 130023\"></p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token comment\">/* USER CODE BEGIN WHILE */</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED3_GPIO_Port<span class=\"token punctuation\">,</span> LED3_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_RESET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_Delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED3_GPIO_Port<span class=\"token punctuation\">,</span> LED3_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_SET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED4_GPIO_Port<span class=\"token punctuation\">,</span> LED4_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_RESET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_Delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED4_GPIO_Port<span class=\"token punctuation\">,</span> LED4_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_SET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED5_GPIO_Port<span class=\"token punctuation\">,</span> LED5_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_RESET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_Delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">HAL_GPIO_WritePin</span><span class=\"token punctuation\">(</span>LED5_GPIO_Port<span class=\"token punctuation\">,</span> LED5_Pin<span class=\"token punctuation\">,</span> GPIO_PIN_SET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">/* USER CODE END WHILE */</span>\n\n  <span class=\"token comment\">/* USER CODE BEGIN 3 */</span>\n\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>写好后点击编译固件（就是那个锤子），然后在电脑上链接单片机，点击运行程序即可将代码写入单片机。</p>\n<p><img src=\"/2022/05/09/STM32-Introduction/Screenshot%202022-05-09%20130250.png\" alt=\"Screenshot 2022-05-09 130250\"></p>\n<p>大功告成了！</p>\n<p><video src=\"STM32-Introduction/b6b59519626c1efe2aa367207f45ce83.mp4\"></video></p>\n"},{"title":"链式二叉树简介","date":"2022-02-25T08:01:11.000Z","author":"Tony","katex":true,"_content":"\n\n\n## 前言\n\n> 人为什么难做选择？\n\n**选择意味着放弃**\n\n你选择一方，也就意味着放弃了另一方。摆在你面前的选择项越接近，你的选择就会越困难，因为放弃其中任何一个选择项都不容易。如果摆在你面前的选择项对比明显，那么选择起来就会轻松许多，大家几乎都会毫不犹豫的选择“好”的选择项，放弃掉“差”的选择项。\n\n**选择永远都不是完美的**\n\n选择永远都不可能十全十美，只可能满足尽量多的侧重点。选择的时候想满足越多的侧重点，可能就会越难做出选择。所以在选择上不要过于追求完美。\n\n警惕**逃避性选择**——不知道自己要去哪儿，还要选择离开。\n\n有一种选择是对现状不满，想逃离这种现状，但是却不知道去哪里。举个例子，可能目前的公司有各种问题，比如开发流程不规范等，如果因为这些问题离开，可能就会从一个坑跳到另外一个更大的坑。当决定离开的时候，一定是自己有明确的目标，很清楚自己想要什么。\n\n## 二叉树的定义\n\n二叉树要么为空，要么由根节点（root），左子树（left subtree）和右子树（right subtree）组成，而且左子树和右子树分别是一棵二叉树。说白了就是，二叉树的任何一个节点，**有且只能有0，1，2棵子树**。\n\n![二叉树示意图](binary_tree_1/2-1Q226195I0M1.gif)\n\n## 二叉树的实现\n\n二叉树的实现方式大致分两种，一种是以数组形式储存，另一种是以链表形式储存。以数组形式储存的好处是实现起来极其便捷，但是数组只能储存完全二叉树，就是二叉树的任何一个父节点（除了叶子节点）都要有两颗子树，如图所示：\n\n![满二叉树示意图](binary_tree_1/2-1Q226195949495.gif)\n\n我们这里使用链表的方法维护一个二叉树，一个是这样能够实现更宽泛的二叉树形式，减少内存开销；另外以链表形式实现二叉树可以让我们更加深入理解二叉树的本质。\n\n![二叉树链式存储结构示意图](binary_tree_1/2-1Q22R035341H.gif)\n\n### 头文件\n\n```c\n#pragma once\n#ifndef BST_H\n#define BST_H\n\nstruct TreeNode\n{\n\tElementType Node;\n\tTreeNode* L_Child;\n\tTreeNode* R_Child;\n};\ntypedef int ElementType;\ntypedef struct TreeNode* PtrToNode;\ntypedef struct TreeNode* Position;\ntypedef struct TreeNode* SearchTree;\n\nSearchTree MakeEmpty(SearchTree T);//initialize\nPosition Find(ElementType X, SearchTree T);\nPosition FindMin(SearchTree T);\nPosition FindMax(SearchTree T);\nSearchTree Insert(SearchTree T, ElementType X);\nSearchTree Delete(SearchTree T, ElementType X);\nElementType Retrieve(Position P);//Output\n\nvoid PreOrderTraverse(SearchTree T);\nvoid InOrderTraverse(SearchTree T);\nvoid PostOrderTraverse(SearchTree T);\n\n#endif\n```\n\n### 创建二叉树\n\n```c\nSearchTree MakeEmpty(SearchTree T)\n{\n\tif (T != NULL)\n\t{\n\t\tMakeEmpty(T->L_Child);\n\t\tMakeEmpty(T->R_Child);\n\t\tfree(T);\n\t}\n\treturn NULL;\n}\n```\n\n### 二叉树查找元素\n\n```c\nPosition Find(ElementType X, SearchTree T)\n{\n\tif(T == NULL)\n\t\treturn NULL;\n\tif (X < T->Node)\n\t\tFind(X, T->L_Child);\n\telse if (X > T->Node)\n\t\tFind(X, T->R_Child);\n\telse\n\t\treturn T;\n}\n```\n\n### 查找最大最小值\n\n```c\nPosition FindMin(SearchTree T)//递归写法\n{\n\tif (T == NULL)\n\t\treturn NULL;\n\telse if (T->L_Child == NULL)\n\t\treturn T;\n\telse\n\t\treturn FindMin(T->L_Child);\n}\nPosition FindMax(SearchTree T)//while循环写法\n{\n\tif (T == NULL)\n\t\treturn NULL;\n\telse\n\t{\n\t\twhile(T->R_Child != NULL)\n\t\t\tT=T->R_Child;\n\t\treturn T;\n\t}\n}\n```\n\n### 二叉树插入元素\n\n```c\nSearchTree Insert(SearchTree T, ElementType X)\n{\n\tif (T==NULL)// the fist element\n\t{\n\t\tT = new TreeNode;\n\t\tT->L_Child = NULL;\n\t\tT->R_Child = NULL;\n\t\tT->Node = X;\n\t}\n\telse\n\t{\n\t\tif (X < T->Node)//put X on the left\n\t\t\tT->L_Child=Insert(T->L_Child, X);\n\t\telse             //put X on the right\n\t\t\tT->R_Child = Insert(T->R_Child, X);\n\t}\n\treturn T;\n}\n```\n\n### 二叉树删除元素\n\n```c\nSearchTree Delete(SearchTree T, ElementType X)\n{\n\tif (T == NULL)\n\t\treturn NULL;\n\tif (X < T->Node)\n\t{\n\t\tT->L_Child= Delete(T->L_Child, X);\n\t}\n\telse if (X > T->Node)\n\t{\n\t\tT->R_Child=Delete(T->R_Child, X);\n\t}\n\telse\n\t{\n\t\tif (T->L_Child && T->R_Child) // 2  children\n\t\t{\n\t\t\tPosition minn = FindMin(T->R_Child);\n\t\t\tT->Node = minn->Node;\n\t\t\tT->R_Child = Delete(T->R_Child, T->Node);\n\n\t\t}\n\t\telse           // 1  or  0 child\n\t\t{\n\t\t\tPosition temp = T;\n\t\t\tif (T->L_Child == NULL)\n\t\t\t\tT = T->R_Child;\n\t\t\telse if (T->R_Child == NULL)\n\t\t\t\tT = T->L_Child;\n\t\t\tfree(temp);\n\t\t}\n\t}\n\treturn T;\n}\n```\n\n\n\n## 二叉树的遍历\n\n- 先序遍历$PreOrder(T)=Root(T)+PreOrder(left subT)+PreOrder(right subT)$\n- 中序遍历$InOrder(T)=InOrder(left subT)+Root(T)+InOrder(right subT)$\n- 后序遍历$PostOrder(T)=PostOrder(left subT)+PostOrder(Right subT)+Root(T)$\n\n![img](binary_tree_1/image.png)\n\n\n\n### 先序遍历\n\n1. 递归实现\n\n```c\nvoid PreOrderTraverse(SearchTree T)\n{\n\tif (T == NULL)\n\t\treturn;\n\tcout << Retrieve(T)<<\" \";\n\tPreOrderTraverse(T->L_Child);\n\tPreOrderTraverse(T->R_Child);\n}\n```\n\n2. 迭代实现\n\n```c\nvoid PreOrder(BiTree Root)\n{\n    stack <BiTree> s;\n    if (root) //如果根节点不为空\n        s.push(root); //则令根节点入栈\n    while (!s.empty()) //在栈变空之前反复循环\n    { \n        root = s.pop(); \n        cout << root->data; //弹出并访问当前节点\n        //下面左右孩子的顺序不能颠倒\n        //必须先让右孩子先入栈，再让左孩子入栈。\n        if (root->RChild)\n            s.push(root->RChild); //右孩子先入后出\n        if (root->LChild)\n            s.push(root->LChild); //左孩子后入先出\n    }\n}\n```\n\n我们通过一个实例来了解一下该迭代版本是如何工作的 :\n\n![img](binary_tree_1/v2-0ccba83c7b3dbf7b89964c04021025d9_720w.jpg)\n\n### 中序遍历\n\n1. 递归实现\n\n```c\nvoid InOrderTraverse(SearchTree T)\n{\n\tif (T == NULL)\n\t\treturn;\n\tInOrderTraverse(T->L_Child);\n\tcout << Retrieve(T) << \" \";\n\tInOrderTraverse(T->R_Child);\n}\n```\n\n2. 迭代实现\n\n```c\nvoid InOrderTraverse(BiTree root)\n{\n   Stack<BiTree> S; //辅助栈\n   while (true)\n      if (root) \n      {\n         S.push (root); //根节点进栈\n         root = root->LChild; //深入遍历左子树\n      } \n      else if (!S.empty()) \n      {\n         root = S.pop(); //尚未访问的最低祖先节点退栈\n         cout << root->data; //访问该祖先节点\n         root = root->RChild; //遍历祖先的右子树\n      } \n      else\n         break; //遍历完成\n}\n```\n\n### 后序遍历\n\n1. 递归实现\n\n```c\nvoid PostOrderTraverse(SearchTree T)\n{\n\tif (T == NULL)\n\t\treturn;\n\tPostOrderTraverse(T->L_Child);\n\tPostOrderTraverse(T->R_Child);\n\tcout << T->Node << \" \";\n}\n```\n\n2. 迭代实现\n\n```c\n#define A !cur->Lchild && !cur->Rchild\n//如果P不存在左孩子和右孩子，则可以直接访问它；\n#define B pre==cur->Lchild || pre==cur->Rchild\n//P存在左孩子或者右孩子，但是其左孩子和右孩子都已被访问过了;\nvoid PostOrder(BiTree Root)\n{\n    if (!Root)\n        return;\n    stack <BiTree> s;//辅助栈\n    BiTree cur=Root,pre=NULL;\n    s.push(Root);//根节点进栈\n    while (!s.empty())\n    {\n        cur=s.top();\n        if (A || B)\n        {\n            cout << cur->data;\n            s.pop();\n            pre=cur;\n        }\n        else\n        {\n            if (cur->Rchild)\n                s.push(cur->Rchild);\n            if (cur->Lchild)\n                s.push(cur->Lchild);\n        }\n    }\n}\n\n```\n\n## main()函数\n\n```c\nint main()\n{\n\tSearchTree My_Tree = NULL;\n\tMy_Tree = MakeEmpty(My_Tree);\n\tMy_Tree = Insert(My_Tree, 3);\n\tMy_Tree = Insert(My_Tree, 2);\n\tMy_Tree = Insert(My_Tree, 6);\n\tMy_Tree = Insert(My_Tree, 5);\n\tMy_Tree = Insert(My_Tree, 4);\n\tif (!Find(1, My_Tree))\n\t\tMy_Tree = Insert(My_Tree, 1);\n\tMy_Tree = Delete(My_Tree, 1);\n\tSearchTree min = FindMin(My_Tree);\n\tcout << Retrieve(min) << endl;\n\tPreOrderTraverse(My_Tree);\n\tInOrderTraverse(My_Tree);\n\tPostOrderTraverse(My_Tree);\n\treturn 0;\n}\n```\n\n\n\n下一篇文章：[数组与链式二叉树之间的转换 | Tony (tonylsx611.github.io)](https://tonylsx611.github.io/2022/02/24/binary_tree_2/)\n\n注：本文图片部分选自http://data.biancheng.net/；如有侵权，请联系我。","source":"_posts/binary_tree_1.md","raw":"---\ntitle: 链式二叉树简介\ndate: 2022-02-25 16:01:11\nauthor: Tony\ncategories:\n\t- algorithm\ntags: \n\t- Binary-tree\n\t- algorithm\nkatex: true\n---\n\n\n\n## 前言\n\n> 人为什么难做选择？\n\n**选择意味着放弃**\n\n你选择一方，也就意味着放弃了另一方。摆在你面前的选择项越接近，你的选择就会越困难，因为放弃其中任何一个选择项都不容易。如果摆在你面前的选择项对比明显，那么选择起来就会轻松许多，大家几乎都会毫不犹豫的选择“好”的选择项，放弃掉“差”的选择项。\n\n**选择永远都不是完美的**\n\n选择永远都不可能十全十美，只可能满足尽量多的侧重点。选择的时候想满足越多的侧重点，可能就会越难做出选择。所以在选择上不要过于追求完美。\n\n警惕**逃避性选择**——不知道自己要去哪儿，还要选择离开。\n\n有一种选择是对现状不满，想逃离这种现状，但是却不知道去哪里。举个例子，可能目前的公司有各种问题，比如开发流程不规范等，如果因为这些问题离开，可能就会从一个坑跳到另外一个更大的坑。当决定离开的时候，一定是自己有明确的目标，很清楚自己想要什么。\n\n## 二叉树的定义\n\n二叉树要么为空，要么由根节点（root），左子树（left subtree）和右子树（right subtree）组成，而且左子树和右子树分别是一棵二叉树。说白了就是，二叉树的任何一个节点，**有且只能有0，1，2棵子树**。\n\n![二叉树示意图](binary_tree_1/2-1Q226195I0M1.gif)\n\n## 二叉树的实现\n\n二叉树的实现方式大致分两种，一种是以数组形式储存，另一种是以链表形式储存。以数组形式储存的好处是实现起来极其便捷，但是数组只能储存完全二叉树，就是二叉树的任何一个父节点（除了叶子节点）都要有两颗子树，如图所示：\n\n![满二叉树示意图](binary_tree_1/2-1Q226195949495.gif)\n\n我们这里使用链表的方法维护一个二叉树，一个是这样能够实现更宽泛的二叉树形式，减少内存开销；另外以链表形式实现二叉树可以让我们更加深入理解二叉树的本质。\n\n![二叉树链式存储结构示意图](binary_tree_1/2-1Q22R035341H.gif)\n\n### 头文件\n\n```c\n#pragma once\n#ifndef BST_H\n#define BST_H\n\nstruct TreeNode\n{\n\tElementType Node;\n\tTreeNode* L_Child;\n\tTreeNode* R_Child;\n};\ntypedef int ElementType;\ntypedef struct TreeNode* PtrToNode;\ntypedef struct TreeNode* Position;\ntypedef struct TreeNode* SearchTree;\n\nSearchTree MakeEmpty(SearchTree T);//initialize\nPosition Find(ElementType X, SearchTree T);\nPosition FindMin(SearchTree T);\nPosition FindMax(SearchTree T);\nSearchTree Insert(SearchTree T, ElementType X);\nSearchTree Delete(SearchTree T, ElementType X);\nElementType Retrieve(Position P);//Output\n\nvoid PreOrderTraverse(SearchTree T);\nvoid InOrderTraverse(SearchTree T);\nvoid PostOrderTraverse(SearchTree T);\n\n#endif\n```\n\n### 创建二叉树\n\n```c\nSearchTree MakeEmpty(SearchTree T)\n{\n\tif (T != NULL)\n\t{\n\t\tMakeEmpty(T->L_Child);\n\t\tMakeEmpty(T->R_Child);\n\t\tfree(T);\n\t}\n\treturn NULL;\n}\n```\n\n### 二叉树查找元素\n\n```c\nPosition Find(ElementType X, SearchTree T)\n{\n\tif(T == NULL)\n\t\treturn NULL;\n\tif (X < T->Node)\n\t\tFind(X, T->L_Child);\n\telse if (X > T->Node)\n\t\tFind(X, T->R_Child);\n\telse\n\t\treturn T;\n}\n```\n\n### 查找最大最小值\n\n```c\nPosition FindMin(SearchTree T)//递归写法\n{\n\tif (T == NULL)\n\t\treturn NULL;\n\telse if (T->L_Child == NULL)\n\t\treturn T;\n\telse\n\t\treturn FindMin(T->L_Child);\n}\nPosition FindMax(SearchTree T)//while循环写法\n{\n\tif (T == NULL)\n\t\treturn NULL;\n\telse\n\t{\n\t\twhile(T->R_Child != NULL)\n\t\t\tT=T->R_Child;\n\t\treturn T;\n\t}\n}\n```\n\n### 二叉树插入元素\n\n```c\nSearchTree Insert(SearchTree T, ElementType X)\n{\n\tif (T==NULL)// the fist element\n\t{\n\t\tT = new TreeNode;\n\t\tT->L_Child = NULL;\n\t\tT->R_Child = NULL;\n\t\tT->Node = X;\n\t}\n\telse\n\t{\n\t\tif (X < T->Node)//put X on the left\n\t\t\tT->L_Child=Insert(T->L_Child, X);\n\t\telse             //put X on the right\n\t\t\tT->R_Child = Insert(T->R_Child, X);\n\t}\n\treturn T;\n}\n```\n\n### 二叉树删除元素\n\n```c\nSearchTree Delete(SearchTree T, ElementType X)\n{\n\tif (T == NULL)\n\t\treturn NULL;\n\tif (X < T->Node)\n\t{\n\t\tT->L_Child= Delete(T->L_Child, X);\n\t}\n\telse if (X > T->Node)\n\t{\n\t\tT->R_Child=Delete(T->R_Child, X);\n\t}\n\telse\n\t{\n\t\tif (T->L_Child && T->R_Child) // 2  children\n\t\t{\n\t\t\tPosition minn = FindMin(T->R_Child);\n\t\t\tT->Node = minn->Node;\n\t\t\tT->R_Child = Delete(T->R_Child, T->Node);\n\n\t\t}\n\t\telse           // 1  or  0 child\n\t\t{\n\t\t\tPosition temp = T;\n\t\t\tif (T->L_Child == NULL)\n\t\t\t\tT = T->R_Child;\n\t\t\telse if (T->R_Child == NULL)\n\t\t\t\tT = T->L_Child;\n\t\t\tfree(temp);\n\t\t}\n\t}\n\treturn T;\n}\n```\n\n\n\n## 二叉树的遍历\n\n- 先序遍历$PreOrder(T)=Root(T)+PreOrder(left subT)+PreOrder(right subT)$\n- 中序遍历$InOrder(T)=InOrder(left subT)+Root(T)+InOrder(right subT)$\n- 后序遍历$PostOrder(T)=PostOrder(left subT)+PostOrder(Right subT)+Root(T)$\n\n![img](binary_tree_1/image.png)\n\n\n\n### 先序遍历\n\n1. 递归实现\n\n```c\nvoid PreOrderTraverse(SearchTree T)\n{\n\tif (T == NULL)\n\t\treturn;\n\tcout << Retrieve(T)<<\" \";\n\tPreOrderTraverse(T->L_Child);\n\tPreOrderTraverse(T->R_Child);\n}\n```\n\n2. 迭代实现\n\n```c\nvoid PreOrder(BiTree Root)\n{\n    stack <BiTree> s;\n    if (root) //如果根节点不为空\n        s.push(root); //则令根节点入栈\n    while (!s.empty()) //在栈变空之前反复循环\n    { \n        root = s.pop(); \n        cout << root->data; //弹出并访问当前节点\n        //下面左右孩子的顺序不能颠倒\n        //必须先让右孩子先入栈，再让左孩子入栈。\n        if (root->RChild)\n            s.push(root->RChild); //右孩子先入后出\n        if (root->LChild)\n            s.push(root->LChild); //左孩子后入先出\n    }\n}\n```\n\n我们通过一个实例来了解一下该迭代版本是如何工作的 :\n\n![img](binary_tree_1/v2-0ccba83c7b3dbf7b89964c04021025d9_720w.jpg)\n\n### 中序遍历\n\n1. 递归实现\n\n```c\nvoid InOrderTraverse(SearchTree T)\n{\n\tif (T == NULL)\n\t\treturn;\n\tInOrderTraverse(T->L_Child);\n\tcout << Retrieve(T) << \" \";\n\tInOrderTraverse(T->R_Child);\n}\n```\n\n2. 迭代实现\n\n```c\nvoid InOrderTraverse(BiTree root)\n{\n   Stack<BiTree> S; //辅助栈\n   while (true)\n      if (root) \n      {\n         S.push (root); //根节点进栈\n         root = root->LChild; //深入遍历左子树\n      } \n      else if (!S.empty()) \n      {\n         root = S.pop(); //尚未访问的最低祖先节点退栈\n         cout << root->data; //访问该祖先节点\n         root = root->RChild; //遍历祖先的右子树\n      } \n      else\n         break; //遍历完成\n}\n```\n\n### 后序遍历\n\n1. 递归实现\n\n```c\nvoid PostOrderTraverse(SearchTree T)\n{\n\tif (T == NULL)\n\t\treturn;\n\tPostOrderTraverse(T->L_Child);\n\tPostOrderTraverse(T->R_Child);\n\tcout << T->Node << \" \";\n}\n```\n\n2. 迭代实现\n\n```c\n#define A !cur->Lchild && !cur->Rchild\n//如果P不存在左孩子和右孩子，则可以直接访问它；\n#define B pre==cur->Lchild || pre==cur->Rchild\n//P存在左孩子或者右孩子，但是其左孩子和右孩子都已被访问过了;\nvoid PostOrder(BiTree Root)\n{\n    if (!Root)\n        return;\n    stack <BiTree> s;//辅助栈\n    BiTree cur=Root,pre=NULL;\n    s.push(Root);//根节点进栈\n    while (!s.empty())\n    {\n        cur=s.top();\n        if (A || B)\n        {\n            cout << cur->data;\n            s.pop();\n            pre=cur;\n        }\n        else\n        {\n            if (cur->Rchild)\n                s.push(cur->Rchild);\n            if (cur->Lchild)\n                s.push(cur->Lchild);\n        }\n    }\n}\n\n```\n\n## main()函数\n\n```c\nint main()\n{\n\tSearchTree My_Tree = NULL;\n\tMy_Tree = MakeEmpty(My_Tree);\n\tMy_Tree = Insert(My_Tree, 3);\n\tMy_Tree = Insert(My_Tree, 2);\n\tMy_Tree = Insert(My_Tree, 6);\n\tMy_Tree = Insert(My_Tree, 5);\n\tMy_Tree = Insert(My_Tree, 4);\n\tif (!Find(1, My_Tree))\n\t\tMy_Tree = Insert(My_Tree, 1);\n\tMy_Tree = Delete(My_Tree, 1);\n\tSearchTree min = FindMin(My_Tree);\n\tcout << Retrieve(min) << endl;\n\tPreOrderTraverse(My_Tree);\n\tInOrderTraverse(My_Tree);\n\tPostOrderTraverse(My_Tree);\n\treturn 0;\n}\n```\n\n\n\n下一篇文章：[数组与链式二叉树之间的转换 | Tony (tonylsx611.github.io)](https://tonylsx611.github.io/2022/02/24/binary_tree_2/)\n\n注：本文图片部分选自http://data.biancheng.net/；如有侵权，请联系我。","slug":"binary_tree_1","published":1,"updated":"2022-03-28T08:44:54.295Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrdg002s1gzucdew5ti9","content":"<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\"></a> 前言</h2>\n<blockquote>\n<p>人为什么难做选择？</p>\n</blockquote>\n<p><strong>选择意味着放弃</strong></p>\n<p>你选择一方，也就意味着放弃了另一方。摆在你面前的选择项越接近，你的选择就会越困难，因为放弃其中任何一个选择项都不容易。如果摆在你面前的选择项对比明显，那么选择起来就会轻松许多，大家几乎都会毫不犹豫的选择“好”的选择项，放弃掉“差”的选择项。</p>\n<p><strong>选择永远都不是完美的</strong></p>\n<p>选择永远都不可能十全十美，只可能满足尽量多的侧重点。选择的时候想满足越多的侧重点，可能就会越难做出选择。所以在选择上不要过于追求完美。</p>\n<p>警惕<strong>逃避性选择</strong>——不知道自己要去哪儿，还要选择离开。</p>\n<p>有一种选择是对现状不满，想逃离这种现状，但是却不知道去哪里。举个例子，可能目前的公司有各种问题，比如开发流程不规范等，如果因为这些问题离开，可能就会从一个坑跳到另外一个更大的坑。当决定离开的时候，一定是自己有明确的目标，很清楚自己想要什么。</p>\n<h2 id=\"二叉树的定义\"><a class=\"markdownIt-Anchor\" href=\"#二叉树的定义\"></a> 二叉树的定义</h2>\n<p>二叉树要么为空，要么由根节点（root），左子树（left subtree）和右子树（right subtree）组成，而且左子树和右子树分别是一棵二叉树。说白了就是，二叉树的任何一个节点，<strong>有且只能有0，1，2棵子树</strong>。</p>\n<p><img src=\"/2022/02/25/binary_tree_1/2-1Q226195I0M1.gif\" alt=\"二叉树示意图\" loading=\"lazy\"></p>\n<h2 id=\"二叉树的实现\"><a class=\"markdownIt-Anchor\" href=\"#二叉树的实现\"></a> 二叉树的实现</h2>\n<p>二叉树的实现方式大致分两种，一种是以数组形式储存，另一种是以链表形式储存。以数组形式储存的好处是实现起来极其便捷，但是数组只能储存完全二叉树，就是二叉树的任何一个父节点（除了叶子节点）都要有两颗子树，如图所示：</p>\n<p><img src=\"/2022/02/25/binary_tree_1/2-1Q226195949495.gif\" alt=\"满二叉树示意图\" loading=\"lazy\"></p>\n<p>我们这里使用链表的方法维护一个二叉树，一个是这样能够实现更宽泛的二叉树形式，减少内存开销；另外以链表形式实现二叉树可以让我们更加深入理解二叉树的本质。</p>\n<p><img src=\"/2022/02/25/binary_tree_1/2-1Q22R035341H.gif\" alt=\"二叉树链式存储结构示意图\" loading=\"lazy\"></p>\n<h3 id=\"头文件\"><a class=\"markdownIt-Anchor\" href=\"#头文件\"></a> 头文件</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\">once</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifndef</span> <span class=\"token expression\">BST_H</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">BST_H</span></span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">TreeNode</span>\n<span class=\"token punctuation\">&#123;</span>\n\tElementType Node<span class=\"token punctuation\">;</span>\n\tTreeNode<span class=\"token operator\">*</span> L_Child<span class=\"token punctuation\">;</span>\n\tTreeNode<span class=\"token operator\">*</span> R_Child<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">int</span> ElementType<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">TreeNode</span><span class=\"token operator\">*</span> PtrToNode<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">TreeNode</span><span class=\"token operator\">*</span> Position<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">TreeNode</span><span class=\"token operator\">*</span> SearchTree<span class=\"token punctuation\">;</span>\n\nSearchTree <span class=\"token function\">MakeEmpty</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//initialize</span>\nPosition <span class=\"token function\">Find</span><span class=\"token punctuation\">(</span>ElementType X<span class=\"token punctuation\">,</span> SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nPosition <span class=\"token function\">FindMin</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nPosition <span class=\"token function\">FindMax</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nSearchTree <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">,</span> ElementType X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nSearchTree <span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">,</span> ElementType X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nElementType <span class=\"token function\">Retrieve</span><span class=\"token punctuation\">(</span>Position P<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//Output</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">PreOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">PostOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span></code></pre>\n<h3 id=\"创建二叉树\"><a class=\"markdownIt-Anchor\" href=\"#创建二叉树\"></a> 创建二叉树</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">SearchTree <span class=\"token function\">MakeEmpty</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">MakeEmpty</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">MakeEmpty</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">free</span><span class=\"token punctuation\">(</span>T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"二叉树查找元素\"><a class=\"markdownIt-Anchor\" href=\"#二叉树查找元素\"></a> 二叉树查找元素</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">Position <span class=\"token function\">Find</span><span class=\"token punctuation\">(</span>ElementType X<span class=\"token punctuation\">,</span> SearchTree T<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">&lt;</span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">Find</span><span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">></span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">Find</span><span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"查找最大最小值\"><a class=\"markdownIt-Anchor\" href=\"#查找最大最小值\"></a> 查找最大最小值</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">Position <span class=\"token function\">FindMin</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token comment\">//递归写法</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token function\">FindMin</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nPosition <span class=\"token function\">FindMax</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token comment\">//while循环写法</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t\tT<span class=\"token operator\">=</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"二叉树插入元素\"><a class=\"markdownIt-Anchor\" href=\"#二叉树插入元素\"></a> 二叉树插入元素</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">SearchTree <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">,</span> ElementType X<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T<span class=\"token operator\">==</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// the fist element</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tT <span class=\"token operator\">=</span> new TreeNode<span class=\"token punctuation\">;</span>\n\t\tT<span class=\"token operator\">-></span>L_Child <span class=\"token operator\">=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t\tT<span class=\"token operator\">-></span>R_Child <span class=\"token operator\">=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t\tT<span class=\"token operator\">-></span>Node <span class=\"token operator\">=</span> X<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">else</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">&lt;</span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span><span class=\"token comment\">//put X on the left</span>\n\t\t\tT<span class=\"token operator\">-></span>L_Child<span class=\"token operator\">=</span><span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">else</span>             <span class=\"token comment\">//put X on the right</span>\n\t\t\tT<span class=\"token operator\">-></span>R_Child <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"二叉树删除元素\"><a class=\"markdownIt-Anchor\" href=\"#二叉树删除元素\"></a> 二叉树删除元素</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">SearchTree <span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">,</span> ElementType X<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">&lt;</span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tT<span class=\"token operator\">-></span>L_Child<span class=\"token operator\">=</span> <span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">></span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tT<span class=\"token operator\">-></span>R_Child<span class=\"token operator\">=</span><span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">else</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child <span class=\"token operator\">&amp;&amp;</span> T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2  children</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tPosition minn <span class=\"token operator\">=</span> <span class=\"token function\">FindMin</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tT<span class=\"token operator\">-></span>Node <span class=\"token operator\">=</span> minn<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">;</span>\n\t\t\tT<span class=\"token operator\">-></span>R_Child <span class=\"token operator\">=</span> <span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">,</span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token keyword\">else</span>           <span class=\"token comment\">// 1  or  0 child</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tPosition temp <span class=\"token operator\">=</span> T<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t\t\tT <span class=\"token operator\">=</span> T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t\t\tT <span class=\"token operator\">=</span> T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">free</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"二叉树的遍历\"><a class=\"markdownIt-Anchor\" href=\"#二叉树的遍历\"></a> 二叉树的遍历</h2>\n<ul>\n<li>先序遍历<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>R</mi><mi>o</mi><mi>o</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>P</mi><mi>r</mi><mi>e</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>P</mi><mi>r</mi><mi>e</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">PreOrder(T)=Root(T)+PreOrder(left subT)+PreOrder(right subT)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>中序遍历<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>I</mi><mi>n</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>I</mi><mi>n</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>R</mi><mi>o</mi><mi>o</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>I</mi><mi>n</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">InOrder(T)=InOrder(left subT)+Root(T)+InOrder(right subT)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>后序遍历<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>P</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>P</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>R</mi><mi>o</mi><mi>o</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">PostOrder(T)=PostOrder(left subT)+PostOrder(Right subT)+Root(T)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n<p><img src=\"/2022/02/25/binary_tree_1/image.png\" alt=\"img\" loading=\"lazy\"></p>\n<h3 id=\"先序遍历\"><a class=\"markdownIt-Anchor\" href=\"#先序遍历\"></a> 先序遍历</h3>\n<ol>\n<li>递归实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">PreOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Retrieve</span><span class=\"token punctuation\">(</span>T<span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PreOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PreOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<ol start=\"2\">\n<li>迭代实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">PreOrder</span><span class=\"token punctuation\">(</span>BiTree Root<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    stack <span class=\"token operator\">&lt;</span>BiTree<span class=\"token operator\">></span> s<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span> <span class=\"token comment\">//如果根节点不为空</span>\n        s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//则令根节点入栈</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//在栈变空之前反复循环</span>\n    <span class=\"token punctuation\">&#123;</span> \n        root <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n        cout <span class=\"token operator\">&lt;&lt;</span> root<span class=\"token operator\">-></span>data<span class=\"token punctuation\">;</span> <span class=\"token comment\">//弹出并访问当前节点</span>\n        <span class=\"token comment\">//下面左右孩子的顺序不能颠倒</span>\n        <span class=\"token comment\">//必须先让右孩子先入栈，再让左孩子入栈。</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>RChild<span class=\"token punctuation\">)</span>\n            s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>RChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//右孩子先入后出</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>LChild<span class=\"token punctuation\">)</span>\n            s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>LChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//左孩子后入先出</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>我们通过一个实例来了解一下该迭代版本是如何工作的 :</p>\n<p><img src=\"/2022/02/25/binary_tree_1/v2-0ccba83c7b3dbf7b89964c04021025d9_720w.jpg\" alt=\"img\" loading=\"lazy\"></p>\n<h3 id=\"中序遍历\"><a class=\"markdownIt-Anchor\" href=\"#中序遍历\"></a> 中序遍历</h3>\n<ol>\n<li>递归实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Retrieve</span><span class=\"token punctuation\">(</span>T<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<ol start=\"2\">\n<li>迭代实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>BiTree root<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n   Stack<span class=\"token operator\">&lt;</span>BiTree<span class=\"token operator\">></span> S<span class=\"token punctuation\">;</span> <span class=\"token comment\">//辅助栈</span>\n   <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span> \n      <span class=\"token punctuation\">&#123;</span>\n         S<span class=\"token punctuation\">.</span><span class=\"token function\">push</span> <span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//根节点进栈</span>\n         root <span class=\"token operator\">=</span> root<span class=\"token operator\">-></span>LChild<span class=\"token punctuation\">;</span> <span class=\"token comment\">//深入遍历左子树</span>\n      <span class=\"token punctuation\">&#125;</span> \n      <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>S<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \n      <span class=\"token punctuation\">&#123;</span>\n         root <span class=\"token operator\">=</span> S<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//尚未访问的最低祖先节点退栈</span>\n         cout <span class=\"token operator\">&lt;&lt;</span> root<span class=\"token operator\">-></span>data<span class=\"token punctuation\">;</span> <span class=\"token comment\">//访问该祖先节点</span>\n         root <span class=\"token operator\">=</span> root<span class=\"token operator\">-></span>RChild<span class=\"token punctuation\">;</span> <span class=\"token comment\">//遍历祖先的右子树</span>\n      <span class=\"token punctuation\">&#125;</span> \n      <span class=\"token keyword\">else</span>\n         <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//遍历完成</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"后序遍历\"><a class=\"markdownIt-Anchor\" href=\"#后序遍历\"></a> 后序遍历</h3>\n<ol>\n<li>递归实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">PostOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PostOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PostOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> T<span class=\"token operator\">-></span>Node <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<ol start=\"2\">\n<li>迭代实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">A</span> <span class=\"token expression\"><span class=\"token operator\">!</span>cur<span class=\"token operator\">-></span>Lchild <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>cur<span class=\"token operator\">-></span>Rchild</span></span>\n<span class=\"token comment\">//如果P不存在左孩子和右孩子，则可以直接访问它；</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">B</span> <span class=\"token expression\">pre<span class=\"token operator\">==</span>cur<span class=\"token operator\">-></span>Lchild <span class=\"token operator\">||</span> pre<span class=\"token operator\">==</span>cur<span class=\"token operator\">-></span>Rchild</span></span>\n<span class=\"token comment\">//P存在左孩子或者右孩子，但是其左孩子和右孩子都已被访问过了;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">PostOrder</span><span class=\"token punctuation\">(</span>BiTree Root<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Root<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    stack <span class=\"token operator\">&lt;</span>BiTree<span class=\"token operator\">></span> s<span class=\"token punctuation\">;</span><span class=\"token comment\">//辅助栈</span>\n    BiTree cur<span class=\"token operator\">=</span>Root<span class=\"token punctuation\">,</span>pre<span class=\"token operator\">=</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n    s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//根节点进栈</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cur<span class=\"token operator\">=</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>A <span class=\"token operator\">||</span> B<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout <span class=\"token operator\">&lt;&lt;</span> cur<span class=\"token operator\">-></span>data<span class=\"token punctuation\">;</span>\n            s<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            pre<span class=\"token operator\">=</span>cur<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cur<span class=\"token operator\">-></span>Rchild<span class=\"token punctuation\">)</span>\n                s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>cur<span class=\"token operator\">-></span>Rchild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cur<span class=\"token operator\">-></span>Lchild<span class=\"token punctuation\">)</span>\n                s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>cur<span class=\"token operator\">-></span>Lchild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n</code></pre>\n<h2 id=\"main函数\"><a class=\"markdownIt-Anchor\" href=\"#main函数\"></a> main()函数</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\tSearchTree My_Tree <span class=\"token operator\">=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">MakeEmpty</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">Find</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tSearchTree min <span class=\"token operator\">=</span> <span class=\"token function\">FindMin</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Retrieve</span><span class=\"token punctuation\">(</span>min<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PreOrderTraverse</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PostOrderTraverse</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>下一篇文章：<a href=\"https://tonylsx611.github.io/2022/02/24/binary_tree_2/\">数组与链式二叉树之间的转换 | Tony (tonylsx611.github.io)</a></p>\n<p>注：本文图片部分选自http://data.biancheng.net/；如有侵权，请联系我。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\"></a> 前言</h2>\n<blockquote>\n<p>人为什么难做选择？</p>\n</blockquote>\n<p><strong>选择意味着放弃</strong></p>\n<p>你选择一方，也就意味着放弃了另一方。摆在你面前的选择项越接近，你的选择就会越困难，因为放弃其中任何一个选择项都不容易。如果摆在你面前的选择项对比明显，那么选择起来就会轻松许多，大家几乎都会毫不犹豫的选择“好”的选择项，放弃掉“差”的选择项。</p>\n<p><strong>选择永远都不是完美的</strong></p>\n<p>选择永远都不可能十全十美，只可能满足尽量多的侧重点。选择的时候想满足越多的侧重点，可能就会越难做出选择。所以在选择上不要过于追求完美。</p>\n<p>警惕<strong>逃避性选择</strong>——不知道自己要去哪儿，还要选择离开。</p>\n<p>有一种选择是对现状不满，想逃离这种现状，但是却不知道去哪里。举个例子，可能目前的公司有各种问题，比如开发流程不规范等，如果因为这些问题离开，可能就会从一个坑跳到另外一个更大的坑。当决定离开的时候，一定是自己有明确的目标，很清楚自己想要什么。</p>\n<h2 id=\"二叉树的定义\"><a class=\"markdownIt-Anchor\" href=\"#二叉树的定义\"></a> 二叉树的定义</h2>\n<p>二叉树要么为空，要么由根节点（root），左子树（left subtree）和右子树（right subtree）组成，而且左子树和右子树分别是一棵二叉树。说白了就是，二叉树的任何一个节点，<strong>有且只能有0，1，2棵子树</strong>。</p>\n<p><img src=\"/2022/02/25/binary_tree_1/2-1Q226195I0M1.gif\" alt=\"二叉树示意图\"></p>\n<h2 id=\"二叉树的实现\"><a class=\"markdownIt-Anchor\" href=\"#二叉树的实现\"></a> 二叉树的实现</h2>\n<p>二叉树的实现方式大致分两种，一种是以数组形式储存，另一种是以链表形式储存。以数组形式储存的好处是实现起来极其便捷，但是数组只能储存完全二叉树，就是二叉树的任何一个父节点（除了叶子节点）都要有两颗子树，如图所示：</p>\n<p><img src=\"/2022/02/25/binary_tree_1/2-1Q226195949495.gif\" alt=\"满二叉树示意图\"></p>\n<p>我们这里使用链表的方法维护一个二叉树，一个是这样能够实现更宽泛的二叉树形式，减少内存开销；另外以链表形式实现二叉树可以让我们更加深入理解二叉树的本质。</p>\n<p><img src=\"/2022/02/25/binary_tree_1/2-1Q22R035341H.gif\" alt=\"二叉树链式存储结构示意图\"></p>\n<h3 id=\"头文件\"><a class=\"markdownIt-Anchor\" href=\"#头文件\"></a> 头文件</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\">once</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifndef</span> <span class=\"token expression\">BST_H</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">BST_H</span></span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">TreeNode</span>\n<span class=\"token punctuation\">&#123;</span>\n\tElementType Node<span class=\"token punctuation\">;</span>\n\tTreeNode<span class=\"token operator\">*</span> L_Child<span class=\"token punctuation\">;</span>\n\tTreeNode<span class=\"token operator\">*</span> R_Child<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">int</span> ElementType<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">TreeNode</span><span class=\"token operator\">*</span> PtrToNode<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">TreeNode</span><span class=\"token operator\">*</span> Position<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">TreeNode</span><span class=\"token operator\">*</span> SearchTree<span class=\"token punctuation\">;</span>\n\nSearchTree <span class=\"token function\">MakeEmpty</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//initialize</span>\nPosition <span class=\"token function\">Find</span><span class=\"token punctuation\">(</span>ElementType X<span class=\"token punctuation\">,</span> SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nPosition <span class=\"token function\">FindMin</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nPosition <span class=\"token function\">FindMax</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nSearchTree <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">,</span> ElementType X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nSearchTree <span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">,</span> ElementType X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nElementType <span class=\"token function\">Retrieve</span><span class=\"token punctuation\">(</span>Position P<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//Output</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">PreOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">PostOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span></code></pre>\n<h3 id=\"创建二叉树\"><a class=\"markdownIt-Anchor\" href=\"#创建二叉树\"></a> 创建二叉树</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">SearchTree <span class=\"token function\">MakeEmpty</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">MakeEmpty</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">MakeEmpty</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">free</span><span class=\"token punctuation\">(</span>T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"二叉树查找元素\"><a class=\"markdownIt-Anchor\" href=\"#二叉树查找元素\"></a> 二叉树查找元素</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">Position <span class=\"token function\">Find</span><span class=\"token punctuation\">(</span>ElementType X<span class=\"token punctuation\">,</span> SearchTree T<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">&lt;</span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">Find</span><span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">></span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">Find</span><span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"查找最大最小值\"><a class=\"markdownIt-Anchor\" href=\"#查找最大最小值\"></a> 查找最大最小值</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">Position <span class=\"token function\">FindMin</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token comment\">//递归写法</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token function\">FindMin</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nPosition <span class=\"token function\">FindMax</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span><span class=\"token comment\">//while循环写法</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t\tT<span class=\"token operator\">=</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"二叉树插入元素\"><a class=\"markdownIt-Anchor\" href=\"#二叉树插入元素\"></a> 二叉树插入元素</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">SearchTree <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">,</span> ElementType X<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T<span class=\"token operator\">==</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// the fist element</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tT <span class=\"token operator\">=</span> new TreeNode<span class=\"token punctuation\">;</span>\n\t\tT<span class=\"token operator\">-></span>L_Child <span class=\"token operator\">=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t\tT<span class=\"token operator\">-></span>R_Child <span class=\"token operator\">=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t\tT<span class=\"token operator\">-></span>Node <span class=\"token operator\">=</span> X<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">else</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">&lt;</span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span><span class=\"token comment\">//put X on the left</span>\n\t\t\tT<span class=\"token operator\">-></span>L_Child<span class=\"token operator\">=</span><span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">else</span>             <span class=\"token comment\">//put X on the right</span>\n\t\t\tT<span class=\"token operator\">-></span>R_Child <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"二叉树删除元素\"><a class=\"markdownIt-Anchor\" href=\"#二叉树删除元素\"></a> 二叉树删除元素</h3>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">SearchTree <span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">,</span> ElementType X<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">&lt;</span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tT<span class=\"token operator\">-></span>L_Child<span class=\"token operator\">=</span> <span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">></span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tT<span class=\"token operator\">-></span>R_Child<span class=\"token operator\">=</span><span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">else</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child <span class=\"token operator\">&amp;&amp;</span> T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2  children</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tPosition minn <span class=\"token operator\">=</span> <span class=\"token function\">FindMin</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tT<span class=\"token operator\">-></span>Node <span class=\"token operator\">=</span> minn<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">;</span>\n\t\t\tT<span class=\"token operator\">-></span>R_Child <span class=\"token operator\">=</span> <span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">,</span> T<span class=\"token operator\">-></span>Node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token keyword\">else</span>           <span class=\"token comment\">// 1  or  0 child</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tPosition temp <span class=\"token operator\">=</span> T<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t\t\tT <span class=\"token operator\">=</span> T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t\t\tT <span class=\"token operator\">=</span> T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">free</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"二叉树的遍历\"><a class=\"markdownIt-Anchor\" href=\"#二叉树的遍历\"></a> 二叉树的遍历</h2>\n<ul>\n<li>先序遍历<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>R</mi><mi>o</mi><mi>o</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>P</mi><mi>r</mi><mi>e</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>P</mi><mi>r</mi><mi>e</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">PreOrder(T)=Root(T)+PreOrder(left subT)+PreOrder(right subT)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>中序遍历<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>I</mi><mi>n</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>I</mi><mi>n</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>R</mi><mi>o</mi><mi>o</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>I</mi><mi>n</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">InOrder(T)=InOrder(left subT)+Root(T)+InOrder(right subT)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>后序遍历<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>P</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>P</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>P</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>O</mi><mi>r</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>T</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>R</mi><mi>o</mi><mi>o</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">PostOrder(T)=PostOrder(left subT)+PostOrder(Right subT)+Root(T)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n<p><img src=\"/2022/02/25/binary_tree_1/image.png\" alt=\"img\"></p>\n<h3 id=\"先序遍历\"><a class=\"markdownIt-Anchor\" href=\"#先序遍历\"></a> 先序遍历</h3>\n<ol>\n<li>递归实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">PreOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Retrieve</span><span class=\"token punctuation\">(</span>T<span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PreOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PreOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<ol start=\"2\">\n<li>迭代实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">PreOrder</span><span class=\"token punctuation\">(</span>BiTree Root<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    stack <span class=\"token operator\">&lt;</span>BiTree<span class=\"token operator\">></span> s<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span> <span class=\"token comment\">//如果根节点不为空</span>\n        s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//则令根节点入栈</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//在栈变空之前反复循环</span>\n    <span class=\"token punctuation\">&#123;</span> \n        root <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n        cout <span class=\"token operator\">&lt;&lt;</span> root<span class=\"token operator\">-></span>data<span class=\"token punctuation\">;</span> <span class=\"token comment\">//弹出并访问当前节点</span>\n        <span class=\"token comment\">//下面左右孩子的顺序不能颠倒</span>\n        <span class=\"token comment\">//必须先让右孩子先入栈，再让左孩子入栈。</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>RChild<span class=\"token punctuation\">)</span>\n            s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>RChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//右孩子先入后出</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>LChild<span class=\"token punctuation\">)</span>\n            s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>LChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//左孩子后入先出</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>我们通过一个实例来了解一下该迭代版本是如何工作的 :</p>\n<p><img src=\"/2022/02/25/binary_tree_1/v2-0ccba83c7b3dbf7b89964c04021025d9_720w.jpg\" alt=\"img\"></p>\n<h3 id=\"中序遍历\"><a class=\"markdownIt-Anchor\" href=\"#中序遍历\"></a> 中序遍历</h3>\n<ol>\n<li>递归实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Retrieve</span><span class=\"token punctuation\">(</span>T<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<ol start=\"2\">\n<li>迭代实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>BiTree root<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n   Stack<span class=\"token operator\">&lt;</span>BiTree<span class=\"token operator\">></span> S<span class=\"token punctuation\">;</span> <span class=\"token comment\">//辅助栈</span>\n   <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span> \n      <span class=\"token punctuation\">&#123;</span>\n         S<span class=\"token punctuation\">.</span><span class=\"token function\">push</span> <span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//根节点进栈</span>\n         root <span class=\"token operator\">=</span> root<span class=\"token operator\">-></span>LChild<span class=\"token punctuation\">;</span> <span class=\"token comment\">//深入遍历左子树</span>\n      <span class=\"token punctuation\">&#125;</span> \n      <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>S<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \n      <span class=\"token punctuation\">&#123;</span>\n         root <span class=\"token operator\">=</span> S<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//尚未访问的最低祖先节点退栈</span>\n         cout <span class=\"token operator\">&lt;&lt;</span> root<span class=\"token operator\">-></span>data<span class=\"token punctuation\">;</span> <span class=\"token comment\">//访问该祖先节点</span>\n         root <span class=\"token operator\">=</span> root<span class=\"token operator\">-></span>RChild<span class=\"token punctuation\">;</span> <span class=\"token comment\">//遍历祖先的右子树</span>\n      <span class=\"token punctuation\">&#125;</span> \n      <span class=\"token keyword\">else</span>\n         <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//遍历完成</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h3 id=\"后序遍历\"><a class=\"markdownIt-Anchor\" href=\"#后序遍历\"></a> 后序遍历</h3>\n<ol>\n<li>递归实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">PostOrderTraverse</span><span class=\"token punctuation\">(</span>SearchTree T<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>T <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PostOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>L_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PostOrderTraverse</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">-></span>R_Child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> T<span class=\"token operator\">-></span>Node <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<ol start=\"2\">\n<li>迭代实现</li>\n</ol>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">A</span> <span class=\"token expression\"><span class=\"token operator\">!</span>cur<span class=\"token operator\">-></span>Lchild <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>cur<span class=\"token operator\">-></span>Rchild</span></span>\n<span class=\"token comment\">//如果P不存在左孩子和右孩子，则可以直接访问它；</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">B</span> <span class=\"token expression\">pre<span class=\"token operator\">==</span>cur<span class=\"token operator\">-></span>Lchild <span class=\"token operator\">||</span> pre<span class=\"token operator\">==</span>cur<span class=\"token operator\">-></span>Rchild</span></span>\n<span class=\"token comment\">//P存在左孩子或者右孩子，但是其左孩子和右孩子都已被访问过了;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">PostOrder</span><span class=\"token punctuation\">(</span>BiTree Root<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Root<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    stack <span class=\"token operator\">&lt;</span>BiTree<span class=\"token operator\">></span> s<span class=\"token punctuation\">;</span><span class=\"token comment\">//辅助栈</span>\n    BiTree cur<span class=\"token operator\">=</span>Root<span class=\"token punctuation\">,</span>pre<span class=\"token operator\">=</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n    s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//根节点进栈</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cur<span class=\"token operator\">=</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>A <span class=\"token operator\">||</span> B<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout <span class=\"token operator\">&lt;&lt;</span> cur<span class=\"token operator\">-></span>data<span class=\"token punctuation\">;</span>\n            s<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            pre<span class=\"token operator\">=</span>cur<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cur<span class=\"token operator\">-></span>Rchild<span class=\"token punctuation\">)</span>\n                s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>cur<span class=\"token operator\">-></span>Rchild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cur<span class=\"token operator\">-></span>Lchild<span class=\"token punctuation\">)</span>\n                s<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>cur<span class=\"token operator\">-></span>Lchild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n</code></pre>\n<h2 id=\"main函数\"><a class=\"markdownIt-Anchor\" href=\"#main函数\"></a> main()函数</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\tSearchTree My_Tree <span class=\"token operator\">=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">MakeEmpty</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">Find</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Insert</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMy_Tree <span class=\"token operator\">=</span> <span class=\"token function\">Delete</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tSearchTree min <span class=\"token operator\">=</span> <span class=\"token function\">FindMin</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Retrieve</span><span class=\"token punctuation\">(</span>min<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PreOrderTraverse</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">InOrderTraverse</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">PostOrderTraverse</span><span class=\"token punctuation\">(</span>My_Tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<p>下一篇文章：<a href=\"https://tonylsx611.github.io/2022/02/24/binary_tree_2/\">数组与链式二叉树之间的转换 | Tony (tonylsx611.github.io)</a></p>\n<p>注：本文图片部分选自http://data.biancheng.net/；如有侵权，请联系我。</p>\n"},{"layout":"post","title":"Python环境配置","date":"2022-07-22T07:44:38.000Z","author":"Tony","_content":"\n# Anaconda Python 环境搭建\n\n## 下载并安装anaconda\n\n官网下载链接: [Anaconda | The World's Most Popular Data Science Platform](https://www.anaconda.com/))\n\n![img](python-environment/U0I112981_%25MPSVS4CXL8BF.png)\n\n下载后一键安装：\n\n<img src=\"python-environment/QQ%E5%9B%BE%E7%89%8720220722134623.jpg\" alt=\"QQ图片20220722134623\" style=\"zoom:50%;\" />\n\n## 添加Anaconda到环境变量\n\n在计算机中搜索“环境变量”（快捷键 Win+S），选择系统变量中的path，编辑Path。\n\n![image-20220722135753076](python-environment/image-20220722135753076.png)\n\n若安装Anaconda时使用的时默认安装位置，在Path中添加如下地址：\n\n```bash\nC:\\ProgramData\\Anaconda3\nC:\\ProgramData\\Anaconda3\\Scripts\nC:\\ProgramData\\Anaconda3\\Library\\bin\nC:\\ProgramData\\Anaconda3\\Library\\mingw-w64\\bin\n```\n\n![img](python-environment/1%60SS$TH%5BEI4%7BJ1_I%5D9%5DL%60EY.png)\n\n添加后验证是否成功配置环境变量，在本地计算机中搜索`prompt`，以管理员身份运行。\n\n![image-20220722141130992](python-environment/image-20220722141130992.png)\n\n输入以下指令：\n\n```bash\nconda --version\nconda info\npython --version\n```\n\n![image-20220722141252367](python-environment/image-20220722141252367.png)\n\n如果可以正常输出则证明安装成功，部分老机型需要重启电脑才能应用path添加的新环境，若仍不成功则检查path路径是否有误。\n\n## 运行Python\n\n打开Anaconda Navigator并运行Spyder，随便输入点什么（比如print语句），若能正常运行，则证明Python安装成功。\n\n![image-20220722141736616](python-environment/image-20220722141736616.png)\n\nPycharm是Python较为常用的IDE，这里我们放一个官网链接供快捷跳转下载。\n\n[Pycharm官网安装网址](https://www.jetbrains.com/pycharm/)\n\n![image-20220722142107169](python-environment/image-20220722142107169.png)\n\n安装过程中记得勾选“添加bin到path环境变量中”，否则还得手动添加一遍，麻烦死。\n\n<img src=\"python-environment/image-20220722142150620.png\" alt=\"image-20220722142150620\" style=\"zoom:67%;\" />\n\n安装好后重启电脑，Anaconda可视化界面下多出了一个Pycharm Community的图标，可从anaconda中直接打开Pycharm。\n\n![image-20220722142444023](python-environment/image-20220722142444023.png)\n\n## Python环境管理\n\n当我们通过Pycharm新建一个项目时，可以选择新建环境或者使用之前配置好的环境。\n\n![image-20220722144502752](python-environment/image-20220722144502752.png)\n\n### 新建环境\n\n- Virtuallenv: Pycharm的虚拟环境，项目之间默认不通用，也就是说每新建一个项目都要新开一个虚拟环境，较为占用空间。\n- Conda：Anaconda环境，也可在anaconda的environment可视化界面下添加环境，如图所示：![image-20220722152550108](python-environment/image-20220722152550108.png)\n\n我们可以将Anaconda的environment理解为环境管理工具，也可以在prompt中使用命令添加或删除环境。\n\n### 先前配置的环境\n\n选择Conda环境，解释器的位置为Anaconda的安装目录根目录，下面有个Python.exe，选择此目录（如果没有ProgramData目录，则手动打上去，就有了），此环境为anaconda的base目录。\n\n![image-20220722145541034](python-environment/image-20220722145541034.png)\n\n如果选择其它目录，则在Python解释器中更改为指定的解释器目录。\n\n![image-20220722154032582](python-environment/image-20220722154032582-165847602920414.png)\n","source":"_posts/python-environment.md","raw":"---\nlayout: post\ntitle: Python环境配置\ndate: 2022-07-22 15:44:38\ntags:\n  - python\n  - anaconda\ncategories: python\nauthor: Tony\n---\n\n# Anaconda Python 环境搭建\n\n## 下载并安装anaconda\n\n官网下载链接: [Anaconda | The World's Most Popular Data Science Platform](https://www.anaconda.com/))\n\n![img](python-environment/U0I112981_%25MPSVS4CXL8BF.png)\n\n下载后一键安装：\n\n<img src=\"python-environment/QQ%E5%9B%BE%E7%89%8720220722134623.jpg\" alt=\"QQ图片20220722134623\" style=\"zoom:50%;\" />\n\n## 添加Anaconda到环境变量\n\n在计算机中搜索“环境变量”（快捷键 Win+S），选择系统变量中的path，编辑Path。\n\n![image-20220722135753076](python-environment/image-20220722135753076.png)\n\n若安装Anaconda时使用的时默认安装位置，在Path中添加如下地址：\n\n```bash\nC:\\ProgramData\\Anaconda3\nC:\\ProgramData\\Anaconda3\\Scripts\nC:\\ProgramData\\Anaconda3\\Library\\bin\nC:\\ProgramData\\Anaconda3\\Library\\mingw-w64\\bin\n```\n\n![img](python-environment/1%60SS$TH%5BEI4%7BJ1_I%5D9%5DL%60EY.png)\n\n添加后验证是否成功配置环境变量，在本地计算机中搜索`prompt`，以管理员身份运行。\n\n![image-20220722141130992](python-environment/image-20220722141130992.png)\n\n输入以下指令：\n\n```bash\nconda --version\nconda info\npython --version\n```\n\n![image-20220722141252367](python-environment/image-20220722141252367.png)\n\n如果可以正常输出则证明安装成功，部分老机型需要重启电脑才能应用path添加的新环境，若仍不成功则检查path路径是否有误。\n\n## 运行Python\n\n打开Anaconda Navigator并运行Spyder，随便输入点什么（比如print语句），若能正常运行，则证明Python安装成功。\n\n![image-20220722141736616](python-environment/image-20220722141736616.png)\n\nPycharm是Python较为常用的IDE，这里我们放一个官网链接供快捷跳转下载。\n\n[Pycharm官网安装网址](https://www.jetbrains.com/pycharm/)\n\n![image-20220722142107169](python-environment/image-20220722142107169.png)\n\n安装过程中记得勾选“添加bin到path环境变量中”，否则还得手动添加一遍，麻烦死。\n\n<img src=\"python-environment/image-20220722142150620.png\" alt=\"image-20220722142150620\" style=\"zoom:67%;\" />\n\n安装好后重启电脑，Anaconda可视化界面下多出了一个Pycharm Community的图标，可从anaconda中直接打开Pycharm。\n\n![image-20220722142444023](python-environment/image-20220722142444023.png)\n\n## Python环境管理\n\n当我们通过Pycharm新建一个项目时，可以选择新建环境或者使用之前配置好的环境。\n\n![image-20220722144502752](python-environment/image-20220722144502752.png)\n\n### 新建环境\n\n- Virtuallenv: Pycharm的虚拟环境，项目之间默认不通用，也就是说每新建一个项目都要新开一个虚拟环境，较为占用空间。\n- Conda：Anaconda环境，也可在anaconda的environment可视化界面下添加环境，如图所示：![image-20220722152550108](python-environment/image-20220722152550108.png)\n\n我们可以将Anaconda的environment理解为环境管理工具，也可以在prompt中使用命令添加或删除环境。\n\n### 先前配置的环境\n\n选择Conda环境，解释器的位置为Anaconda的安装目录根目录，下面有个Python.exe，选择此目录（如果没有ProgramData目录，则手动打上去，就有了），此环境为anaconda的base目录。\n\n![image-20220722145541034](python-environment/image-20220722145541034.png)\n\n如果选择其它目录，则在Python解释器中更改为指定的解释器目录。\n\n![image-20220722154032582](python-environment/image-20220722154032582-165847602920414.png)\n","slug":"python-environment","published":1,"updated":"2022-11-01T05:53:08.440Z","comments":1,"photos":[],"link":"","_id":"clb4gsrdi002x1gzu8h920lxy","content":"<h1 id=\"anaconda-python-环境搭建\"><a class=\"markdownIt-Anchor\" href=\"#anaconda-python-环境搭建\"></a> Anaconda Python 环境搭建</h1>\n<h2 id=\"下载并安装anaconda\"><a class=\"markdownIt-Anchor\" href=\"#下载并安装anaconda\"></a> 下载并安装anaconda</h2>\n<p>官网下载链接: <a href=\"https://www.anaconda.com/\">Anaconda | The World’s Most Popular Data Science Platform</a>)</p>\n<p><img src=\"/2022/07/22/python-environment/U0I112981_%25MPSVS4CXL8BF.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>下载后一键安装：</p>\n<img src=\"/2022/07/22/python-environment/QQ%E5%9B%BE%E7%89%8720220722134623.jpg\" alt=\"QQ图片20220722134623\" style=\"zoom:50%;\" loading=\"lazy\">\n<h2 id=\"添加anaconda到环境变量\"><a class=\"markdownIt-Anchor\" href=\"#添加anaconda到环境变量\"></a> 添加Anaconda到环境变量</h2>\n<p>在计算机中搜索“环境变量”（快捷键 Win+S），选择系统变量中的path，编辑Path。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722135753076.png\" alt=\"image-20220722135753076\" loading=\"lazy\"></p>\n<p>若安装Anaconda时使用的时默认安装位置，在Path中添加如下地址：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">C:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Scripts\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Library<span class=\"token punctuation\">\\</span>bin\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Library<span class=\"token punctuation\">\\</span>mingw-w64<span class=\"token punctuation\">\\</span>bin</code></pre>\n<p><img src=\"/2022/07/22/python-environment/1%60SS$TH%5BEI4%7BJ1_I%5D9%5DL%60EY.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>添加后验证是否成功配置环境变量，在本地计算机中搜索<code>prompt</code>，以管理员身份运行。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722141130992.png\" alt=\"image-20220722141130992\" loading=\"lazy\"></p>\n<p>输入以下指令：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">conda --version\nconda info\npython --version</code></pre>\n<p><img src=\"/2022/07/22/python-environment/image-20220722141252367.png\" alt=\"image-20220722141252367\" loading=\"lazy\"></p>\n<p>如果可以正常输出则证明安装成功，部分老机型需要重启电脑才能应用path添加的新环境，若仍不成功则检查path路径是否有误。</p>\n<h2 id=\"运行python\"><a class=\"markdownIt-Anchor\" href=\"#运行python\"></a> 运行Python</h2>\n<p>打开Anaconda Navigator并运行Spyder，随便输入点什么（比如print语句），若能正常运行，则证明Python安装成功。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722141736616.png\" alt=\"image-20220722141736616\" loading=\"lazy\"></p>\n<p>Pycharm是Python较为常用的IDE，这里我们放一个官网链接供快捷跳转下载。</p>\n<p><a href=\"https://www.jetbrains.com/pycharm/\">Pycharm官网安装网址</a></p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722142107169.png\" alt=\"image-20220722142107169\" loading=\"lazy\"></p>\n<p>安装过程中记得勾选“添加bin到path环境变量中”，否则还得手动添加一遍，麻烦死。</p>\n<img src=\"/2022/07/22/python-environment/image-20220722142150620.png\" alt=\"image-20220722142150620\" style=\"zoom:67%;\" loading=\"lazy\">\n<p>安装好后重启电脑，Anaconda可视化界面下多出了一个Pycharm Community的图标，可从anaconda中直接打开Pycharm。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722142444023.png\" alt=\"image-20220722142444023\" loading=\"lazy\"></p>\n<h2 id=\"python环境管理\"><a class=\"markdownIt-Anchor\" href=\"#python环境管理\"></a> Python环境管理</h2>\n<p>当我们通过Pycharm新建一个项目时，可以选择新建环境或者使用之前配置好的环境。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722144502752.png\" alt=\"image-20220722144502752\" loading=\"lazy\"></p>\n<h3 id=\"新建环境\"><a class=\"markdownIt-Anchor\" href=\"#新建环境\"></a> 新建环境</h3>\n<ul>\n<li>Virtuallenv: Pycharm的虚拟环境，项目之间默认不通用，也就是说每新建一个项目都要新开一个虚拟环境，较为占用空间。</li>\n<li>Conda：Anaconda环境，也可在anaconda的environment可视化界面下添加环境，如图所示：<img src=\"/2022/07/22/python-environment/image-20220722152550108.png\" alt=\"image-20220722152550108\" loading=\"lazy\"></li>\n</ul>\n<p>我们可以将Anaconda的environment理解为环境管理工具，也可以在prompt中使用命令添加或删除环境。</p>\n<h3 id=\"先前配置的环境\"><a class=\"markdownIt-Anchor\" href=\"#先前配置的环境\"></a> 先前配置的环境</h3>\n<p>选择Conda环境，解释器的位置为Anaconda的安装目录根目录，下面有个Python.exe，选择此目录（如果没有ProgramData目录，则手动打上去，就有了），此环境为anaconda的base目录。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722145541034.png\" alt=\"image-20220722145541034\" loading=\"lazy\"></p>\n<p>如果选择其它目录，则在Python解释器中更改为指定的解释器目录。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722154032582-165847602920414.png\" alt=\"image-20220722154032582\" loading=\"lazy\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"anaconda-python-环境搭建\"><a class=\"markdownIt-Anchor\" href=\"#anaconda-python-环境搭建\"></a> Anaconda Python 环境搭建</h1>\n<h2 id=\"下载并安装anaconda\"><a class=\"markdownIt-Anchor\" href=\"#下载并安装anaconda\"></a> 下载并安装anaconda</h2>\n<p>官网下载链接: <a href=\"https://www.anaconda.com/\">Anaconda | The World’s Most Popular Data Science Platform</a>)</p>\n<p><img src=\"/2022/07/22/python-environment/U0I112981_%25MPSVS4CXL8BF.png\" alt=\"img\"></p>\n<p>下载后一键安装：</p>\n<img src=\"/2022/07/22/python-environment/QQ%E5%9B%BE%E7%89%8720220722134623.jpg\" alt=\"QQ图片20220722134623\" style=\"zoom:50%;\">\n<h2 id=\"添加anaconda到环境变量\"><a class=\"markdownIt-Anchor\" href=\"#添加anaconda到环境变量\"></a> 添加Anaconda到环境变量</h2>\n<p>在计算机中搜索“环境变量”（快捷键 Win+S），选择系统变量中的path，编辑Path。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722135753076.png\" alt=\"image-20220722135753076\"></p>\n<p>若安装Anaconda时使用的时默认安装位置，在Path中添加如下地址：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">C:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Scripts\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Library<span class=\"token punctuation\">\\</span>bin\nC:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Library<span class=\"token punctuation\">\\</span>mingw-w64<span class=\"token punctuation\">\\</span>bin</code></pre>\n<p><img src=\"/2022/07/22/python-environment/1%60SS$TH%5BEI4%7BJ1_I%5D9%5DL%60EY.png\" alt=\"img\"></p>\n<p>添加后验证是否成功配置环境变量，在本地计算机中搜索<code>prompt</code>，以管理员身份运行。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722141130992.png\" alt=\"image-20220722141130992\"></p>\n<p>输入以下指令：</p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">conda --version\nconda info\npython --version</code></pre>\n<p><img src=\"/2022/07/22/python-environment/image-20220722141252367.png\" alt=\"image-20220722141252367\"></p>\n<p>如果可以正常输出则证明安装成功，部分老机型需要重启电脑才能应用path添加的新环境，若仍不成功则检查path路径是否有误。</p>\n<h2 id=\"运行python\"><a class=\"markdownIt-Anchor\" href=\"#运行python\"></a> 运行Python</h2>\n<p>打开Anaconda Navigator并运行Spyder，随便输入点什么（比如print语句），若能正常运行，则证明Python安装成功。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722141736616.png\" alt=\"image-20220722141736616\"></p>\n<p>Pycharm是Python较为常用的IDE，这里我们放一个官网链接供快捷跳转下载。</p>\n<p><a href=\"https://www.jetbrains.com/pycharm/\">Pycharm官网安装网址</a></p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722142107169.png\" alt=\"image-20220722142107169\"></p>\n<p>安装过程中记得勾选“添加bin到path环境变量中”，否则还得手动添加一遍，麻烦死。</p>\n<img src=\"/2022/07/22/python-environment/image-20220722142150620.png\" alt=\"image-20220722142150620\" style=\"zoom:67%;\">\n<p>安装好后重启电脑，Anaconda可视化界面下多出了一个Pycharm Community的图标，可从anaconda中直接打开Pycharm。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722142444023.png\" alt=\"image-20220722142444023\"></p>\n<h2 id=\"python环境管理\"><a class=\"markdownIt-Anchor\" href=\"#python环境管理\"></a> Python环境管理</h2>\n<p>当我们通过Pycharm新建一个项目时，可以选择新建环境或者使用之前配置好的环境。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722144502752.png\" alt=\"image-20220722144502752\"></p>\n<h3 id=\"新建环境\"><a class=\"markdownIt-Anchor\" href=\"#新建环境\"></a> 新建环境</h3>\n<ul>\n<li>Virtuallenv: Pycharm的虚拟环境，项目之间默认不通用，也就是说每新建一个项目都要新开一个虚拟环境，较为占用空间。</li>\n<li>Conda：Anaconda环境，也可在anaconda的environment可视化界面下添加环境，如图所示：<img src=\"/2022/07/22/python-environment/image-20220722152550108.png\" alt=\"image-20220722152550108\"></li>\n</ul>\n<p>我们可以将Anaconda的environment理解为环境管理工具，也可以在prompt中使用命令添加或删除环境。</p>\n<h3 id=\"先前配置的环境\"><a class=\"markdownIt-Anchor\" href=\"#先前配置的环境\"></a> 先前配置的环境</h3>\n<p>选择Conda环境，解释器的位置为Anaconda的安装目录根目录，下面有个Python.exe，选择此目录（如果没有ProgramData目录，则手动打上去，就有了），此环境为anaconda的base目录。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722145541034.png\" alt=\"image-20220722145541034\"></p>\n<p>如果选择其它目录，则在Python解释器中更改为指定的解释器目录。</p>\n<p><img src=\"/2022/07/22/python-environment/image-20220722154032582-165847602920414.png\" alt=\"image-20220722154032582\"></p>\n"},{"title":"二叉树进阶与习题","date":"2022-02-24T14:20:55.000Z","author":"Tony","katex":true,"_content":"\n## 前言\n\n对二叉树不是很了解的同学可以先看一下我之前的文章：[链式二叉树简介](https://tonylsx611.github.io/2022/02/25/binary_tree_1/)\n\n## 数组二叉树转链表\n\n将一棵完全二叉树转换成链表形式是比较常见的一种做法，我们首先声明一个int类型的数组，然后把它放入链表二叉树中。这个过程相对来说是很容易实现的。\n\n```c\nint length = 7;\nint arr[length] = { 1, 2, 3, 4, 5, NULL, 6 };\n```\n\n![img](binary_tree_2/image.png)\n\n之后的任务就是将数组转化为链表形式，链表的定义如下：\n\n```c\nstruct TreeNode //二叉树的格式\n{\n    int val;\n    TreeNode* left;\n    TreeNode* right;\n    TreeNode() : val(0), left(nullptr), right(nullptr) {}\n    TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}\n    TreeNode(int x, TreeNode* left, TreeNode* right) : val(x), left(left), right(right) {}\n};\n```\n\n转化的过程也很容易，其实这是一个数学问题，对于一棵完全二叉树（满二叉树），节点`tree[i]`的左子树永远是`tree[2*i+1]`，节点`tree[i]`的右子树永远是`tree[2*i+2]`；并且我们只需要递归到倒数第二层的树即可，即`if (i < length/2)`。\n\n```c\nTreeNode* addtree(TreeNode* tree, int arr[], int i)//数组转链表\n{\n\tif (arr[i] == 0)\n        return NULL;\n    if (i < length/2)//arr.length()\n    {\n        TreeNode* tree = new TreeNode();\n        \n        tree->val = arr[i];\n        tree->left = addtree(tree, arr, i + i + 1);\n        tree->right = addtree(tree, arr, i + i + 2);\n        return tree;\n    }\n    return NULL;\n}\n```\n\n## 链表二叉树转数组\n\n比较困难的是如何将链表二叉树转换为数组，因为链表形式下并不一定每一个节点都有两个子节点，因此链表二叉树是没有办法直接转化成一棵数组型的完全二叉树（可能也可以，但是我不会，欢迎在评论区讨论）。\n\n如果可以获得链式二叉树的高度，那么可以通过BFS来遍历整个链表，即使链表的节点没有左枝或右枝，也把一个空节点加进stack中，这样理论上可以实现链表到数组的转换，不过实现起来还是非常麻烦。\n\n因此，我们绝大多数情况下是不会将链表转化成数组的，因为在链表中操作数据是非常方便的（当然在数组中操作也不麻烦），我们做的最多的事情就是搜索和遍历二叉树，如果不是很理解前一句话，建议再次回顾一下上一篇文章：[链式二叉树简介](https://tonylsx611.github.io/2022/02/25/binary_tree_1/)\n\n## 例题98\n\n### 题目描述\n\nLeetcode链接: [98. 验证二叉搜索树 - 力扣（LeetCode） (leetcode-cn.com)](https://leetcode-cn.com/problems/validate-binary-search-tree/)\n\n给你一个二叉树的根节点 root ，判断其是否是一个有效的二叉搜索树。\n\n有效 二叉搜索树定义如下：\n\n- 节点的左子树只包含 小于 当前节点的数。\n- 节点的右子树只包含 大于 当前节点的数。\n- 所有左子树和右子树自身必须也是二叉搜索树。\n\n**输入输出样例：**\n\n![img](binary_tree_2/tree1.jpg)\n\n```bash\ninput: root=[2,1,3]\noutput: true\n```\n\n![img](binary_tree_2/tree2.jpg)\n\n```bash\ninput: root = [5,1,4,null,null,3,6]\noutput: false\nexplanation: 根节点的值是 5 ，但是右子节点的值是 4 。\n```\n\n**提示：**\n\n- 树中节点数目范围在$[1, 10^4]$ 内\n- $-2^{31} \\leq Node.val \\leq 2^{31} - 1$\n\n### 例题分析\n\n我最初的思路是，只要保证**每一个节点大于左枝，小于右枝**即可。\n\n对于这样的思路，直接对链表进行BFS搜索即可，如果不会BFS算法，可以参考：[BFS简介](https://tonylsx611.github.io/2022/03/10/BFS/)。当然，其他的搜索算法也可以考虑，比如DFS，或者前序中序后序遍历每一个节点，然后判断每个节点的两个子节点就可以。我这里就用BFS来实现，代码如下：\n\n```c\nclass Solution {\npublic:\n    TreeNode* temp;\n    bool isValidBST(TreeNode* root)\n    {\n        queue<TreeNode*> Q;\n        TreeNode* node;\n        Q.push(root);\n        while (!Q.empty())\n        {\n            node = Q.front();\n            temp = node;\n            if (node->left != NULL)\n            {\n                if (node->left->val >= temp->val)\n                    return false;\n                Q.push(node->left);\n            }\n            if (node->right != NULL)\n            {\n                if (node->right->val <= temp->val)\n                    return false;\n                Q.push(node->right);\n            }\n            Q.pop();\n        }\n        return true;\n    }\n};\n```\n\n但是，我发现我的理解是有问题的，这个题目要求是节点下面的**所有左子树**的值都要小于该节点，节点下面**所有右子树**的值都要大于该节点！\n\n比如这个例子，对于该题来说，他的答案应该是false。因为根节点的值是5，但是右侧分支中有一个节点的值是3，小于根节点的值。\n\n![false example](binary_tree_2/false%20example-16473330373123.png)\n\n因此，对于这种情况，我们应该优先考虑对二叉树进行中序遍历，中序遍历的结果如果是升序就返回true，否则返回false。\n\n比如上面这个错误的样例的中序遍历结果为：`root=[4,5,3,6,7];`，他不是单调递增的数组。\n\n再比如，我们来看一个正确的样例，他的中序遍历的结果为：`root=[4,5,6,7,9]`，他是单调递增的数组。\n\n![true example](binary_tree_2/true%20example.png)\n\n因此，我们的思路就可以转变为，**判断该二叉树的中序遍历结果是否为单调递增**，来判断其是否是一个有效的二叉搜索树，代码如下：\n\n```c\nclass Solution {\npublic:\n    int btree[10001];\n    int ptr = 0;\n    void inorder(TreeNode* root)\n    {\n        if (root == NULL)\n            return;\n        if (root->left)\n            inorder(root->left);\n        btree[ptr] = root->val;\n        ptr++;\n        if (root->right)\n            inorder(root->right);\n    }\n    bool isValidBST(TreeNode* root)\n    {\n        inorder(root);\n        //for(int i=0;i<ptr;i++)\n        //    cout<<btree[i]<<\" \";    \n        for (int i = 0; i < ptr - 1; i++)\n            if (btree[i] >= btree[i + 1])\n                return false;\n        return true;\n    }\n};\n```\n\n## 例题103\n\n### 题目描述\n\nLeetcode链接: [103. 二叉树的锯齿形层序遍历 - 力扣（LeetCode） (leetcode-cn.com)](https://leetcode-cn.com/problems/binary-tree-zigzag-level-order-traversal/)\n\n给你二叉树的根节点 root ，返回其节点值的 锯齿形层序遍历 。（即先从左往右，再从右往左进行下一层遍历，以此类推，层与层之间交替进行）。\n\n**输入输出样例：**\n\n![img](binary_tree_2/tree1.jpg)\n\n```bash\n输入：root = [3,9,20,null,null,15,7]\n输出：[[3],[20,9],[15,7]]\n```\n\n\n\n```\n输入：root = [1]\n输出：[[1]]\n```\n\n\n\n```\n输入：root = []\n输出：[]\n```\n\n\n\n**提示：**\n\n- 树中节点数目在范围 $[0, 2000]$ 内\n- $-100 \\leq Node.val \\leq 100$\n\n### 题目分析\n\n官方的题解以及很多人都很喜欢使用deque(双端队列)来做，这种做法自然很好，但是我们明明用正常的队列就可以搞定的事，干嘛那么复杂呢？\n\n首先分析题目，既然要求一层层地遍历二叉树，那么自然而然就应该想到用BFS来遍历。然而正常的BFS是没办法分层的，就是说我们BFS仅仅是维护了一个栈，但实际上无法将层与层之间的节点分离开来。我们只需要稍作改动，在while循环中嵌套一个for循环即可实现。想一想为什么？\n\n回忆一下BFS的原理，每次进栈的节点深度都一样，每次出栈的节点深度也是一样的，利用这个原理，就可以将每一层的节点分开，输出到二维vector数组中。\n\n至于还要从右向左遍历，我们只需要构建一个reverse函数，将二维数组双数的行不变，单数的行取反reverse，就好啦。\n\n需要注意的是，我们应该了解如何使用vector创建二维数组，每次for循环都用resize创建一行vector数组。如果不熟悉的话建议百度一下。。。（比如说我就不太会）\n\n全部代码如下，建议去leetcode自行做一下，不要抄任何现成的代码，这样对能力提升没好处。\n\n```c\nclass Solution {\npublic:\n    vector<vector<int>> zigzagLevelOrder(TreeNode* root) \n    {\n        vector<vector<int>> ans;\n        queue<TreeNode*> Q;\n        if(root)\n            Q.push(root);\n        else\n            return ans;\n        int depth=0;\n        while(!Q.empty())\n        {\n            ans.resize(depth+1); \n            int temp=Q.size();\n            for(int i=0;i<temp;i++)//循环每一层\n            {\n                TreeNode* node;\n                node=Q.front();\n                if(node->left != NULL)\n                    Q.push(node->left);\n                if(node->right != NULL)\n                    Q.push(node->right);\n                ans[depth].push_back(node->val);\n                Q.pop();\n            }\n            depth++;\n        }\n        for(int i=1;i<depth;i+=2)\n            reverse(ans[i]);\n        return ans;\n    }\n    vector<int> reverse(vector<int>& arr)\n    {\n        int len=arr.size();\n        if(len<=1)\n            return arr;\n        for(int i=0;i<len/2;i++)//reverse\n        {\n            int temp=arr[i];\n            arr[i]=arr[len-i-1];\n            arr[len-i-1]=temp;\n        }\n        return arr;\n    }\n};\n```\n\n","source":"_posts/binary_tree_2.md","raw":"---\ntitle: 二叉树进阶与习题\ndate: 2022-02-24 22:20:55\nauthor: Tony\ncategories:\n\t- algorithm\ntags: \n\t- Binary-tree\n\t- algorithm\nkatex: true\n---\n\n## 前言\n\n对二叉树不是很了解的同学可以先看一下我之前的文章：[链式二叉树简介](https://tonylsx611.github.io/2022/02/25/binary_tree_1/)\n\n## 数组二叉树转链表\n\n将一棵完全二叉树转换成链表形式是比较常见的一种做法，我们首先声明一个int类型的数组，然后把它放入链表二叉树中。这个过程相对来说是很容易实现的。\n\n```c\nint length = 7;\nint arr[length] = { 1, 2, 3, 4, 5, NULL, 6 };\n```\n\n![img](binary_tree_2/image.png)\n\n之后的任务就是将数组转化为链表形式，链表的定义如下：\n\n```c\nstruct TreeNode //二叉树的格式\n{\n    int val;\n    TreeNode* left;\n    TreeNode* right;\n    TreeNode() : val(0), left(nullptr), right(nullptr) {}\n    TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}\n    TreeNode(int x, TreeNode* left, TreeNode* right) : val(x), left(left), right(right) {}\n};\n```\n\n转化的过程也很容易，其实这是一个数学问题，对于一棵完全二叉树（满二叉树），节点`tree[i]`的左子树永远是`tree[2*i+1]`，节点`tree[i]`的右子树永远是`tree[2*i+2]`；并且我们只需要递归到倒数第二层的树即可，即`if (i < length/2)`。\n\n```c\nTreeNode* addtree(TreeNode* tree, int arr[], int i)//数组转链表\n{\n\tif (arr[i] == 0)\n        return NULL;\n    if (i < length/2)//arr.length()\n    {\n        TreeNode* tree = new TreeNode();\n        \n        tree->val = arr[i];\n        tree->left = addtree(tree, arr, i + i + 1);\n        tree->right = addtree(tree, arr, i + i + 2);\n        return tree;\n    }\n    return NULL;\n}\n```\n\n## 链表二叉树转数组\n\n比较困难的是如何将链表二叉树转换为数组，因为链表形式下并不一定每一个节点都有两个子节点，因此链表二叉树是没有办法直接转化成一棵数组型的完全二叉树（可能也可以，但是我不会，欢迎在评论区讨论）。\n\n如果可以获得链式二叉树的高度，那么可以通过BFS来遍历整个链表，即使链表的节点没有左枝或右枝，也把一个空节点加进stack中，这样理论上可以实现链表到数组的转换，不过实现起来还是非常麻烦。\n\n因此，我们绝大多数情况下是不会将链表转化成数组的，因为在链表中操作数据是非常方便的（当然在数组中操作也不麻烦），我们做的最多的事情就是搜索和遍历二叉树，如果不是很理解前一句话，建议再次回顾一下上一篇文章：[链式二叉树简介](https://tonylsx611.github.io/2022/02/25/binary_tree_1/)\n\n## 例题98\n\n### 题目描述\n\nLeetcode链接: [98. 验证二叉搜索树 - 力扣（LeetCode） (leetcode-cn.com)](https://leetcode-cn.com/problems/validate-binary-search-tree/)\n\n给你一个二叉树的根节点 root ，判断其是否是一个有效的二叉搜索树。\n\n有效 二叉搜索树定义如下：\n\n- 节点的左子树只包含 小于 当前节点的数。\n- 节点的右子树只包含 大于 当前节点的数。\n- 所有左子树和右子树自身必须也是二叉搜索树。\n\n**输入输出样例：**\n\n![img](binary_tree_2/tree1.jpg)\n\n```bash\ninput: root=[2,1,3]\noutput: true\n```\n\n![img](binary_tree_2/tree2.jpg)\n\n```bash\ninput: root = [5,1,4,null,null,3,6]\noutput: false\nexplanation: 根节点的值是 5 ，但是右子节点的值是 4 。\n```\n\n**提示：**\n\n- 树中节点数目范围在$[1, 10^4]$ 内\n- $-2^{31} \\leq Node.val \\leq 2^{31} - 1$\n\n### 例题分析\n\n我最初的思路是，只要保证**每一个节点大于左枝，小于右枝**即可。\n\n对于这样的思路，直接对链表进行BFS搜索即可，如果不会BFS算法，可以参考：[BFS简介](https://tonylsx611.github.io/2022/03/10/BFS/)。当然，其他的搜索算法也可以考虑，比如DFS，或者前序中序后序遍历每一个节点，然后判断每个节点的两个子节点就可以。我这里就用BFS来实现，代码如下：\n\n```c\nclass Solution {\npublic:\n    TreeNode* temp;\n    bool isValidBST(TreeNode* root)\n    {\n        queue<TreeNode*> Q;\n        TreeNode* node;\n        Q.push(root);\n        while (!Q.empty())\n        {\n            node = Q.front();\n            temp = node;\n            if (node->left != NULL)\n            {\n                if (node->left->val >= temp->val)\n                    return false;\n                Q.push(node->left);\n            }\n            if (node->right != NULL)\n            {\n                if (node->right->val <= temp->val)\n                    return false;\n                Q.push(node->right);\n            }\n            Q.pop();\n        }\n        return true;\n    }\n};\n```\n\n但是，我发现我的理解是有问题的，这个题目要求是节点下面的**所有左子树**的值都要小于该节点，节点下面**所有右子树**的值都要大于该节点！\n\n比如这个例子，对于该题来说，他的答案应该是false。因为根节点的值是5，但是右侧分支中有一个节点的值是3，小于根节点的值。\n\n![false example](binary_tree_2/false%20example-16473330373123.png)\n\n因此，对于这种情况，我们应该优先考虑对二叉树进行中序遍历，中序遍历的结果如果是升序就返回true，否则返回false。\n\n比如上面这个错误的样例的中序遍历结果为：`root=[4,5,3,6,7];`，他不是单调递增的数组。\n\n再比如，我们来看一个正确的样例，他的中序遍历的结果为：`root=[4,5,6,7,9]`，他是单调递增的数组。\n\n![true example](binary_tree_2/true%20example.png)\n\n因此，我们的思路就可以转变为，**判断该二叉树的中序遍历结果是否为单调递增**，来判断其是否是一个有效的二叉搜索树，代码如下：\n\n```c\nclass Solution {\npublic:\n    int btree[10001];\n    int ptr = 0;\n    void inorder(TreeNode* root)\n    {\n        if (root == NULL)\n            return;\n        if (root->left)\n            inorder(root->left);\n        btree[ptr] = root->val;\n        ptr++;\n        if (root->right)\n            inorder(root->right);\n    }\n    bool isValidBST(TreeNode* root)\n    {\n        inorder(root);\n        //for(int i=0;i<ptr;i++)\n        //    cout<<btree[i]<<\" \";    \n        for (int i = 0; i < ptr - 1; i++)\n            if (btree[i] >= btree[i + 1])\n                return false;\n        return true;\n    }\n};\n```\n\n## 例题103\n\n### 题目描述\n\nLeetcode链接: [103. 二叉树的锯齿形层序遍历 - 力扣（LeetCode） (leetcode-cn.com)](https://leetcode-cn.com/problems/binary-tree-zigzag-level-order-traversal/)\n\n给你二叉树的根节点 root ，返回其节点值的 锯齿形层序遍历 。（即先从左往右，再从右往左进行下一层遍历，以此类推，层与层之间交替进行）。\n\n**输入输出样例：**\n\n![img](binary_tree_2/tree1.jpg)\n\n```bash\n输入：root = [3,9,20,null,null,15,7]\n输出：[[3],[20,9],[15,7]]\n```\n\n\n\n```\n输入：root = [1]\n输出：[[1]]\n```\n\n\n\n```\n输入：root = []\n输出：[]\n```\n\n\n\n**提示：**\n\n- 树中节点数目在范围 $[0, 2000]$ 内\n- $-100 \\leq Node.val \\leq 100$\n\n### 题目分析\n\n官方的题解以及很多人都很喜欢使用deque(双端队列)来做，这种做法自然很好，但是我们明明用正常的队列就可以搞定的事，干嘛那么复杂呢？\n\n首先分析题目，既然要求一层层地遍历二叉树，那么自然而然就应该想到用BFS来遍历。然而正常的BFS是没办法分层的，就是说我们BFS仅仅是维护了一个栈，但实际上无法将层与层之间的节点分离开来。我们只需要稍作改动，在while循环中嵌套一个for循环即可实现。想一想为什么？\n\n回忆一下BFS的原理，每次进栈的节点深度都一样，每次出栈的节点深度也是一样的，利用这个原理，就可以将每一层的节点分开，输出到二维vector数组中。\n\n至于还要从右向左遍历，我们只需要构建一个reverse函数，将二维数组双数的行不变，单数的行取反reverse，就好啦。\n\n需要注意的是，我们应该了解如何使用vector创建二维数组，每次for循环都用resize创建一行vector数组。如果不熟悉的话建议百度一下。。。（比如说我就不太会）\n\n全部代码如下，建议去leetcode自行做一下，不要抄任何现成的代码，这样对能力提升没好处。\n\n```c\nclass Solution {\npublic:\n    vector<vector<int>> zigzagLevelOrder(TreeNode* root) \n    {\n        vector<vector<int>> ans;\n        queue<TreeNode*> Q;\n        if(root)\n            Q.push(root);\n        else\n            return ans;\n        int depth=0;\n        while(!Q.empty())\n        {\n            ans.resize(depth+1); \n            int temp=Q.size();\n            for(int i=0;i<temp;i++)//循环每一层\n            {\n                TreeNode* node;\n                node=Q.front();\n                if(node->left != NULL)\n                    Q.push(node->left);\n                if(node->right != NULL)\n                    Q.push(node->right);\n                ans[depth].push_back(node->val);\n                Q.pop();\n            }\n            depth++;\n        }\n        for(int i=1;i<depth;i+=2)\n            reverse(ans[i]);\n        return ans;\n    }\n    vector<int> reverse(vector<int>& arr)\n    {\n        int len=arr.size();\n        if(len<=1)\n            return arr;\n        for(int i=0;i<len/2;i++)//reverse\n        {\n            int temp=arr[i];\n            arr[i]=arr[len-i-1];\n            arr[len-i-1]=temp;\n        }\n        return arr;\n    }\n};\n```\n\n","slug":"binary_tree_2","published":1,"updated":"2022-03-28T08:44:54.306Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrdi00301gzu5f8g33qm","content":"<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\"></a> 前言</h2>\n<p>对二叉树不是很了解的同学可以先看一下我之前的文章：<a href=\"https://tonylsx611.github.io/2022/02/25/binary_tree_1/\">链式二叉树简介</a></p>\n<h2 id=\"数组二叉树转链表\"><a class=\"markdownIt-Anchor\" href=\"#数组二叉树转链表\"></a> 数组二叉树转链表</h2>\n<p>将一棵完全二叉树转换成链表形式是比较常见的一种做法，我们首先声明一个int类型的数组，然后把它放入链表二叉树中。这个过程相对来说是很容易实现的。</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> length <span class=\"token operator\">=</span> <span class=\"token number\">7</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> arr<span class=\"token punctuation\">[</span>length<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></code></pre>\n<p><img src=\"/2022/02/24/binary_tree_2/image.png\" alt=\"img\" loading=\"lazy\"></p>\n<p>之后的任务就是将数组转化为链表形式，链表的定义如下：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">struct</span> <span class=\"token class-name\">TreeNode</span> <span class=\"token comment\">//二叉树的格式</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> val<span class=\"token punctuation\">;</span>\n    TreeNode<span class=\"token operator\">*</span> left<span class=\"token punctuation\">;</span>\n    TreeNode<span class=\"token operator\">*</span> right<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">TreeNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span>nullptr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>nullptr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">TreeNode</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">val</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span>nullptr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>nullptr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">TreeNode</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> TreeNode<span class=\"token operator\">*</span> left<span class=\"token punctuation\">,</span> TreeNode<span class=\"token operator\">*</span> right<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">val</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></code></pre>\n<p>转化的过程也很容易，其实这是一个数学问题，对于一棵完全二叉树（满二叉树），节点<code>tree[i]</code>的左子树永远是<code>tree[2*i+1]</code>，节点<code>tree[i]</code>的右子树永远是<code>tree[2*i+2]</code>；并且我们只需要递归到倒数第二层的树即可，即<code>if (i &lt; length/2)</code>。</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">TreeNode<span class=\"token operator\">*</span> <span class=\"token function\">addtree</span><span class=\"token punctuation\">(</span>TreeNode<span class=\"token operator\">*</span> tree<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> arr<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span><span class=\"token comment\">//数组转链表</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> length<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//arr.length()</span>\n    <span class=\"token punctuation\">&#123;</span>\n        TreeNode<span class=\"token operator\">*</span> tree <span class=\"token operator\">=</span> new <span class=\"token function\">TreeNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        tree<span class=\"token operator\">-></span>val <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        tree<span class=\"token operator\">-></span>left <span class=\"token operator\">=</span> <span class=\"token function\">addtree</span><span class=\"token punctuation\">(</span>tree<span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">,</span> i <span class=\"token operator\">+</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        tree<span class=\"token operator\">-></span>right <span class=\"token operator\">=</span> <span class=\"token function\">addtree</span><span class=\"token punctuation\">(</span>tree<span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">,</span> i <span class=\"token operator\">+</span> i <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> tree<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"链表二叉树转数组\"><a class=\"markdownIt-Anchor\" href=\"#链表二叉树转数组\"></a> 链表二叉树转数组</h2>\n<p>比较困难的是如何将链表二叉树转换为数组，因为链表形式下并不一定每一个节点都有两个子节点，因此链表二叉树是没有办法直接转化成一棵数组型的完全二叉树（可能也可以，但是我不会，欢迎在评论区讨论）。</p>\n<p>如果可以获得链式二叉树的高度，那么可以通过BFS来遍历整个链表，即使链表的节点没有左枝或右枝，也把一个空节点加进stack中，这样理论上可以实现链表到数组的转换，不过实现起来还是非常麻烦。</p>\n<p>因此，我们绝大多数情况下是不会将链表转化成数组的，因为在链表中操作数据是非常方便的（当然在数组中操作也不麻烦），我们做的最多的事情就是搜索和遍历二叉树，如果不是很理解前一句话，建议再次回顾一下上一篇文章：<a href=\"https://tonylsx611.github.io/2022/02/25/binary_tree_1/\">链式二叉树简介</a></p>\n<h2 id=\"例题98\"><a class=\"markdownIt-Anchor\" href=\"#例题98\"></a> 例题98</h2>\n<h3 id=\"题目描述\"><a class=\"markdownIt-Anchor\" href=\"#题目描述\"></a> 题目描述</h3>\n<p>Leetcode链接: <a href=\"https://leetcode-cn.com/problems/validate-binary-search-tree/\">98. 验证二叉搜索树 - 力扣（LeetCode） (leetcode-cn.com)</a></p>\n<p>给你一个二叉树的根节点 root ，判断其是否是一个有效的二叉搜索树。</p>\n<p>有效 二叉搜索树定义如下：</p>\n<ul>\n<li>节点的左子树只包含 小于 当前节点的数。</li>\n<li>节点的右子树只包含 大于 当前节点的数。</li>\n<li>所有左子树和右子树自身必须也是二叉搜索树。</li>\n</ul>\n<p><strong>输入输出样例：</strong></p>\n<p><img src=\"/2022/02/24/binary_tree_2/tree1.jpg\" alt=\"img\" loading=\"lazy\"></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">input: <span class=\"token assign-left variable\">root</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">2,1</span>,3<span class=\"token punctuation\">]</span>\noutput: <span class=\"token boolean\">true</span></code></pre>\n<p><img src=\"/2022/02/24/binary_tree_2/tree2.jpg\" alt=\"img\" loading=\"lazy\"></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">input: root <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5,1</span>,4,null,null,3,6<span class=\"token punctuation\">]</span>\noutput: <span class=\"token boolean\">false</span>\nexplanation: 根节点的值是 <span class=\"token number\">5</span> ，但是右子节点的值是 <span class=\"token number\">4</span> 。</code></pre>\n<p><strong>提示：</strong></p>\n<ul>\n<li>树中节点数目范围在<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1, 10^4]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span> 内</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>−</mo><msup><mn>2</mn><mn>31</mn></msup><mo>≤</mo><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi mathvariant=\"normal\">.</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo>≤</mo><msup><mn>2</mn><mn>31</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-2^{31} \\leq Node.val \\leq 2^{31} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.950078em;vertical-align:-0.13597em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord\">.</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n</ul>\n<h3 id=\"例题分析\"><a class=\"markdownIt-Anchor\" href=\"#例题分析\"></a> 例题分析</h3>\n<p>我最初的思路是，只要保证<strong>每一个节点大于左枝，小于右枝</strong>即可。</p>\n<p>对于这样的思路，直接对链表进行BFS搜索即可，如果不会BFS算法，可以参考：<a href=\"https://tonylsx611.github.io/2022/03/10/BFS/\">BFS简介</a>。当然，其他的搜索算法也可以考虑，比如DFS，或者前序中序后序遍历每一个节点，然后判断每个节点的两个子节点就可以。我这里就用BFS来实现，代码如下：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">class Solution <span class=\"token punctuation\">&#123;</span>\npublic<span class=\"token operator\">:</span>\n    TreeNode<span class=\"token operator\">*</span> temp<span class=\"token punctuation\">;</span>\n    bool <span class=\"token function\">isValidBST</span><span class=\"token punctuation\">(</span>TreeNode<span class=\"token operator\">*</span> root<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        queue<span class=\"token operator\">&lt;</span>TreeNode<span class=\"token operator\">*</span><span class=\"token operator\">></span> Q<span class=\"token punctuation\">;</span>\n        TreeNode<span class=\"token operator\">*</span> node<span class=\"token punctuation\">;</span>\n        Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            node <span class=\"token operator\">=</span> Q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            temp <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>left <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>left<span class=\"token operator\">-></span>val <span class=\"token operator\">>=</span> temp<span class=\"token operator\">-></span>val<span class=\"token punctuation\">)</span>\n                    <span class=\"token keyword\">return</span> false<span class=\"token punctuation\">;</span>\n                Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>right <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>right<span class=\"token operator\">-></span>val <span class=\"token operator\">&lt;=</span> temp<span class=\"token operator\">-></span>val<span class=\"token punctuation\">)</span>\n                    <span class=\"token keyword\">return</span> false<span class=\"token punctuation\">;</span>\n                Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            Q<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> true<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></code></pre>\n<p>但是，我发现我的理解是有问题的，这个题目要求是节点下面的<strong>所有左子树</strong>的值都要小于该节点，节点下面<strong>所有右子树</strong>的值都要大于该节点！</p>\n<p>比如这个例子，对于该题来说，他的答案应该是false。因为根节点的值是5，但是右侧分支中有一个节点的值是3，小于根节点的值。</p>\n<p><img src=\"/2022/02/24/binary_tree_2/false%20example-16473330373123.png\" alt=\"false example\" loading=\"lazy\"></p>\n<p>因此，对于这种情况，我们应该优先考虑对二叉树进行中序遍历，中序遍历的结果如果是升序就返回true，否则返回false。</p>\n<p>比如上面这个错误的样例的中序遍历结果为：<code>root=[4,5,3,6,7];</code>，他不是单调递增的数组。</p>\n<p>再比如，我们来看一个正确的样例，他的中序遍历的结果为：<code>root=[4,5,6,7,9]</code>，他是单调递增的数组。</p>\n<p><img src=\"/2022/02/24/binary_tree_2/true%20example.png\" alt=\"true example\" loading=\"lazy\"></p>\n<p>因此，我们的思路就可以转变为，<strong>判断该二叉树的中序遍历结果是否为单调递增</strong>，来判断其是否是一个有效的二叉搜索树，代码如下：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">class Solution <span class=\"token punctuation\">&#123;</span>\npublic<span class=\"token operator\">:</span>\n    <span class=\"token keyword\">int</span> btree<span class=\"token punctuation\">[</span><span class=\"token number\">10001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ptr <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>TreeNode<span class=\"token operator\">*</span> root<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>left<span class=\"token punctuation\">)</span>\n            <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        btree<span class=\"token punctuation\">[</span>ptr<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> root<span class=\"token operator\">-></span>val<span class=\"token punctuation\">;</span>\n        ptr<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>right<span class=\"token punctuation\">)</span>\n            <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    bool <span class=\"token function\">isValidBST</span><span class=\"token punctuation\">(</span>TreeNode<span class=\"token operator\">*</span> root<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//for(int i=0;i&lt;ptr;i++)</span>\n        <span class=\"token comment\">//    cout&lt;&lt;btree[i]&lt;&lt;\" \";    </span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> ptr <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>btree<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> btree<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">return</span> false<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> true<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"例题103\"><a class=\"markdownIt-Anchor\" href=\"#例题103\"></a> 例题103</h2>\n<h3 id=\"题目描述-2\"><a class=\"markdownIt-Anchor\" href=\"#题目描述-2\"></a> 题目描述</h3>\n<p>Leetcode链接: <a href=\"https://leetcode-cn.com/problems/binary-tree-zigzag-level-order-traversal/\">103. 二叉树的锯齿形层序遍历 - 力扣（LeetCode） (leetcode-cn.com)</a></p>\n<p>给你二叉树的根节点 root ，返回其节点值的 锯齿形层序遍历 。（即先从左往右，再从右往左进行下一层遍历，以此类推，层与层之间交替进行）。</p>\n<p><strong>输入输出样例：</strong></p>\n<p><img src=\"/2022/02/24/binary_tree_2/tree1.jpg\" alt=\"img\" loading=\"lazy\"></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">输入：root <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3,9</span>,20,null,null,15,7<span class=\"token punctuation\">]</span>\n输出：<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>,<span class=\"token punctuation\">[</span><span class=\"token number\">20,9</span><span class=\"token punctuation\">]</span>,<span class=\"token punctuation\">[</span><span class=\"token number\">15,7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-none\"><code class=\"language-none\">输入：root &#x3D; [1]\n输出：[[1]]</code></pre>\n<pre class=\"language-none\"><code class=\"language-none\">输入：root &#x3D; []\n输出：[]</code></pre>\n<p><strong>提示：</strong></p>\n<ul>\n<li>树中节点数目在范围 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>2000</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0, 2000]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mclose\">]</span></span></span></span> 内</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>−</mo><mn>100</mn><mo>≤</mo><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi mathvariant=\"normal\">.</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo>≤</mo><mn>100</mn></mrow><annotation encoding=\"application/x-tex\">-100 \\leq Node.val \\leq 100</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord\">.</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span></li>\n</ul>\n<h3 id=\"题目分析\"><a class=\"markdownIt-Anchor\" href=\"#题目分析\"></a> 题目分析</h3>\n<p>官方的题解以及很多人都很喜欢使用deque(双端队列)来做，这种做法自然很好，但是我们明明用正常的队列就可以搞定的事，干嘛那么复杂呢？</p>\n<p>首先分析题目，既然要求一层层地遍历二叉树，那么自然而然就应该想到用BFS来遍历。然而正常的BFS是没办法分层的，就是说我们BFS仅仅是维护了一个栈，但实际上无法将层与层之间的节点分离开来。我们只需要稍作改动，在while循环中嵌套一个for循环即可实现。想一想为什么？</p>\n<p>回忆一下BFS的原理，每次进栈的节点深度都一样，每次出栈的节点深度也是一样的，利用这个原理，就可以将每一层的节点分开，输出到二维vector数组中。</p>\n<p>至于还要从右向左遍历，我们只需要构建一个reverse函数，将二维数组双数的行不变，单数的行取反reverse，就好啦。</p>\n<p>需要注意的是，我们应该了解如何使用vector创建二维数组，每次for循环都用resize创建一行vector数组。如果不熟悉的话建议百度一下。。。（比如说我就不太会）</p>\n<p>全部代码如下，建议去leetcode自行做一下，不要抄任何现成的代码，这样对能力提升没好处。</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">class Solution <span class=\"token punctuation\">&#123;</span>\npublic<span class=\"token operator\">:</span>\n    vector<span class=\"token operator\">&lt;</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span> <span class=\"token function\">zigzagLevelOrder</span><span class=\"token punctuation\">(</span>TreeNode<span class=\"token operator\">*</span> root<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        vector<span class=\"token operator\">&lt;</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span> ans<span class=\"token punctuation\">;</span>\n        queue<span class=\"token operator\">&lt;</span>TreeNode<span class=\"token operator\">*</span><span class=\"token operator\">></span> Q<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span>\n            Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span>\n            <span class=\"token keyword\">return</span> ans<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> depth<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            ans<span class=\"token punctuation\">.</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span>depth<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token keyword\">int</span> temp<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>temp<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//循环每一层</span>\n            <span class=\"token punctuation\">&#123;</span>\n                TreeNode<span class=\"token operator\">*</span> node<span class=\"token punctuation\">;</span>\n                node<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>left <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n                    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>right <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n                    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                ans<span class=\"token punctuation\">[</span>depth<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                Q<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            depth<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>depth<span class=\"token punctuation\">;</span>i<span class=\"token operator\">+=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span>ans<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> ans<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> <span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> arr<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>len<span class=\"token operator\">&lt;=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//reverse</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">int</span> temp<span class=\"token operator\">=</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>arr<span class=\"token punctuation\">[</span>len<span class=\"token operator\">-</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            arr<span class=\"token punctuation\">[</span>len<span class=\"token operator\">-</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>temp<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></code></pre>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\"></a> 前言</h2>\n<p>对二叉树不是很了解的同学可以先看一下我之前的文章：<a href=\"https://tonylsx611.github.io/2022/02/25/binary_tree_1/\">链式二叉树简介</a></p>\n<h2 id=\"数组二叉树转链表\"><a class=\"markdownIt-Anchor\" href=\"#数组二叉树转链表\"></a> 数组二叉树转链表</h2>\n<p>将一棵完全二叉树转换成链表形式是比较常见的一种做法，我们首先声明一个int类型的数组，然后把它放入链表二叉树中。这个过程相对来说是很容易实现的。</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> length <span class=\"token operator\">=</span> <span class=\"token number\">7</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> arr<span class=\"token punctuation\">[</span>length<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></code></pre>\n<p><img src=\"/2022/02/24/binary_tree_2/image.png\" alt=\"img\"></p>\n<p>之后的任务就是将数组转化为链表形式，链表的定义如下：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token keyword\">struct</span> <span class=\"token class-name\">TreeNode</span> <span class=\"token comment\">//二叉树的格式</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> val<span class=\"token punctuation\">;</span>\n    TreeNode<span class=\"token operator\">*</span> left<span class=\"token punctuation\">;</span>\n    TreeNode<span class=\"token operator\">*</span> right<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">TreeNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span>nullptr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>nullptr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">TreeNode</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">val</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span>nullptr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>nullptr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">TreeNode</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> TreeNode<span class=\"token operator\">*</span> left<span class=\"token punctuation\">,</span> TreeNode<span class=\"token operator\">*</span> right<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">val</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></code></pre>\n<p>转化的过程也很容易，其实这是一个数学问题，对于一棵完全二叉树（满二叉树），节点<code>tree[i]</code>的左子树永远是<code>tree[2*i+1]</code>，节点<code>tree[i]</code>的右子树永远是<code>tree[2*i+2]</code>；并且我们只需要递归到倒数第二层的树即可，即<code>if (i &lt; length/2)</code>。</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">TreeNode<span class=\"token operator\">*</span> <span class=\"token function\">addtree</span><span class=\"token punctuation\">(</span>TreeNode<span class=\"token operator\">*</span> tree<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> arr<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span><span class=\"token comment\">//数组转链表</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> length<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//arr.length()</span>\n    <span class=\"token punctuation\">&#123;</span>\n        TreeNode<span class=\"token operator\">*</span> tree <span class=\"token operator\">=</span> new <span class=\"token function\">TreeNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        tree<span class=\"token operator\">-></span>val <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        tree<span class=\"token operator\">-></span>left <span class=\"token operator\">=</span> <span class=\"token function\">addtree</span><span class=\"token punctuation\">(</span>tree<span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">,</span> i <span class=\"token operator\">+</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        tree<span class=\"token operator\">-></span>right <span class=\"token operator\">=</span> <span class=\"token function\">addtree</span><span class=\"token punctuation\">(</span>tree<span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">,</span> i <span class=\"token operator\">+</span> i <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> tree<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"链表二叉树转数组\"><a class=\"markdownIt-Anchor\" href=\"#链表二叉树转数组\"></a> 链表二叉树转数组</h2>\n<p>比较困难的是如何将链表二叉树转换为数组，因为链表形式下并不一定每一个节点都有两个子节点，因此链表二叉树是没有办法直接转化成一棵数组型的完全二叉树（可能也可以，但是我不会，欢迎在评论区讨论）。</p>\n<p>如果可以获得链式二叉树的高度，那么可以通过BFS来遍历整个链表，即使链表的节点没有左枝或右枝，也把一个空节点加进stack中，这样理论上可以实现链表到数组的转换，不过实现起来还是非常麻烦。</p>\n<p>因此，我们绝大多数情况下是不会将链表转化成数组的，因为在链表中操作数据是非常方便的（当然在数组中操作也不麻烦），我们做的最多的事情就是搜索和遍历二叉树，如果不是很理解前一句话，建议再次回顾一下上一篇文章：<a href=\"https://tonylsx611.github.io/2022/02/25/binary_tree_1/\">链式二叉树简介</a></p>\n<h2 id=\"例题98\"><a class=\"markdownIt-Anchor\" href=\"#例题98\"></a> 例题98</h2>\n<h3 id=\"题目描述\"><a class=\"markdownIt-Anchor\" href=\"#题目描述\"></a> 题目描述</h3>\n<p>Leetcode链接: <a href=\"https://leetcode-cn.com/problems/validate-binary-search-tree/\">98. 验证二叉搜索树 - 力扣（LeetCode） (leetcode-cn.com)</a></p>\n<p>给你一个二叉树的根节点 root ，判断其是否是一个有效的二叉搜索树。</p>\n<p>有效 二叉搜索树定义如下：</p>\n<ul>\n<li>节点的左子树只包含 小于 当前节点的数。</li>\n<li>节点的右子树只包含 大于 当前节点的数。</li>\n<li>所有左子树和右子树自身必须也是二叉搜索树。</li>\n</ul>\n<p><strong>输入输出样例：</strong></p>\n<p><img src=\"/2022/02/24/binary_tree_2/tree1.jpg\" alt=\"img\"></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">input: <span class=\"token assign-left variable\">root</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">2,1</span>,3<span class=\"token punctuation\">]</span>\noutput: <span class=\"token boolean\">true</span></code></pre>\n<p><img src=\"/2022/02/24/binary_tree_2/tree2.jpg\" alt=\"img\"></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">input: root <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5,1</span>,4,null,null,3,6<span class=\"token punctuation\">]</span>\noutput: <span class=\"token boolean\">false</span>\nexplanation: 根节点的值是 <span class=\"token number\">5</span> ，但是右子节点的值是 <span class=\"token number\">4</span> 。</code></pre>\n<p><strong>提示：</strong></p>\n<ul>\n<li>树中节点数目范围在<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[1, 10^4]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span> 内</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>−</mo><msup><mn>2</mn><mn>31</mn></msup><mo>≤</mo><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi mathvariant=\"normal\">.</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo>≤</mo><msup><mn>2</mn><mn>31</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-2^{31} \\leq Node.val \\leq 2^{31} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.950078em;vertical-align:-0.13597em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord\">.</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n</ul>\n<h3 id=\"例题分析\"><a class=\"markdownIt-Anchor\" href=\"#例题分析\"></a> 例题分析</h3>\n<p>我最初的思路是，只要保证<strong>每一个节点大于左枝，小于右枝</strong>即可。</p>\n<p>对于这样的思路，直接对链表进行BFS搜索即可，如果不会BFS算法，可以参考：<a href=\"https://tonylsx611.github.io/2022/03/10/BFS/\">BFS简介</a>。当然，其他的搜索算法也可以考虑，比如DFS，或者前序中序后序遍历每一个节点，然后判断每个节点的两个子节点就可以。我这里就用BFS来实现，代码如下：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">class Solution <span class=\"token punctuation\">&#123;</span>\npublic<span class=\"token operator\">:</span>\n    TreeNode<span class=\"token operator\">*</span> temp<span class=\"token punctuation\">;</span>\n    bool <span class=\"token function\">isValidBST</span><span class=\"token punctuation\">(</span>TreeNode<span class=\"token operator\">*</span> root<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        queue<span class=\"token operator\">&lt;</span>TreeNode<span class=\"token operator\">*</span><span class=\"token operator\">></span> Q<span class=\"token punctuation\">;</span>\n        TreeNode<span class=\"token operator\">*</span> node<span class=\"token punctuation\">;</span>\n        Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            node <span class=\"token operator\">=</span> Q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            temp <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>left <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>left<span class=\"token operator\">-></span>val <span class=\"token operator\">>=</span> temp<span class=\"token operator\">-></span>val<span class=\"token punctuation\">)</span>\n                    <span class=\"token keyword\">return</span> false<span class=\"token punctuation\">;</span>\n                Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>right <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>right<span class=\"token operator\">-></span>val <span class=\"token operator\">&lt;=</span> temp<span class=\"token operator\">-></span>val<span class=\"token punctuation\">)</span>\n                    <span class=\"token keyword\">return</span> false<span class=\"token punctuation\">;</span>\n                Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            Q<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> true<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></code></pre>\n<p>但是，我发现我的理解是有问题的，这个题目要求是节点下面的<strong>所有左子树</strong>的值都要小于该节点，节点下面<strong>所有右子树</strong>的值都要大于该节点！</p>\n<p>比如这个例子，对于该题来说，他的答案应该是false。因为根节点的值是5，但是右侧分支中有一个节点的值是3，小于根节点的值。</p>\n<p><img src=\"/2022/02/24/binary_tree_2/false%20example-16473330373123.png\" alt=\"false example\"></p>\n<p>因此，对于这种情况，我们应该优先考虑对二叉树进行中序遍历，中序遍历的结果如果是升序就返回true，否则返回false。</p>\n<p>比如上面这个错误的样例的中序遍历结果为：<code>root=[4,5,3,6,7];</code>，他不是单调递增的数组。</p>\n<p>再比如，我们来看一个正确的样例，他的中序遍历的结果为：<code>root=[4,5,6,7,9]</code>，他是单调递增的数组。</p>\n<p><img src=\"/2022/02/24/binary_tree_2/true%20example.png\" alt=\"true example\"></p>\n<p>因此，我们的思路就可以转变为，<strong>判断该二叉树的中序遍历结果是否为单调递增</strong>，来判断其是否是一个有效的二叉搜索树，代码如下：</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">class Solution <span class=\"token punctuation\">&#123;</span>\npublic<span class=\"token operator\">:</span>\n    <span class=\"token keyword\">int</span> btree<span class=\"token punctuation\">[</span><span class=\"token number\">10001</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ptr <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>TreeNode<span class=\"token operator\">*</span> root<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>left<span class=\"token punctuation\">)</span>\n            <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        btree<span class=\"token punctuation\">[</span>ptr<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> root<span class=\"token operator\">-></span>val<span class=\"token punctuation\">;</span>\n        ptr<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>right<span class=\"token punctuation\">)</span>\n            <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>root<span class=\"token operator\">-></span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    bool <span class=\"token function\">isValidBST</span><span class=\"token punctuation\">(</span>TreeNode<span class=\"token operator\">*</span> root<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//for(int i=0;i&lt;ptr;i++)</span>\n        <span class=\"token comment\">//    cout&lt;&lt;btree[i]&lt;&lt;\" \";    </span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> ptr <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>btree<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> btree<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">return</span> false<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> true<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"例题103\"><a class=\"markdownIt-Anchor\" href=\"#例题103\"></a> 例题103</h2>\n<h3 id=\"题目描述-2\"><a class=\"markdownIt-Anchor\" href=\"#题目描述-2\"></a> 题目描述</h3>\n<p>Leetcode链接: <a href=\"https://leetcode-cn.com/problems/binary-tree-zigzag-level-order-traversal/\">103. 二叉树的锯齿形层序遍历 - 力扣（LeetCode） (leetcode-cn.com)</a></p>\n<p>给你二叉树的根节点 root ，返回其节点值的 锯齿形层序遍历 。（即先从左往右，再从右往左进行下一层遍历，以此类推，层与层之间交替进行）。</p>\n<p><strong>输入输出样例：</strong></p>\n<p><img src=\"/2022/02/24/binary_tree_2/tree1.jpg\" alt=\"img\"></p>\n<pre class=\"language-bash\" data-language=\"bash\"><code class=\"language-bash\">输入：root <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3,9</span>,20,null,null,15,7<span class=\"token punctuation\">]</span>\n输出：<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>,<span class=\"token punctuation\">[</span><span class=\"token number\">20,9</span><span class=\"token punctuation\">]</span>,<span class=\"token punctuation\">[</span><span class=\"token number\">15,7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-none\"><code class=\"language-none\">输入：root &#x3D; [1]\n输出：[[1]]</code></pre>\n<pre class=\"language-none\"><code class=\"language-none\">输入：root &#x3D; []\n输出：[]</code></pre>\n<p><strong>提示：</strong></p>\n<ul>\n<li>树中节点数目在范围 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>2000</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0, 2000]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mclose\">]</span></span></span></span> 内</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>−</mo><mn>100</mn><mo>≤</mo><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi mathvariant=\"normal\">.</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo>≤</mo><mn>100</mn></mrow><annotation encoding=\"application/x-tex\">-100 \\leq Node.val \\leq 100</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord\">.</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span></li>\n</ul>\n<h3 id=\"题目分析\"><a class=\"markdownIt-Anchor\" href=\"#题目分析\"></a> 题目分析</h3>\n<p>官方的题解以及很多人都很喜欢使用deque(双端队列)来做，这种做法自然很好，但是我们明明用正常的队列就可以搞定的事，干嘛那么复杂呢？</p>\n<p>首先分析题目，既然要求一层层地遍历二叉树，那么自然而然就应该想到用BFS来遍历。然而正常的BFS是没办法分层的，就是说我们BFS仅仅是维护了一个栈，但实际上无法将层与层之间的节点分离开来。我们只需要稍作改动，在while循环中嵌套一个for循环即可实现。想一想为什么？</p>\n<p>回忆一下BFS的原理，每次进栈的节点深度都一样，每次出栈的节点深度也是一样的，利用这个原理，就可以将每一层的节点分开，输出到二维vector数组中。</p>\n<p>至于还要从右向左遍历，我们只需要构建一个reverse函数，将二维数组双数的行不变，单数的行取反reverse，就好啦。</p>\n<p>需要注意的是，我们应该了解如何使用vector创建二维数组，每次for循环都用resize创建一行vector数组。如果不熟悉的话建议百度一下。。。（比如说我就不太会）</p>\n<p>全部代码如下，建议去leetcode自行做一下，不要抄任何现成的代码，这样对能力提升没好处。</p>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\">class Solution <span class=\"token punctuation\">&#123;</span>\npublic<span class=\"token operator\">:</span>\n    vector<span class=\"token operator\">&lt;</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span> <span class=\"token function\">zigzagLevelOrder</span><span class=\"token punctuation\">(</span>TreeNode<span class=\"token operator\">*</span> root<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        vector<span class=\"token operator\">&lt;</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span> ans<span class=\"token punctuation\">;</span>\n        queue<span class=\"token operator\">&lt;</span>TreeNode<span class=\"token operator\">*</span><span class=\"token operator\">></span> Q<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span>\n            Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span>\n            <span class=\"token keyword\">return</span> ans<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> depth<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            ans<span class=\"token punctuation\">.</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span>depth<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token keyword\">int</span> temp<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>temp<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//循环每一层</span>\n            <span class=\"token punctuation\">&#123;</span>\n                TreeNode<span class=\"token operator\">*</span> node<span class=\"token punctuation\">;</span>\n                node<span class=\"token operator\">=</span>Q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>left <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n                    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>right <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span>\n                    Q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                ans<span class=\"token punctuation\">[</span>depth<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">-></span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                Q<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            depth<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>depth<span class=\"token punctuation\">;</span>i<span class=\"token operator\">+=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span>ans<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> ans<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> <span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> arr<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> len<span class=\"token operator\">=</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>len<span class=\"token operator\">&lt;=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>len<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//reverse</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">int</span> temp<span class=\"token operator\">=</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>arr<span class=\"token punctuation\">[</span>len<span class=\"token operator\">-</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            arr<span class=\"token punctuation\">[</span>len<span class=\"token operator\">-</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>temp<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></code></pre>\n"},{"title":"Socket网络编程 4——多线程","date":"2022-11-11T06:51:10.000Z","author":"Tony","_content":"\n## 迭代服务器与并发服务器的区别\n\n![image-20221111145514251](socket-multi-1/image-20221111145514251.png)\n\n## Windows Server\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <thread>\n#include <string>\n#include <winsock2.h>\n#include <windows.h>\n\nusing namespace std;\nSOCKET s;\nsockaddr_in ss;\n//SOCKET fd;\n\nvoid Windows_init()\n{\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cerr << \"Initialize Error!\"<<endl;\n    }\n}\n\nvoid create_socket()\n{\n    s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s == INVALID_SOCKET)\n    {\n        cerr << \"socket Error!\" << endl;\n    }\n\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6789);//port No.\n    ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    if (bind(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n    {\n        cerr<<\"Bind Error!\"<<endl;\n    }\n    if(listen(s, 5) < 0)\n    {\n        cerr<<\"Listen Error!\"<<endl;\n    }\n    cout<<\"Server is running...\"<<endl;\n}\n\nvoid accept_socket(int &fd)\n{\n    sockaddr_in clnt_addr;\n    int clnt_addr_size = sizeof(clnt_addr);\n    fd = accept(s, (sockaddr*) &clnt_addr, &clnt_addr_size);\n    if (fd == INVALID_SOCKET)\n        cerr << \"Accept Error\" << endl;\n    else\n        cout<<\"Connected to Server:\" << fd << endl;\n}\n\nvoid thread_n(int n)\n{\n    cout<<\"Start thread \"<<n<<endl;\n    string msg = \"Hi, Client \" + to_string(n);\n    send(n, msg.c_str(), msg.length(), 0);\n    cout << \"Sending:\\\" \" << msg << \"\\\" to Client...\" << endl;\n    while(true)\n    {\n        char message[256];\n        memset(message, NULL, sizeof(message));\n        int jud = recv(n, message, sizeof(message), 0);\n        if (jud < 0)\n        {\n            cerr<<\"Receive Error!!!\"<<endl;\n            cout<<\"Did you close the Window?\"<<endl;\n            break;\n        }\n        if (strcmp(message, \"quit\\n\") == false)\n        {\n            cout << \"  Bye-bye \" << n << \"!\" << endl;\n            break;\n        }\n        else\n            cout << \"  Received by Client: \" << message << endl;\n        cout << \"Clients \" << n << \" request...\" << endl;\n    }\n    cout<<\"Finish thread \" << n << endl;\n}\n\nint main()\n{\n    Windows_init();\n    create_socket();\n    thread threads[10];\n    int n = 0;\n    while(1)\n    {\n        int fd = 0;\n        accept_socket(fd);\n        threads[n] = thread(thread_n, fd);\n        //threads[n].join();\n        threads[n].detach();\n        n++;\n        if(n == 10)\n            n = 0;\n    }\n    closesocket(s);\n    WSACleanup();\n    return 0;\n}\n\n```\n\n## Python Server\n\n```python\nimport socket\nimport threading\nimport time\n\nclients = []\n\n\ndef new_thread(sock, addr, q):\n    msg = \"Hello, \" + str(addr[1]) + \"! You've joined the group.\"\n    sock.send(msg.encode())\n    temp_msg = \"Client \" + str(addr) + \" join the group\"\n    print(temp_msg)\n    print(\"Now there are \", threading.active_count() - 1, \" people in the group!\")\n\n    while 2 == 2:\n        msg = sock.recv(256).decode('utf-8')\n        if msg == \"quit\":\n            temp_msg = \"Bye-bye\" + str(addr) + \"!\"\n            print(temp_msg)  # (Id, port)\n            print(\"Now there are \", threading.active_count() - 2, \" people in the group!\")\n            break\n        elif msg == \"\":\n            temp_msg = addr + \"has quit the group accidentally...\"\n            print(temp_msg)\n            print(\"Now there are \", threading.active_count() - 2, \" people in the group!\")\n            break\n        else:\n            temp_msg = \"    \" + str(addr[1]) + \": \" + msg\n            print(temp_msg)\n    clients.remove(sock)\n    sock.close()\n\n\nif __name__ == '__main__':\n    try:\n        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    except Exception:\n        print(\"Socket Error!\")\n\n    try:\n        s.bind(('127.0.0.1', 7777))\n    except Exception:\n        print(\"Bind Error!\")\n\n    try:\n        s.listen(5)\n    except Exception:\n        print(\"Listen Error!\")\n\n    print('Server is running...')\n\n    while True:\n        try:\n            sock, addr = s.accept()\n        except Exception:\n            print(\"Accept Error!\")\n\n        clients.append(sock)\n        t = threading.Thread(target=new_thread, args=(sock, addr, q, ))\n        t.start()\n\n```\n\n## 运行结果\n\n左侧是多线程的结果，右侧是单进程的结果，多进程结果未截图，多进程与多线程对于此程序用时相近，单进程和多线程（本例为10线程）的时间差距在8-9倍左右，由此可以看出多线程的加速成绩对于网络爬虫来说是非常明显的。\n\n![image-20221201103211709](socket-multi-1/image-20221201103211709.png)\n\n---\n\n上一篇：\n","source":"_posts/socket-multi-1.md","raw":"---\ntitle: Socket网络编程 4——多线程\ndate: 2022-11-11 14:51:10\nauthor: Tony\ntags:\n  - Socket\n  - Client\n  - Server\ncategories:\n  - 计算机网络\n---\n\n## 迭代服务器与并发服务器的区别\n\n![image-20221111145514251](socket-multi-1/image-20221111145514251.png)\n\n## Windows Server\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <thread>\n#include <string>\n#include <winsock2.h>\n#include <windows.h>\n\nusing namespace std;\nSOCKET s;\nsockaddr_in ss;\n//SOCKET fd;\n\nvoid Windows_init()\n{\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cerr << \"Initialize Error!\"<<endl;\n    }\n}\n\nvoid create_socket()\n{\n    s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s == INVALID_SOCKET)\n    {\n        cerr << \"socket Error!\" << endl;\n    }\n\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6789);//port No.\n    ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    if (bind(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n    {\n        cerr<<\"Bind Error!\"<<endl;\n    }\n    if(listen(s, 5) < 0)\n    {\n        cerr<<\"Listen Error!\"<<endl;\n    }\n    cout<<\"Server is running...\"<<endl;\n}\n\nvoid accept_socket(int &fd)\n{\n    sockaddr_in clnt_addr;\n    int clnt_addr_size = sizeof(clnt_addr);\n    fd = accept(s, (sockaddr*) &clnt_addr, &clnt_addr_size);\n    if (fd == INVALID_SOCKET)\n        cerr << \"Accept Error\" << endl;\n    else\n        cout<<\"Connected to Server:\" << fd << endl;\n}\n\nvoid thread_n(int n)\n{\n    cout<<\"Start thread \"<<n<<endl;\n    string msg = \"Hi, Client \" + to_string(n);\n    send(n, msg.c_str(), msg.length(), 0);\n    cout << \"Sending:\\\" \" << msg << \"\\\" to Client...\" << endl;\n    while(true)\n    {\n        char message[256];\n        memset(message, NULL, sizeof(message));\n        int jud = recv(n, message, sizeof(message), 0);\n        if (jud < 0)\n        {\n            cerr<<\"Receive Error!!!\"<<endl;\n            cout<<\"Did you close the Window?\"<<endl;\n            break;\n        }\n        if (strcmp(message, \"quit\\n\") == false)\n        {\n            cout << \"  Bye-bye \" << n << \"!\" << endl;\n            break;\n        }\n        else\n            cout << \"  Received by Client: \" << message << endl;\n        cout << \"Clients \" << n << \" request...\" << endl;\n    }\n    cout<<\"Finish thread \" << n << endl;\n}\n\nint main()\n{\n    Windows_init();\n    create_socket();\n    thread threads[10];\n    int n = 0;\n    while(1)\n    {\n        int fd = 0;\n        accept_socket(fd);\n        threads[n] = thread(thread_n, fd);\n        //threads[n].join();\n        threads[n].detach();\n        n++;\n        if(n == 10)\n            n = 0;\n    }\n    closesocket(s);\n    WSACleanup();\n    return 0;\n}\n\n```\n\n## Python Server\n\n```python\nimport socket\nimport threading\nimport time\n\nclients = []\n\n\ndef new_thread(sock, addr, q):\n    msg = \"Hello, \" + str(addr[1]) + \"! You've joined the group.\"\n    sock.send(msg.encode())\n    temp_msg = \"Client \" + str(addr) + \" join the group\"\n    print(temp_msg)\n    print(\"Now there are \", threading.active_count() - 1, \" people in the group!\")\n\n    while 2 == 2:\n        msg = sock.recv(256).decode('utf-8')\n        if msg == \"quit\":\n            temp_msg = \"Bye-bye\" + str(addr) + \"!\"\n            print(temp_msg)  # (Id, port)\n            print(\"Now there are \", threading.active_count() - 2, \" people in the group!\")\n            break\n        elif msg == \"\":\n            temp_msg = addr + \"has quit the group accidentally...\"\n            print(temp_msg)\n            print(\"Now there are \", threading.active_count() - 2, \" people in the group!\")\n            break\n        else:\n            temp_msg = \"    \" + str(addr[1]) + \": \" + msg\n            print(temp_msg)\n    clients.remove(sock)\n    sock.close()\n\n\nif __name__ == '__main__':\n    try:\n        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    except Exception:\n        print(\"Socket Error!\")\n\n    try:\n        s.bind(('127.0.0.1', 7777))\n    except Exception:\n        print(\"Bind Error!\")\n\n    try:\n        s.listen(5)\n    except Exception:\n        print(\"Listen Error!\")\n\n    print('Server is running...')\n\n    while True:\n        try:\n            sock, addr = s.accept()\n        except Exception:\n            print(\"Accept Error!\")\n\n        clients.append(sock)\n        t = threading.Thread(target=new_thread, args=(sock, addr, q, ))\n        t.start()\n\n```\n\n## 运行结果\n\n左侧是多线程的结果，右侧是单进程的结果，多进程结果未截图，多进程与多线程对于此程序用时相近，单进程和多线程（本例为10线程）的时间差距在8-9倍左右，由此可以看出多线程的加速成绩对于网络爬虫来说是非常明显的。\n\n![image-20221201103211709](socket-multi-1/image-20221201103211709.png)\n\n---\n\n上一篇：\n","slug":"socket-multi-1","published":1,"updated":"2022-12-01T02:35:14.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrdu00341gzufmsc7qqq","content":"<h2 id=\"迭代服务器与并发服务器的区别\"><a class=\"markdownIt-Anchor\" href=\"#迭代服务器与并发服务器的区别\"></a> 迭代服务器与并发服务器的区别</h2>\n<p><img src=\"/2022/11/11/socket-multi-1/image-20221111145514251.png\" alt=\"image-20221111145514251\" loading=\"lazy\"></p>\n<h2 id=\"windows-server\"><a class=\"markdownIt-Anchor\" href=\"#windows-server\"></a> Windows Server</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;thread></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;windows.h></span></span>\n\nusing namespace std<span class=\"token punctuation\">;</span>\nSOCKET s<span class=\"token punctuation\">;</span>\nsockaddr_in ss<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//SOCKET fd;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">Windows_init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cerr <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">create_socket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cerr <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"socket Error!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6789</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">inet_addr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cerr<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cerr<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Server is running...\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">accept_socket</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">&amp;</span>fd<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    sockaddr_in clnt_addr<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> clnt_addr_size <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>clnt_addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fd <span class=\"token operator\">=</span> <span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>clnt_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>clnt_addr_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fd <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n        cerr <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Accept Error\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">else</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Connected to Server:\"</span> <span class=\"token operator\">&lt;&lt;</span> fd <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">thread_n</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Start thread \"</span><span class=\"token operator\">&lt;&lt;</span>n<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    string msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Client \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">send</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Sending:\\\" \"</span> <span class=\"token operator\">&lt;&lt;</span> msg <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"\\\" to Client...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> jud <span class=\"token operator\">=</span> <span class=\"token function\">recv</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jud <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cerr<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Receive Error!!!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Did you close the Window?\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit\\n\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> false<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Bye-bye \"</span> <span class=\"token operator\">&lt;&lt;</span> n <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span>\n            cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Received by Client: \"</span> <span class=\"token operator\">&lt;&lt;</span> message <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Clients \"</span> <span class=\"token operator\">&lt;&lt;</span> n <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" request...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Finish thread \"</span> <span class=\"token operator\">&lt;&lt;</span> n <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">Windows_init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">create_socket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    thread threads<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> fd <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">accept_socket</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        threads<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">thread</span><span class=\"token punctuation\">(</span>thread_n<span class=\"token punctuation\">,</span> fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//threads[n].join();</span>\n        threads<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">detach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        n<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">==</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n            n <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">WSACleanup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n</code></pre>\n<h2 id=\"python-server\"><a class=\"markdownIt-Anchor\" href=\"#python-server\"></a> Python Server</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n<span class=\"token keyword\">import</span> threading\n<span class=\"token keyword\">import</span> time\n\nclients <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">new_thread</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"! You've joined the group.\"</span>\n    sock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Client \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" join the group\"</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span>\n        msg <span class=\"token operator\">=</span> sock<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Bye-bye\"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"!\"</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (Id, port)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">elif</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> addr <span class=\"token operator\">+</span> <span class=\"token string\">\"has quit the group accidentally...\"</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"    \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\": \"</span> <span class=\"token operator\">+</span> msg\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n    clients<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">)</span>\n    sock<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7777</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server is running...'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            sock<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\"</span><span class=\"token punctuation\">)</span>\n\n        clients<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">)</span>\n        t <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>new_thread<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        t<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"运行结果\"><a class=\"markdownIt-Anchor\" href=\"#运行结果\"></a> 运行结果</h2>\n<p>左侧是多线程的结果，右侧是单进程的结果，多进程结果未截图，多进程与多线程对于此程序用时相近，单进程和多线程（本例为10线程）的时间差距在8-9倍左右，由此可以看出多线程的加速成绩对于网络爬虫来说是非常明显的。</p>\n<p><img src=\"/2022/11/11/socket-multi-1/image-20221201103211709.png\" alt=\"image-20221201103211709\" loading=\"lazy\"></p>\n<hr>\n<p>上一篇：</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"迭代服务器与并发服务器的区别\"><a class=\"markdownIt-Anchor\" href=\"#迭代服务器与并发服务器的区别\"></a> 迭代服务器与并发服务器的区别</h2>\n<p><img src=\"/2022/11/11/socket-multi-1/image-20221111145514251.png\" alt=\"image-20221111145514251\"></p>\n<h2 id=\"windows-server\"><a class=\"markdownIt-Anchor\" href=\"#windows-server\"></a> Windows Server</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;thread></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;windows.h></span></span>\n\nusing namespace std<span class=\"token punctuation\">;</span>\nSOCKET s<span class=\"token punctuation\">;</span>\nsockaddr_in ss<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//SOCKET fd;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">Windows_init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cerr <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">create_socket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cerr <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"socket Error!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6789</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">inet_addr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cerr<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cerr<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Server is running...\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">accept_socket</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">&amp;</span>fd<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    sockaddr_in clnt_addr<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> clnt_addr_size <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>clnt_addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fd <span class=\"token operator\">=</span> <span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>clnt_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>clnt_addr_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fd <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n        cerr <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Accept Error\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">else</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Connected to Server:\"</span> <span class=\"token operator\">&lt;&lt;</span> fd <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">thread_n</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Start thread \"</span><span class=\"token operator\">&lt;&lt;</span>n<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    string msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Client \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">send</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Sending:\\\" \"</span> <span class=\"token operator\">&lt;&lt;</span> msg <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"\\\" to Client...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> jud <span class=\"token operator\">=</span> <span class=\"token function\">recv</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jud <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cerr<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Receive Error!!!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Did you close the Window?\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit\\n\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> false<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Bye-bye \"</span> <span class=\"token operator\">&lt;&lt;</span> n <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span>\n            cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Received by Client: \"</span> <span class=\"token operator\">&lt;&lt;</span> message <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Clients \"</span> <span class=\"token operator\">&lt;&lt;</span> n <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" request...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Finish thread \"</span> <span class=\"token operator\">&lt;&lt;</span> n <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">Windows_init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">create_socket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    thread threads<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> fd <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">accept_socket</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        threads<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">thread</span><span class=\"token punctuation\">(</span>thread_n<span class=\"token punctuation\">,</span> fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//threads[n].join();</span>\n        threads<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">detach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        n<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">==</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n            n <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">WSACleanup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n</code></pre>\n<h2 id=\"python-server\"><a class=\"markdownIt-Anchor\" href=\"#python-server\"></a> Python Server</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n<span class=\"token keyword\">import</span> threading\n<span class=\"token keyword\">import</span> time\n\nclients <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">new_thread</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"! You've joined the group.\"</span>\n    sock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Client \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" join the group\"</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span>\n        msg <span class=\"token operator\">=</span> sock<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Bye-bye\"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"!\"</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (Id, port)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">elif</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> addr <span class=\"token operator\">+</span> <span class=\"token string\">\"has quit the group accidentally...\"</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"    \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\": \"</span> <span class=\"token operator\">+</span> msg\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n    clients<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">)</span>\n    sock<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7777</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server is running...'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            sock<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\"</span><span class=\"token punctuation\">)</span>\n\n        clients<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">)</span>\n        t <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>new_thread<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        t<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"运行结果\"><a class=\"markdownIt-Anchor\" href=\"#运行结果\"></a> 运行结果</h2>\n<p>左侧是多线程的结果，右侧是单进程的结果，多进程结果未截图，多进程与多线程对于此程序用时相近，单进程和多线程（本例为10线程）的时间差距在8-9倍左右，由此可以看出多线程的加速成绩对于网络爬虫来说是非常明显的。</p>\n<p><img src=\"/2022/11/11/socket-multi-1/image-20221201103211709.png\" alt=\"image-20221201103211709\"></p>\n<hr>\n<p>上一篇：</p>\n"},{"layout":"post","title":"Socket网络编程 5——多人聊天室","date":"2022-12-01T02:26:20.000Z","author":"Tony","_content":"\n## 原理\n\n![image-20221201102754586](socket-multi-2/image-20221201102754586.png)\n\n## Server Code\n\n```python\nfrom queue import Queue\nimport socket\nimport threading\nimport time\n\nclients = []\nmessages = []\n\n\ndef new_thread(sock, addr, q):\n    msg = \"Hello, \" + str(addr[1]) + \"! You've joined the group.\"\n    sock.send(msg.encode())\n    temp_msg = \"Client \" + str(addr) + \" join the group\"\n    messages.append(temp_msg)\n    print(temp_msg)\n    for i in range(int((threading.active_count() - 2) / 2)):\n        q.put(addr[1])\n    print(\"Now there are \", int((threading.active_count() - 1) / 2), \" people in the group!\")\n\n    while True:\n        msg = sock.recv(256).decode('utf-8')\n        if msg == \"quit\":\n            temp_msg = \"Bye-bye\" + str(addr) + \"!\"\n            messages.append(temp_msg)\n            print(temp_msg)  # (Id, port)\n            for i in range(int((threading.active_count() - 1) / 2)):\n                q.put(addr[1])\n            print(\"Now there are \", int((threading.active_count() - 3) / 2), \" people in the group!\")\n            break\n        elif msg == \"\":\n            temp_msg = addr + \"has quit the group accidentally...\"\n            messages.append(temp_msg)\n            print(temp_msg)\n            for i in range(int((threading.active_count() - 1) / 2)):\n                q.put(addr[1])\n            print(\"Now there are \", int((threading.active_count() - 3) / 2), \" people in the group!\")\n            break\n        else:\n            temp_msg = \"    \" + str(addr[1]) + \": \" + msg\n            messages.append(temp_msg)\n            for i in range(int((threading.active_count() - 1) / 2)):\n                q.put(addr[1])\n            print(temp_msg)\n    clients.remove(sock)\n    sock.close()\n\n\ndef message_record(sock, q):\n    time.sleep(0.5)\n    while True:\n        if q.get() != sock.getpeername()[1]:\n            sock.send(messages[-1].encode())\n        time.sleep(0.5)\n\n\nif __name__ == '__main__':\n    q = Queue()\n    try:\n        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    except Exception:\n        print(\"Socket Error!\")\n\n    try:\n        s.bind(('127.0.0.1', 7777))\n    except Exception:\n        print(\"Bind Error!\")\n\n    try:\n        s.listen(5)\n    except Exception:\n        print(\"Listen Error!\")\n\n    print('Server is running...')\n\n    while True:\n        try:\n            sock, addr = s.accept()\n        except Exception:\n            print(\"Accept Error!\")\n\n        clients.append(sock)\n        t = threading.Thread(target=new_thread, args=(sock, addr, q, ))\n        t.start()\n        t1 = threading.Thread(target=message_record, args=(sock, q, ))\n        t1.start()\n\n```\n\n## Client Code\n\n```python\nimport socket\nimport threading\n\n\ndef recv_thread(sock):\n    while 2 == 2:\n        message = sock.recv(256).decode('utf-8')\n        if message != \"\":\n            print(message)\n\n\nif __name__ == '__main__':\n    try:\n        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    except Exception:\n        print(\"Socket Error!\")\n    try:\n        s.connect(('127.0.0.1', 7777))\n    except Exception:\n        print(\"Connection Error!\")\n\n    t = threading.Thread(target=recv_thread, args=(s, ))\n    t.start()\n\n    while True:\n        msg = input()\n        if not msg:\n            continue\n        s.send(msg.encode())\n        if msg == \"quit\":\n            print(\"See you next time, bye!\")\n            s.close()\n            break\n\n```\n\n","source":"_posts/socket-multi-2.md","raw":"---\nlayout: post\ntitle: Socket网络编程 5——多人聊天室\ndate: 2022-12-01 10:26:20\nauthor: Tony\ntags:\n  - Socket\n  - Client\n  - Server\ncategories:\n  - 计算机网络\n---\n\n## 原理\n\n![image-20221201102754586](socket-multi-2/image-20221201102754586.png)\n\n## Server Code\n\n```python\nfrom queue import Queue\nimport socket\nimport threading\nimport time\n\nclients = []\nmessages = []\n\n\ndef new_thread(sock, addr, q):\n    msg = \"Hello, \" + str(addr[1]) + \"! You've joined the group.\"\n    sock.send(msg.encode())\n    temp_msg = \"Client \" + str(addr) + \" join the group\"\n    messages.append(temp_msg)\n    print(temp_msg)\n    for i in range(int((threading.active_count() - 2) / 2)):\n        q.put(addr[1])\n    print(\"Now there are \", int((threading.active_count() - 1) / 2), \" people in the group!\")\n\n    while True:\n        msg = sock.recv(256).decode('utf-8')\n        if msg == \"quit\":\n            temp_msg = \"Bye-bye\" + str(addr) + \"!\"\n            messages.append(temp_msg)\n            print(temp_msg)  # (Id, port)\n            for i in range(int((threading.active_count() - 1) / 2)):\n                q.put(addr[1])\n            print(\"Now there are \", int((threading.active_count() - 3) / 2), \" people in the group!\")\n            break\n        elif msg == \"\":\n            temp_msg = addr + \"has quit the group accidentally...\"\n            messages.append(temp_msg)\n            print(temp_msg)\n            for i in range(int((threading.active_count() - 1) / 2)):\n                q.put(addr[1])\n            print(\"Now there are \", int((threading.active_count() - 3) / 2), \" people in the group!\")\n            break\n        else:\n            temp_msg = \"    \" + str(addr[1]) + \": \" + msg\n            messages.append(temp_msg)\n            for i in range(int((threading.active_count() - 1) / 2)):\n                q.put(addr[1])\n            print(temp_msg)\n    clients.remove(sock)\n    sock.close()\n\n\ndef message_record(sock, q):\n    time.sleep(0.5)\n    while True:\n        if q.get() != sock.getpeername()[1]:\n            sock.send(messages[-1].encode())\n        time.sleep(0.5)\n\n\nif __name__ == '__main__':\n    q = Queue()\n    try:\n        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    except Exception:\n        print(\"Socket Error!\")\n\n    try:\n        s.bind(('127.0.0.1', 7777))\n    except Exception:\n        print(\"Bind Error!\")\n\n    try:\n        s.listen(5)\n    except Exception:\n        print(\"Listen Error!\")\n\n    print('Server is running...')\n\n    while True:\n        try:\n            sock, addr = s.accept()\n        except Exception:\n            print(\"Accept Error!\")\n\n        clients.append(sock)\n        t = threading.Thread(target=new_thread, args=(sock, addr, q, ))\n        t.start()\n        t1 = threading.Thread(target=message_record, args=(sock, q, ))\n        t1.start()\n\n```\n\n## Client Code\n\n```python\nimport socket\nimport threading\n\n\ndef recv_thread(sock):\n    while 2 == 2:\n        message = sock.recv(256).decode('utf-8')\n        if message != \"\":\n            print(message)\n\n\nif __name__ == '__main__':\n    try:\n        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    except Exception:\n        print(\"Socket Error!\")\n    try:\n        s.connect(('127.0.0.1', 7777))\n    except Exception:\n        print(\"Connection Error!\")\n\n    t = threading.Thread(target=recv_thread, args=(s, ))\n    t.start()\n\n    while True:\n        msg = input()\n        if not msg:\n            continue\n        s.send(msg.encode())\n        if msg == \"quit\":\n            print(\"See you next time, bye!\")\n            s.close()\n            break\n\n```\n\n","slug":"socket-multi-2","published":1,"updated":"2022-12-01T02:29:27.448Z","comments":1,"photos":[],"link":"","_id":"clb4gsrdw00361gzu9tfy6ljn","content":"<h2 id=\"原理\"><a class=\"markdownIt-Anchor\" href=\"#原理\"></a> 原理</h2>\n<p><img src=\"/2022/12/01/socket-multi-2/image-20221201102754586.png\" alt=\"image-20221201102754586\" loading=\"lazy\"></p>\n<h2 id=\"server-code\"><a class=\"markdownIt-Anchor\" href=\"#server-code\"></a> Server Code</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> queue <span class=\"token keyword\">import</span> Queue\n<span class=\"token keyword\">import</span> socket\n<span class=\"token keyword\">import</span> threading\n<span class=\"token keyword\">import</span> time\n\nclients <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\nmessages <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">new_thread</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"! You've joined the group.\"</span>\n    sock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Client \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" join the group\"</span>\n    messages<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        q<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        msg <span class=\"token operator\">=</span> sock<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Bye-bye\"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"!\"</span>\n            messages<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (Id, port)</span>\n            <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                q<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">elif</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> addr <span class=\"token operator\">+</span> <span class=\"token string\">\"has quit the group accidentally...\"</span>\n            messages<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                q<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"    \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\": \"</span> <span class=\"token operator\">+</span> msg\n            messages<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                q<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n    clients<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">)</span>\n    sock<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">message_record</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> q<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> sock<span class=\"token punctuation\">.</span>getpeername<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n            sock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>messages<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    q <span class=\"token operator\">=</span> Queue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7777</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server is running...'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            sock<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\"</span><span class=\"token punctuation\">)</span>\n\n        clients<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">)</span>\n        t <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>new_thread<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        t<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        t1 <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>message_record<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        t1<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"client-code\"><a class=\"markdownIt-Anchor\" href=\"#client-code\"></a> Client Code</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n<span class=\"token keyword\">import</span> threading\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">recv_thread</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">while</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span>\n        message <span class=\"token operator\">=</span> sock<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> message <span class=\"token operator\">!=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7777</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection Error!\"</span><span class=\"token punctuation\">)</span>\n\n    t <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>recv_thread<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    t<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        msg <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> msg<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">continue</span>\n        s<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"See you next time, bye!\"</span><span class=\"token punctuation\">)</span>\n            s<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n</code></pre>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"原理\"><a class=\"markdownIt-Anchor\" href=\"#原理\"></a> 原理</h2>\n<p><img src=\"/2022/12/01/socket-multi-2/image-20221201102754586.png\" alt=\"image-20221201102754586\"></p>\n<h2 id=\"server-code\"><a class=\"markdownIt-Anchor\" href=\"#server-code\"></a> Server Code</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> queue <span class=\"token keyword\">import</span> Queue\n<span class=\"token keyword\">import</span> socket\n<span class=\"token keyword\">import</span> threading\n<span class=\"token keyword\">import</span> time\n\nclients <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\nmessages <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">new_thread</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"! You've joined the group.\"</span>\n    sock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Client \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" join the group\"</span>\n    messages<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        q<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        msg <span class=\"token operator\">=</span> sock<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Bye-bye\"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"!\"</span>\n            messages<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (Id, port)</span>\n            <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                q<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">elif</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> addr <span class=\"token operator\">+</span> <span class=\"token string\">\"has quit the group accidentally...\"</span>\n            messages<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                q<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Now there are \"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" people in the group!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            temp_msg <span class=\"token operator\">=</span> <span class=\"token string\">\"    \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\": \"</span> <span class=\"token operator\">+</span> msg\n            messages<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>active_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                q<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>temp_msg<span class=\"token punctuation\">)</span>\n    clients<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">)</span>\n    sock<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">message_record</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> q<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> sock<span class=\"token punctuation\">.</span>getpeername<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n            sock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>messages<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    q <span class=\"token operator\">=</span> Queue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7777</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server is running...'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            sock<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\"</span><span class=\"token punctuation\">)</span>\n\n        clients<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">)</span>\n        t <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>new_thread<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        t<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        t1 <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>message_record<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        t1<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"client-code\"><a class=\"markdownIt-Anchor\" href=\"#client-code\"></a> Client Code</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n<span class=\"token keyword\">import</span> threading\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">recv_thread</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">while</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span>\n        message <span class=\"token operator\">=</span> sock<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> message <span class=\"token operator\">!=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        s<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7777</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection Error!\"</span><span class=\"token punctuation\">)</span>\n\n    t <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>recv_thread<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    t<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        msg <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> msg<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">continue</span>\n        s<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"See you next time, bye!\"</span><span class=\"token punctuation\">)</span>\n            s<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n</code></pre>\n"},{"title":"Socket网络编程1","date":"2022-09-17T11:13:23.000Z","author":"Tony","_content":"\n# Server 通信步骤\n\n1. **Socket()** to Create a TCP socket \n2. **Bind()** to Assign a port to socket \n3. Set socket to **Listen** \n4. **Accept** new connection \n5. **Communicate** \n6. **Close** the connection\n\n## Windows C++版\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <string>\n#include <winsock2.h>\n#include <io.h>\nusing namespace std;\n\nint main(void)\n{\n\t//初始化模块，仅Windows系统需要\n\tWORD sockVersion = MAKEWORD(2, 2);\n\tWSADATA wsdata;\n\tif (WSAStartup(sockVersion, &wsdata) != 0)\n\t{\n\t\tcout << \"Initialize Error!\"<<endl;\n\t\texit(-1);\n\t}\n\t//建立socket\n\tSOCKET s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n\t//IPPROTO_TCP参数也可写为0\n\tif (s == INVALID_SOCKET)\n\t{\n\t\tcout << \"socket Error!\" << endl;\n\t\texit(-1);\n\t}\n\t\n\tsockaddr_in ss;\n\tmemset(&ss, 0, sizeof(ss));\n\tss.sin_family = AF_INET;//IPv4\n\tss.sin_port = htons(6666);//port No.\n\tss.sin_addr.s_addr = htonl(INADDR_LOOPBACK); \n    //INADDR_LOOPBACK：默认本机IP地址127.0.0.1\n    //Windows不支持INADDR_ANY写法，默认IP地址为0.0.0.0\n\t//Windows支持该种写法：inet_addr(\"127.0.0.1\")\n    //bind:socket绑定IP地址和端口用于监听\n\tif (bind(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n\t{\n\t\tcout<<\"Bind Error!\"<<endl;\n\t\texit(-1);\n\t}\n    //listen:设定可同时排队的Client最大连接个数\n    if(listen(s, 10) < 0)\n    {\n        cout<<\"Listen Error!\"<<endl;\n        return -1;\n    }\n    cout<<\"Waiting for Clients request...\"<<endl;\n    //accept:等待客户端链接\n    sockaddr_in clnt_addr;\n    int clnt_addr_size = sizeof(clnt_addr);\n    int fd = accept(s, (sockaddr*)&clnt_addr, &clnt_addr_size);\n    //int fd = accept(s, (sockaddr*)NULL, NULL);\n    if (fd < 0)\n    {\n        cout<<\"Accept Error\"<<endl;\n        exit(-1);\n    }\n    //Linux或Mac是write()函数\n    string message = \"Hello Client!\";\n    send(fd, message.c_str(), message.length(), 0);\n    //Linux或Mac是close()函数\n    closesocket(fd);\n    closesocket(s);\n    return 0;\n}\n```\n\n## Linux/Mac C版\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\n\nint main()\n{\n\t//建立socket套接字 注意是int类型\n\tint listenfd = socket(AF_INET, SOCK_STREAM, 0);\n\tif(listenfd < 0)\t\n\t{\n\t\tprintf(\"Socket Error!\\n\");\n\t\texit(-1);\n\t}\n\tstruct sockaddr_in st_sersock;\n\tmemset(&st_sersock, 0, sizeof(st_sersock));\n\tst_sersock.sin_family = AF_INET;  //IPv4协议\n\tst_sersock.sin_addr.s_addr = htonl(INADDR_ANY);//127.0.0.1\n\t//INADDR_ANY是0.0.0.0指的是本机IP地址\n\t//Windows要写成INADDR_LOOPBACK\n\tst_sersock.sin_port = htons(6666);//host number\n\t//Socket绑定IP和端口用于监听\n\tif(bind(listenfd,(struct sockaddr*)&st_sersock, sizeof(st_sersock)) < 0) \n\t{\n\t\tprintf(\"Bind Error!\\n\");\n\t\texit(-1);\n\t}\n\t//设定可同时排队的客户端最大连接个数\n\tif(listen(listenfd, 10) < 0)\t\n\t{\n\t\tprintf(\"Listen Error!\\n\");\n\t\texit(-1);\n\t}\n\t//准备接受客户端连接\n\tprintf(\"======Waiting for client's request======\\n\");\n\t//阻塞等待客户端连接\n\tint connfd = accept(i_listenfd, (struct sockaddr*)NULL, NULL));\n\tif(connfd < 0)\t\n\t{\n\t\tprintf(\"Accept Error!\\n\");\n\t\texit(-1);\n\t}\t\n\telse\n\t\tprintf(\"Client %d, welcome!\\n\", connfd);\n\tchar msg[32] = \"Hello Client!\";\n\t//将msg发送到Client端\n\twrite(connfd, message, sizeof(message));\n\t//Windows下是closesocket\t\n\tclose(connfd);\n\tclose(listenfd);\n\treturn 0;\n}\n```\n\n## Python版\n\n```python\nimport socket\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nexcept Exception:\n    print(\"Socket Error!\")\n# listen port\ntry:\n    s.bind(('127.0.0.1', 6666))\nexcept Exception:\n    print(\"Bind Error!\")\ntry:\n    s.listen(5)\nexcept Exception:\n    print(\"Listen Error!\")\nprint('Waiting for connection...')\ntry:\n\tsock, addr = s.accept()\nexcept Exception:\n    print(\"Accept Error!\")\nprint(addr)  # (Id, port)\nmsg = \"Hello Client!\"\nsock.send(msg)\nsock.close()\nexit(0)\n```\n\n# Client通信步骤\n\n1. **Socket()** to Create a TCP socket\n2.  Establish **connection**\n3. Communicate (**read**) \n4. **Close** the connection\n\n## Windows C++版\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <string>\n#include <winsock2.h>\nusing namespace std;\n\nint main(void)\n{\n    //初始化模块，仅Windows系统需要\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cout << \"Initialize Error!\"<<endl;\n        exit(-1);\n    }\n    SOCKET s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s == INVALID_SOCKET)\n    {\n        cout<<\"Invalid Socket!\"<<endl;\n        exit(-1);\n    }\n    sockaddr_in ss;\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    if(connect(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n    {\n        cout<<\"Connect Error!\"<<endl;\n        closesocket(s);\n        exit(-1);\n    }\n    string message;\n    //LInux或Mac是read()函数\n    //read函数第三个参数必须为固定值，不能使用message.length()\n    //因为message.length()对于c++的string来说初始值为0！\n    if (recv(s, message.c_str(), 128, 0))\n        cout<<message<<endl;\n    closesocket(s);\n    return 0;\n}\n```\n\n## Linux/Mac C版\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\n\nint main(void)\n{\n    int s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s == INVALID_SOCKET)\n    {\n        printf(\"Invalid Socket!\\n\");\n        exit(-1);\n    }\n    sockaddr_in ss;\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_ANY);\n    if(connect(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n    {\n        printf(\"Connect Error!\\n\");\n        close(s);\n        exit(-1);\n    }\n    char message[32];\n    if (read(s, message, sizeof(message)))\n        printf(\"%s\", message);\n    close(s);\n    return 0;\n}\n```\n\n## Python版\n\n```python\nimport socket\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nexcept Exception:\n    print(\"Socket Error!\")\n# listen port\ntry:\n\ts.connect(('127.0.0.1', 6666))\nexcept Exception:\n    print(\"Connection Error!\")\ns.recv(256).decode('utf-8')\ns.send(b'exit')\ns.close()\nexit(0)\n```\n\n---\n\n下一篇：[Socket网络编程2 | Tony](http://tonylsx.top/2022/10/14/socket-program-2/)\n","source":"_posts/socket-program-1.md","raw":"---\ntitle: Socket网络编程1\ndate: 2022-09-17 19:13:23\nauthor: Tony\ntags:\n  - Socket\n  - Client\n  - Server\ncategories:\n  - 计算机网络\n---\n\n# Server 通信步骤\n\n1. **Socket()** to Create a TCP socket \n2. **Bind()** to Assign a port to socket \n3. Set socket to **Listen** \n4. **Accept** new connection \n5. **Communicate** \n6. **Close** the connection\n\n## Windows C++版\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <string>\n#include <winsock2.h>\n#include <io.h>\nusing namespace std;\n\nint main(void)\n{\n\t//初始化模块，仅Windows系统需要\n\tWORD sockVersion = MAKEWORD(2, 2);\n\tWSADATA wsdata;\n\tif (WSAStartup(sockVersion, &wsdata) != 0)\n\t{\n\t\tcout << \"Initialize Error!\"<<endl;\n\t\texit(-1);\n\t}\n\t//建立socket\n\tSOCKET s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n\t//IPPROTO_TCP参数也可写为0\n\tif (s == INVALID_SOCKET)\n\t{\n\t\tcout << \"socket Error!\" << endl;\n\t\texit(-1);\n\t}\n\t\n\tsockaddr_in ss;\n\tmemset(&ss, 0, sizeof(ss));\n\tss.sin_family = AF_INET;//IPv4\n\tss.sin_port = htons(6666);//port No.\n\tss.sin_addr.s_addr = htonl(INADDR_LOOPBACK); \n    //INADDR_LOOPBACK：默认本机IP地址127.0.0.1\n    //Windows不支持INADDR_ANY写法，默认IP地址为0.0.0.0\n\t//Windows支持该种写法：inet_addr(\"127.0.0.1\")\n    //bind:socket绑定IP地址和端口用于监听\n\tif (bind(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n\t{\n\t\tcout<<\"Bind Error!\"<<endl;\n\t\texit(-1);\n\t}\n    //listen:设定可同时排队的Client最大连接个数\n    if(listen(s, 10) < 0)\n    {\n        cout<<\"Listen Error!\"<<endl;\n        return -1;\n    }\n    cout<<\"Waiting for Clients request...\"<<endl;\n    //accept:等待客户端链接\n    sockaddr_in clnt_addr;\n    int clnt_addr_size = sizeof(clnt_addr);\n    int fd = accept(s, (sockaddr*)&clnt_addr, &clnt_addr_size);\n    //int fd = accept(s, (sockaddr*)NULL, NULL);\n    if (fd < 0)\n    {\n        cout<<\"Accept Error\"<<endl;\n        exit(-1);\n    }\n    //Linux或Mac是write()函数\n    string message = \"Hello Client!\";\n    send(fd, message.c_str(), message.length(), 0);\n    //Linux或Mac是close()函数\n    closesocket(fd);\n    closesocket(s);\n    return 0;\n}\n```\n\n## Linux/Mac C版\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\n\nint main()\n{\n\t//建立socket套接字 注意是int类型\n\tint listenfd = socket(AF_INET, SOCK_STREAM, 0);\n\tif(listenfd < 0)\t\n\t{\n\t\tprintf(\"Socket Error!\\n\");\n\t\texit(-1);\n\t}\n\tstruct sockaddr_in st_sersock;\n\tmemset(&st_sersock, 0, sizeof(st_sersock));\n\tst_sersock.sin_family = AF_INET;  //IPv4协议\n\tst_sersock.sin_addr.s_addr = htonl(INADDR_ANY);//127.0.0.1\n\t//INADDR_ANY是0.0.0.0指的是本机IP地址\n\t//Windows要写成INADDR_LOOPBACK\n\tst_sersock.sin_port = htons(6666);//host number\n\t//Socket绑定IP和端口用于监听\n\tif(bind(listenfd,(struct sockaddr*)&st_sersock, sizeof(st_sersock)) < 0) \n\t{\n\t\tprintf(\"Bind Error!\\n\");\n\t\texit(-1);\n\t}\n\t//设定可同时排队的客户端最大连接个数\n\tif(listen(listenfd, 10) < 0)\t\n\t{\n\t\tprintf(\"Listen Error!\\n\");\n\t\texit(-1);\n\t}\n\t//准备接受客户端连接\n\tprintf(\"======Waiting for client's request======\\n\");\n\t//阻塞等待客户端连接\n\tint connfd = accept(i_listenfd, (struct sockaddr*)NULL, NULL));\n\tif(connfd < 0)\t\n\t{\n\t\tprintf(\"Accept Error!\\n\");\n\t\texit(-1);\n\t}\t\n\telse\n\t\tprintf(\"Client %d, welcome!\\n\", connfd);\n\tchar msg[32] = \"Hello Client!\";\n\t//将msg发送到Client端\n\twrite(connfd, message, sizeof(message));\n\t//Windows下是closesocket\t\n\tclose(connfd);\n\tclose(listenfd);\n\treturn 0;\n}\n```\n\n## Python版\n\n```python\nimport socket\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nexcept Exception:\n    print(\"Socket Error!\")\n# listen port\ntry:\n    s.bind(('127.0.0.1', 6666))\nexcept Exception:\n    print(\"Bind Error!\")\ntry:\n    s.listen(5)\nexcept Exception:\n    print(\"Listen Error!\")\nprint('Waiting for connection...')\ntry:\n\tsock, addr = s.accept()\nexcept Exception:\n    print(\"Accept Error!\")\nprint(addr)  # (Id, port)\nmsg = \"Hello Client!\"\nsock.send(msg)\nsock.close()\nexit(0)\n```\n\n# Client通信步骤\n\n1. **Socket()** to Create a TCP socket\n2.  Establish **connection**\n3. Communicate (**read**) \n4. **Close** the connection\n\n## Windows C++版\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <string>\n#include <winsock2.h>\nusing namespace std;\n\nint main(void)\n{\n    //初始化模块，仅Windows系统需要\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cout << \"Initialize Error!\"<<endl;\n        exit(-1);\n    }\n    SOCKET s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s == INVALID_SOCKET)\n    {\n        cout<<\"Invalid Socket!\"<<endl;\n        exit(-1);\n    }\n    sockaddr_in ss;\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    if(connect(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n    {\n        cout<<\"Connect Error!\"<<endl;\n        closesocket(s);\n        exit(-1);\n    }\n    string message;\n    //LInux或Mac是read()函数\n    //read函数第三个参数必须为固定值，不能使用message.length()\n    //因为message.length()对于c++的string来说初始值为0！\n    if (recv(s, message.c_str(), 128, 0))\n        cout<<message<<endl;\n    closesocket(s);\n    return 0;\n}\n```\n\n## Linux/Mac C版\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\n\nint main(void)\n{\n    int s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s == INVALID_SOCKET)\n    {\n        printf(\"Invalid Socket!\\n\");\n        exit(-1);\n    }\n    sockaddr_in ss;\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_ANY);\n    if(connect(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n    {\n        printf(\"Connect Error!\\n\");\n        close(s);\n        exit(-1);\n    }\n    char message[32];\n    if (read(s, message, sizeof(message)))\n        printf(\"%s\", message);\n    close(s);\n    return 0;\n}\n```\n\n## Python版\n\n```python\nimport socket\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nexcept Exception:\n    print(\"Socket Error!\")\n# listen port\ntry:\n\ts.connect(('127.0.0.1', 6666))\nexcept Exception:\n    print(\"Connection Error!\")\ns.recv(256).decode('utf-8')\ns.send(b'exit')\ns.close()\nexit(0)\n```\n\n---\n\n下一篇：[Socket网络编程2 | Tony](http://tonylsx.top/2022/10/14/socket-program-2/)\n","slug":"socket-program-1","published":1,"updated":"2022-11-03T10:59:12.373Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrdx003a1gzu72mr5dq0","content":"<h1 id=\"server-通信步骤\"><a class=\"markdownIt-Anchor\" href=\"#server-通信步骤\"></a> Server 通信步骤</h1>\n<ol>\n<li><strong>Socket()</strong> to Create a TCP socket</li>\n<li><strong>Bind()</strong> to Assign a port to socket</li>\n<li>Set socket to <strong>Listen</strong></li>\n<li><strong>Accept</strong> new connection</li>\n<li><strong>Communicate</strong></li>\n<li><strong>Close</strong> the connection</li>\n</ol>\n<h2 id=\"windows-c版\"><a class=\"markdownIt-Anchor\" href=\"#windows-c版\"></a> Windows C++版</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;io.h></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n\tWORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tWSADATA wsdata<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token comment\">//建立socket</span>\n\tSOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//IPPROTO_TCP参数也可写为0</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"socket Error!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t\n\tsockaddr_in ss<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n\tss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n\tss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token comment\">//INADDR_LOOPBACK：默认本机IP地址127.0.0.1</span>\n    <span class=\"token comment\">//Windows不支持INADDR_ANY写法，默认IP地址为0.0.0.0</span>\n\t<span class=\"token comment\">//Windows支持该种写法：inet_addr(\"127.0.0.1\")</span>\n    <span class=\"token comment\">//bind:socket绑定IP地址和端口用于监听</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//listen:设定可同时排队的Client最大连接个数</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Waiting for Clients request...\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//accept:等待客户端链接</span>\n    sockaddr_in clnt_addr<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> clnt_addr_size <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>clnt_addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> fd <span class=\"token operator\">=</span> <span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>clnt_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>clnt_addr_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//int fd = accept(s, (sockaddr*)NULL, NULL);</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fd <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Accept Error\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//Linux或Mac是write()函数</span>\n    string message <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello Client!\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">send</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//Linux或Mac是close()函数</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linuxmac-c版\"><a class=\"markdownIt-Anchor\" href=\"#linuxmac-c版\"></a> Linux/Mac C版</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//建立socket套接字 注意是int类型</span>\n\t<span class=\"token keyword\">int</span> listenfd <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>listenfd <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\t\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr_in</span> st_sersock<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>st_sersock<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>st_sersock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tst_sersock<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span>  <span class=\"token comment\">//IPv4协议</span>\n\tst_sersock<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_ANY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//127.0.0.1</span>\n\t<span class=\"token comment\">//INADDR_ANY是0.0.0.0指的是本机IP地址</span>\n\t<span class=\"token comment\">//Windows要写成INADDR_LOOPBACK</span>\n\tst_sersock<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//host number</span>\n\t<span class=\"token comment\">//Socket绑定IP和端口用于监听</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>listenfd<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>st_sersock<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>st_sersock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> \n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token comment\">//设定可同时排队的客户端最大连接个数</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>listenfd<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\t\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token comment\">//准备接受客户端连接</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"======Waiting for client's request======\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//阻塞等待客户端连接</span>\n\t<span class=\"token keyword\">int</span> connfd <span class=\"token operator\">=</span> <span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>i_listenfd<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>connfd <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\t\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\t\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Client %d, welcome!\\n\"</span><span class=\"token punctuation\">,</span> connfd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">char</span> msg<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello Client!\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//将msg发送到Client端</span>\n\t<span class=\"token function\">write</span><span class=\"token punctuation\">(</span>connfd<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//Windows下是closesocket\t</span>\n\t<span class=\"token function\">close</span><span class=\"token punctuation\">(</span>connfd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">close</span><span class=\"token punctuation\">(</span>listenfd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"python版\"><a class=\"markdownIt-Anchor\" href=\"#python版\"></a> Python版</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># listen port</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Waiting for connection...'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n\tsock<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (Id, port)</span>\nmsg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello Client!\"</span>\nsock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span>\nsock<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre>\n<h1 id=\"client通信步骤\"><a class=\"markdownIt-Anchor\" href=\"#client通信步骤\"></a> Client通信步骤</h1>\n<ol>\n<li><strong>Socket()</strong> to Create a TCP socket</li>\n<li>Establish <strong>connection</strong></li>\n<li>Communicate (<strong>read</strong>)</li>\n<li><strong>Close</strong> the connection</li>\n</ol>\n<h2 id=\"windows-c版-2\"><a class=\"markdownIt-Anchor\" href=\"#windows-c版-2\"></a> Windows C++版</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    SOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Invalid Socket!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Connect Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    string message<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//LInux或Mac是read()函数</span>\n    <span class=\"token comment\">//read函数第三个参数必须为固定值，不能使用message.length()</span>\n    <span class=\"token comment\">//因为message.length()对于c++的string来说初始值为0！</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">recv</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">128</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>message<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linuxmac-c版-2\"><a class=\"markdownIt-Anchor\" href=\"#linuxmac-c版-2\"></a> Linux/Mac C版</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid Socket!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_ANY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connect Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"python版-2\"><a class=\"markdownIt-Anchor\" href=\"#python版-2\"></a> Python版</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># listen port</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n\ts<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection Error!\"</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">b'exit'</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre>\n<hr>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/10/14/socket-program-2/\">Socket网络编程2 | Tony</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"server-通信步骤\"><a class=\"markdownIt-Anchor\" href=\"#server-通信步骤\"></a> Server 通信步骤</h1>\n<ol>\n<li><strong>Socket()</strong> to Create a TCP socket</li>\n<li><strong>Bind()</strong> to Assign a port to socket</li>\n<li>Set socket to <strong>Listen</strong></li>\n<li><strong>Accept</strong> new connection</li>\n<li><strong>Communicate</strong></li>\n<li><strong>Close</strong> the connection</li>\n</ol>\n<h2 id=\"windows-c版\"><a class=\"markdownIt-Anchor\" href=\"#windows-c版\"></a> Windows C++版</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;io.h></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n\tWORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tWSADATA wsdata<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token comment\">//建立socket</span>\n\tSOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//IPPROTO_TCP参数也可写为0</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"socket Error!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t\n\tsockaddr_in ss<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n\tss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n\tss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token comment\">//INADDR_LOOPBACK：默认本机IP地址127.0.0.1</span>\n    <span class=\"token comment\">//Windows不支持INADDR_ANY写法，默认IP地址为0.0.0.0</span>\n\t<span class=\"token comment\">//Windows支持该种写法：inet_addr(\"127.0.0.1\")</span>\n    <span class=\"token comment\">//bind:socket绑定IP地址和端口用于监听</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\tcout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//listen:设定可同时排队的Client最大连接个数</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Waiting for Clients request...\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//accept:等待客户端链接</span>\n    sockaddr_in clnt_addr<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> clnt_addr_size <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>clnt_addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> fd <span class=\"token operator\">=</span> <span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>clnt_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>clnt_addr_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//int fd = accept(s, (sockaddr*)NULL, NULL);</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fd <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Accept Error\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//Linux或Mac是write()函数</span>\n    string message <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello Client!\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">send</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//Linux或Mac是close()函数</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linuxmac-c版\"><a class=\"markdownIt-Anchor\" href=\"#linuxmac-c版\"></a> Linux/Mac C版</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//建立socket套接字 注意是int类型</span>\n\t<span class=\"token keyword\">int</span> listenfd <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>listenfd <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\t\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr_in</span> st_sersock<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>st_sersock<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>st_sersock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tst_sersock<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span>  <span class=\"token comment\">//IPv4协议</span>\n\tst_sersock<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_ANY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//127.0.0.1</span>\n\t<span class=\"token comment\">//INADDR_ANY是0.0.0.0指的是本机IP地址</span>\n\t<span class=\"token comment\">//Windows要写成INADDR_LOOPBACK</span>\n\tst_sersock<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//host number</span>\n\t<span class=\"token comment\">//Socket绑定IP和端口用于监听</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>listenfd<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>st_sersock<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>st_sersock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> \n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token comment\">//设定可同时排队的客户端最大连接个数</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>listenfd<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\t\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token comment\">//准备接受客户端连接</span>\n\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"======Waiting for client's request======\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//阻塞等待客户端连接</span>\n\t<span class=\"token keyword\">int</span> connfd <span class=\"token operator\">=</span> <span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>i_listenfd<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>connfd <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\t\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\t\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Client %d, welcome!\\n\"</span><span class=\"token punctuation\">,</span> connfd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">char</span> msg<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello Client!\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//将msg发送到Client端</span>\n\t<span class=\"token function\">write</span><span class=\"token punctuation\">(</span>connfd<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//Windows下是closesocket\t</span>\n\t<span class=\"token function\">close</span><span class=\"token punctuation\">(</span>connfd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">close</span><span class=\"token punctuation\">(</span>listenfd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"python版\"><a class=\"markdownIt-Anchor\" href=\"#python版\"></a> Python版</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># listen port</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Waiting for connection...'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n\tsock<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (Id, port)</span>\nmsg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello Client!\"</span>\nsock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span>\nsock<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre>\n<h1 id=\"client通信步骤\"><a class=\"markdownIt-Anchor\" href=\"#client通信步骤\"></a> Client通信步骤</h1>\n<ol>\n<li><strong>Socket()</strong> to Create a TCP socket</li>\n<li>Establish <strong>connection</strong></li>\n<li>Communicate (<strong>read</strong>)</li>\n<li><strong>Close</strong> the connection</li>\n</ol>\n<h2 id=\"windows-c版-2\"><a class=\"markdownIt-Anchor\" href=\"#windows-c版-2\"></a> Windows C++版</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    SOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Invalid Socket!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Connect Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    string message<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//LInux或Mac是read()函数</span>\n    <span class=\"token comment\">//read函数第三个参数必须为固定值，不能使用message.length()</span>\n    <span class=\"token comment\">//因为message.length()对于c++的string来说初始值为0！</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">recv</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">128</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>message<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linuxmac-c版-2\"><a class=\"markdownIt-Anchor\" href=\"#linuxmac-c版-2\"></a> Linux/Mac C版</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid Socket!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_ANY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connect Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"python版-2\"><a class=\"markdownIt-Anchor\" href=\"#python版-2\"></a> Python版</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># listen port</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n\ts<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection Error!\"</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">b'exit'</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre>\n<hr>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/10/14/socket-program-2/\">Socket网络编程2 | Tony</a></p>\n"},{"title":"Socket网络编程2","date":"2022-10-14T06:56:32.000Z","author":"Tony","_content":"\n![image-20221012143810496](socket-program-2/image-20221012143810496.png)\n\n## 实现多条信息收发\n\n<img src=\"socket-program-2/image-20221012143117864.png\" alt=\"image-20221012143117864\" style=\"zoom:66%;\" />\n\n## Windows Server\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <string>\n#include <winsock2.h>\nusing namespace std;\n\nint main()\n{\n    //初始化模块，仅Windows系统需要\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cout << \"Initialize Error!\"<<endl;\n        exit(-1);\n    }\n    //建立socket\n    SOCKET s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s == INVALID_SOCKET)\n    {\n        cout << \"socket Error!\" << endl;\n        exit(-1);\n    }\n\n    sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    //ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    //bind:socket绑定IP地址和端口用于监听\n    if (bind(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n    {\n        cout<<\"Bind Error!\"<<endl;\n        exit(-1);\n    }\n    //listen:设定可同时排队的Client最大连接个数\n    if(listen(s, 1) < 0)\n    {\n        cout<<\"Listen Error!\"<<endl;\n        return -1;\n    }\n    cout<<\"Server is running...\"<<endl;\n    for(;;)\n    {\n        //accept:等待客户端链接\n    \tsockaddr_in clnt_addr;\n    \tint clnt_addr_size = sizeof(clnt_addr);\n    \tint fd = accept(s, (sockaddr *) &clnt_addr, &clnt_addr_size);\n    \t//int fd = accept(s, (sockaddr*)NULL, NULL);\n    \tif (fd < 0)\n    \t{\n        \tcout << \"Accept Error\" << endl;\n        \texit(-1);\n    \t}\n    \telse\n        \tcout<<\"Connected to Server:\"<<fd<<endl;\n    \tstring msg = \"Hi, Client\";\n    \tsend(fd, msg.c_str(), msg.length(), 0);\n    \tcout << \"Sending:\\\" \" << msg << \"\\\" to Client...\" << endl;\n    \twhile(1)\n    \t{\n        \tcout << \"Waiting for Clients request...\" << endl;\n        \tstring message;\n        \tint jud = recv(fd, message.to_cstr(), 256, 0);\n        \tif (jud < 0)\n        \t{\n            \tcout<<\"Receive Error!!!\"<<endl;\n            \tbreak;\n        \t}\n        \tif (message == \"quit\")\n        \t{\n            \tcout << \"  Bye-bye \" << fd << \"!\" << endl;\n            \tclosesocket(fd);\n            \tbreak;\n        \t} \n            else\n            \tcout << \"  Received by Client: \" << message << endl;\n    \t}\n    }\n    closesocket(s);\n    return 0;\n}\n```\n\n## Windows Client\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <string>\n#include <winsock2.h>\n#include <string>\nusing namespace std;\nint main()\n{\n    //初始化模块，仅Windows系统需要\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cout << \"Initialize Error!\"<<endl;\n        exit(-1);\n    }\n    SOCKET s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s == INVALID_SOCKET)\n    {\n        cout<<\"Invalid Socket!\"<<endl;\n        exit(-1);\n    }\n    sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    if(connect(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n    {\n        cout<<\"Connect Error!\"<<endl;\n        closesocket(s);\n        exit(-1);\n    }\n    string message;\n    if(recv(s, message.c_str(), 256, 0) > 0)\n    {\n        cout<<\"Successfully Connected to Server: \";\n        cout<<message<<endl;\n    }\n    while(1)\n    {\n        string msg;\n        cout<<\"Please input your message:\";\n        getline(cin, msg);\n        int send_len = send(s, msg.c_str(), msg.length(), 0);\n        if(send_len < 0)\n        {\n            cout<<\"Sending Error!!!\"<<endl;\n            break;\n        }\n        else if(msg == \"quit\")\n        {\n            cout<<\"See you next time, bye!\"<<endl;\n            closesocket(s);\n            break;\n        }\n    }\n    return 0;\n}\n```\n\n## Linux Server\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\n\nint main()\n{\n    //建立socket\n    int s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s < 0)\n    {\n        printf(\"Socket Error!\\n\");\n        exit(-1);\n    }\n\n    struct sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    //ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    ss.sin_addr.s_addr = htonl(INADDR_ANY);\n    //bind:socket绑定IP地址和端口用于监听\n    if (bind(s, (sockaddr*)&ss, sizeof(ss)) < 0)\n    {\n        printf(\"Bind Error!\\n\");\n        exit(-1);\n    }\n    //listen:设定可同时排队的Client最大连接个数\n    if(listen(s, 1) < 0)\n    {\n        printf(\"Listen Error!\\n\");\n        return -1;\n    }\n    printf(\"======Server is running...======\\n\");\n    for(;;)\n    {\n        //accept:等待客户端链接\n    \tint fd = accept(s, (struct sockaddr*)NULL, NULL);\n    \tif (fd < 0)\n    \t{\n        \tprintf(\"Accept Error!\\n\");\n        \texit(-1);\n    \t}\n    \telse\n        \tprintf(\"Client %d, welcome!\\n\", connfd);\n    \tchar msg[32] = \"Hi, Client\";\n    \t//send(fd, msg.c_str(), msg.length(), 0);\n        write(fd, msg, sizeof(msg));\n        printf(\"Sending:\\\"%s\\\" to Client\\n\", msg);\n    \twhile(1)\n    \t{\n            printf(\"Waiting for Clients request...\\n\");\n        \tchar message[32];\n        \tmemset(message, 0, sizeof(message));\n        \t//int jud = recv(fd, message, sizeof(message), 0);\n            int jud = write(fd, message, sizeof(message));\n        \tif (jud < 0)\n        \t{\n                printf(\"Receive Error!!!\\n\");\n            \tbreak;\n        \t}\n        \tif (strcmp(message, \"quit\") == 0)\n        \t{\n                printf(\"Bye-bye %d!\", fd);\n            \tclose(fd);\n            \tbreak;\n        \t} \n            else\n                printf(\"  Received by Client: %s\", message);\n    \t}\n    }\n    close(s);\n    return 0;\n}\n```\n\n## Linux Client\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\nint main()\n{\n    int s = socket(AF_INET, SOCK_STREAM, 0);\n    if (s < 0)\n    {\n        printf(\"Socket Error!\\n\");\n        exit(-1);\n    }\n    struct sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    if(connect(s, (sockaddr*)&ss, sizeof(ss)) < 0)\n    {\n        printf(\"Connect Error!\\n\");\n        close(s);\n        exit(-1);\n    }\n    char message[32];\n    memset(message, 0, sizeof(message));\n    if(write(s, message, sizeof(message)) > 0)\n        printf(\"Successfully Connected to Server: %s\", message);\n    while(1)\n    {\n        char msg[32];\n        printf(\"Please input your message:\");\n        gets(msg);\n        int send_len = send(s, msg, sizeof(msg));\n        if(send_len < 0)\n        {\n            printf(\"Sending Error!!!\\n\");\n            break;\n        }\n        else if(msg == \"quit\")\n        {\n            printf(\"See you next time, bye!\\n\")\n            close(s);\n            break;\n        }\n    }\n    return 0;\n}\n```\n\n## Python Server\n\n```python\nimport socket\n\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nexcept Exception:\n    print(\"Socket Error!\")\n# listen port\ntry:\n    s.bind(('127.0.0.1', 7777))\nexcept Exception:\n    print(\"Bind Error!\")\ntry:\n    s.listen(5)\nexcept Exception:\n    print(\"Listen Error!\")\nprint('Server is running...')\nwhile True:\n    try:\n        sock, addr = s.accept()\n    except Exception:\n        print(\"Accept Error!\")\n    print(\"Connected to Server: \", addr)  # (Id, port)\n    msg = \"Hello Client!\"\n    sock.send(msg.encode())\n    print(\"Sending \\\"\", msg, \"\\\" to Client...\")\n    while True:\n        print(\"Waiting for Clients request...\")\n        message = sock.recv(256).decode('utf-8')\n        if message == \"quit\":\n            print(\"Bye-bye\", addr, \"!\")\n            break\n        else:\n            print(\"  Received by Client: \", message)\n    sock.close()\nexit(0)\n\n```\n\n## Python Client\n\n```python\nimport socket\n\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nexcept Exception:\n    print(\"Socket Error!\")\ntry:\n    s.connect(('127.0.0.1', 7777))\nexcept Exception:\n    print(\"Connection Error!\")\nmessage = s.recv(256).decode('utf-8')\nprint(message)\nwhile True:\n    msg = input(\"Please input your message: \").strip()\n    if not msg:\n        continue\n    s.send(msg.encode())\n    if msg == \"quit\":\n        print(\"See you next time, bye!\")\n        s.close()\n        break\nexit(0)\n\n```\n\n---\n\n上一篇：[Socket网络编程1 | Tony](http://tonylsx.top/2022/09/17/socket-program-1/)\n\n下一篇：[Socket网络编程 3——UDP | Tony](http://tonylsx.top/2022/10/14/socket-program-3/)\n","source":"_posts/socket-program-2.md","raw":"---\ntitle: Socket网络编程2\ndate: 2022-10-14 14:56:32\nauthor: Tony\ntags:\n  - Socket\n  - Client\n  - Server\ncategories:\n  - 计算机网络\n---\n\n![image-20221012143810496](socket-program-2/image-20221012143810496.png)\n\n## 实现多条信息收发\n\n<img src=\"socket-program-2/image-20221012143117864.png\" alt=\"image-20221012143117864\" style=\"zoom:66%;\" />\n\n## Windows Server\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <string>\n#include <winsock2.h>\nusing namespace std;\n\nint main()\n{\n    //初始化模块，仅Windows系统需要\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cout << \"Initialize Error!\"<<endl;\n        exit(-1);\n    }\n    //建立socket\n    SOCKET s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s == INVALID_SOCKET)\n    {\n        cout << \"socket Error!\" << endl;\n        exit(-1);\n    }\n\n    sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    //ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    //bind:socket绑定IP地址和端口用于监听\n    if (bind(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n    {\n        cout<<\"Bind Error!\"<<endl;\n        exit(-1);\n    }\n    //listen:设定可同时排队的Client最大连接个数\n    if(listen(s, 1) < 0)\n    {\n        cout<<\"Listen Error!\"<<endl;\n        return -1;\n    }\n    cout<<\"Server is running...\"<<endl;\n    for(;;)\n    {\n        //accept:等待客户端链接\n    \tsockaddr_in clnt_addr;\n    \tint clnt_addr_size = sizeof(clnt_addr);\n    \tint fd = accept(s, (sockaddr *) &clnt_addr, &clnt_addr_size);\n    \t//int fd = accept(s, (sockaddr*)NULL, NULL);\n    \tif (fd < 0)\n    \t{\n        \tcout << \"Accept Error\" << endl;\n        \texit(-1);\n    \t}\n    \telse\n        \tcout<<\"Connected to Server:\"<<fd<<endl;\n    \tstring msg = \"Hi, Client\";\n    \tsend(fd, msg.c_str(), msg.length(), 0);\n    \tcout << \"Sending:\\\" \" << msg << \"\\\" to Client...\" << endl;\n    \twhile(1)\n    \t{\n        \tcout << \"Waiting for Clients request...\" << endl;\n        \tstring message;\n        \tint jud = recv(fd, message.to_cstr(), 256, 0);\n        \tif (jud < 0)\n        \t{\n            \tcout<<\"Receive Error!!!\"<<endl;\n            \tbreak;\n        \t}\n        \tif (message == \"quit\")\n        \t{\n            \tcout << \"  Bye-bye \" << fd << \"!\" << endl;\n            \tclosesocket(fd);\n            \tbreak;\n        \t} \n            else\n            \tcout << \"  Received by Client: \" << message << endl;\n    \t}\n    }\n    closesocket(s);\n    return 0;\n}\n```\n\n## Windows Client\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <string>\n#include <winsock2.h>\n#include <string>\nusing namespace std;\nint main()\n{\n    //初始化模块，仅Windows系统需要\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cout << \"Initialize Error!\"<<endl;\n        exit(-1);\n    }\n    SOCKET s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s == INVALID_SOCKET)\n    {\n        cout<<\"Invalid Socket!\"<<endl;\n        exit(-1);\n    }\n    sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    if(connect(s, (sockaddr*)&ss, sizeof(ss)) == SOCKET_ERROR)\n    {\n        cout<<\"Connect Error!\"<<endl;\n        closesocket(s);\n        exit(-1);\n    }\n    string message;\n    if(recv(s, message.c_str(), 256, 0) > 0)\n    {\n        cout<<\"Successfully Connected to Server: \";\n        cout<<message<<endl;\n    }\n    while(1)\n    {\n        string msg;\n        cout<<\"Please input your message:\";\n        getline(cin, msg);\n        int send_len = send(s, msg.c_str(), msg.length(), 0);\n        if(send_len < 0)\n        {\n            cout<<\"Sending Error!!!\"<<endl;\n            break;\n        }\n        else if(msg == \"quit\")\n        {\n            cout<<\"See you next time, bye!\"<<endl;\n            closesocket(s);\n            break;\n        }\n    }\n    return 0;\n}\n```\n\n## Linux Server\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\n\nint main()\n{\n    //建立socket\n    int s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (s < 0)\n    {\n        printf(\"Socket Error!\\n\");\n        exit(-1);\n    }\n\n    struct sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    //ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    ss.sin_addr.s_addr = htonl(INADDR_ANY);\n    //bind:socket绑定IP地址和端口用于监听\n    if (bind(s, (sockaddr*)&ss, sizeof(ss)) < 0)\n    {\n        printf(\"Bind Error!\\n\");\n        exit(-1);\n    }\n    //listen:设定可同时排队的Client最大连接个数\n    if(listen(s, 1) < 0)\n    {\n        printf(\"Listen Error!\\n\");\n        return -1;\n    }\n    printf(\"======Server is running...======\\n\");\n    for(;;)\n    {\n        //accept:等待客户端链接\n    \tint fd = accept(s, (struct sockaddr*)NULL, NULL);\n    \tif (fd < 0)\n    \t{\n        \tprintf(\"Accept Error!\\n\");\n        \texit(-1);\n    \t}\n    \telse\n        \tprintf(\"Client %d, welcome!\\n\", connfd);\n    \tchar msg[32] = \"Hi, Client\";\n    \t//send(fd, msg.c_str(), msg.length(), 0);\n        write(fd, msg, sizeof(msg));\n        printf(\"Sending:\\\"%s\\\" to Client\\n\", msg);\n    \twhile(1)\n    \t{\n            printf(\"Waiting for Clients request...\\n\");\n        \tchar message[32];\n        \tmemset(message, 0, sizeof(message));\n        \t//int jud = recv(fd, message, sizeof(message), 0);\n            int jud = write(fd, message, sizeof(message));\n        \tif (jud < 0)\n        \t{\n                printf(\"Receive Error!!!\\n\");\n            \tbreak;\n        \t}\n        \tif (strcmp(message, \"quit\") == 0)\n        \t{\n                printf(\"Bye-bye %d!\", fd);\n            \tclose(fd);\n            \tbreak;\n        \t} \n            else\n                printf(\"  Received by Client: %s\", message);\n    \t}\n    }\n    close(s);\n    return 0;\n}\n```\n\n## Linux Client\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\nint main()\n{\n    int s = socket(AF_INET, SOCK_STREAM, 0);\n    if (s < 0)\n    {\n        printf(\"Socket Error!\\n\");\n        exit(-1);\n    }\n    struct sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    if(connect(s, (sockaddr*)&ss, sizeof(ss)) < 0)\n    {\n        printf(\"Connect Error!\\n\");\n        close(s);\n        exit(-1);\n    }\n    char message[32];\n    memset(message, 0, sizeof(message));\n    if(write(s, message, sizeof(message)) > 0)\n        printf(\"Successfully Connected to Server: %s\", message);\n    while(1)\n    {\n        char msg[32];\n        printf(\"Please input your message:\");\n        gets(msg);\n        int send_len = send(s, msg, sizeof(msg));\n        if(send_len < 0)\n        {\n            printf(\"Sending Error!!!\\n\");\n            break;\n        }\n        else if(msg == \"quit\")\n        {\n            printf(\"See you next time, bye!\\n\")\n            close(s);\n            break;\n        }\n    }\n    return 0;\n}\n```\n\n## Python Server\n\n```python\nimport socket\n\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nexcept Exception:\n    print(\"Socket Error!\")\n# listen port\ntry:\n    s.bind(('127.0.0.1', 7777))\nexcept Exception:\n    print(\"Bind Error!\")\ntry:\n    s.listen(5)\nexcept Exception:\n    print(\"Listen Error!\")\nprint('Server is running...')\nwhile True:\n    try:\n        sock, addr = s.accept()\n    except Exception:\n        print(\"Accept Error!\")\n    print(\"Connected to Server: \", addr)  # (Id, port)\n    msg = \"Hello Client!\"\n    sock.send(msg.encode())\n    print(\"Sending \\\"\", msg, \"\\\" to Client...\")\n    while True:\n        print(\"Waiting for Clients request...\")\n        message = sock.recv(256).decode('utf-8')\n        if message == \"quit\":\n            print(\"Bye-bye\", addr, \"!\")\n            break\n        else:\n            print(\"  Received by Client: \", message)\n    sock.close()\nexit(0)\n\n```\n\n## Python Client\n\n```python\nimport socket\n\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nexcept Exception:\n    print(\"Socket Error!\")\ntry:\n    s.connect(('127.0.0.1', 7777))\nexcept Exception:\n    print(\"Connection Error!\")\nmessage = s.recv(256).decode('utf-8')\nprint(message)\nwhile True:\n    msg = input(\"Please input your message: \").strip()\n    if not msg:\n        continue\n    s.send(msg.encode())\n    if msg == \"quit\":\n        print(\"See you next time, bye!\")\n        s.close()\n        break\nexit(0)\n\n```\n\n---\n\n上一篇：[Socket网络编程1 | Tony](http://tonylsx.top/2022/09/17/socket-program-1/)\n\n下一篇：[Socket网络编程 3——UDP | Tony](http://tonylsx.top/2022/10/14/socket-program-3/)\n","slug":"socket-program-2","published":1,"updated":"2022-11-01T05:53:00.597Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsrdz003d1gzub3ol43lx","content":"<p><img src=\"/2022/10/14/socket-program-2/image-20221012143810496.png\" alt=\"image-20221012143810496\" loading=\"lazy\"></p>\n<h2 id=\"实现多条信息收发\"><a class=\"markdownIt-Anchor\" href=\"#实现多条信息收发\"></a> 实现多条信息收发</h2>\n<img src=\"/2022/10/14/socket-program-2/image-20221012143117864.png\" alt=\"image-20221012143117864\" style=\"zoom:66%;\" loading=\"lazy\">\n<h2 id=\"windows-server\"><a class=\"markdownIt-Anchor\" href=\"#windows-server\"></a> Windows Server</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//建立socket</span>\n    SOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"socket Error!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">inet_addr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);</span>\n    <span class=\"token comment\">//bind:socket绑定IP地址和端口用于监听</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//listen:设定可同时排队的Client最大连接个数</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Server is running...\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">//accept:等待客户端链接</span>\n    \tsockaddr_in clnt_addr<span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">int</span> clnt_addr_size <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>clnt_addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">int</span> fd <span class=\"token operator\">=</span> <span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>clnt_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>clnt_addr_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token comment\">//int fd = accept(s, (sockaddr*)NULL, NULL);</span>\n    \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fd <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n        \tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Accept Error\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        \t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token punctuation\">&#125;</span>\n    \t<span class=\"token keyword\">else</span>\n        \tcout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Connected to Server:\"</span><span class=\"token operator\">&lt;&lt;</span>fd<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    \tstring msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Client\"</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token function\">send</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Sending:\\\" \"</span> <span class=\"token operator\">&lt;&lt;</span> msg <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"\\\" to Client...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n        \tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Waiting for Clients request...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        \tstring message<span class=\"token punctuation\">;</span>\n        \t<span class=\"token keyword\">int</span> jud <span class=\"token operator\">=</span> <span class=\"token function\">recv</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">to_cstr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">256</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jud <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        \t<span class=\"token punctuation\">&#123;</span>\n            \tcout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Receive Error!!!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            \t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token punctuation\">&#125;</span>\n        \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span>\n        \t<span class=\"token punctuation\">&#123;</span>\n            \tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Bye-bye \"</span> <span class=\"token operator\">&lt;&lt;</span> fd <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n            \t<span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token punctuation\">&#125;</span> \n            <span class=\"token keyword\">else</span>\n            \tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Received by Client: \"</span> <span class=\"token operator\">&lt;&lt;</span> message <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    \t<span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"windows-client\"><a class=\"markdownIt-Anchor\" href=\"#windows-client\"></a> Windows Client</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    SOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Invalid Socket!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Connect Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    string message<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">recv</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">256</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Successfully Connected to Server: \"</span><span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>message<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        string msg<span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Please input your message:\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">getline</span><span class=\"token punctuation\">(</span>cin<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> send_len <span class=\"token operator\">=</span> <span class=\"token function\">send</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>send_len <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Sending Error!!!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"See you next time, bye!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linux-server\"><a class=\"markdownIt-Anchor\" href=\"#linux-server\"></a> Linux Server</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//建立socket</span>\n    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr_in</span> ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    <span class=\"token comment\">//ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_ANY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//bind:socket绑定IP地址和端口用于监听</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//listen:设定可同时排队的Client最大连接个数</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"======Server is running...======\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">//accept:等待客户端链接</span>\n    \t<span class=\"token keyword\">int</span> fd <span class=\"token operator\">=</span> <span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fd <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n        \t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token punctuation\">&#125;</span>\n    \t<span class=\"token keyword\">else</span>\n        \t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Client %d, welcome!\\n\"</span><span class=\"token punctuation\">,</span> connfd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">char</span> msg<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Client\"</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token comment\">//send(fd, msg.c_str(), msg.length(), 0);</span>\n        <span class=\"token function\">write</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending:\\\"%s\\\" to Client\\n\"</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Waiting for Clients request...\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token comment\">//int jud = recv(fd, message, sizeof(message), 0);</span>\n            <span class=\"token keyword\">int</span> jud <span class=\"token operator\">=</span> <span class=\"token function\">write</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jud <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        \t<span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Receive Error!!!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token punctuation\">&#125;</span>\n        \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        \t<span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bye-bye %d!\"</span><span class=\"token punctuation\">,</span> fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \t<span class=\"token function\">close</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token punctuation\">&#125;</span> \n            <span class=\"token keyword\">else</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  Received by Client: %s\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linux-client\"><a class=\"markdownIt-Anchor\" href=\"#linux-client\"></a> Linux Client</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr_in</span> ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connect Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Successfully Connected to Server: %s\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">char</span> msg<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your message:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">gets</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> send_len <span class=\"token operator\">=</span> <span class=\"token function\">send</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>send_len <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending Error!!!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"See you next time, bye!\\n\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"python-server\"><a class=\"markdownIt-Anchor\" href=\"#python-server\"></a> Python Server</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># listen port</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7777</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server is running...'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        sock<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected to Server: \"</span><span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (Id, port)</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello Client!\"</span>\n    sock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending \\\"\"</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\\\" to Client...\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Waiting for Clients request...\"</span><span class=\"token punctuation\">)</span>\n        message <span class=\"token operator\">=</span> sock<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> message <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bye-bye\"</span><span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> <span class=\"token string\">\"!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  Received by Client: \"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span>\n    sock<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"python-client\"><a class=\"markdownIt-Anchor\" href=\"#python-client\"></a> Python Client</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7777</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection Error!\"</span><span class=\"token punctuation\">)</span>\nmessage <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your message: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> msg<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">continue</span>\n    s<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"See you next time, bye!\"</span><span class=\"token punctuation\">)</span>\n        s<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">break</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/09/17/socket-program-1/\">Socket网络编程1 | Tony</a></p>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/10/14/socket-program-3/\">Socket网络编程 3——UDP | Tony</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/2022/10/14/socket-program-2/image-20221012143810496.png\" alt=\"image-20221012143810496\"></p>\n<h2 id=\"实现多条信息收发\"><a class=\"markdownIt-Anchor\" href=\"#实现多条信息收发\"></a> 实现多条信息收发</h2>\n<img src=\"/2022/10/14/socket-program-2/image-20221012143117864.png\" alt=\"image-20221012143117864\" style=\"zoom:66%;\">\n<h2 id=\"windows-server\"><a class=\"markdownIt-Anchor\" href=\"#windows-server\"></a> Windows Server</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//建立socket</span>\n    SOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"socket Error!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">inet_addr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);</span>\n    <span class=\"token comment\">//bind:socket绑定IP地址和端口用于监听</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//listen:设定可同时排队的Client最大连接个数</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Server is running...\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">//accept:等待客户端链接</span>\n    \tsockaddr_in clnt_addr<span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">int</span> clnt_addr_size <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>clnt_addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">int</span> fd <span class=\"token operator\">=</span> <span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>clnt_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>clnt_addr_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token comment\">//int fd = accept(s, (sockaddr*)NULL, NULL);</span>\n    \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fd <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n        \tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Accept Error\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        \t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token punctuation\">&#125;</span>\n    \t<span class=\"token keyword\">else</span>\n        \tcout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Connected to Server:\"</span><span class=\"token operator\">&lt;&lt;</span>fd<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    \tstring msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Client\"</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token function\">send</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Sending:\\\" \"</span> <span class=\"token operator\">&lt;&lt;</span> msg <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"\\\" to Client...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n        \tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Waiting for Clients request...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        \tstring message<span class=\"token punctuation\">;</span>\n        \t<span class=\"token keyword\">int</span> jud <span class=\"token operator\">=</span> <span class=\"token function\">recv</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">to_cstr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">256</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jud <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        \t<span class=\"token punctuation\">&#123;</span>\n            \tcout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Receive Error!!!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            \t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token punctuation\">&#125;</span>\n        \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span>\n        \t<span class=\"token punctuation\">&#123;</span>\n            \tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Bye-bye \"</span> <span class=\"token operator\">&lt;&lt;</span> fd <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n            \t<span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token punctuation\">&#125;</span> \n            <span class=\"token keyword\">else</span>\n            \tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Received by Client: \"</span> <span class=\"token operator\">&lt;&lt;</span> message <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    \t<span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"windows-client\"><a class=\"markdownIt-Anchor\" href=\"#windows-client\"></a> Windows Client</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    SOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Invalid Socket!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Connect Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    string message<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">recv</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">256</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Successfully Connected to Server: \"</span><span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>message<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        string msg<span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Please input your message:\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">getline</span><span class=\"token punctuation\">(</span>cin<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> send_len <span class=\"token operator\">=</span> <span class=\"token function\">send</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>send_len <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Sending Error!!!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"See you next time, bye!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linux-server\"><a class=\"markdownIt-Anchor\" href=\"#linux-server\"></a> Linux Server</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//建立socket</span>\n    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> IPPROTO_TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr_in</span> ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    <span class=\"token comment\">//ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_ANY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//bind:socket绑定IP地址和端口用于监听</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//listen:设定可同时排队的Client最大连接个数</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"======Server is running...======\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">//accept:等待客户端链接</span>\n    \t<span class=\"token keyword\">int</span> fd <span class=\"token operator\">=</span> <span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fd <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n        \t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token punctuation\">&#125;</span>\n    \t<span class=\"token keyword\">else</span>\n        \t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Client %d, welcome!\\n\"</span><span class=\"token punctuation\">,</span> connfd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">char</span> msg<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Client\"</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token comment\">//send(fd, msg.c_str(), msg.length(), 0);</span>\n        <span class=\"token function\">write</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending:\\\"%s\\\" to Client\\n\"</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    \t<span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Waiting for Clients request...\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token comment\">//int jud = recv(fd, message, sizeof(message), 0);</span>\n            <span class=\"token keyword\">int</span> jud <span class=\"token operator\">=</span> <span class=\"token function\">write</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jud <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        \t<span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Receive Error!!!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token punctuation\">&#125;</span>\n        \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        \t<span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bye-bye %d!\"</span><span class=\"token punctuation\">,</span> fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \t<span class=\"token function\">close</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        \t<span class=\"token punctuation\">&#125;</span> \n            <span class=\"token keyword\">else</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  Received by Client: %s\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linux-client\"><a class=\"markdownIt-Anchor\" href=\"#linux-client\"></a> Linux Client</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_STREAM<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr_in</span> ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connect Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Successfully Connected to Server: %s\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">char</span> msg<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your message:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">gets</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> send_len <span class=\"token operator\">=</span> <span class=\"token function\">send</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>send_len <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending Error!!!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"See you next time, bye!\\n\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"python-server\"><a class=\"markdownIt-Anchor\" href=\"#python-server\"></a> Python Server</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># listen port</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7777</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listen Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server is running...'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        sock<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Accept Error!\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected to Server: \"</span><span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (Id, port)</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello Client!\"</span>\n    sock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending \\\"\"</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\\\" to Client...\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Waiting for Clients request...\"</span><span class=\"token punctuation\">)</span>\n        message <span class=\"token operator\">=</span> sock<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> message <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bye-bye\"</span><span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> <span class=\"token string\">\"!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  Received by Client: \"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span>\n    sock<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"python-client\"><a class=\"markdownIt-Anchor\" href=\"#python-client\"></a> Python Client</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7777</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection Error!\"</span><span class=\"token punctuation\">)</span>\nmessage <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your message: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> msg<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">continue</span>\n    s<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"See you next time, bye!\"</span><span class=\"token punctuation\">)</span>\n        s<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">break</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/09/17/socket-program-1/\">Socket网络编程1 | Tony</a></p>\n<p>下一篇：<a href=\"http://tonylsx.top/2022/10/14/socket-program-3/\">Socket网络编程 3——UDP | Tony</a></p>\n"},{"title":"Socket网络编程3——UDP","date":"2022-10-14T06:57:57.000Z","author":"Tony","_content":"\n## TCP与UDP的区别\n\n![image-20221013181230269](socket-program-3/image-20221013181230269.png)\n\n## Windows Server\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <string>\n#include <winsock2.h>\nusing namespace std;\n\nint main()\n{\n    //初始化模块，仅Windows系统需要\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cout << \"Initialize Error!\"<<endl;\n        exit(-1);\n    }\n    //建立socket\n    SOCKET s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    if (s == INVALID_SOCKET)\n    {\n        cout << \"socket Error!\" << endl;\n        exit(-1);\n    }\n    sockaddr_in ss{};\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    //bind:socket绑定IP地址和端口用于监听\n    if (bind(s, (sockaddr*)&ss, sizeof(sockaddr)) == SOCKET_ERROR)\n    {\n        cout<<\"Bind Error!\"<<endl;\n        exit(-1);\n    }\n    //不需要listen\n    cout<<\"UDP Server is running...\"<<endl;\n    while (true)\n    {\n        bool end_while = false;\n        //accept:等待客户端链接\n        sockaddr_in client_addr;\n        int len = sizeof(client_addr);\n        string message;\n        recvfrom(s, message.c_str(), 256, 0, (SOCKADDR*)&client_addr, &len);\n        string msg = \"Hi, Client\";\n        sendto(s, msg.c_str(), msg.length()+1, 0, (SOCKADDR*)&client_addr, sizeof(SOCKADDR));\n        cout << \"Sending: \\\"\" << msg << \"\\\" to Client...\" << endl;\n        while (true)\n        {\n            cout << \"Waiting for Clients request...\" << endl;\n            int jud = recvfrom(s, message, sizeof(message), 0, (sockaddr*)&client_addr, &len);\n            if (jud < 0)\n            {\n                cout << \"Receive Error!!!\" << endl;\n                cout << \"  Make sure your input length < 31.\"<<endl;\n                continue;\n            }\n            if(strcmp(message, \"quit_server\") == 0)\n            {\n                end_while = true;\n                cout << \"Server is closing...\"<<endl;\n                break;\n            }\n            else if(message == \"quit\")\n            {\n                cout << \"  Bye-bye \" << jud << \"!\" << endl;\n                break;\n            }\n            else\n                cout << \"  Received by Client: \" << message << endl;\n            Sleep(1000);\n        }\n        if(end_while)\n            break;\n    }\n    cout<<\"Server has been Closed.\"<<endl;\n    closesocket(s);\n    WSACleanup();\n    return 0;\n}\n```\n\n ## Windows Client\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <winsock2.h>\n#include <string>\nusing namespace std;\n\nint main()\n{\n    //初始化模块，仅Windows系统需要\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cout << \"Initialize Error!\"<<endl;\n        exit(-1);\n    }\n    SOCKET s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    if (s == INVALID_SOCKET)\n    {\n        cout<<\"Invalid Socket!\"<<endl;\n        exit(-1);\n    }\n    sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    // No need to Connect()\n    string message = \"Hi, Server!\";\n    int len = sizeof(SOCKADDR);\n    sendto(s, message.c_str(), message.length(), 0, (sockaddr*)&ss, len);\n    if(recvfrom(s, message.c_str(), 256, 0, (sockaddr*)&ss, &len) > 0)\n    {\n        cout<<\"Successfully Connected to Server: \";\n        cout<<message<<endl;\n    }\n\n    while(true)\n    {\n        string msg;\n        cout<<\"Please input your message:\";\n        getline(cin, msg);\n        int send_len = sendto(s, msg.c_str(), msg.length(), 0, (sockaddr*)&ss, len);\n        if(send_len < 0)\n        {\n            cout<<\"Sending Error!!!\"<<endl;\n            break;\n        }\n        else if(msg == \"quit\")\n        {\n            cout<<\"See you next time, bye!\"<<endl;\n            closesocket(s);\n            break;\n        }\n    }\n    WSACleanup();\n    return 0;\n}\n```\n\n## Linux Server\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\n\nint main(void)\n{\n    //建立socket\n    int s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    if (s < 0)\n    {\n        printf(\"socket Error!\\n\");\n        exit(-1);\n    }\n    sockaddr_in ss{};\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    //bind:socket绑定IP地址和端口用于监听\n    if (bind(s, (sockaddr*)&ss, sizeof(sockaddr)) < 0)\n    {\n        printf(\"Bind Error!\\n\");\n        exit(-1);\n    }\n    //不需要listen\n    printf(\"UDP Server is running...\\n\");\n    while (true)\n    {\n        bool end_while = false;\n        //accept:等待客户端链接\n        sockaddr_in client_addr;\n        int len = sizeof(client_addr);\n        char message[32];\n        memset(message, 0, sizeof(message));\n        recvfrom(s, message, sizeof(message), 0, (SOCKADDR*)&client_addr, &len);\n        char msg[32] = \"Hi, Client\";\n        sendto(s, msg, sizeof(msg), 0, (SOCKADDR*)&client_addr, sizeof(SOCKADDR));\n        printf(\"Sending: \\\"%s\\\" to Client...\\n\", msg);\n        while (true)\n        {\n            printf(\"Waiting for Clients request...\\n\");\n            memset(message, 0, sizeof(message));\n            int jud = recvfrom(s, message, sizeof(message), 0, (sockaddr*)&client_addr, &len);\n            if (jud < 0)\n            {\n                printf(\"Receive Error!!!\\n  Make sure your input length < 31.\\n\");\n                continue;\n            }\n            if(strcmp(message, \"quit_server\") == 0)\n            {\n                end_while = true;\n                printf(\"Server is closing...\\n\");\n                break;\n            }\n            else if(strcmp(message, \"quit\") == 0)\n            {\n                printf(\"  Bye-bye %d !\\n\", jud);\n                break;\n            }\n            else\n                printf(\"  Received by Client: %s\\n\", message);\n        }\n        if(end_while)\n            break;\n    }\n    printf(\"Server has been Closed.\\n\");\n    close(s);\n    return 0;\n}\n```\n\n ## Linux Client\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\n\nint main(void)\n{\n    int s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    if (s < 0)\n    {\n        printf(\"socket Error!\\n\");\n        exit(-1);\n    }\n    sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    // No need to Connect()\n    char message[32] = \"Hi, Server!\";\n    int len = sizeof(SOCKADDR);\n    sendto(s, message, sizeof(message), 0, (sockaddr*)&ss, len);\n    memset(message, 0, sizeof(message));\n    if(recvfrom(s, message, sizeof(message), 0, (sockaddr*)&ss, &len) > 0)\n        printf(\"Successfully Connected to Server: %s\\n\", message);\n\n    while(true)\n    {\n        char msg[32];\n        printf(\"Please input your message:\");\n        gets(msg);\n        int send_len = sendto(s, msg, sizeof(msg), 0, (sockaddr*)&ss, len);\n        if(send_len < 0)\n        {\n            printf(\"Sending Error!!!\\n\");\n            break;\n        }\n        else if(strcmp(msg, \"quit\") == 0)\n        {\n            printf(\"See you next time, bye!\\n\");\n            close(s);\n            break;\n        }\n    }\n    return 0;\n}\n```\n\n\n\n## Python Server\n\n```python\nimport socket\n\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nexcept Exception:\n    print(\"Socket Error!\")\nserver_add = ('127.0.0.1', 9999)\ntry:\n    s.bind(server_add)\nexcept Exception:\n    print(\"Bind Error!\")\n# No need to Listen()\nprint('Server_UDP is running...')\nwhile True:\n    # No need to Accept()\n    message, client = s.recvfrom(256)\n    print(message.decode())\n    msg = \"Hello, Client!\"\n    s.sendto(msg.encode(), client)\n    print(\"Sending \\\"\", msg, \"\\\" to Client...\")\n\n    while True:\n        print(\"Waiting for Clients request...\")\n        message, client = s.recvfrom(256)\n        if message.decode() == \"quit\":\n            print(\"Bye-bye\", client, \"!\")\n            break\n        else:\n            print(\"  Received by Client: \", message.decode())\ns.close()\nexit(0)\n\n```\n\n## Python Client\n\n```python\nimport socket\n\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nexcept Exception:\n    print(\"Socket Error!\")\nserver_add = ('127.0.0.1', 9999)\ntry:\n    message = \"HI, Server!\"\n    s.sendto(message.encode(), server_add)\n    message, server = s.recvfrom(256)\n    print(message.decode())\nexcept socket.timeout:\n    print(\"Time out!\")\n\nwhile True:\n    msg = input(\"Please input your message: \").strip()\n    if not msg:\n        continue\n    s.sendto(msg.encode(), server_add)\n    if msg == \"quit\":\n        print(\"See you next time, bye!\")\n        s.close()\n        break\nexit(0)\n\n```\n\n---\n\n上一篇：[Socket网络编程2 | Tony](http://tonylsx.top/2022/10/14/socket-program-2/)\n\n下一篇：还没写好呢...\n","source":"_posts/socket-program-3.md","raw":"---\ntitle: Socket网络编程3——UDP\ndate: 2022-10-14 14:57:57\nauthor: Tony\ntags:\n  - Socket\n  - Client\n  - Server\ncategories:\n  - 计算机网络\n---\n\n## TCP与UDP的区别\n\n![image-20221013181230269](socket-program-3/image-20221013181230269.png)\n\n## Windows Server\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <string>\n#include <winsock2.h>\nusing namespace std;\n\nint main()\n{\n    //初始化模块，仅Windows系统需要\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cout << \"Initialize Error!\"<<endl;\n        exit(-1);\n    }\n    //建立socket\n    SOCKET s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    if (s == INVALID_SOCKET)\n    {\n        cout << \"socket Error!\" << endl;\n        exit(-1);\n    }\n    sockaddr_in ss{};\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    //bind:socket绑定IP地址和端口用于监听\n    if (bind(s, (sockaddr*)&ss, sizeof(sockaddr)) == SOCKET_ERROR)\n    {\n        cout<<\"Bind Error!\"<<endl;\n        exit(-1);\n    }\n    //不需要listen\n    cout<<\"UDP Server is running...\"<<endl;\n    while (true)\n    {\n        bool end_while = false;\n        //accept:等待客户端链接\n        sockaddr_in client_addr;\n        int len = sizeof(client_addr);\n        string message;\n        recvfrom(s, message.c_str(), 256, 0, (SOCKADDR*)&client_addr, &len);\n        string msg = \"Hi, Client\";\n        sendto(s, msg.c_str(), msg.length()+1, 0, (SOCKADDR*)&client_addr, sizeof(SOCKADDR));\n        cout << \"Sending: \\\"\" << msg << \"\\\" to Client...\" << endl;\n        while (true)\n        {\n            cout << \"Waiting for Clients request...\" << endl;\n            int jud = recvfrom(s, message, sizeof(message), 0, (sockaddr*)&client_addr, &len);\n            if (jud < 0)\n            {\n                cout << \"Receive Error!!!\" << endl;\n                cout << \"  Make sure your input length < 31.\"<<endl;\n                continue;\n            }\n            if(strcmp(message, \"quit_server\") == 0)\n            {\n                end_while = true;\n                cout << \"Server is closing...\"<<endl;\n                break;\n            }\n            else if(message == \"quit\")\n            {\n                cout << \"  Bye-bye \" << jud << \"!\" << endl;\n                break;\n            }\n            else\n                cout << \"  Received by Client: \" << message << endl;\n            Sleep(1000);\n        }\n        if(end_while)\n            break;\n    }\n    cout<<\"Server has been Closed.\"<<endl;\n    closesocket(s);\n    WSACleanup();\n    return 0;\n}\n```\n\n ## Windows Client\n\n```c\n#pragma comment(lib, \"ws2_32.lib\")\n#include <iostream>\n#include <cstdlib>\n#include <winsock2.h>\n#include <string>\nusing namespace std;\n\nint main()\n{\n    //初始化模块，仅Windows系统需要\n    WORD sockVersion = MAKEWORD(2, 2);\n    WSADATA wsdata;\n    if (WSAStartup(sockVersion, &wsdata) != 0)\n    {\n        cout << \"Initialize Error!\"<<endl;\n        exit(-1);\n    }\n    SOCKET s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    if (s == INVALID_SOCKET)\n    {\n        cout<<\"Invalid Socket!\"<<endl;\n        exit(-1);\n    }\n    sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    // No need to Connect()\n    string message = \"Hi, Server!\";\n    int len = sizeof(SOCKADDR);\n    sendto(s, message.c_str(), message.length(), 0, (sockaddr*)&ss, len);\n    if(recvfrom(s, message.c_str(), 256, 0, (sockaddr*)&ss, &len) > 0)\n    {\n        cout<<\"Successfully Connected to Server: \";\n        cout<<message<<endl;\n    }\n\n    while(true)\n    {\n        string msg;\n        cout<<\"Please input your message:\";\n        getline(cin, msg);\n        int send_len = sendto(s, msg.c_str(), msg.length(), 0, (sockaddr*)&ss, len);\n        if(send_len < 0)\n        {\n            cout<<\"Sending Error!!!\"<<endl;\n            break;\n        }\n        else if(msg == \"quit\")\n        {\n            cout<<\"See you next time, bye!\"<<endl;\n            closesocket(s);\n            break;\n        }\n    }\n    WSACleanup();\n    return 0;\n}\n```\n\n## Linux Server\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\n\nint main(void)\n{\n    //建立socket\n    int s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    if (s < 0)\n    {\n        printf(\"socket Error!\\n\");\n        exit(-1);\n    }\n    sockaddr_in ss{};\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    //bind:socket绑定IP地址和端口用于监听\n    if (bind(s, (sockaddr*)&ss, sizeof(sockaddr)) < 0)\n    {\n        printf(\"Bind Error!\\n\");\n        exit(-1);\n    }\n    //不需要listen\n    printf(\"UDP Server is running...\\n\");\n    while (true)\n    {\n        bool end_while = false;\n        //accept:等待客户端链接\n        sockaddr_in client_addr;\n        int len = sizeof(client_addr);\n        char message[32];\n        memset(message, 0, sizeof(message));\n        recvfrom(s, message, sizeof(message), 0, (SOCKADDR*)&client_addr, &len);\n        char msg[32] = \"Hi, Client\";\n        sendto(s, msg, sizeof(msg), 0, (SOCKADDR*)&client_addr, sizeof(SOCKADDR));\n        printf(\"Sending: \\\"%s\\\" to Client...\\n\", msg);\n        while (true)\n        {\n            printf(\"Waiting for Clients request...\\n\");\n            memset(message, 0, sizeof(message));\n            int jud = recvfrom(s, message, sizeof(message), 0, (sockaddr*)&client_addr, &len);\n            if (jud < 0)\n            {\n                printf(\"Receive Error!!!\\n  Make sure your input length < 31.\\n\");\n                continue;\n            }\n            if(strcmp(message, \"quit_server\") == 0)\n            {\n                end_while = true;\n                printf(\"Server is closing...\\n\");\n                break;\n            }\n            else if(strcmp(message, \"quit\") == 0)\n            {\n                printf(\"  Bye-bye %d !\\n\", jud);\n                break;\n            }\n            else\n                printf(\"  Received by Client: %s\\n\", message);\n        }\n        if(end_while)\n            break;\n    }\n    printf(\"Server has been Closed.\\n\");\n    close(s);\n    return 0;\n}\n```\n\n ## Linux Client\n\n```c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <netinet/in.h>\n#include <ctype.h>\n\nint main(void)\n{\n    int s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    if (s < 0)\n    {\n        printf(\"socket Error!\\n\");\n        exit(-1);\n    }\n    sockaddr_in ss;\n    memset(&ss, 0, sizeof(ss));\n    ss.sin_family = AF_INET;//IPv4\n    ss.sin_port = htons(6666);//port No.\n    ss.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    // No need to Connect()\n    char message[32] = \"Hi, Server!\";\n    int len = sizeof(SOCKADDR);\n    sendto(s, message, sizeof(message), 0, (sockaddr*)&ss, len);\n    memset(message, 0, sizeof(message));\n    if(recvfrom(s, message, sizeof(message), 0, (sockaddr*)&ss, &len) > 0)\n        printf(\"Successfully Connected to Server: %s\\n\", message);\n\n    while(true)\n    {\n        char msg[32];\n        printf(\"Please input your message:\");\n        gets(msg);\n        int send_len = sendto(s, msg, sizeof(msg), 0, (sockaddr*)&ss, len);\n        if(send_len < 0)\n        {\n            printf(\"Sending Error!!!\\n\");\n            break;\n        }\n        else if(strcmp(msg, \"quit\") == 0)\n        {\n            printf(\"See you next time, bye!\\n\");\n            close(s);\n            break;\n        }\n    }\n    return 0;\n}\n```\n\n\n\n## Python Server\n\n```python\nimport socket\n\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nexcept Exception:\n    print(\"Socket Error!\")\nserver_add = ('127.0.0.1', 9999)\ntry:\n    s.bind(server_add)\nexcept Exception:\n    print(\"Bind Error!\")\n# No need to Listen()\nprint('Server_UDP is running...')\nwhile True:\n    # No need to Accept()\n    message, client = s.recvfrom(256)\n    print(message.decode())\n    msg = \"Hello, Client!\"\n    s.sendto(msg.encode(), client)\n    print(\"Sending \\\"\", msg, \"\\\" to Client...\")\n\n    while True:\n        print(\"Waiting for Clients request...\")\n        message, client = s.recvfrom(256)\n        if message.decode() == \"quit\":\n            print(\"Bye-bye\", client, \"!\")\n            break\n        else:\n            print(\"  Received by Client: \", message.decode())\ns.close()\nexit(0)\n\n```\n\n## Python Client\n\n```python\nimport socket\n\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nexcept Exception:\n    print(\"Socket Error!\")\nserver_add = ('127.0.0.1', 9999)\ntry:\n    message = \"HI, Server!\"\n    s.sendto(message.encode(), server_add)\n    message, server = s.recvfrom(256)\n    print(message.decode())\nexcept socket.timeout:\n    print(\"Time out!\")\n\nwhile True:\n    msg = input(\"Please input your message: \").strip()\n    if not msg:\n        continue\n    s.sendto(msg.encode(), server_add)\n    if msg == \"quit\":\n        print(\"See you next time, bye!\")\n        s.close()\n        break\nexit(0)\n\n```\n\n---\n\n上一篇：[Socket网络编程2 | Tony](http://tonylsx.top/2022/10/14/socket-program-2/)\n\n下一篇：还没写好呢...\n","slug":"socket-program-3","published":1,"updated":"2022-11-01T05:53:00.597Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb4gsre0003i1gzu0wcwfbew","content":"<h2 id=\"tcp与udp的区别\"><a class=\"markdownIt-Anchor\" href=\"#tcp与udp的区别\"></a> TCP与UDP的区别</h2>\n<p><img src=\"/2022/10/14/socket-program-3/image-20221013181230269.png\" alt=\"image-20221013181230269\" loading=\"lazy\"></p>\n<h2 id=\"windows-server\"><a class=\"markdownIt-Anchor\" href=\"#windows-server\"></a> Windows Server</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//建立socket</span>\n    SOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_DGRAM<span class=\"token punctuation\">,</span> IPPROTO_UDP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"socket Error!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">inet_addr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//bind:socket绑定IP地址和端口用于监听</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>sockaddr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//不需要listen</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"UDP Server is running...\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        bool end_while <span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//accept:等待客户端链接</span>\n        sockaddr_in client_addr<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>client_addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        string message<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">256</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        string msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Client\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Sending: \\\"\"</span> <span class=\"token operator\">&lt;&lt;</span> msg <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"\\\" to Client...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Waiting for Clients request...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">int</span> jud <span class=\"token operator\">=</span> <span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jud <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Receive Error!!!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Make sure your input length &lt; 31.\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit_server\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                end_while <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Server is closing...\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>message <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Bye-bye \"</span> <span class=\"token operator\">&lt;&lt;</span> jud <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">else</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Received by Client: \"</span> <span class=\"token operator\">&lt;&lt;</span> message <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n            <span class=\"token function\">Sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>end_while<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Server has been Closed.\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">WSACleanup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"windows-client\"><a class=\"markdownIt-Anchor\" href=\"#windows-client\"></a> Windows Client</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    SOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_DGRAM<span class=\"token punctuation\">,</span> IPPROTO_UDP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Invalid Socket!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// No need to Connect()</span>\n    string message <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Server!\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">256</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Successfully Connected to Server: \"</span><span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>message<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        string msg<span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Please input your message:\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">getline</span><span class=\"token punctuation\">(</span>cin<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> send_len <span class=\"token operator\">=</span> <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>send_len <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Sending Error!!!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"See you next time, bye!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">WSACleanup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linux-server\"><a class=\"markdownIt-Anchor\" href=\"#linux-server\"></a> Linux Server</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//建立socket</span>\n    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_DGRAM<span class=\"token punctuation\">,</span> IPPROTO_UDP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"socket Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">inet_addr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//bind:socket绑定IP地址和端口用于监听</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>sockaddr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//不需要listen</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"UDP Server is running...\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        bool end_while <span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//accept:等待客户端链接</span>\n        sockaddr_in client_addr<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>client_addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">char</span> msg<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Client\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending: \\\"%s\\\" to Client...\\n\"</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Waiting for Clients request...\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">int</span> jud <span class=\"token operator\">=</span> <span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jud <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Receive Error!!!\\n  Make sure your input length &lt; 31.\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit_server\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                end_while <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server is closing...\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  Bye-bye %d !\\n\"</span><span class=\"token punctuation\">,</span> jud<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">else</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  Received by Client: %s\\n\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>end_while<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server has been Closed.\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linux-client\"><a class=\"markdownIt-Anchor\" href=\"#linux-client\"></a> Linux Client</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_DGRAM<span class=\"token punctuation\">,</span> IPPROTO_UDP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"socket Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// No need to Connect()</span>\n    <span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Server!\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Successfully Connected to Server: %s\\n\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">char</span> msg<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your message:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">gets</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> send_len <span class=\"token operator\">=</span> <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>send_len <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending Error!!!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"See you next time, bye!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"python-server\"><a class=\"markdownIt-Anchor\" href=\"#python-server\"></a> Python Server</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_DGRAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\nserver_add <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span>server_add<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># No need to Listen()</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server_UDP is running...'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># No need to Accept()</span>\n    message<span class=\"token punctuation\">,</span> client <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>recvfrom<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, Client!\"</span>\n    s<span class=\"token punctuation\">.</span>sendto<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending \\\"\"</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\\\" to Client...\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Waiting for Clients request...\"</span><span class=\"token punctuation\">)</span>\n        message<span class=\"token punctuation\">,</span> client <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>recvfrom<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bye-bye\"</span><span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">,</span> <span class=\"token string\">\"!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  Received by Client: \"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"python-client\"><a class=\"markdownIt-Anchor\" href=\"#python-client\"></a> Python Client</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_DGRAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\nserver_add <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    message <span class=\"token operator\">=</span> <span class=\"token string\">\"HI, Server!\"</span>\n    s<span class=\"token punctuation\">.</span>sendto<span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> server_add<span class=\"token punctuation\">)</span>\n    message<span class=\"token punctuation\">,</span> server <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>recvfrom<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> socket<span class=\"token punctuation\">.</span>timeout<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Time out!\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your message: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> msg<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">continue</span>\n    s<span class=\"token punctuation\">.</span>sendto<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> server_add<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"See you next time, bye!\"</span><span class=\"token punctuation\">)</span>\n        s<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">break</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/10/14/socket-program-2/\">Socket网络编程2 | Tony</a></p>\n<p>下一篇：还没写好呢…</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"tcp与udp的区别\"><a class=\"markdownIt-Anchor\" href=\"#tcp与udp的区别\"></a> TCP与UDP的区别</h2>\n<p><img src=\"/2022/10/14/socket-program-3/image-20221013181230269.png\" alt=\"image-20221013181230269\"></p>\n<h2 id=\"windows-server\"><a class=\"markdownIt-Anchor\" href=\"#windows-server\"></a> Windows Server</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//建立socket</span>\n    SOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_DGRAM<span class=\"token punctuation\">,</span> IPPROTO_UDP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"socket Error!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">inet_addr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//bind:socket绑定IP地址和端口用于监听</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>sockaddr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> SOCKET_ERROR<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//不需要listen</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"UDP Server is running...\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        bool end_while <span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//accept:等待客户端链接</span>\n        sockaddr_in client_addr<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>client_addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        string message<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">256</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        string msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Client\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Sending: \\\"\"</span> <span class=\"token operator\">&lt;&lt;</span> msg <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"\\\" to Client...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Waiting for Clients request...\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">int</span> jud <span class=\"token operator\">=</span> <span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jud <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Receive Error!!!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Make sure your input length &lt; 31.\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit_server\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                end_while <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Server is closing...\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>message <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Bye-bye \"</span> <span class=\"token operator\">&lt;&lt;</span> jud <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"!\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">else</span>\n                cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"  Received by Client: \"</span> <span class=\"token operator\">&lt;&lt;</span> message <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n            <span class=\"token function\">Sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>end_while<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Server has been Closed.\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">WSACleanup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"windows-client\"><a class=\"markdownIt-Anchor\" href=\"#windows-client\"></a> Windows Client</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;cstdlib></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;winsock2.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//初始化模块，仅Windows系统需要</span>\n    WORD sockVersion <span class=\"token operator\">=</span> <span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    WSADATA wsdata<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span>sockVersion<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>wsdata<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Initialize Error!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    SOCKET s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_DGRAM<span class=\"token punctuation\">,</span> IPPROTO_UDP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> INVALID_SOCKET<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Invalid Socket!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// No need to Connect()</span>\n    string message <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Server!\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">256</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Successfully Connected to Server: \"</span><span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span>message<span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        string msg<span class=\"token punctuation\">;</span>\n        cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Please input your message:\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">getline</span><span class=\"token punctuation\">(</span>cin<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> send_len <span class=\"token operator\">=</span> <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>send_len <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"Sending Error!!!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            cout<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"See you next time, bye!\"</span><span class=\"token operator\">&lt;&lt;</span>endl<span class=\"token punctuation\">;</span>\n            <span class=\"token function\">closesocket</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">WSACleanup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linux-server\"><a class=\"markdownIt-Anchor\" href=\"#linux-server\"></a> Linux Server</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//建立socket</span>\n    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_DGRAM<span class=\"token punctuation\">,</span> IPPROTO_UDP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"socket Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">inet_addr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//bind:socket绑定IP地址和端口用于监听</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>sockaddr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">//不需要listen</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"UDP Server is running...\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        bool end_while <span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//accept:等待客户端链接</span>\n        sockaddr_in client_addr<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>client_addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">char</span> msg<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Client\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending: \\\"%s\\\" to Client...\\n\"</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Waiting for Clients request...\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">int</span> jud <span class=\"token operator\">=</span> <span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>client_addr<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jud <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Receive Error!!!\\n  Make sure your input length &lt; 31.\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit_server\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                end_while <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server is closing...\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  Bye-bye %d !\\n\"</span><span class=\"token punctuation\">,</span> jud<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">else</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  Received by Client: %s\\n\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>end_while<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server has been Closed.\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"linux-client\"><a class=\"markdownIt-Anchor\" href=\"#linux-client\"></a> Linux Client</h2>\n<pre class=\"language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/socket.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;netinet/in.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ctype.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span>AF_INET<span class=\"token punctuation\">,</span> SOCK_DGRAM<span class=\"token punctuation\">,</span> IPPROTO_UDP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"socket Error!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    sockaddr_in ss<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span>sin_family <span class=\"token operator\">=</span> AF_INET<span class=\"token punctuation\">;</span><span class=\"token comment\">//IPv4</span>\n    ss<span class=\"token punctuation\">.</span>sin_port <span class=\"token operator\">=</span> <span class=\"token function\">htons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//port No.</span>\n    ss<span class=\"token punctuation\">.</span>sin_addr<span class=\"token punctuation\">.</span>s_addr <span class=\"token operator\">=</span> <span class=\"token function\">htonl</span><span class=\"token punctuation\">(</span>INADDR_LOOPBACK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// No need to Connect()</span>\n    <span class=\"token keyword\">char</span> message<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi, Server!\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>SOCKADDR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">recvfrom</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>len<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Successfully Connected to Server: %s\\n\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">char</span> msg<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your message:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">gets</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> send_len <span class=\"token operator\">=</span> <span class=\"token function\">sendto</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>sockaddr<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>ss<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>send_len <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending Error!!!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">,</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"See you next time, bye!\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<h2 id=\"python-server\"><a class=\"markdownIt-Anchor\" href=\"#python-server\"></a> Python Server</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_DGRAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\nserver_add <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span>server_add<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bind Error!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># No need to Listen()</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server_UDP is running...'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># No need to Accept()</span>\n    message<span class=\"token punctuation\">,</span> client <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>recvfrom<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, Client!\"</span>\n    s<span class=\"token punctuation\">.</span>sendto<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sending \\\"\"</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\\\" to Client...\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Waiting for Clients request...\"</span><span class=\"token punctuation\">)</span>\n        message<span class=\"token punctuation\">,</span> client <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>recvfrom<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bye-bye\"</span><span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">,</span> <span class=\"token string\">\"!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  Received by Client: \"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"python-client\"><a class=\"markdownIt-Anchor\" href=\"#python-client\"></a> Python Client</h2>\n<pre class=\"language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> socket\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_DGRAM<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Socket Error!\"</span><span class=\"token punctuation\">)</span>\nserver_add <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    message <span class=\"token operator\">=</span> <span class=\"token string\">\"HI, Server!\"</span>\n    s<span class=\"token punctuation\">.</span>sendto<span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> server_add<span class=\"token punctuation\">)</span>\n    message<span class=\"token punctuation\">,</span> server <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>recvfrom<span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> socket<span class=\"token punctuation\">.</span>timeout<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Time out!\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    msg <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your message: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> msg<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">continue</span>\n    s<span class=\"token punctuation\">.</span>sendto<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> server_add<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> msg <span class=\"token operator\">==</span> <span class=\"token string\">\"quit\"</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"See you next time, bye!\"</span><span class=\"token punctuation\">)</span>\n        s<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">break</span>\nexit<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<hr>\n<p>上一篇：<a href=\"http://tonylsx.top/2022/10/14/socket-program-2/\">Socket网络编程2 | Tony</a></p>\n<p>下一篇：还没写好呢…</p>\n"}],"PostAsset":[{"_id":"source/_posts/4-dimensional/a601995d55609f2d9f5e233e36fbe9ea26011b3b","slug":"a601995d55609f2d9f5e233e36fbe9ea26011b3b","post":"clb4gsrbx00011gzu80py59yk","modified":0,"renderable":0},{"_id":"source/_posts/4-dimensional/d928ec15aeef83aade867992ee473933adb6139d","slug":"d928ec15aeef83aade867992ee473933adb6139d","post":"clb4gsrbx00011gzu80py59yk","modified":0,"renderable":0},{"_id":"source/_posts/4-dimensional/image-20220409164432423.png","slug":"image-20220409164432423.png","post":"clb4gsrbx00011gzu80py59yk","modified":0,"renderable":0},{"_id":"source/_posts/4-dimensional/image-20220409164635308.png","slug":"image-20220409164635308.png","post":"clb4gsrbx00011gzu80py59yk","modified":0,"renderable":0},{"_id":"source/_posts/4-dimensional/image-20220409164912020.png","slug":"image-20220409164912020.png","post":"clb4gsrbx00011gzu80py59yk","modified":0,"renderable":0},{"_id":"source/_posts/4-dimensional/image-20220409165234091.png","slug":"image-20220409165234091.png","post":"clb4gsrbx00011gzu80py59yk","modified":0,"renderable":0},{"_id":"source/_posts/4-dimensional/image-20220409165723376.png","slug":"image-20220409165723376.png","post":"clb4gsrbx00011gzu80py59yk","modified":0,"renderable":0},{"_id":"source/_posts/4-dimensional/image-20220409173308465.png","slug":"image-20220409173308465.png","post":"clb4gsrbx00011gzu80py59yk","modified":0,"renderable":0},{"_id":"source/_posts/Andriod-Studio-1/image-20220916130832425.png","slug":"image-20220916130832425.png","post":"clb4gsrc700081gzucr9381zo","modified":0,"renderable":0},{"_id":"source/_posts/Andriod-Studio-1/image-20220916131246387.png","slug":"image-20220916131246387.png","post":"clb4gsrc700081gzucr9381zo","modified":0,"renderable":0},{"_id":"source/_posts/Andriod-Studio-1/image-20220916143713242.png","slug":"image-20220916143713242.png","post":"clb4gsrc700081gzucr9381zo","modified":0,"renderable":0},{"_id":"source/_posts/Andriod-Studio-1/image-20220918210702397.png","slug":"image-20220918210702397.png","post":"clb4gsrc700081gzucr9381zo","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722135753076.png","slug":"image-20220722135753076.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722141130992-1663410673096-7.png","slug":"image-20220722141130992-1663410673096-7.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722141252367.png","slug":"image-20220722141252367.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722141736616.png","slug":"image-20220722141736616.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722142107169.png","slug":"image-20220722142107169.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722142150620.png","slug":"image-20220722142150620.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722142444023.png","slug":"image-20220722142444023.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722144502752.png","slug":"image-20220722144502752.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722145541034.png","slug":"image-20220722145541034.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722152550108.png","slug":"image-20220722152550108.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220722154032582.png","slug":"image-20220722154032582.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/image-20220917183015892.png","slug":"image-20220917183015892.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/QQ图片20220722134623.jpg","slug":"QQ图片20220722134623.jpg","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/Anaconda-env/U0I112981_%MPSVS4CXL8BF.png","slug":"U0I112981_%MPSVS4CXL8BF.png","post":"clb4gsrc500071gzug3voay8i","modified":0,"renderable":0},{"_id":"source/_posts/8-puzzle/35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628.gif","slug":"35482241-1605ae76-046d-11e8-87e5-3d8a0cfa8628.gif","post":"clb4gsrc100031gzudxvfd40f","modified":0,"renderable":0},{"_id":"source/_posts/8-puzzle/R.024c89daf1b60db70d608b4b73215e76","slug":"R.024c89daf1b60db70d608b4b73215e76","post":"clb4gsrc100031gzudxvfd40f","modified":0,"renderable":0},{"_id":"source/_posts/8-puzzle/R.png","slug":"R.png","post":"clb4gsrc100031gzudxvfd40f","modified":0,"renderable":0},{"_id":"source/_posts/8-puzzle/R1.png","slug":"R1.png","post":"clb4gsrc100031gzudxvfd40f","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-3/image-20221010220838199.png","slug":"image-20221010220838199.png","post":"clb4gsrc800091gzu43xg12n2","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-3/image-20221010221037424.png","slug":"image-20221010221037424.png","post":"clb4gsrc800091gzu43xg12n2","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-3/image-20221010221157489.png","slug":"image-20221010221157489.png","post":"clb4gsrc800091gzu43xg12n2","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-3/image-20221010222245715.png","slug":"image-20221010222245715.png","post":"clb4gsrc800091gzu43xg12n2","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-3/image-20221010225547722.png","slug":"image-20221010225547722.png","post":"clb4gsrc800091gzu43xg12n2","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-3/image-20221010232513124.png","slug":"image-20221010232513124.png","post":"clb4gsrc800091gzu43xg12n2","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-4/image-20221011010417986.png","slug":"image-20221011010417986.png","post":"clb4gsrca000d1gzubfw44a9v","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-5/image-20221109150451204.png","slug":"image-20221109150451204.png","post":"clb4gsrcb000e1gzu19wu5ja4","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-5/image-20221109150911874.png","slug":"image-20221109150911874.png","post":"clb4gsrcb000e1gzu19wu5ja4","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-5/image-20221109151131798.png","slug":"image-20221109151131798.png","post":"clb4gsrcb000e1gzu19wu5ja4","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-5/image-20221121161500306.png","slug":"image-20221121161500306.png","post":"clb4gsrcb000e1gzu19wu5ja4","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-6/image-20221121180736629.png","slug":"image-20221121180736629.png","post":"clb4gsrcc000i1gzua9uvb3fj","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-6/image-20221121181019527.png","slug":"image-20221121181019527.png","post":"clb4gsrcc000i1gzua9uvb3fj","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-6/image-20221121182649615.png","slug":"image-20221121182649615.png","post":"clb4gsrcc000i1gzua9uvb3fj","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-6/image-20221121182911410.png","slug":"image-20221121182911410.png","post":"clb4gsrcc000i1gzua9uvb3fj","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-6/image-20221121183031659.png","slug":"image-20221121183031659.png","post":"clb4gsrcc000i1gzua9uvb3fj","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-6/image-20221121230804933.png","slug":"image-20221121230804933.png","post":"clb4gsrcc000i1gzua9uvb3fj","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-6/image-20221121232452816.png","slug":"image-20221121232452816.png","post":"clb4gsrcc000i1gzua9uvb3fj","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-7/image-20221125135252991.png","slug":"image-20221125135252991.png","post":"clb4gsrcd000j1gzu9rodet3w","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-7/image-20221125135412770.png","slug":"image-20221125135412770.png","post":"clb4gsrcd000j1gzu9rodet3w","modified":0,"renderable":0},{"_id":"source/_posts/Android-Studio-7/image-20221125135917426.png","slug":"image-20221125135917426.png","post":"clb4gsrcd000j1gzu9rodet3w","modified":0,"renderable":0},{"_id":"source/_posts/Android-studio-2/image-20220927021701138.png","slug":"image-20220927021701138.png","post":"clb4gsrcg000n1gzu9bco3cx1","modified":0,"renderable":0},{"_id":"source/_posts/Android-studio-2/image-20220927021810857.png","slug":"image-20220927021810857.png","post":"clb4gsrcg000n1gzu9bco3cx1","modified":0,"renderable":0},{"_id":"source/_posts/Android-studio-2/image-20220927022235374.png","slug":"image-20220927022235374.png","post":"clb4gsrcg000n1gzu9bco3cx1","modified":0,"renderable":0},{"_id":"source/_posts/Android-studio-2/image-20220927022446373.png","slug":"image-20220927022446373.png","post":"clb4gsrcg000n1gzu9bco3cx1","modified":0,"renderable":0},{"_id":"source/_posts/Android-studio-2/image-20220927022539379.png","slug":"image-20220927022539379.png","post":"clb4gsrcg000n1gzu9bco3cx1","modified":0,"renderable":0},{"_id":"source/_posts/Android-studio-2/image-20221031161107220.png","slug":"image-20221031161107220.png","post":"clb4gsrcg000n1gzu9bco3cx1","modified":0,"renderable":0},{"_id":"source/_posts/Android-studio-2/image-20221031161159345.png","slug":"image-20221031161159345.png","post":"clb4gsrcg000n1gzu9bco3cx1","modified":0,"renderable":0},{"_id":"source/_posts/Android-studio-2/image-20221031161231815.png","slug":"image-20221031161231815.png","post":"clb4gsrcg000n1gzu9bco3cx1","modified":0,"renderable":0},{"_id":"source/_posts/BM-algorithm/image-20220328004145309.png","slug":"image-20220328004145309.png","post":"clb4gsrcm000u1gzu5yohbljy","modified":0,"renderable":0},{"_id":"source/_posts/BM-algorithm/image-20220328005451919.png","slug":"image-20220328005451919.png","post":"clb4gsrcm000u1gzu5yohbljy","modified":0,"renderable":0},{"_id":"source/_posts/BM-algorithm/image-20220328173308025.png","slug":"image-20220328173308025.png","post":"clb4gsrcm000u1gzu5yohbljy","modified":0,"renderable":0},{"_id":"source/_posts/CN-1/image-20211201142249636.png","slug":"image-20211201142249636.png","post":"clb4gsrcr000z1gzuaek6fhi3","modified":0,"renderable":0},{"_id":"source/_posts/CN-1/image-20211201155433683.png","slug":"image-20211201155433683.png","post":"clb4gsrcr000z1gzuaek6fhi3","modified":0,"renderable":0},{"_id":"source/_posts/CN-1/image-20211201155917959.png","slug":"image-20211201155917959.png","post":"clb4gsrcr000z1gzuaek6fhi3","modified":0,"renderable":0},{"_id":"source/_posts/CN-1/image-20211201165246959.png","slug":"image-20211201165246959.png","post":"clb4gsrcr000z1gzuaek6fhi3","modified":0,"renderable":0},{"_id":"source/_posts/CN-4/image-20211206080908048-1649432396057.png","slug":"image-20211206080908048-1649432396057.png","post":"clb4gsrcw001a1gzu8qcrhnpn","modified":0,"renderable":0},{"_id":"source/_posts/CN-4/image-20211206080908048.png","slug":"image-20211206080908048.png","post":"clb4gsrcw001a1gzu8qcrhnpn","modified":0,"renderable":0},{"_id":"source/_posts/CN-4/image-20211206080928415-1649432396057.png","slug":"image-20211206080928415-1649432396057.png","post":"clb4gsrcw001a1gzu8qcrhnpn","modified":0,"renderable":0},{"_id":"source/_posts/CN-4/image-20211206080928415.png","slug":"image-20211206080928415.png","post":"clb4gsrcw001a1gzu8qcrhnpn","modified":0,"renderable":0},{"_id":"source/_posts/CN-4/image-20211206080942577-1649432396057.png","slug":"image-20211206080942577-1649432396057.png","post":"clb4gsrcw001a1gzu8qcrhnpn","modified":0,"renderable":0},{"_id":"source/_posts/CN-4/image-20211206080942577.png","slug":"image-20211206080942577.png","post":"clb4gsrcw001a1gzu8qcrhnpn","modified":0,"renderable":0},{"_id":"source/_posts/CN-2/image-20211204114107336.png","slug":"image-20211204114107336.png","post":"clb4gsrcs00131gzuh5iyabrr","modified":0,"renderable":0},{"_id":"source/_posts/CN-2/image-20211204114128703.png","slug":"image-20211204114128703.png","post":"clb4gsrcs00131gzuh5iyabrr","modified":0,"renderable":0},{"_id":"source/_posts/CN-2/image-20211204114150471.png","slug":"image-20211204114150471.png","post":"clb4gsrcs00131gzuh5iyabrr","modified":0,"renderable":0},{"_id":"source/_posts/CN-2/image-20211210170210391.png","slug":"image-20211210170210391.png","post":"clb4gsrcs00131gzuh5iyabrr","modified":0,"renderable":0},{"_id":"source/_posts/CN-2/image-20211210171011761.png","slug":"image-20211210171011761.png","post":"clb4gsrcs00131gzuh5iyabrr","modified":0,"renderable":0},{"_id":"source/_posts/CN-5/image-20211211152352560.png","slug":"image-20211211152352560.png","post":"clb4gsrcx001d1gzucalp3yvh","modified":0,"renderable":0},{"_id":"source/_posts/CN-5/image-20211211154556832.png","slug":"image-20211211154556832.png","post":"clb4gsrcx001d1gzucalp3yvh","modified":0,"renderable":0},{"_id":"source/_posts/CN-5/image-20211211154616223.png","slug":"image-20211211154616223.png","post":"clb4gsrcx001d1gzucalp3yvh","modified":0,"renderable":0},{"_id":"source/_posts/CN-5/image-20211211154625242.png","slug":"image-20211211154625242.png","post":"clb4gsrcx001d1gzucalp3yvh","modified":0,"renderable":0},{"_id":"source/_posts/CN-5/image-20211211154842458.png","slug":"image-20211211154842458.png","post":"clb4gsrcx001d1gzucalp3yvh","modified":0,"renderable":0},{"_id":"source/_posts/CN-3/image-20211205153141538.png","slug":"image-20211205153141538.png","post":"clb4gsrcu00171gzuaj9jbsgt","modified":0,"renderable":0},{"_id":"source/_posts/CN-3/image-20211205153202429.png","slug":"image-20211205153202429.png","post":"clb4gsrcu00171gzuaj9jbsgt","modified":0,"renderable":0},{"_id":"source/_posts/CN-3/image-20211205153214433.png","slug":"image-20211205153214433.png","post":"clb4gsrcu00171gzuaj9jbsgt","modified":0,"renderable":0},{"_id":"source/_posts/CN-3/image-20211205153227168.png","slug":"image-20211205153227168.png","post":"clb4gsrcu00171gzuaj9jbsgt","modified":0,"renderable":0},{"_id":"source/_posts/CN-3/image-20211205162300456.png","slug":"image-20211205162300456.png","post":"clb4gsrcu00171gzuaj9jbsgt","modified":0,"renderable":0},{"_id":"source/_posts/CN-3/image-20211205165352723.png","slug":"image-20211205165352723.png","post":"clb4gsrcu00171gzuaj9jbsgt","modified":0,"renderable":0},{"_id":"source/_posts/CN-3/image-20211205174403372.png","slug":"image-20211205174403372.png","post":"clb4gsrcu00171gzuaj9jbsgt","modified":0,"renderable":0},{"_id":"source/_posts/CN-3/image-20211205174543073.png","slug":"image-20211205174543073.png","post":"clb4gsrcu00171gzuaj9jbsgt","modified":0,"renderable":0},{"_id":"source/_posts/CN-6/image-20211207025902517.png","slug":"image-20211207025902517.png","post":"clb4gsrcz001f1gzu77e2gh38","modified":0,"renderable":0},{"_id":"source/_posts/CUDA-install/image-20220718135714318-1663410937840-3.png","slug":"image-20220718135714318-1663410937840-3.png","post":"clb4gsrd2001k1gzuhf9zfl09","modified":0,"renderable":0},{"_id":"source/_posts/CUDA-install/image-20220718135746089-1663410928185-1.png","slug":"image-20220718135746089-1663410928185-1.png","post":"clb4gsrd2001k1gzuhf9zfl09","modified":0,"renderable":0},{"_id":"source/_posts/CUDA-install/image-20220718135833425-1663410950886-5.png","slug":"image-20220718135833425-1663410950886-5.png","post":"clb4gsrd2001k1gzuhf9zfl09","modified":0,"renderable":0},{"_id":"source/_posts/CUDA-install/image-20220718135956517-1663410961962-7.png","slug":"image-20220718135956517-1663410961962-7.png","post":"clb4gsrd2001k1gzuhf9zfl09","modified":0,"renderable":0},{"_id":"source/_posts/CUDA-install/image-20220718160333419-1663410975368-9.png","slug":"image-20220718160333419-1663410975368-9.png","post":"clb4gsrd2001k1gzuhf9zfl09","modified":0,"renderable":0},{"_id":"source/_posts/CUDA-install/image-20220718160419835-1663410988631-11.png","slug":"image-20220718160419835-1663410988631-11.png","post":"clb4gsrd2001k1gzuhf9zfl09","modified":0,"renderable":0},{"_id":"source/_posts/Graph-search/image-1.png","slug":"image-1.png","post":"clb4gsrd5001r1gzucc64d1fx","modified":0,"renderable":0},{"_id":"source/_posts/Graph-search/image-2.png","slug":"image-2.png","post":"clb4gsrd5001r1gzucc64d1fx","modified":0,"renderable":0},{"_id":"source/_posts/Graph-search/image-3.png","slug":"image-3.png","post":"clb4gsrd5001r1gzucc64d1fx","modified":0,"renderable":0},{"_id":"source/_posts/Graph-search/v2-4a4d37df348f283649e2aecc74d959b5_720w.jpg","slug":"v2-4a4d37df348f283649e2aecc74d959b5_720w.jpg","post":"clb4gsrd5001r1gzucc64d1fx","modified":0,"renderable":0},{"_id":"source/_posts/Graph-search/v2-9e2643ca5d96f86a391c36de4d3bd48d_720w.jpg","slug":"v2-9e2643ca5d96f86a391c36de4d3bd48d_720w.jpg","post":"clb4gsrd5001r1gzucc64d1fx","modified":0,"renderable":0},{"_id":"source/_posts/Hexo-synchronization/image-20220310172557250.png","slug":"image-20220310172557250.png","post":"clb4gsrd6001u1gzu5oaeg655","modified":0,"renderable":0},{"_id":"source/_posts/Hexo-synchronization/image-20220315180411753.png","slug":"image-20220315180411753.png","post":"clb4gsrd6001u1gzu5oaeg655","modified":0,"renderable":0},{"_id":"source/_posts/Hexo-synchronization/image-20220516171510709.png","slug":"image-20220516171510709.png","post":"clb4gsrd6001u1gzu5oaeg655","modified":0,"renderable":0},{"_id":"source/_posts/Hexo-synchronization/Screenshot 2022-03-08 161552.png","slug":"Screenshot 2022-03-08 161552.png","post":"clb4gsrd6001u1gzu5oaeg655","modified":0,"renderable":0},{"_id":"source/_posts/Hexo_article/2d6f869662e83398f06070e2a14f838.jpg","slug":"2d6f869662e83398f06070e2a14f838.jpg","post":"clb4gsrd7001y1gzu7zj4a3hk","modified":0,"renderable":0},{"_id":"source/_posts/Hexo_article/884019afce82603bd8bc8fd4e531839.jpg","slug":"884019afce82603bd8bc8fd4e531839.jpg","post":"clb4gsrd7001y1gzu7zj4a3hk","modified":0,"renderable":0},{"_id":"source/_posts/Hexo_article/image-20220308162506034.png","slug":"image-20220308162506034.png","post":"clb4gsrd7001y1gzu7zj4a3hk","modified":0,"renderable":0},{"_id":"source/_posts/Hexo_article/image-20220308162715529.png","slug":"image-20220308162715529.png","post":"clb4gsrd7001y1gzu7zj4a3hk","modified":0,"renderable":0},{"_id":"source/_posts/Hexo_article/IMG_1479.jpg","slug":"IMG_1479.jpg","post":"clb4gsrd7001y1gzu7zj4a3hk","modified":0,"renderable":0},{"_id":"source/_posts/Hexo_article/traffic-light.gif","slug":"traffic-light.gif","post":"clb4gsrd7001y1gzu7zj4a3hk","modified":0,"renderable":0},{"_id":"source/_posts/Hexo_creation/image-20220308165404552.png","slug":"image-20220308165404552.png","post":"clb4gsrd800201gzu4mc93iz5","modified":0,"renderable":0},{"_id":"source/_posts/Hexo_creation/image-20220308165502809.png","slug":"image-20220308165502809.png","post":"clb4gsrd800201gzu4mc93iz5","modified":0,"renderable":0},{"_id":"source/_posts/IPsec/image-20220408173945688.png","slug":"image-20220408173945688.png","post":"clb4gsrd900241gzu7a8l7tuo","modified":0,"renderable":0},{"_id":"source/_posts/IPsec/image-20220408182745880.png","slug":"image-20220408182745880.png","post":"clb4gsrd900241gzu7a8l7tuo","modified":0,"renderable":0},{"_id":"source/_posts/IPsec/image-20220408182806622.png","slug":"image-20220408182806622.png","post":"clb4gsrd900241gzu7a8l7tuo","modified":0,"renderable":0},{"_id":"source/_posts/IPsec/image-20220408182806757.png","slug":"image-20220408182806757.png","post":"clb4gsrd900241gzu7a8l7tuo","modified":0,"renderable":0},{"_id":"source/_posts/IPsec/image-20220408182852006.png","slug":"image-20220408182852006.png","post":"clb4gsrd900241gzu7a8l7tuo","modified":0,"renderable":0},{"_id":"source/_posts/IPsec/image-20220408182902202.png","slug":"image-20220408182902202.png","post":"clb4gsrd900241gzu7a8l7tuo","modified":0,"renderable":0},{"_id":"source/_posts/IPsec/image-20220408183423694.png","slug":"image-20220408183423694.png","post":"clb4gsrd900241gzu7a8l7tuo","modified":0,"renderable":0},{"_id":"source/_posts/IPsec/image-20220408183817734.png","slug":"image-20220408183817734.png","post":"clb4gsrd900241gzu7a8l7tuo","modified":0,"renderable":0},{"_id":"source/_posts/KPM-algorithm/image-20220415153721845.png","slug":"image-20220415153721845.png","post":"clb4gsrda00271gzu573s2snt","modified":0,"renderable":0},{"_id":"source/_posts/PERT/image-20210926121305734.png","slug":"image-20210926121305734.png","post":"clb4gsrdc002c1gzu97no6fg3","modified":0,"renderable":0},{"_id":"source/_posts/PERT/image-20210926121433312.png","slug":"image-20210926121433312.png","post":"clb4gsrdc002c1gzu97no6fg3","modified":0,"renderable":0},{"_id":"source/_posts/PERT/image-20210926121452437.png","slug":"image-20210926121452437.png","post":"clb4gsrdc002c1gzu97no6fg3","modified":0,"renderable":0},{"_id":"source/_posts/PERT/image-20210926121557824.png","slug":"image-20210926121557824.png","post":"clb4gsrdc002c1gzu97no6fg3","modified":0,"renderable":0},{"_id":"source/_posts/PERT/image-20210926125842698.png","slug":"image-20210926125842698.png","post":"clb4gsrdc002c1gzu97no6fg3","modified":0,"renderable":0},{"_id":"source/_posts/Python-WordCloud/haha-1667472516501-1-1667473201885-3.png","slug":"haha-1667472516501-1-1667473201885-3.png","post":"clb4gsrdd002f1gzu0at40ryf","modified":0,"renderable":0},{"_id":"source/_posts/Python-WordCloud/haha.png","slug":"haha.png","post":"clb4gsrdd002f1gzu0at40ryf","modified":0,"renderable":0},{"_id":"source/_posts/Python-WordCloud/photo2.jpg","slug":"photo2.jpg","post":"clb4gsrdd002f1gzu0at40ryf","modified":0,"renderable":0},{"_id":"source/_posts/R2S_build/image-1.png","slug":"image-1.png","post":"clb4gsrdf002l1gzu7rol697e","modified":0,"renderable":0},{"_id":"source/_posts/R2S_build/image-10.png","slug":"image-10.png","post":"clb4gsrdf002l1gzu7rol697e","modified":0,"renderable":0},{"_id":"source/_posts/R2S_build/image-2-1024x507.png","slug":"image-2-1024x507.png","post":"clb4gsrdf002l1gzu7rol697e","modified":0,"renderable":0},{"_id":"source/_posts/R2S_build/image-20220305212846426.png","slug":"image-20220305212846426.png","post":"clb4gsrdf002l1gzu7rol697e","modified":0,"renderable":0},{"_id":"source/_posts/R2S_build/image-3-1024x485.png","slug":"image-3-1024x485.png","post":"clb4gsrdf002l1gzu7rol697e","modified":0,"renderable":0},{"_id":"source/_posts/R2S_build/image-5.png","slug":"image-5.png","post":"clb4gsrdf002l1gzu7rol697e","modified":0,"renderable":0},{"_id":"source/_posts/R2S_build/image-7.png","slug":"image-7.png","post":"clb4gsrdf002l1gzu7rol697e","modified":0,"renderable":0},{"_id":"source/_posts/R2S_build/image-8.png","slug":"image-8.png","post":"clb4gsrdf002l1gzu7rol697e","modified":0,"renderable":0},{"_id":"source/_posts/R2S_build/image-9-1024x194.png","slug":"image-9-1024x194.png","post":"clb4gsrdf002l1gzu7rol697e","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/b6b59519626c1efe2aa367207f45ce83.mp4","slug":"b6b59519626c1efe2aa367207f45ce83.mp4","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/Center.png","slug":"Center.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 125830-16520802827714.png","slug":"Screenshot 2022-05-09 125830-16520802827714.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 125830.png","slug":"Screenshot 2022-05-09 125830.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 130023.png","slug":"Screenshot 2022-05-09 130023.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 130051.png","slug":"Screenshot 2022-05-09 130051.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 130125.png","slug":"Screenshot 2022-05-09 130125.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 130159.png","slug":"Screenshot 2022-05-09 130159.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 130250.png","slug":"Screenshot 2022-05-09 130250.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 131459.png","slug":"Screenshot 2022-05-09 131459.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/Screenshot 2022-05-09 131527.png","slug":"Screenshot 2022-05-09 131527.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70-16520801218142.png","slug":"watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70-16520801218142.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/STM32-Introduction/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70.png","slug":"watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L05haXN1X2t1bg==,size_16,color_FFFFFF,t_70.png","post":"clb4gsrdg002p1gzu04yne0c8","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/1`SS$TH[EI4{J1_I]9]L`EY.png","slug":"1`SS$TH[EI4{J1_I]9]L`EY.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722135753076.png","slug":"image-20220722135753076.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722141130992.png","slug":"image-20220722141130992.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722141252367.png","slug":"image-20220722141252367.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722141736616.png","slug":"image-20220722141736616.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722142107169.png","slug":"image-20220722142107169.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722142150620.png","slug":"image-20220722142150620.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722142444023.png","slug":"image-20220722142444023.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722144502752.png","slug":"image-20220722144502752.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722145541034.png","slug":"image-20220722145541034.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722152550108.png","slug":"image-20220722152550108.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/image-20220722154032582-165847602920414.png","slug":"image-20220722154032582-165847602920414.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/QQ图片20220722134623.jpg","slug":"QQ图片20220722134623.jpg","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/python-environment/U0I112981_%MPSVS4CXL8BF.png","slug":"U0I112981_%MPSVS4CXL8BF.png","post":"clb4gsrdi002x1gzu8h920lxy","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_1/2-1Q226195949495.gif","slug":"2-1Q226195949495.gif","post":"clb4gsrdg002s1gzucdew5ti9","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_1/2-1Q226195I0M1.gif","slug":"2-1Q226195I0M1.gif","post":"clb4gsrdg002s1gzucdew5ti9","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_1/2-1Q22R035341H.gif","slug":"2-1Q22R035341H.gif","post":"clb4gsrdg002s1gzucdew5ti9","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_1/image.png","slug":"image.png","post":"clb4gsrdg002s1gzucdew5ti9","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_1/v2-0ccba83c7b3dbf7b89964c04021025d9_720w.jpg","slug":"v2-0ccba83c7b3dbf7b89964c04021025d9_720w.jpg","post":"clb4gsrdg002s1gzucdew5ti9","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_2/false example-16473330373123.png","slug":"false example-16473330373123.png","post":"clb4gsrdi00301gzu5f8g33qm","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_2/false example.png","slug":"false example.png","post":"clb4gsrdi00301gzu5f8g33qm","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_2/image.png","slug":"image.png","post":"clb4gsrdi00301gzu5f8g33qm","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_2/tree1.jpg","slug":"tree1.jpg","post":"clb4gsrdi00301gzu5f8g33qm","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_2/tree2.jpg","slug":"tree2.jpg","post":"clb4gsrdi00301gzu5f8g33qm","modified":0,"renderable":0},{"_id":"source/_posts/binary_tree_2/true example.png","slug":"true example.png","post":"clb4gsrdi00301gzu5f8g33qm","modified":0,"renderable":0},{"_id":"source/_posts/socket-multi-1/image-20221111145514251.png","slug":"image-20221111145514251.png","post":"clb4gsrdu00341gzufmsc7qqq","modified":0,"renderable":0},{"_id":"source/_posts/socket-multi-1/image-20221201103211709.png","slug":"image-20221201103211709.png","post":"clb4gsrdu00341gzufmsc7qqq","modified":0,"renderable":0},{"_id":"source/_posts/socket-multi-2/image-20221201102754586.png","slug":"image-20221201102754586.png","post":"clb4gsrdw00361gzu9tfy6ljn","modified":0,"renderable":0},{"_id":"source/_posts/socket-program-2/image-20221012143117864.png","slug":"image-20221012143117864.png","post":"clb4gsrdz003d1gzub3ol43lx","modified":0,"renderable":0},{"_id":"source/_posts/socket-program-2/image-20221012143810496.png","slug":"image-20221012143810496.png","post":"clb4gsrdz003d1gzub3ol43lx","modified":0,"renderable":0},{"_id":"source/_posts/socket-program-3/image-20221013181230269.png","slug":"image-20221013181230269.png","post":"clb4gsre0003i1gzu0wcwfbew","modified":0,"renderable":0}],"PostCategory":[{"post_id":"clb4gsrbx00011gzu80py59yk","category_id":"clb4gsrc300041gzud3jdecnh","_id":"clb4gsrcc000f1gzufmve8jtd"},{"post_id":"clb4gsrc500071gzug3voay8i","category_id":"clb4gsrc9000a1gzud0h8hjrf","_id":"clb4gsrce000k1gzu0p93bits"},{"post_id":"clb4gsrcc000i1gzua9uvb3fj","category_id":"clb4gsrcc000g1gzu7bwy13ed","_id":"clb4gsrck000q1gzub7wa1khr"},{"post_id":"clb4gsrc700081gzucr9381zo","category_id":"clb4gsrcc000g1gzu7bwy13ed","_id":"clb4gsrcn000v1gzu4520f9ku"},{"post_id":"clb4gsrcd000j1gzu9rodet3w","category_id":"clb4gsrcc000g1gzu7bwy13ed","_id":"clb4gsrcq000x1gzua52u350g"},{"post_id":"clb4gsrcg000n1gzu9bco3cx1","category_id":"clb4gsrcc000g1gzu7bwy13ed","_id":"clb4gsrcs00101gzugelj3zi5"},{"post_id":"clb4gsrc800091gzu43xg12n2","category_id":"clb4gsrcc000g1gzu7bwy13ed","_id":"clb4gsrct00141gzu9tcx1al5"},{"post_id":"clb4gsrca000d1gzubfw44a9v","category_id":"clb4gsrcc000g1gzu7bwy13ed","_id":"clb4gsrcv00181gzuh5kp30n7"},{"post_id":"clb4gsrcb000e1gzu19wu5ja4","category_id":"clb4gsrcc000g1gzu7bwy13ed","_id":"clb4gsrcx001b1gzuddkl84mn"},{"post_id":"clb4gsrcj000p1gzuczlj2efk","category_id":"clb4gsrct00151gzuenqh8pca","_id":"clb4gsrd0001h1gzufkjo3mta"},{"post_id":"clb4gsrcm000u1gzu5yohbljy","category_id":"clb4gsrct00151gzuenqh8pca","_id":"clb4gsrd4001n1gzuayv65hph"},{"post_id":"clb4gsrd0001i1gzubidcgxs8","category_id":"clb4gsrc9000a1gzud0h8hjrf","_id":"clb4gsrd6001s1gzu6reqajum"},{"post_id":"clb4gsrcn000w1gzu4vyva5gp","category_id":"clb4gsrct00151gzuenqh8pca","_id":"clb4gsrd7001v1gzu7h5zf67e"},{"post_id":"clb4gsrd2001k1gzuhf9zfl09","category_id":"clb4gsrc9000a1gzud0h8hjrf","_id":"clb4gsrd8001z1gzug65j7cge"},{"post_id":"clb4gsrd4001o1gzu6rr0ehb1","category_id":"clb4gsrct00151gzuenqh8pca","_id":"clb4gsrd900211gzu0llchocp"},{"post_id":"clb4gsrd5001r1gzucc64d1fx","category_id":"clb4gsrct00151gzuenqh8pca","_id":"clb4gsrda00251gzu5drv78mj"},{"post_id":"clb4gsrcr000z1gzuaek6fhi3","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsrdb00281gzuaf5t99j5"},{"post_id":"clb4gsrcs00131gzuh5iyabrr","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsrdc002d1gzugu1d73l4"},{"post_id":"clb4gsrd900241gzu7a8l7tuo","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsrdd002g1gzucga5bd7n"},{"post_id":"clb4gsrcu00171gzuaj9jbsgt","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsrde002k1gzu7rgia6bf"},{"post_id":"clb4gsrda00271gzu573s2snt","category_id":"clb4gsrct00151gzuenqh8pca","_id":"clb4gsrdf002m1gzu133246wp"},{"post_id":"clb4gsrdc002c1gzu97no6fg3","category_id":"clb4gsrct00151gzuenqh8pca","_id":"clb4gsrdg002q1gzuatuu8s4h"},{"post_id":"clb4gsrcw001a1gzu8qcrhnpn","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsrdh002t1gzuhzbthksi"},{"post_id":"clb4gsrdd002f1gzu0at40ryf","category_id":"clb4gsrc9000a1gzud0h8hjrf","_id":"clb4gsrdi002y1gzu2t1h6b9o"},{"post_id":"clb4gsrde002j1gzu34xr26pn","category_id":"clb4gsrc9000a1gzud0h8hjrf","_id":"clb4gsrdt00311gzu256p88zl"},{"post_id":"clb4gsrcx001d1gzucalp3yvh","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsrdv00351gzu8zf6b7b8"},{"post_id":"clb4gsrdf002l1gzu7rol697e","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsrdw00371gzu45wnhyqa"},{"post_id":"clb4gsrcz001f1gzu77e2gh38","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsrdx003b1gzu3ywh0g2i"},{"post_id":"clb4gsrdg002s1gzucdew5ti9","category_id":"clb4gsrct00151gzuenqh8pca","_id":"clb4gsrdz003e1gzua7t9b0pu"},{"post_id":"clb4gsrd6001u1gzu5oaeg655","category_id":"clb4gsrdh002u1gzuapf7dd3l","_id":"clb4gsre1003j1gzuh8mhb89m"},{"post_id":"clb4gsrdi00301gzu5f8g33qm","category_id":"clb4gsrct00151gzuenqh8pca","_id":"clb4gsre1003l1gzuc4gk4f9j"},{"post_id":"clb4gsrdu00341gzufmsc7qqq","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsre2003o1gzudsso6ory"},{"post_id":"clb4gsrd7001y1gzu7zj4a3hk","category_id":"clb4gsrdh002u1gzuapf7dd3l","_id":"clb4gsre2003p1gzuhp7fdewo"},{"post_id":"clb4gsrdw00361gzu9tfy6ljn","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsre3003r1gzufq3aenn7"},{"post_id":"clb4gsrdx003a1gzu72mr5dq0","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsre3003t1gzuhfne0ozb"},{"post_id":"clb4gsrd800201gzu4mc93iz5","category_id":"clb4gsrdh002u1gzuapf7dd3l","_id":"clb4gsre3003w1gzug6o6405u"},{"post_id":"clb4gsrdz003d1gzub3ol43lx","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsre3003y1gzub18p9xb4"},{"post_id":"clb4gsre0003i1gzu0wcwfbew","category_id":"clb4gsrd4001m1gzu7gp8d4eo","_id":"clb4gsre400401gzufiwrfmdg"},{"post_id":"clb4gsrdg002p1gzu04yne0c8","category_id":"clb4gsre0003f1gzuei9z1r1p","_id":"clb4gsre400411gzu8h999w2s"},{"post_id":"clb4gsrdi002x1gzu8h920lxy","category_id":"clb4gsre2003m1gzuh8g3fiat","_id":"clb4gsre400431gzu1jk4d6b2"}],"PostTag":[{"post_id":"clb4gsrbx00011gzu80py59yk","tag_id":"clb4gsrc500051gzu7kl7a3wn","_id":"clb4gsrca000c1gzugm2z4pz5"},{"post_id":"clb4gsrc100031gzudxvfd40f","tag_id":"clb4gsrc9000b1gzue0vg02p0","_id":"clb4gsrci000o1gzu9lw6eb3s"},{"post_id":"clb4gsrc100031gzudxvfd40f","tag_id":"clb4gsrcc000h1gzug9jv3q0e","_id":"clb4gsrck000r1gzualq9d3y5"},{"post_id":"clb4gsrc500071gzug3voay8i","tag_id":"clb4gsrce000m1gzu9yysck8c","_id":"clb4gsrcs00121gzuaaymdfi6"},{"post_id":"clb4gsrc500071gzug3voay8i","tag_id":"clb4gsrcl000t1gzu2mgmfysf","_id":"clb4gsrcu00161gzu4tf7hu52"},{"post_id":"clb4gsrc700081gzucr9381zo","tag_id":"clb4gsrcs00111gzuh6ee0uca","_id":"clb4gsrd3001l1gzuc5ys6pbp"},{"post_id":"clb4gsrc700081gzucr9381zo","tag_id":"clb4gsrcv00191gzu1nbfdwcm","_id":"clb4gsrd5001p1gzubtl43dot"},{"post_id":"clb4gsrc700081gzucr9381zo","tag_id":"clb4gsrcy001e1gzu31tg9lqd","_id":"clb4gsrd6001t1gzu9mdzfn1x"},{"post_id":"clb4gsrc800091gzu43xg12n2","tag_id":"clb4gsrcs00111gzuh6ee0uca","_id":"clb4gsrda00261gzu4aiifl8b"},{"post_id":"clb4gsrc800091gzu43xg12n2","tag_id":"clb4gsrcv00191gzu1nbfdwcm","_id":"clb4gsrdb002a1gzu6redfym5"},{"post_id":"clb4gsrc800091gzu43xg12n2","tag_id":"clb4gsrcy001e1gzu31tg9lqd","_id":"clb4gsrdc002e1gzu0g3bak1s"},{"post_id":"clb4gsrca000d1gzubfw44a9v","tag_id":"clb4gsrcs00111gzuh6ee0uca","_id":"clb4gsrdg002r1gzu78gffk0v"},{"post_id":"clb4gsrca000d1gzubfw44a9v","tag_id":"clb4gsrcv00191gzu1nbfdwcm","_id":"clb4gsrdh002v1gzu13ti5r0b"},{"post_id":"clb4gsrca000d1gzubfw44a9v","tag_id":"clb4gsrcy001e1gzu31tg9lqd","_id":"clb4gsrdi002z1gzugvfddnkb"},{"post_id":"clb4gsrcb000e1gzu19wu5ja4","tag_id":"clb4gsrcs00111gzuh6ee0uca","_id":"clb4gsrdz003c1gzuds0333bg"},{"post_id":"clb4gsrcb000e1gzu19wu5ja4","tag_id":"clb4gsrcv00191gzu1nbfdwcm","_id":"clb4gsre0003g1gzu4y50aml7"},{"post_id":"clb4gsrcb000e1gzu19wu5ja4","tag_id":"clb4gsrcy001e1gzu31tg9lqd","_id":"clb4gsre1003k1gzue41u8ya7"},{"post_id":"clb4gsrcc000i1gzua9uvb3fj","tag_id":"clb4gsrcs00111gzuh6ee0uca","_id":"clb4gsre3003s1gzud5fybksn"},{"post_id":"clb4gsrcc000i1gzua9uvb3fj","tag_id":"clb4gsrcv00191gzu1nbfdwcm","_id":"clb4gsre3003u1gzu5z362bp1"},{"post_id":"clb4gsrcc000i1gzua9uvb3fj","tag_id":"clb4gsrcy001e1gzu31tg9lqd","_id":"clb4gsre3003x1gzu6zy57yri"},{"post_id":"clb4gsrcd000j1gzu9rodet3w","tag_id":"clb4gsrcs00111gzuh6ee0uca","_id":"clb4gsre400441gzu6hfk55qr"},{"post_id":"clb4gsrcd000j1gzu9rodet3w","tag_id":"clb4gsrcv00191gzu1nbfdwcm","_id":"clb4gsre400451gzu9b3gbubk"},{"post_id":"clb4gsrcd000j1gzu9rodet3w","tag_id":"clb4gsrcy001e1gzu31tg9lqd","_id":"clb4gsre500471gzufrw61akl"},{"post_id":"clb4gsrcg000n1gzu9bco3cx1","tag_id":"clb4gsrcs00111gzuh6ee0uca","_id":"clb4gsre5004a1gzu2pym2zqx"},{"post_id":"clb4gsrcg000n1gzu9bco3cx1","tag_id":"clb4gsrcv00191gzu1nbfdwcm","_id":"clb4gsre6004b1gzu3nbohrsf"},{"post_id":"clb4gsrcg000n1gzu9bco3cx1","tag_id":"clb4gsrcy001e1gzu31tg9lqd","_id":"clb4gsre6004d1gzuhau420cj"},{"post_id":"clb4gsrcj000p1gzuczlj2efk","tag_id":"clb4gsrc9000b1gzue0vg02p0","_id":"clb4gsre6004e1gzufrea74ud"},{"post_id":"clb4gsrcj000p1gzuczlj2efk","tag_id":"clb4gsrcc000h1gzug9jv3q0e","_id":"clb4gsre6004g1gzu4ghk4h4l"},{"post_id":"clb4gsrcj000p1gzuczlj2efk","tag_id":"clb4gsre500491gzuhawf8f6v","_id":"clb4gsre6004h1gzu2ehr16m9"},{"post_id":"clb4gsrcm000u1gzu5yohbljy","tag_id":"clb4gsrc9000b1gzue0vg02p0","_id":"clb4gsre6004j1gzu62gm2vwc"},{"post_id":"clb4gsrcm000u1gzu5yohbljy","tag_id":"clb4gsre6004c1gzu929m4rhs","_id":"clb4gsre6004k1gzufg8k7jlx"},{"post_id":"clb4gsrcm000u1gzu5yohbljy","tag_id":"clb4gsre6004f1gzu7m2j1qbz","_id":"clb4gsre7004m1gzu9nmx0rok"},{"post_id":"clb4gsrcn000w1gzu4vyva5gp","tag_id":"clb4gsrc9000b1gzue0vg02p0","_id":"clb4gsre7004o1gzu04aw9q7u"},{"post_id":"clb4gsrcn000w1gzu4vyva5gp","tag_id":"clb4gsre6004i1gzu5gav44a7","_id":"clb4gsre7004p1gzubjxxe7mb"},{"post_id":"clb4gsrcn000w1gzu4vyva5gp","tag_id":"clb4gsre6004l1gzu6nukcc0e","_id":"clb4gsre7004r1gzud39yfgpa"},{"post_id":"clb4gsrcr000z1gzuaek6fhi3","tag_id":"clb4gsre7004n1gzuh2rahe3r","_id":"clb4gsre7004s1gzu5f5k3bsd"},{"post_id":"clb4gsrcs00131gzuh5iyabrr","tag_id":"clb4gsre7004n1gzuh2rahe3r","_id":"clb4gsre7004u1gzu3ftvayqd"},{"post_id":"clb4gsrcu00171gzuaj9jbsgt","tag_id":"clb4gsre7004n1gzuh2rahe3r","_id":"clb4gsre8004w1gzu2x1o1icr"},{"post_id":"clb4gsrcw001a1gzu8qcrhnpn","tag_id":"clb4gsre7004n1gzuh2rahe3r","_id":"clb4gsre8004y1gzu2paw82da"},{"post_id":"clb4gsrcx001d1gzucalp3yvh","tag_id":"clb4gsre7004n1gzuh2rahe3r","_id":"clb4gsre800501gzu8wol55og"},{"post_id":"clb4gsrcz001f1gzu77e2gh38","tag_id":"clb4gsre7004n1gzuh2rahe3r","_id":"clb4gsre800521gzuat2ff3al"},{"post_id":"clb4gsrd0001i1gzubidcgxs8","tag_id":"clb4gsre800511gzu2wyp95kr","_id":"clb4gsre900541gzu2k2j8l69"},{"post_id":"clb4gsrd2001k1gzuhf9zfl09","tag_id":"clb4gsre800531gzu3500ak14","_id":"clb4gsre900561gzu22xqb4e2"},{"post_id":"clb4gsrd2001k1gzuhf9zfl09","tag_id":"clb4gsrcl000t1gzu2mgmfysf","_id":"clb4gsre900571gzu4r5ldh2s"},{"post_id":"clb4gsrd4001o1gzu6rr0ehb1","tag_id":"clb4gsrc9000b1gzue0vg02p0","_id":"clb4gsre900591gzu3gzn3z5a"},{"post_id":"clb4gsrd4001o1gzu6rr0ehb1","tag_id":"clb4gsre500491gzuhawf8f6v","_id":"clb4gsre9005a1gzu8oiqb95a"},{"post_id":"clb4gsrd5001r1gzucc64d1fx","tag_id":"clb4gsrc9000b1gzue0vg02p0","_id":"clb4gsrea005d1gzu7mfi5tfb"},{"post_id":"clb4gsrd5001r1gzucc64d1fx","tag_id":"clb4gsre900581gzu1iaze3xl","_id":"clb4gsrea005e1gzufj2datgw"},{"post_id":"clb4gsrd5001r1gzucc64d1fx","tag_id":"clb4gsre500491gzuhawf8f6v","_id":"clb4gsrea005g1gzu63a2e7l2"},{"post_id":"clb4gsrd5001r1gzucc64d1fx","tag_id":"clb4gsrcc000h1gzug9jv3q0e","_id":"clb4gsrea005h1gzu4on39u7d"},{"post_id":"clb4gsrd6001u1gzu5oaeg655","tag_id":"clb4gsre9005c1gzu35s21yua","_id":"clb4gsrea005j1gzuf3pmdpr5"},{"post_id":"clb4gsrd7001y1gzu7zj4a3hk","tag_id":"clb4gsre9005c1gzu35s21yua","_id":"clb4gsrea005k1gzu4trlcdef"},{"post_id":"clb4gsrd800201gzu4mc93iz5","tag_id":"clb4gsre9005c1gzu35s21yua","_id":"clb4gsreb005m1gzua0aa4vtu"},{"post_id":"clb4gsrd900241gzu7a8l7tuo","tag_id":"clb4gsrea005l1gzuhicx0zq6","_id":"clb4gsreb005q1gzuhhki050g"},{"post_id":"clb4gsrd900241gzu7a8l7tuo","tag_id":"clb4gsreb005n1gzu1utyc6o9","_id":"clb4gsreb005r1gzu7xk8b80k"},{"post_id":"clb4gsrd900241gzu7a8l7tuo","tag_id":"clb4gsreb005o1gzu67fq61tw","_id":"clb4gsreb005t1gzuh92m3adg"},{"post_id":"clb4gsrda00271gzu573s2snt","tag_id":"clb4gsreb005p1gzu2d948rtc","_id":"clb4gsrec005u1gzu3h4ec54f"},{"post_id":"clb4gsrda00271gzu573s2snt","tag_id":"clb4gsrc9000b1gzue0vg02p0","_id":"clb4gsrec005w1gzu5q7gd3vk"},{"post_id":"clb4gsrdc002c1gzu97no6fg3","tag_id":"clb4gsrc9000b1gzue0vg02p0","_id":"clb4gsrec005x1gzu7x3mar69"},{"post_id":"clb4gsrdc002c1gzu97no6fg3","tag_id":"clb4gsreb005s1gzu2gwj4cbx","_id":"clb4gsrec005z1gzudbd5bjkg"},{"post_id":"clb4gsrdd002f1gzu0at40ryf","tag_id":"clb4gsrcl000t1gzu2mgmfysf","_id":"clb4gsred00601gzudesjeu8a"},{"post_id":"clb4gsrdd002f1gzu0at40ryf","tag_id":"clb4gsrec005v1gzufxs79kks","_id":"clb4gsred00611gzu87df98i3"},{"post_id":"clb4gsrde002j1gzu34xr26pn","tag_id":"clb4gsrec005y1gzu9u86h1r0","_id":"clb4gsred00631gzu5pmgcht9"},{"post_id":"clb4gsrde002j1gzu34xr26pn","tag_id":"clb4gsrcl000t1gzu2mgmfysf","_id":"clb4gsred00641gzude5eauxg"},{"post_id":"clb4gsrdf002l1gzu7rol697e","tag_id":"clb4gsred00621gzu0shx9fpx","_id":"clb4gsree00691gzu6s9tgcdj"},{"post_id":"clb4gsrdf002l1gzu7rol697e","tag_id":"clb4gsreb005o1gzu67fq61tw","_id":"clb4gsree006a1gzugtb9f3tz"},{"post_id":"clb4gsrdf002l1gzu7rol697e","tag_id":"clb4gsred00661gzu6c2uf09b","_id":"clb4gsree006c1gzu39mj6cay"},{"post_id":"clb4gsrdf002l1gzu7rol697e","tag_id":"clb4gsred00671gzue3fj6i2h","_id":"clb4gsree006d1gzub6hf44v0"},{"post_id":"clb4gsrdg002p1gzu04yne0c8","tag_id":"clb4gsred00681gzubl99f5kj","_id":"clb4gsreg006g1gzud4fsf7uc"},{"post_id":"clb4gsrdg002p1gzu04yne0c8","tag_id":"clb4gsree006b1gzu3xg23673","_id":"clb4gsreg006h1gzugq2vgyyc"},{"post_id":"clb4gsrdg002p1gzu04yne0c8","tag_id":"clb4gsree006e1gzu6o9qgx19","_id":"clb4gsreg006j1gzu4zfvhurx"},{"post_id":"clb4gsrdg002s1gzucdew5ti9","tag_id":"clb4gsree006f1gzu1iq527re","_id":"clb4gsreg006k1gzug2vbeec8"},{"post_id":"clb4gsrdg002s1gzucdew5ti9","tag_id":"clb4gsrc9000b1gzue0vg02p0","_id":"clb4gsreg006m1gzubllsby3n"},{"post_id":"clb4gsrdi002x1gzu8h920lxy","tag_id":"clb4gsreg006i1gzu0rh16yhi","_id":"clb4gsreh006n1gzu4plv9hzc"},{"post_id":"clb4gsrdi002x1gzu8h920lxy","tag_id":"clb4gsrce000m1gzu9yysck8c","_id":"clb4gsreh006p1gzue3ve8ail"},{"post_id":"clb4gsrdi00301gzu5f8g33qm","tag_id":"clb4gsree006f1gzu1iq527re","_id":"clb4gsreh006q1gzu6a9yhmeh"},{"post_id":"clb4gsrdi00301gzu5f8g33qm","tag_id":"clb4gsrc9000b1gzue0vg02p0","_id":"clb4gsreh006s1gzu3v4ng0fq"},{"post_id":"clb4gsrdu00341gzufmsc7qqq","tag_id":"clb4gsreh006o1gzud6cu7yzk","_id":"clb4gsrei006v1gzu0efa56a3"},{"post_id":"clb4gsrdu00341gzufmsc7qqq","tag_id":"clb4gsreh006r1gzu5we988wy","_id":"clb4gsrei006w1gzuh0afb7tc"},{"post_id":"clb4gsrdu00341gzufmsc7qqq","tag_id":"clb4gsreh006t1gzu6lalbhk5","_id":"clb4gsrei006y1gzu1s6ubi2c"},{"post_id":"clb4gsrdw00361gzu9tfy6ljn","tag_id":"clb4gsreh006o1gzud6cu7yzk","_id":"clb4gsrej00711gzu88bae13y"},{"post_id":"clb4gsrdw00361gzu9tfy6ljn","tag_id":"clb4gsreh006r1gzu5we988wy","_id":"clb4gsrej00721gzu0x76b7y1"},{"post_id":"clb4gsrdw00361gzu9tfy6ljn","tag_id":"clb4gsreh006t1gzu6lalbhk5","_id":"clb4gsrej00741gzubqnqeh20"},{"post_id":"clb4gsrdx003a1gzu72mr5dq0","tag_id":"clb4gsreh006o1gzud6cu7yzk","_id":"clb4gsrek00771gzudm64g2ri"},{"post_id":"clb4gsrdx003a1gzu72mr5dq0","tag_id":"clb4gsreh006r1gzu5we988wy","_id":"clb4gsrek00781gzu333g9vcr"},{"post_id":"clb4gsrdx003a1gzu72mr5dq0","tag_id":"clb4gsreh006t1gzu6lalbhk5","_id":"clb4gsrek007a1gzud3aaeqv0"},{"post_id":"clb4gsrdz003d1gzub3ol43lx","tag_id":"clb4gsreh006o1gzud6cu7yzk","_id":"clb4gsrel007d1gzu90r4eh1x"},{"post_id":"clb4gsrdz003d1gzub3ol43lx","tag_id":"clb4gsreh006r1gzu5we988wy","_id":"clb4gsrel007e1gzucg0b2auy"},{"post_id":"clb4gsrdz003d1gzub3ol43lx","tag_id":"clb4gsreh006t1gzu6lalbhk5","_id":"clb4gsrel007g1gzu66vj8hv7"},{"post_id":"clb4gsre0003i1gzu0wcwfbew","tag_id":"clb4gsreh006o1gzud6cu7yzk","_id":"clb4gsrem007i1gzuhxkfdffq"},{"post_id":"clb4gsre0003i1gzu0wcwfbew","tag_id":"clb4gsreh006r1gzu5we988wy","_id":"clb4gsrem007j1gzub825cbxr"},{"post_id":"clb4gsre0003i1gzu0wcwfbew","tag_id":"clb4gsreh006t1gzu6lalbhk5","_id":"clb4gsrem007k1gzu03yygcuu"}],"Tag":[{"name":"四维空间","_id":"clb4gsrc500051gzu7kl7a3wn"},{"name":"algorithm","_id":"clb4gsrc9000b1gzue0vg02p0"},{"name":"BFS","_id":"clb4gsrcc000h1gzug9jv3q0e"},{"name":"anaconda","_id":"clb4gsrce000m1gzu9yysck8c"},{"name":"Python","_id":"clb4gsrcl000t1gzu2mgmfysf"},{"name":"Android Studio","_id":"clb4gsrcs00111gzuh6ee0uca"},{"name":"Java","_id":"clb4gsrcv00191gzu1nbfdwcm"},{"name":"Kotlin","_id":"clb4gsrcy001e1gzu31tg9lqd"},{"name":"DFS","_id":"clb4gsre500491gzuhawf8f6v"},{"name":"BM","_id":"clb4gsre6004c1gzu929m4rhs"},{"name":"search","_id":"clb4gsre6004f1gzu7m2j1qbz"},{"name":"背包问题","_id":"clb4gsre6004i1gzu5gav44a7"},{"name":"DP","_id":"clb4gsre6004l1gzu6nukcc0e"},{"name":"computer network","_id":"clb4gsre7004n1gzuh2rahe3r"},{"name":"Python - Socket - Multi-thread","_id":"clb4gsre800511gzu2wyp95kr"},{"name":"CUDA","_id":"clb4gsre800531gzu3500ak14"},{"name":"Graph","_id":"clb4gsre900581gzu1iaze3xl"},{"name":"Hexo","_id":"clb4gsre9005c1gzu35s21yua"},{"name":"VPN","_id":"clb4gsrea005l1gzuhicx0zq6"},{"name":"IPsec","_id":"clb4gsreb005n1gzu1utyc6o9"},{"name":"Computer Network","_id":"clb4gsreb005o1gzu67fq61tw"},{"name":"KPM","_id":"clb4gsreb005p1gzu2d948rtc"},{"name":"PERT","_id":"clb4gsreb005s1gzu2gwj4cbx"},{"name":"WordCloud","_id":"clb4gsrec005v1gzufxs79kks"},{"name":"json","_id":"clb4gsrec005y1gzu9u86h1r0"},{"name":"R2S","_id":"clb4gsred00621gzu0shx9fpx"},{"name":"软路由","_id":"clb4gsred00661gzu6c2uf09b"},{"name":"科学上网","_id":"clb4gsred00671gzue3fj6i2h"},{"name":"STM32","_id":"clb4gsred00681gzubl99f5kj"},{"name":"MCU","_id":"clb4gsree006b1gzu3xg23673"},{"name":"嵌入式","_id":"clb4gsree006e1gzu6o9qgx19"},{"name":"Binary-tree","_id":"clb4gsree006f1gzu1iq527re"},{"name":"python","_id":"clb4gsreg006i1gzu0rh16yhi"},{"name":"Socket","_id":"clb4gsreh006o1gzud6cu7yzk"},{"name":"Client","_id":"clb4gsreh006r1gzu5we988wy"},{"name":"Server","_id":"clb4gsreh006t1gzu6lalbhk5"}]}}